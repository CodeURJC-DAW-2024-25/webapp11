
<main class="container mt-4">
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#content" type="button" role="tab">Contenidos</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#material" type="button" role="tab">Material</button>
        </li>
    </ul>
  
    <div class="tab-content mt-3">
        <div class="tab-pane fade show active" id="content" role="tabpanel">
            <img [src]="'/api/v1/courses/' + course.id + '/image'" alt="Imagen del curso" class="img-fluid mb-3" style="max-height: 300px; object-fit: cover;">
            <h2>{{ course.title }}</h2>
            <h6>Valoración: {{ course.rating }} ⭐</h6>
            <h5>Profesor: {{ course.instructor.firstName }}</h5>
            <p><strong>Temática:</strong> {{ course.topic }}</p>
            <p>Descripción: {{ course.description }}</p>
            
            <h4 class="mt-4">Comentarios</h4>
            <div *ngIf="reviews?.length; else noComments">
            <div *ngFor="let review of reviews" class="comment mb-3">
                <strong>{{ review.user.firstName }} {{ review.user.lastName }}</strong>
                <p>{{ review.text }}</p>
    
                <div *ngFor="let reply of review.sons" class="comment ms-3">
                <strong>{{ reply.user.firstName }} {{ reply.user.lastName }}</strong>
                <p>{{ reply.text }}</p>
    
                <form *ngIf="isTeacher" [action]="'/reviews/' + reply.id + '/mark-pending'" method="post">
                    <button class="btn btn-link btn-sm text-danger ms-2">Reportar</button>
                </form>
                </div>
    
                <form *ngIf="isEnrolled || isTeacher" action="/course/newReview" method="post">
                <input type="hidden" name="courseId" [value]="course.id">
                <input type="hidden" name="parentId" [value]="review.id">
                <textarea class="form-control mb-2" name="text" placeholder="Responder..."></textarea>
                <input type="submit" class="btn btn-link btn-sm" value="Responder">
                </form>
    
                <form *ngIf="isTeacher" [action]="'/reviews/' + review.id + '/mark-pending'" method="post" style="display: inline;">
                <button class="btn btn-link btn-sm text-danger ms-2">Reportar</button>
                </form>
            </div>
            </div>
            <ng-template #noComments>
            <p><br>No hay comentarios aún.</p>
            </ng-template>
    
            <hr>
            <!--
            
            <form *ngIf="isEnrolled || isTeacher" action="/course/newReview" method="post">
            <input type="hidden" name="courseId" [value]="course.id">
            <input type="hidden" name="_csrf" [value]="token" />
            <textarea class="form-control mb-2" name="text" placeholder="Añadir un comentario..."></textarea>
            <button class="btn btn-primary">Comentar</button>
            </form>
    
            <p *ngIf="!isEnrolled && !isTeacher">
            <a href="/login">Inicia sesión</a> e inscríbete al curso para dejar un comentario.
            </p>
            -->
        </div>
    </div>
</main>
  