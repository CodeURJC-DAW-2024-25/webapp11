var Jy=Object.defineProperty,hI=Object.defineProperties;var fI=Object.getOwnPropertyDescriptors;var Qy=Object.getOwnPropertySymbols,pI=Object.getPrototypeOf,gI=Object.prototype.hasOwnProperty,mI=Object.prototype.propertyIsEnumerable,_I=Reflect.get;var mp=(n,t)=>(t=Symbol[n])?t:Symbol.for("Symbol."+n);var Zy=(n,t,e)=>t in n?Jy(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,L=(n,t)=>{for(var e in t||={})gI.call(t,e)&&Zy(n,e,t[e]);if(Qy)for(var e of Qy(t))mI.call(t,e)&&Zy(n,e,t[e]);return n},ue=(n,t)=>hI(n,fI(t));var ew=(n,t)=>{for(var e in t)Jy(n,e,{get:t[e],enumerable:!0})};var Zr=(n,t,e)=>_I(pI(n),e,t);var O=(n,t,e)=>new Promise((i,s)=>{var r=l=>{try{a(e.next(l))}catch(c){s(c)}},o=l=>{try{a(e.throw(l))}catch(c){s(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(r,o);a((e=e.apply(n,t)).next())}),Rc=function(n,t){this[0]=n,this[1]=t},_p=(n,t,e)=>{var i=(o,a,l,c)=>{try{var u=e[o](a),d=(a=u.value)instanceof Rc,h=u.done;Promise.resolve(d?a[0]:a).then(f=>d?i(o==="return"?o:"next",a[1]?{done:f.done,value:f.value}:f,l,c):l({value:f,done:h})).catch(f=>i("throw",f,l,c))}catch(f){c(f)}},s=o=>r[o]=a=>new Promise((l,c)=>i(o,a,l,c)),r={};return e=e.apply(n,t),r[mp("asyncIterator")]=()=>r,s("next"),s("throw"),s("return"),r};var tw=(n,t,e)=>(t=n[mp("asyncIterator")])?t.call(n):(n=n[mp("iterator")](),t={},e=(i,s)=>(s=n[i])&&(t[i]=r=>new Promise((o,a,l)=>(r=s.call(n,r),l=r.done,Promise.resolve(r.value).then(c=>o({value:c,done:l}),a)))),e("next"),e("return"),t);var nw=null;var bp=1,vp=Symbol("SIGNAL");function Ae(n){let t=nw;return nw=n,t}var iw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bI(n){if(!(Cp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===bp)){if(!n.producerMustRecompute(n)&&!yp(n)){n.dirty=!1,n.lastCleanEpoch=bp;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=bp}}function sw(n){return n&&(n.nextProducerIndex=0),Ae(n)}function rw(n,t){if(Ae(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cp(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)wp(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function yp(n){Nc(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(bI(e),i!==e.version))return!0}return!1}function ow(n){if(Nc(n),Cp(n))for(let t=0;t<n.producerNode.length;t++)wp(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function wp(n,t){if(vI(n),Nc(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)wp(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],s=n.liveConsumerNode[t];Nc(s),s.producerIndexOfThis[i]=t}}function Cp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function yI(){throw new Error}var wI=yI;function aw(n){wI=n}function te(n){return typeof n=="function"}function Jr(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var kc=Jr(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,s)=>`${s+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function rr(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var pt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let r of e)r.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(te(i))try{i()}catch(r){t=r instanceof kc?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{lw(r)}catch(o){t=t??[],o instanceof kc?t=[...t,...o.errors]:t.push(o)}}if(t)throw new kc(t)}}add(t){var e;if(t&&t!==this)if(this.closed)lw(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&rr(e,t)}remove(t){let{_finalizers:e}=this;e&&rr(e,t),t instanceof n&&t._removeParent(this)}};pt.EMPTY=(()=>{let n=new pt;return n.closed=!0,n})();var xp=pt.EMPTY;function Fc(n){return n instanceof pt||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function lw(n){te(n)?n():n.unsubscribe()}var ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var eo={setTimeout(n,t,...e){let{delegate:i}=eo;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=eo;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Lc(n){eo.setTimeout(()=>{let{onUnhandledError:t}=ei;if(t)t(n);else throw n})}function or(){}var cw=Ep("C",void 0,void 0);function uw(n){return Ep("E",void 0,n)}function dw(n){return Ep("N",n,void 0)}function Ep(n,t,e){return{kind:n,value:t,error:e}}var ar=null;function to(n){if(ei.useDeprecatedSynchronousErrorHandling){let t=!ar;if(t&&(ar={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=ar;if(ar=null,e)throw i}}else n()}function hw(n){ei.useDeprecatedSynchronousErrorHandling&&ar&&(ar.errorThrown=!0,ar.error=n)}var lr=class extends pt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Fc(t)&&t.add(this)):this.destination=EI}static create(t,e,i){return new no(t,e,i)}next(t){this.isStopped?Dp(dw(t),this):this._next(t)}error(t){this.isStopped?Dp(uw(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Dp(cw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CI=Function.prototype.bind;function Sp(n,t){return CI.call(n,t)}var Mp=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Vc(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Vc(i)}else Vc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Vc(e)}}},no=class extends lr{constructor(t,e,i){super();let s;if(te(t)||!t)s={next:t??void 0,error:e??void 0,complete:i??void 0};else{let r;this&&ei.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Sp(t.next,r),error:t.error&&Sp(t.error,r),complete:t.complete&&Sp(t.complete,r)}):s=t}this.destination=new Mp(s)}};function Vc(n){ei.useDeprecatedSynchronousErrorHandling?hw(n):Lc(n)}function xI(n){throw n}function Dp(n,t){let{onStoppedNotification:e}=ei;e&&eo.setTimeout(()=>e(n,t))}var EI={closed:!0,next:or,error:xI,complete:or};var io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Ap(...n){return Tp(n)}function Tp(n){return n.length===0?Pt:n.length===1?n[0]:function(e){return n.reduce((i,s)=>s(i),e)}}var re=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,s){let r=DI(e)?e:new no(e,i,s);return to(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=fw(i),new i((s,r)=>{let o=new no({next:a=>{try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[io](){return this}pipe(...e){return Tp(e)(this)}toPromise(e){return e=fw(e),new e((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=t=>new n(t),n})();function fw(n){var t;return(t=n??ei.Promise)!==null&&t!==void 0?t:Promise}function SI(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function DI(n){return n&&n instanceof lr||SI(n)&&Fc(n)}function Ip(n){return te(n?.lift)}function ye(n){return t=>{if(Ip(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(n,t,e,i,s){return new Pp(n,t,e,i,s)}var Pp=class extends lr{constructor(t,e,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function so(){return ye((n,t)=>{let e=null;n._refCount++;let i=ie(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let s=n._connection,r=e;e=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var ro=class extends re{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ip(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new pt;let e=this.getSubject();t.add(this.source.subscribe(ie(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=pt.EMPTY)}return t}refCount(){return so()(this)}};var pw=Jr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Bc(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new pw}next(e){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:s,observers:r}=this;return i||s?xp:(this.currentObservers=null,r.push(e),new pt(()=>{this.currentObservers=null,rr(r,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:s,isStopped:r}=this;i?e.error(s):r&&e.complete()}asObservable(){let e=new re;return e.source=this,e}}return n.create=(t,e)=>new Bc(t,e),n})(),Bc=class extends Be{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:xp}};var bt=class extends Be{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Op={now(){return(Op.delegate||Date).now()},delegate:void 0};var jc=class extends pt{constructor(t,e){super()}schedule(t,e=0){return this}};var Ma={setInterval(n,t,...e){let{delegate:i}=Ma;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Ma;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Hc=class extends jc{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let s=this.id,r=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(r,s,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,i=0){return Ma.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Ma.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,s;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,rr(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var oo=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};oo.now=Op.now;var Uc=class extends oo{constructor(t,e=oo.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var Rp=new Uc(Hc),gw=Rp;var Ot=new re(n=>n.complete());function $c(n){return n&&te(n.schedule)}function mw(n){return n[n.length-1]}function Es(n){return te(mw(n))?n.pop():void 0}function Ss(n){return $c(mw(n))?n.pop():void 0}function bw(n,t,e,i){function s(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function _w(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(n){return this instanceof cr?(this.v=n,this):new cr(n)}function vw(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(s[f]=function(g){return new Promise(function(m,_){r.push([f,g,m,_])>1||l(f,g)})},p&&(s[f]=p(s[f])))}function l(f,p){try{c(i[f](p))}catch(g){h(r[0][3],g)}}function c(f){f.value instanceof cr?Promise.resolve(f.value.v).then(u,d):h(r[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),r.shift(),r.length&&l(r[0][0],r[0][1])}}function yw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof _w=="function"?_w(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}var ao=n=>n&&typeof n.length=="number"&&typeof n!="function";function zc(n){return te(n?.then)}function Wc(n){return te(n[io])}function Gc(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function qc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yc=MI();function Kc(n){return te(n?.[Yc])}function Xc(n){return vw(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:s}=yield cr(e.read());if(s)return yield cr(void 0);yield yield cr(i)}}finally{e.releaseLock()}})}function Qc(n){return te(n?.getReader)}function je(n){if(n instanceof re)return n;if(n!=null){if(Wc(n))return AI(n);if(ao(n))return TI(n);if(zc(n))return II(n);if(Gc(n))return ww(n);if(Kc(n))return PI(n);if(Qc(n))return OI(n)}throw qc(n)}function AI(n){return new re(t=>{let e=n[io]();if(te(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function TI(n){return new re(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function II(n){return new re(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Lc)})}function PI(n){return new re(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function ww(n){return new re(t=>{RI(n,t).catch(e=>t.error(e))})}function OI(n){return ww(Xc(n))}function RI(n,t){var e,i,s,r;return bw(this,void 0,void 0,function*(){try{for(e=yw(n);i=yield e.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=e.return)&&(yield r.call(e))}finally{if(s)throw s.error}}t.complete()})}function un(n,t,e,i=0,s=!1){let r=t.schedule(function(){e(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function Zc(n,t=0){return ye((e,i)=>{e.subscribe(ie(i,s=>un(i,n,()=>i.next(s),t),()=>un(i,n,()=>i.complete(),t),s=>un(i,n,()=>i.error(s),t)))})}function Jc(n,t=0){return ye((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function Cw(n,t){return je(n).pipe(Jc(t),Zc(t))}function xw(n,t){return je(n).pipe(Jc(t),Zc(t))}function Ew(n,t){return new re(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function Sw(n,t){return new re(e=>{let i;return un(e,t,()=>{i=n[Yc](),un(e,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){e.error(o);return}r?e.complete():e.next(s)},0,!0)}),()=>te(i?.return)&&i.return()})}function eu(n,t){if(!n)throw new Error("Iterable cannot be null");return new re(e=>{un(e,t,()=>{let i=n[Symbol.asyncIterator]();un(e,t,()=>{i.next().then(s=>{s.done?e.complete():e.next(s.value)})},0,!0)})})}function Dw(n,t){return eu(Xc(n),t)}function Mw(n,t){if(n!=null){if(Wc(n))return Cw(n,t);if(ao(n))return Ew(n,t);if(zc(n))return xw(n,t);if(Gc(n))return eu(n,t);if(Kc(n))return Sw(n,t);if(Qc(n))return Dw(n,t)}throw qc(n)}function $e(n,t){return t?Mw(n,t):je(n)}function Z(...n){let t=Ss(n);return $e(n,t)}function mi(n,t){let e=te(n)?n:()=>n,i=s=>s.error(e());return new re(t?s=>t.schedule(i,0,s):i)}function Np(n){return!!n&&(n instanceof re||te(n.lift)&&te(n.subscribe))}var Wi=Jr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Aw(n){return n instanceof Date&&!isNaN(n)}function ae(n,t){return ye((e,i)=>{let s=0;e.subscribe(ie(i,r=>{i.next(n.call(t,r,s++))}))})}var{isArray:NI}=Array;function kI(n,t){return NI(t)?n(...t):n(t)}function lo(n){return ae(t=>kI(n,t))}var{isArray:FI}=Array,{getPrototypeOf:LI,prototype:VI,keys:BI}=Object;function tu(n){if(n.length===1){let t=n[0];if(FI(t))return{args:t,keys:null};if(jI(t)){let e=BI(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function jI(n){return n&&typeof n=="object"&&LI(n)===VI}function nu(n,t){return n.reduce((e,i,s)=>(e[i]=t[s],e),{})}function co(...n){let t=Ss(n),e=Es(n),{args:i,keys:s}=tu(n);if(i.length===0)return $e([],t);let r=new re(HI(i,t,s?o=>nu(s,o):Pt));return e?r.pipe(lo(e)):r}function HI(n,t,e=Pt){return i=>{Tw(t,()=>{let{length:s}=n,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)Tw(t,()=>{let c=$e(n[l],t),u=!1;c.subscribe(ie(i,d=>{r[l]=d,u||(u=!0,a--),a||i.next(e(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}function Tw(n,t,e){n?un(e,n,t):t()}function Iw(n,t,e,i,s,r,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{r&&t.next(g),c++;let m=!1;je(e(g,u++)).subscribe(ie(t,_=>{s?.(_),r?f(_):t.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){let _=l.shift();o?un(t,o,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return n.subscribe(ie(t,f,()=>{d=!0,h()})),()=>{a?.()}}function it(n,t,e=1/0){return te(t)?it((i,s)=>ae((r,o)=>t(i,r,s,o))(je(n(i,s))),e):(typeof t=="number"&&(e=t),ye((i,s)=>Iw(i,s,n,e)))}function uo(n=1/0){return it(Pt,n)}function Pw(){return uo(1)}function Ds(...n){return Pw()($e(n,Ss(n)))}function iu(n){return new re(t=>{je(n()).subscribe(t)})}function kp(...n){let t=Es(n),{args:e,keys:i}=tu(n),s=new re(r=>{let{length:o}=e;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;je(e[u]).subscribe(ie(r,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||r.next(i?nu(i,a):a),r.complete())}))}});return t?s.pipe(lo(t)):s}var UI=["addListener","removeListener"],$I=["addEventListener","removeEventListener"],zI=["on","off"];function ke(n,t,e,i){if(te(e)&&(i=e,e=void 0),i)return ke(n,t,e).pipe(lo(i));let[s,r]=qI(n)?$I.map(o=>a=>n[o](t,a,e)):WI(n)?UI.map(Ow(n,t)):GI(n)?zI.map(Ow(n,t)):[];if(!s&&ao(n))return it(o=>ke(o,t,e))(je(n));if(!s)throw new TypeError("Invalid event target");return new re(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function Ow(n,t){return e=>i=>n[e](t,i)}function WI(n){return te(n.addListener)&&te(n.removeListener)}function GI(n){return te(n.on)&&te(n.off)}function qI(n){return te(n.addEventListener)&&te(n.removeEventListener)}function Fp(n=0,t,e=gw){let i=-1;return t!=null&&($c(t)?e=t:i=t),new re(s=>{let r=Aw(n)?+n-e.now():n;r<0&&(r=0);let o=0;return e.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}var{isArray:YI}=Array;function su(n){return n.length===1&&YI(n[0])?n[0]:n}function st(n,t){return ye((e,i)=>{let s=0;e.subscribe(ie(i,r=>n.call(t,r,s++)&&i.next(r)))})}function Lp(...n){return n=su(n),n.length===1?je(n[0]):new re(KI(n))}function KI(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(je(n[i]).subscribe(ie(t,s=>{if(e){for(let r=0;r<e.length;r++)r!==i&&e[r].unsubscribe();e=null}t.next(s)})))}}function Aa(...n){let t=Es(n),e=su(n);return e.length?new re(i=>{let s=e.map(()=>[]),r=e.map(()=>!1);i.add(()=>{s=r=null});for(let o=0;!i.closed&&o<e.length;o++)je(e[o]).subscribe(ie(i,a=>{if(s[o].push(a),s.every(l=>l.length)){let l=s.map(c=>c.shift());i.next(t?t(...l):l),s.some((c,u)=>!c.length&&r[u])&&i.complete()}},()=>{r[o]=!0,!s[o].length&&i.complete()}));return()=>{s=r=null}}):Ot}function Cn(n){return ye((t,e)=>{let i=null,s=!1,r;i=t.subscribe(ie(e,void 0,void 0,o=>{r=je(n(o,Cn(n)(t))),i?(i.unsubscribe(),i=null,r.subscribe(e)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(e))})}function Rw(n,t,e,i,s){return(r,o)=>{let a=e,l=t,c=0;r.subscribe(ie(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function Gi(n,t){return te(t)?it(n,t,1):it(n,1)}function Vp(n,t=Rp){return ye((e,i)=>{let s=null,r=null,o=null,a=()=>{if(s){s.unsubscribe(),s=null;let c=r;r=null,i.next(c)}};function l(){let c=o+n,u=t.now();if(u<c){s=this.schedule(void 0,c-u),i.add(s);return}a()}e.subscribe(ie(i,c=>{r=c,o=t.now(),s||(s=t.schedule(l,n),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}function Ms(n){return ye((t,e)=>{let i=!1;t.subscribe(ie(e,s=>{i=!0,e.next(s)},()=>{i||e.next(n),e.complete()}))})}function dn(n){return n<=0?()=>Ot:ye((t,e)=>{let i=0;t.subscribe(ie(e,s=>{++i<=n&&(e.next(s),n<=i&&e.complete())}))})}function Bp(n){return ae(()=>n)}function jp(n,t=Pt){return n=n??XI,ye((e,i)=>{let s,r=!0;e.subscribe(ie(i,o=>{let a=t(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}function XI(n,t){return n===t}function ru(n=QI){return ye((t,e)=>{let i=!1;t.subscribe(ie(e,s=>{i=!0,e.next(s)},()=>i?e.complete():e.error(n())))})}function QI(){return new Wi}function Hp(...n){return t=>Ds(t,Z(...n))}function qi(n){return ye((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function _i(n,t){let e=arguments.length>=2;return i=>i.pipe(n?st((s,r)=>n(s,r,i)):Pt,dn(1),e?Ms(t):ru(()=>new Wi))}function ho(n){return n<=0?()=>Ot:ye((t,e)=>{let i=[];t.subscribe(ie(e,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(let s of i)e.next(s);e.complete()},void 0,()=>{i=null}))})}function Up(n,t){let e=arguments.length>=2;return i=>i.pipe(n?st((s,r)=>n(s,r,i)):Pt,ho(1),e?Ms(t):ru(()=>new Wi))}function $p(n,t){return ye(Rw(n,t,arguments.length>=2,!0))}function zp(n){return st((t,e)=>n<=e)}function Ta(...n){let t=Ss(n);return ye((e,i)=>{(t?Ds(n,e,t):Ds(n,e)).subscribe(i)})}function Bt(n,t){return ye((e,i)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&i.complete();e.subscribe(ie(i,l=>{s?.unsubscribe();let c=0,u=r++;je(n(l,u)).subscribe(s=ie(i,d=>i.next(t?t(l,d,u,c++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function pe(n){return ye((t,e)=>{je(n).subscribe(ie(e,()=>e.complete(),or)),!e.closed&&t.subscribe(e)})}function vt(n,t,e){let i=te(n)||t||e?{next:n,error:t,complete:e}:n;return i?ye((s,r)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;s.subscribe(ie(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Pt}function ou(...n){let t=Es(n);return ye((e,i)=>{let s=n.length,r=new Array(s),o=n.map(()=>!1),a=!1;for(let l=0;l<s;l++)je(n[l]).subscribe(ie(i,c=>{r[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Pt))&&(o=null))},or));e.subscribe(ie(i,l=>{if(a){let c=[l,...r];i.next(t?t(...c):c)}}))})}var _1="https://g.co/ng/security#xss",Y=class extends Error{constructor(t,e){super(Hu(t,e)),this.code=t}};function Hu(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function Wa(n){return{toString:n}.toString()}var au="__parameters__";function ZI(n){return function(...e){if(n){let i=n(...e);for(let s in i)this[s]=i[s]}}}function b1(n,t,e){return Wa(()=>{let i=ZI(t);function s(...r){if(this instanceof s)return i.apply(this,r),this;let o=new s(...r);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(au)?l[au]:Object.defineProperty(l,au,{value:[]})[au];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}var Jt=globalThis;function ze(n){for(let t in n)if(n[t]===ze)return t;throw Error("Could not find renamed property on target object.")}function JI(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function en(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(en).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function og(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var eP=ze({__forward_ref__:ze});function xn(n){return n.__forward_ref__=xn,n.toString=function(){return en(this())},n}function Zt(n){return v1(n)?n():n}function v1(n){return typeof n=="function"&&n.hasOwnProperty(eP)&&n.__forward_ref__===xn}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ce(n){return{providers:n.providers||[],imports:n.imports||[]}}function Uu(n){return Nw(n,w1)||Nw(n,C1)}function y1(n){return Uu(n)!==null}function Nw(n,t){return n.hasOwnProperty(t)?n[t]:null}function tP(n){let t=n&&(n[w1]||n[C1]);return t||null}function kw(n){return n&&(n.hasOwnProperty(Fw)||n.hasOwnProperty(nP))?n[Fw]:null}var w1=ze({\u0275prov:ze}),Fw=ze({\u0275inj:ze}),C1=ze({ngInjectableDef:ze}),nP=ze({ngInjectorDef:ze}),K=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=H({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function x1(n){return n&&!!n.\u0275providers}var iP=ze({\u0275cmp:ze}),sP=ze({\u0275dir:ze}),rP=ze({\u0275pipe:ze}),oP=ze({\u0275mod:ze}),bu=ze({\u0275fac:ze}),Ia=ze({__NG_ELEMENT_ID__:ze}),Lw=ze({__NG_ENV_ID__:ze});function vo(n){return typeof n=="string"?n:n==null?"":String(n)}function aP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vo(n)}function lP(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function om(n,t){throw new Y(-201,!1)}var Se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Se||{}),ag;function E1(){return ag}function Ln(n){let t=ag;return ag=n,t}function S1(n,t,e){let i=Uu(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Se.Optional)return null;if(t!==void 0)return t;om(n,"Injector")}var cP={},Oa=cP,lg="__NG_DI_FLAG__",vu="ngTempTokenPath",uP="ngTokenPath",dP=/\n/gm,hP="\u0275",Vw="__source",_o;function fP(){return _o}function As(n){let t=_o;return _o=n,t}function pP(n,t=Se.Default){if(_o===void 0)throw new Y(-203,!1);return _o===null?S1(n,void 0,t):_o.get(n,t&Se.Optional?null:void 0,t)}function G(n,t=Se.Default){return(E1()||pP)(Zt(n),t)}function P(n,t=Se.Default){return G(n,$u(t))}function $u(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cg(n){let t=[];for(let e=0;e<n.length;e++){let i=Zt(n[e]);if(Array.isArray(i)){if(i.length===0)throw new Y(900,!1);let s,r=Se.Default;for(let o=0;o<i.length;o++){let a=i[o],l=gP(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(G(s,r))}else t.push(G(i))}return t}function D1(n,t){return n[lg]=t,n.prototype[lg]=t,n}function gP(n){return n[lg]}function mP(n,t,e,i){let s=n[vu];throw t[Vw]&&s.unshift(t[Vw]),n.message=_P(`
`+n.message,s,e,i),n[uP]=s,n[vu]=null,n}function _P(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hP?n.slice(2):n;let s=en(t);if(Array.isArray(t))s=t.map(en).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}s=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${s}]: ${n.replace(dP,`
  `)}`}var zu=D1(b1("Optional"),8);var am=D1(b1("SkipSelf"),4);function yo(n,t){let e=n.hasOwnProperty(bu);return e?n[bu]:null}function bP(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],r=t[i];if(e&&(s=e(s),r=e(r)),r!==s)return!1}return!0}function vP(n){return n.flat(Number.POSITIVE_INFINITY)}function lm(n,t){n.forEach(e=>Array.isArray(e)?lm(e,t):t(e))}function M1(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function yu(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function yP(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function wP(n,t,e,i){let s=n.length;if(s==t)n.push(e,i);else if(s===1)n.push(i,n[0]),n[0]=e;else{for(s--,n.push(n[s-1],n[s]);s>t;){let r=s-2;n[s]=n[r],s--}n[t]=e,n[t+1]=i}}function cm(n,t,e){let i=Ga(n,t);return i>=0?n[i|1]=e:(i=~i,wP(n,i,t,e)),i}function Wp(n,t){let e=Ga(n,t);if(e>=0)return n[e|1]}function Ga(n,t){return CP(n,t,1)}function CP(n,t,e){let i=0,s=n.length>>e;for(;s!==i;){let r=i+(s-i>>1),o=n[r<<e];if(t===o)return r<<e;o>t?s=r:i=r+1}return~(s<<e)}var wo={},hn=[],Co=new K(""),A1=new K("",-1),T1=new K(""),wu=class{get(t,e=Oa){if(e===Oa){let i=new Error(`NullInjectorError: No provider for ${en(t)}!`);throw i.name="NullInjectorError",i}return e}},I1=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(I1||{}),yi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(yi||{}),Te=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Te||{});function xP(n,t,e){let i=n.length;for(;;){let s=n.indexOf(t,e);if(s===-1)return s;if(s===0||n.charCodeAt(s-1)<=32){let r=t.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}e=s+1}}function ug(n,t,e){let i=0;for(;i<e.length;){let s=e[i];if(typeof s=="number"){if(s!==0)break;i++;let r=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,r)}else{let r=s,o=e[++i];EP(r)?n.setProperty(t,r,o):n.setAttribute(t,r,o),i++}}return i}function P1(n){return n===3||n===4||n===6}function EP(n){return n.charCodeAt(0)===64}function Ra(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?e=s:e===0||(e===-1||e===2?Bw(n,e,s,null,t[++i]):Bw(n,e,s,null,null))}}return n}function Bw(n,t,e,i,s){let r=0,o=n.length;if(t===-1)o=-1;else for(;r<n.length;){let a=n[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<n.length;){let a=n[r];if(typeof a=="number")break;if(a===e){if(i===null){s!==null&&(n[r+1]=s);return}else if(i===n[r+1]){n[r+2]=s;return}}r++,i!==null&&r++,s!==null&&r++}o!==-1&&(n.splice(o,0,t),r=o+1),n.splice(r++,0,e),i!==null&&n.splice(r++,0,i),s!==null&&n.splice(r++,0,s)}var O1="ng-template";function SP(n,t,e,i){let s=0;if(i){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&xP(t[s+1].toLowerCase(),e,0)!==-1)return!0}else if(um(n))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===e)return!0}return!1}function um(n){return n.type===4&&n.value!==O1}function DP(n,t,e){let i=n.type===4&&!e?O1:n.value;return t===i}function MP(n,t,e){let i=4,s=n.attrs,r=s!==null?IP(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!ti(i)&&!ti(l))return!1;if(o&&ti(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!DP(n,l,e)||l===""&&t.length===1){if(ti(i))return!1;o=!0}}else if(i&8){if(s===null||!SP(n,s,l,e)){if(ti(i))return!1;o=!0}}else{let c=t[++a],u=AP(l,s,um(n),e);if(u===-1){if(ti(i))return!1;o=!0;continue}if(c!==""){let d;if(u>r?d="":d=s[u+1].toLowerCase(),i&2&&c!==d){if(ti(i))return!1;o=!0}}}}return ti(i)||o}function ti(n){return(n&1)===0}function AP(n,t,e,i){if(t===null)return-1;let s=0;if(i||!e){let r=!1;for(;s<t.length;){let o=t[s];if(o===n)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return PP(t,n)}function R1(n,t,e=!1){for(let i=0;i<t.length;i++)if(MP(n,t[i],e))return!0;return!1}function TP(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function IP(n){for(let t=0;t<n.length;t++){let e=n[t];if(P1(e))return t}return n.length}function PP(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function OP(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let s=0;s<n.length;s++)if(n[s]!==i[s])continue e;return!0}}return!1}function jw(n,t){return n?":not("+t.trim()+")":t}function RP(n){let t=n[0],e=1,i=2,s="",r=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(i&2){let a=n[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?s+="."+o:i&4&&(s+=" "+o);else s!==""&&!ti(o)&&(t+=jw(r,s),s=""),i=o,r=r||!ti(i);e++}return s!==""&&(t+=jw(r,s)),t}function NP(n){return n.map(RP).join(",")}function kP(n){let t=[],e=[],i=1,s=2;for(;i<n.length;){let r=n[i];if(typeof r=="string")s===2?r!==""&&t.push(r,n[++i]):s===8&&e.push(r);else{if(!ti(s))break;s=r}i++}return{attrs:t,classes:e}}function Fe(n){return Wa(()=>{let t=V1(n),e=ue(L({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===I1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||yi.Emulated,styles:n.styles||hn,_:null,schemas:n.schemas||null,tView:null,id:""});B1(e);let i=n.dependencies;return e.directiveDefs=Uw(i,!1),e.pipeDefs=Uw(i,!0),e.id=VP(e),e})}function FP(n){return Yi(n)||N1(n)}function LP(n){return n!==null}function xe(n){return Wa(()=>({type:n.type,bootstrap:n.bootstrap||hn,declarations:n.declarations||hn,imports:n.imports||hn,exports:n.exports||hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Hw(n,t){if(n==null)return wo;let e={};for(let i in n)if(n.hasOwnProperty(i)){let s=n[i],r,o,a=Te.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(e[r]=a!==Te.None?[i,a]:i,t[r]=o):e[r]=i}return e}function Oe(n){return Wa(()=>{let t=V1(n);return B1(t),t})}function Yi(n){return n[iP]||null}function N1(n){return n[sP]||null}function k1(n){return n[rP]||null}function F1(n){let t=Yi(n)||N1(n)||k1(n);return t!==null?t.standalone:!1}function L1(n,t){let e=n[oP]||null;if(!e&&t===!0)throw new Error(`Type ${en(n)} does not have '\u0275mod' property.`);return e}function V1(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||wo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Hw(n.inputs,t),outputs:Hw(n.outputs),debugInfo:null}}function B1(n){n.features?.forEach(t=>t(n))}function Uw(n,t){if(!n)return null;let e=t?k1:FP;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(LP)}function VP(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let s of e)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Wu(n){return{\u0275providers:n}}function BP(...n){return{\u0275providers:j1(!0,n),\u0275fromNgModule:!0}}function j1(n,...t){let e=[],i=new Set,s,r=o=>{e.push(o)};return lm(t,o=>{let a=o;dg(a,r,[],i)&&(s||=[],s.push(a))}),s!==void 0&&H1(s,r),e}function H1(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:s}=n[e];dm(s,r=>{t(r,i)})}}function dg(n,t,e,i){if(n=Zt(n),!n)return!1;let s=null,r=kw(n),o=!r&&Yi(n);if(!r&&!o){let l=n.ngModule;if(r=kw(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=n}let a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)dg(c,t,e,i)}}else if(r){if(r.imports!=null&&!a){i.add(s);let c;try{lm(r.imports,u=>{dg(u,t,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&H1(c,t)}if(!a){let c=yo(s)||(()=>new s);t({provide:s,useFactory:c,deps:hn},s),t({provide:T1,useValue:s,multi:!0},s),t({provide:Co,useValue:()=>G(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=n;dm(l,u=>{t(u,c)})}}else return!1;return s!==n&&n.providers!==void 0}function dm(n,t){for(let e of n)x1(e)&&(e=e.\u0275providers),Array.isArray(e)?dm(e,t):t(e)}var jP=ze({provide:String,useValue:ze});function U1(n){return n!==null&&typeof n=="object"&&jP in n}function HP(n){return!!(n&&n.useExisting)}function UP(n){return!!(n&&n.useFactory)}function xo(n){return typeof n=="function"}function $P(n){return!!n.useClass}var Gu=new K(""),hu={},zP={},Gp;function qu(){return Gp===void 0&&(Gp=new wu),Gp}var Ct=class{},Na=class extends Ct{get destroyed(){return this._destroyed}constructor(t,e,i,s){super(),this.parent=e,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fg(t,o=>this.processProvider(o)),this.records.set(A1,fo(void 0,this)),s.has("environment")&&this.records.set(Ct,fo(void 0,this));let r=this.records.get(Gu);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(T1,hn,Se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Ae(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=As(this),i=Ln(void 0),s;try{return t()}finally{As(e),Ln(i)}}get(t,e=Oa,i=Se.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Lw))return t[Lw](this);i=$u(i);let s,r=As(this),o=Ln(void 0);try{if(!(i&Se.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=KP(t)&&Uu(t);c&&this.injectableDefInScope(c)?l=fo(hg(t),hu):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Se.Self?qu():this.parent;return e=i&Se.Optional&&e===Oa?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[vu]=a[vu]||[]).unshift(en(t)),r)throw a;return mP(a,t,"R3InjectorError",this.source)}else throw a}finally{Ln(o),As(r)}}resolveInjectorInitializers(){let t=Ae(null),e=As(this),i=Ln(void 0),s;try{let r=this.get(Co,hn,Se.Self);for(let o of r)o()}finally{As(e),Ln(i),Ae(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(en(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(t){t=Zt(t);let e=xo(t)?t:Zt(t&&t.provide),i=GP(t);if(!xo(t)&&t.multi===!0){let s=this.records.get(e);s||(s=fo(void 0,hu,!0),s.factory=()=>cg(s.multi),this.records.set(e,s)),e=t,s.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=Ae(null);try{return e.value===hu&&(e.value=zP,e.value=e.factory()),typeof e.value=="object"&&e.value&&YP(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ae(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Zt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function hg(n){let t=Uu(n),e=t!==null?t.factory:yo(n);if(e!==null)return e;if(n instanceof K)throw new Y(204,!1);if(n instanceof Function)return WP(n);throw new Y(204,!1)}function WP(n){if(n.length>0)throw new Y(204,!1);let e=tP(n);return e!==null?()=>e.factory(n):()=>new n}function GP(n){if(U1(n))return fo(void 0,n.useValue);{let t=$1(n);return fo(t,hu)}}function $1(n,t,e){let i;if(xo(n)){let s=Zt(n);return yo(s)||hg(s)}else if(U1(n))i=()=>Zt(n.useValue);else if(UP(n))i=()=>n.useFactory(...cg(n.deps||[]));else if(HP(n))i=()=>G(Zt(n.useExisting));else{let s=Zt(n&&(n.useClass||n.provide));if(qP(n))i=()=>new s(...cg(n.deps));else return yo(s)||hg(s)}return i}function fo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function qP(n){return!!n.deps}function YP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function KP(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function fg(n,t){for(let e of n)Array.isArray(e)?fg(e,t):e&&x1(e)?fg(e.\u0275providers,t):t(e)}function ri(n,t){n instanceof Na&&n.assertNotDestroyed();let e,i=As(n),s=Ln(void 0);try{return t()}finally{As(i),Ln(s)}}function z1(){return E1()!==void 0||fP()!=null}function hm(n){if(!z1())throw new Y(-203,!1)}function XP(n){let t=Jt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function QP(n){return typeof n=="function"}var Qi=0,de=1,se=2,Rt=3,ii=4,En=5,Eo=6,ka=7,jt=8,So=9,si=10,rt=11,Fa=12,$w=13,To=14,Vn=15,qa=16,po=17,Ki=18,Yu=19,W1=20,Ts=21,qp=22,hr=23,fn=25,G1=1;var fr=7,Cu=8,Do=9,Ht=10,fm=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(fm||{});function ur(n){return Array.isArray(n)&&typeof n[G1]=="object"}function Zi(n){return Array.isArray(n)&&n[G1]===!0}function pm(n){return(n.flags&4)!==0}function Ku(n){return n.componentOffset>-1}function Xu(n){return(n.flags&1)===1}function Is(n){return!!n.template}function ZP(n){return(n[se]&512)!==0}var pg=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function q1(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function tn(){return Y1}function Y1(n){return n.type.prototype.ngOnChanges&&(n.setInput=eO),JP}tn.ngInherit=!0;function JP(){let n=X1(this),t=n?.current;if(t){let e=n.previous;if(e===wo)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function eO(n,t,e,i,s){let r=this.declaredInputs[i],o=X1(n)||tO(n,{previous:wo,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new pg(c&&c.currentValue,e,l===wo),q1(n,t,s,e)}var K1="__ngSimpleChanges__";function X1(n){return n[K1]||null}function tO(n,t){return n[K1]=t}var zw=null;var bi=function(n,t,e){zw?.(n,t,e)},Q1="svg",nO="math",iO=!1;function sO(){return iO}function wi(n){for(;Array.isArray(n);)n=n[Qi];return n}function Z1(n,t){return wi(t[n])}function jn(n,t){return wi(t[n.index])}function gm(n,t){return n.data[t]}function rO(n,t){return n[t]}function Rs(n,t){let e=t[n];return ur(e)?e:e[Qi]}function oO(n){return(n[se]&4)===4}function mm(n){return(n[se]&128)===128}function aO(n){return Zi(n[Rt])}function Mo(n,t){return t==null?null:n[t]}function J1(n){n[po]=0}function lO(n){n[se]&1024||(n[se]|=1024,mm(n)&&La(n))}function cO(n,t){for(;n>0;)t=t[To],n--;return t}function _m(n){return!!(n[se]&9216||n[hr]?.dirty)}function gg(n){n[si].changeDetectionScheduler?.notify(1),_m(n)?La(n):n[se]&64&&(sO()?(n[se]|=1024,La(n)):n[si].changeDetectionScheduler?.notify())}function La(n){n[si].changeDetectionScheduler?.notify();let t=Va(n);for(;t!==null&&!(t[se]&8192||(t[se]|=8192,!mm(t)));)t=Va(t)}function eC(n,t){if((n[se]&256)===256)throw new Y(911,!1);n[Ts]===null&&(n[Ts]=[]),n[Ts].push(t)}function uO(n,t){if(n[Ts]===null)return;let e=n[Ts].indexOf(t);e!==-1&&n[Ts].splice(e,1)}function Va(n){let t=n[Rt];return Zi(t)?t[Rt]:t}var he={lFrame:aC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function dO(){return he.lFrame.elementDepthCount}function hO(){he.lFrame.elementDepthCount++}function fO(){he.lFrame.elementDepthCount--}function tC(){return he.bindingsEnabled}function nC(){return he.skipHydrationRootTNode!==null}function pO(n){return he.skipHydrationRootTNode===n}function gO(){he.skipHydrationRootTNode=null}function ge(){return he.lFrame.lView}function gt(){return he.lFrame.tView}function V(n){return he.lFrame.contextLView=n,n[jt]}function B(n){return he.lFrame.contextLView=null,n}function Ut(){let n=iC();for(;n!==null&&n.type===64;)n=n.parent;return n}function iC(){return he.lFrame.currentTNode}function mO(){let n=he.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function yr(n,t){let e=he.lFrame;e.currentTNode=n,e.isParent=t}function bm(){return he.lFrame.isParent}function vm(){he.lFrame.isParent=!1}function _O(){return he.lFrame.contextLView}function ym(){let n=he.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function bO(){return he.lFrame.bindingIndex}function vO(n){return he.lFrame.bindingIndex=n}function wr(){return he.lFrame.bindingIndex++}function wm(n){let t=he.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function yO(){return he.lFrame.inI18n}function wO(n,t){let e=he.lFrame;e.bindingIndex=e.bindingRootIndex=n,mg(t)}function CO(){return he.lFrame.currentDirectiveIndex}function mg(n){he.lFrame.currentDirectiveIndex=n}function xO(n){let t=he.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function sC(){return he.lFrame.currentQueryIndex}function Cm(n){he.lFrame.currentQueryIndex=n}function EO(n){let t=n[de];return t.type===2?t.declTNode:t.type===1?n[En]:null}function rC(n,t,e){if(e&Se.SkipSelf){let s=t,r=n;for(;s=s.parent,s===null&&!(e&Se.Host);)if(s=EO(r),s===null||(r=r[To],s.type&10))break;if(s===null)return!1;t=s,n=r}let i=he.lFrame=oC();return i.currentTNode=t,i.lView=n,!0}function xm(n){let t=oC(),e=n[de];he.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function oC(){let n=he.lFrame,t=n===null?null:n.child;return t===null?aC(n):t}function aC(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function lC(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cC=lC;function Em(){let n=lC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SO(n){return(he.lFrame.contextLView=cO(n,he.lFrame.contextLView))[jt]}function Ji(){return he.lFrame.selectedIndex}function pr(n){he.lFrame.selectedIndex=n}function Qu(){let n=he.lFrame;return gm(n.tView,n.selectedIndex)}function uC(){he.lFrame.currentNamespace=Q1}function dC(){DO()}function DO(){he.lFrame.currentNamespace=null}function MO(){return he.lFrame.currentNamespace}var hC=!0;function Zu(){return hC}function Ju(n){hC=n}function AO(n,t,e){let{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){let o=Y1(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}s&&(e.preOrderHooks??=[]).push(0-n,s),r&&((e.preOrderHooks??=[]).push(n,r),(e.preOrderCheckHooks??=[]).push(n,r))}function ed(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let r=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function fu(n,t,e){fC(n,t,3,e)}function pu(n,t,e,i){(n[se]&3)===e&&fC(n,t,e,i)}function Yp(n,t){let e=n[se];(e&3)===t&&(e&=16383,e+=1,n[se]=e)}function fC(n,t,e,i){let s=i!==void 0?n[po]&65535:0,r=i??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[po]+=65536),(a<r||r==-1)&&(TO(n,e,t,l),n[po]=(n[po]&4294901760)+l+2),l++}function Ww(n,t){bi(4,n,t);let e=Ae(null);try{t.call(n)}finally{Ae(e),bi(5,n,t)}}function TO(n,t,e,i){let s=e[i]<0,r=e[i+1],o=s?-e[i]:e[i],a=n[o];s?n[se]>>14<n[po]>>16&&(n[se]&3)===t&&(n[se]+=16384,Ww(a,r)):Ww(a,r)}var bo=-1,gr=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function IO(n){return n instanceof gr}function PO(n){return(n.flags&8)!==0}function OO(n){return(n.flags&16)!==0}function pC(n){return n!==bo}function xu(n){return n&32767}function RO(n){return n>>16}function Eu(n,t){let e=RO(n),i=t;for(;e>0;)i=i[To],e--;return i}var _g=!0;function Gw(n){let t=_g;return _g=n,t}var NO=256,gC=NO-1,mC=5,kO=0,vi={};function FO(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Ia)&&(i=e[Ia]),i==null&&(i=e[Ia]=kO++);let s=i&gC,r=1<<s;t.data[n+(s>>mC)]|=r}function Su(n,t){let e=_C(n,t);if(e!==-1)return e;let i=t[de];i.firstCreatePass&&(n.injectorIndex=t.length,Kp(i.data,n),Kp(t,null),Kp(i.blueprint,null));let s=Sm(n,t),r=n.injectorIndex;if(pC(s)){let o=xu(s),a=Eu(s,t),l=a[de].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function Kp(n,t){n.push(0,0,0,0,0,0,0,0,t)}function _C(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sm(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,s=t;for(;s!==null;){if(i=CC(s),i===null)return bo;if(e++,s=s[To],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return bo}function bg(n,t,e){FO(n,t,e)}function LO(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,s=0;for(;s<i;){let r=e[s];if(P1(r))break;if(r===0)s=s+2;else if(typeof r=="number")for(s++;s<i&&typeof e[s]=="string";)s++;else{if(r===t)return e[s+1];s=s+2}}}return null}function bC(n,t,e){if(e&Se.Optional||n!==void 0)return n;om(t,"NodeInjector")}function vC(n,t,e,i){if(e&Se.Optional&&i===void 0&&(i=null),!(e&(Se.Self|Se.Host))){let s=n[So],r=Ln(void 0);try{return s?s.get(t,i,e&Se.Optional):S1(t,i,e&Se.Optional)}finally{Ln(r)}}return bC(i,t,e)}function yC(n,t,e,i=Se.Default,s){if(n!==null){if(t[se]&2048&&!(i&Se.Self)){let o=HO(n,t,e,i,vi);if(o!==vi)return o}let r=wC(n,t,e,i,vi);if(r!==vi)return r}return vC(t,e,i,s)}function wC(n,t,e,i,s){let r=BO(e);if(typeof r=="function"){if(!rC(t,n,i))return i&Se.Host?bC(s,e,i):vC(t,e,i,s);try{let o;if(o=r(i),o==null&&!(i&Se.Optional))om(e);else return o}finally{cC()}}else if(typeof r=="number"){let o=null,a=_C(n,t),l=bo,c=i&Se.Host?t[Vn][En]:null;for((a===-1||i&Se.SkipSelf)&&(l=a===-1?Sm(n,t):t[a+8],l===bo||!Yw(i,!1)?a=-1:(o=t[de],a=xu(l),t=Eu(l,t)));a!==-1;){let u=t[de];if(qw(r,a,u.data)){let d=VO(a,t,e,o,i,c);if(d!==vi)return d}l=t[a+8],l!==bo&&Yw(i,t[de].data[a+8]===c)&&qw(r,a,t)?(o=u,a=xu(l),t=Eu(l,t)):a=-1}}return s}function VO(n,t,e,i,s,r){let o=t[de],a=o.data[n+8],l=i==null?Ku(a)&&_g:i!=o&&(a.type&3)!==0,c=s&Se.Host&&r===a,u=gu(a,o,e,l,c);return u!==null?mr(t,o,u,a):vi}function gu(n,t,e,i,s){let r=n.providerIndexes,o=t.data,a=r&1048575,l=n.directiveStart,c=n.directiveEnd,u=r>>20,d=i?a:a+u,h=s?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(s){let f=o[l];if(f&&Is(f)&&f.type===e)return l}return null}function mr(n,t,e,i){let s=n[e],r=t.data;if(IO(s)){let o=s;o.resolving&&lP(aP(r[e]));let a=Gw(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Ln(o.injectImpl):null,u=rC(n,i,Se.Default);try{s=n[e]=o.factory(void 0,r,n,i),t.firstCreatePass&&e>=i.directiveStart&&AO(e,r[e],t)}finally{c!==null&&Ln(c),Gw(a),o.resolving=!1,cC()}}return s}function BO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Ia)?n[Ia]:void 0;return typeof t=="number"?t>=0?t&gC:jO:t}function qw(n,t,e){let i=1<<n;return!!(e[t+(n>>mC)]&i)}function Yw(n,t){return!(n&Se.Self)&&!(n&Se.Host&&t)}var dr=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return yC(this._tNode,this._lView,t,$u(i),e)}};function jO(){return new dr(Ut(),ge())}function oi(n){return Wa(()=>{let t=n.prototype.constructor,e=t[bu]||vg(t),i=Object.prototype,s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==i;){let r=s[bu]||vg(s);if(r&&r!==e)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function vg(n){return v1(n)?()=>{let t=vg(Zt(n));return t&&t()}:yo(n)}function HO(n,t,e,i,s){let r=n,o=t;for(;r!==null&&o!==null&&o[se]&2048&&!(o[se]&512);){let a=wC(r,o,e,i|Se.Self,vi);if(a!==vi)return a;let l=r.parent;if(!l){let c=o[W1];if(c){let u=c.get(e,vi,i);if(u!==vi)return u}l=CC(o),o=o[To]}r=l}return s}function CC(n){let t=n[de],e=t.type;return e===2?t.declTNode:e===1?n[En]:null}function Cr(n){return LO(Ut(),n)}function Kw(n,t=null,e=null,i){let s=xC(n,t,e,i);return s.resolveInjectorInitializers(),s}function xC(n,t=null,e=null,i,s=new Set){let r=[e||hn,BP(n)];return i=i||(typeof n=="object"?void 0:en(n)),new Na(r,t||qu(),i||null,s)}var $t=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Oa}static{this.NULL=new wu}static create(e,i){if(Array.isArray(e))return Kw({name:""},i,e,"");{let s=e.name??"";return Kw({name:s},e.parent,e.providers,s)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>G(A1)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var UO="ngOriginalError";function Xp(n){return n[UO]}var Ci=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Xp(t);for(;e&&Xp(e);)e=Xp(e);return e||null}},EC=new K("",{providedIn:"root",factory:()=>P(Ci).handleError.bind(void 0)}),xr=(()=>{class n{static{this.__NG_ELEMENT_ID__=$O}static{this.__NG_ENV_ID__=e=>e}}return n})(),yg=class extends xr{constructor(t){super(),this._lView=t}onDestroy(t){return eC(this._lView,t),()=>uO(this._lView,t)}};function $O(){return new yg(ge())}function zO(){return Io(Ut(),ge())}function Io(n,t){return new ot(jn(n,t))}var ot=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=zO}}return n})();function WO(n){return n instanceof ot?n.nativeElement:n}var wg=class extends Be{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,z1()&&(this.destroyRef=P(xr,{optional:!0})??void 0)}emit(t){let e=Ae(null);try{super.next(t)}finally{Ae(e)}}subscribe(t,e,i){let s=t,r=e||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=Qp(r),s&&(s=Qp(s)),o&&(o=Qp(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof pt&&t.add(a),a}};function Qp(n){return t=>{setTimeout(n,void 0,t)}}var we=wg;function GO(){return this._results[Symbol.iterator]()}var Cg=class n{get changes(){return this._changes??=new we}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=GO)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=vP(t);(this._changesDetected=!bP(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function SC(n){return(n.flags&128)===128}var DC=new Map,qO=0;function YO(){return qO++}function KO(n){DC.set(n[Yu],n)}function XO(n){DC.delete(n[Yu])}var Xw="__ngContext__";function Ps(n,t){ur(t)?(n[Xw]=t[Yu],KO(t)):n[Xw]=t}function MC(n){return TC(n[Fa])}function AC(n){return TC(n[ii])}function TC(n){for(;n!==null&&!Zi(n);)n=n[ii];return n}var xg;function IC(n){xg=n}function QO(){if(xg!==void 0)return xg;if(typeof document<"u")return document;throw new Y(210,!1)}var td=new K("",{providedIn:"root",factory:()=>ZO}),ZO="ng",Dm=new K(""),ai=new K("",{providedIn:"platform",factory:()=>"unknown"});var Mm=new K("",{providedIn:"root",factory:()=>QO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var JO="h",eR="b";var tR=()=>null;function Am(n,t,e=!1){return tR(n,t,e)}var PC=!1,nR=new K("",{providedIn:"root",factory:()=>PC});var lu;function iR(){if(lu===void 0&&(lu=null,Jt.trustedTypes))try{lu=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lu}function Qw(n){return iR()?.createScriptURL(n)||n}var Du=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_1})`}};function Po(n){return n instanceof Du?n.changingThisBreaksApplicationSecurity:n}function Tm(n,t){let e=sR(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${_1})`)}return e===t}function sR(n){return n instanceof Du&&n.getTypeName()||null}var rR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function OC(n){return n=String(n),n.match(rR)?n:"unsafe:"+n}var nd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nd||{});function pn(n){let t=NC();return t?t.sanitize(nd.URL,n)||"":Tm(n,"URL")?Po(n):OC(vo(n))}function oR(n){let t=NC();if(t)return Qw(t.sanitize(nd.RESOURCE_URL,n)||"");if(Tm(n,"ResourceURL"))return Qw(Po(n));throw new Y(904,!1)}function aR(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?oR:pn}function RC(n,t,e){return aR(t,e)(n)}function NC(){let n=ge();return n&&n[si].sanitizer}var lR=/^>|^->|<!--|-->|--!>|<!-$/g,cR=/(<|>)/g,uR="\u200B$1\u200B";function dR(n){return n.replace(lR,t=>t.replace(cR,uR))}function kC(n){return n instanceof Function?n():n}function hR(n){return(n??P($t)).get(ai)==="browser"}var Xi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xi||{}),fR;function Im(n,t){return fR(n,t)}function go(n,t,e,i,s){if(i!=null){let r,o=!1;Zi(i)?r=i:ur(i)&&(o=!0,i=i[Qi]);let a=wi(i);n===0&&e!==null?s==null?jC(t,e,a):Mu(t,e,a,s||null,!0):n===1&&e!==null?Mu(t,e,a,s||null,!0):n===2?TR(t,a,o):n===3&&t.destroyNode(a),r!=null&&PR(t,n,r,e,s)}}function pR(n,t){return n.createText(t)}function gR(n,t,e){n.setValue(t,e)}function mR(n,t){return n.createComment(dR(t))}function FC(n,t,e){return n.createElement(t,e)}function _R(n,t){LC(n,t),t[Qi]=null,t[En]=null}function bR(n,t,e,i,s,r){i[Qi]=s,i[En]=t,rd(n,i,e,1,s,r)}function LC(n,t){t[si].changeDetectionScheduler?.notify(1),rd(n,t,t[rt],2,null,null)}function vR(n){let t=n[Fa];if(!t)return Zp(n[de],n);for(;t;){let e=null;if(ur(t))e=t[Fa];else{let i=t[Ht];i&&(e=i)}if(!e){for(;t&&!t[ii]&&t!==n;)ur(t)&&Zp(t[de],t),t=t[Rt];t===null&&(t=n),ur(t)&&Zp(t[de],t),e=t&&t[ii]}t=e}}function yR(n,t,e,i){let s=Ht+i,r=e.length;i>0&&(e[s-1][ii]=t),i<r-Ht?(t[ii]=e[s],M1(e,Ht+i,t)):(e.push(t),t[ii]=null),t[Rt]=e;let o=t[qa];o!==null&&e!==o&&wR(o,t);let a=t[Ki];a!==null&&a.insertView(n),gg(t),t[se]|=128}function wR(n,t){let e=n[Do],s=t[Rt][Rt][Vn];t[Vn]!==s&&(n[se]|=fm.HasTransplantedViews),e===null?n[Do]=[t]:e.push(t)}function VC(n,t){let e=n[Do],i=e.indexOf(t);e.splice(i,1)}function Ba(n,t){if(n.length<=Ht)return;let e=Ht+t,i=n[e];if(i){let s=i[qa];s!==null&&s!==n&&VC(s,i),t>0&&(n[e-1][ii]=i[ii]);let r=yu(n,Ht+t);_R(i[de],i);let o=r[Ki];o!==null&&o.detachView(r[de]),i[Rt]=null,i[ii]=null,i[se]&=-129}return i}function id(n,t){if(!(t[se]&256)){let e=t[rt];e.destroyNode&&rd(n,t,e,3,null,null),vR(t)}}function Zp(n,t){if(t[se]&256)return;let e=Ae(null);try{t[se]&=-129,t[se]|=256,t[hr]&&ow(t[hr]),xR(n,t),CR(n,t),t[de].type===1&&t[rt].destroy();let i=t[qa];if(i!==null&&Zi(t[Rt])){i!==t[Rt]&&VC(i,t);let s=t[Ki];s!==null&&s.detachView(n)}XO(t)}finally{Ae(e)}}function CR(n,t){let e=n.cleanup,i=t[ka];if(e!==null)for(let r=0;r<e.length-1;r+=2)if(typeof e[r]=="string"){let o=e[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else{let o=i[e[r+1]];e[r].call(o)}i!==null&&(t[ka]=null);let s=t[Ts];if(s!==null){t[Ts]=null;for(let r=0;r<s.length;r++){let o=s[r];o()}}}function xR(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let s=t[e[i]];if(!(s instanceof gr)){let r=e[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];bi(4,a,l);try{l.call(a)}finally{bi(5,a,l)}}else{bi(4,s,r);try{r.call(s)}finally{bi(5,s,r)}}}}}function BC(n,t,e){return ER(n,t.parent,e)}function ER(n,t,e){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return e[Qi];{let{componentOffset:s}=i;if(s>-1){let{encapsulation:r}=n.data[i.directiveStart+s];if(r===yi.None||r===yi.Emulated)return null}return jn(i,e)}}function Mu(n,t,e,i,s){n.insertBefore(t,e,i,s)}function jC(n,t,e){n.appendChild(t,e)}function Zw(n,t,e,i,s){i!==null?Mu(n,t,e,i,s):jC(n,t,e)}function SR(n,t,e,i){n.removeChild(t,e,i)}function Pm(n,t){return n.parentNode(t)}function DR(n,t){return n.nextSibling(t)}function HC(n,t,e){return AR(n,t,e)}function MR(n,t,e){return n.type&40?jn(n,e):null}var AR=MR,Jw;function sd(n,t,e,i){let s=BC(n,i,t),r=t[rt],o=i.parent||t[En],a=HC(o,i,t);if(s!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Zw(r,s,e[l],a,!1);else Zw(r,s,e,a,!1);Jw!==void 0&&Jw(r,i,t,e,s)}function mu(n,t){if(t!==null){let e=t.type;if(e&3)return jn(t,n);if(e&4)return Eg(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return mu(n,i);{let s=n[t.index];return Zi(s)?Eg(-1,s):wi(s)}}else{if(e&32)return Im(t,n)()||wi(n[t.index]);{let i=UC(n,t);if(i!==null){if(Array.isArray(i))return i[0];let s=Va(n[Vn]);return mu(s,i)}else return mu(n,t.next)}}}return null}function UC(n,t){if(t!==null){let i=n[Vn][En],s=t.projection;return i.projection[s]}return null}function Eg(n,t){let e=Ht+n+1;if(e<t.length){let i=t[e],s=i[de].firstChild;if(s!==null)return mu(i,s)}return t[fr]}function TR(n,t,e){let i=Pm(n,t);i&&SR(n,i,t,e)}function Om(n,t,e,i,s,r,o){for(;e!=null;){let a=i[e.index],l=e.type;if(o&&t===0&&(a&&Ps(wi(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)Om(n,t,e.child,i,s,r,!1),go(t,n,s,a,r);else if(l&32){let c=Im(e,i),u;for(;u=c();)go(t,n,s,u,r);go(t,n,s,a,r)}else l&16?$C(n,t,i,e,s,r):go(t,n,s,a,r);e=o?e.projectionNext:e.next}}function rd(n,t,e,i,s,r){Om(e,i,n.firstChild,t,s,r,!1)}function IR(n,t,e){let i=t[rt],s=BC(n,e,t),r=e.parent||t[En],o=HC(r,e,t);$C(i,0,t,e,s,o)}function $C(n,t,e,i,s,r){let o=e[Vn],l=o[En].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];go(t,n,s,u,r)}else{let c=l,u=o[Rt];SC(i)&&(c.flags|=128),Om(n,t,c,u,s,r,!0)}}function PR(n,t,e,i,s){let r=e[fr],o=wi(e);r!==o&&go(t,n,i,r,s);for(let a=Ht;a<e.length;a++){let l=e[a];rd(l[de],l,n,t,i,r)}}function OR(n,t,e,i,s){if(t)s?n.addClass(e,i):n.removeClass(e,i);else{let r=i.indexOf("-")===-1?void 0:Xi.DashCase;s==null?n.removeStyle(e,i,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Xi.Important),n.setStyle(e,i,s,r))}}function RR(n,t,e){n.setAttribute(t,"style",e)}function zC(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function WC(n,t,e){let{mergedAttrs:i,classes:s,styles:r}=e;i!==null&&ug(n,t,i),s!==null&&zC(n,t,s),r!==null&&RR(n,t,r)}var Hn={};function T(n=1){GC(gt(),ge(),Ji()+n,!1)}function GC(n,t,e,i){if(!i)if((t[se]&3)===3){let r=n.preOrderCheckHooks;r!==null&&fu(t,r,e)}else{let r=n.preOrderHooks;r!==null&&pu(t,r,0,e)}pr(e)}function F(n,t=Se.Default){let e=ge();if(e===null)return G(n,t);let i=Ut();return yC(i,e,Zt(n),t)}function qC(){let n="invalid";throw new Error(n)}function YC(n,t,e,i,s,r){let o=Ae(null);try{let a=null;s&Te.SignalBased&&(a=t[i][vp]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&Te.HasDecoratorInputTransform&&(r=n.inputTransforms[i].call(t,r)),n.setInput!==null?n.setInput(t,a,r,e,i):q1(t,a,i,r)}finally{Ae(o)}}function NR(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let s=e[i];if(s<0)pr(~s);else{let r=s,o=e[++i],a=e[++i];wO(o,r);let l=t[r];a(2,l)}}}finally{pr(-1)}}function od(n,t,e,i,s,r,o,a,l,c,u){let d=t.blueprint.slice();return d[Qi]=s,d[se]=i|4|128|8|64,(c!==null||n&&n[se]&2048)&&(d[se]|=2048),J1(d),d[Rt]=d[To]=n,d[jt]=e,d[si]=o||n&&n[si],d[rt]=a||n&&n[rt],d[So]=l||n&&n[So]||null,d[En]=r,d[Yu]=YO(),d[Eo]=u,d[W1]=c,d[Vn]=t.type==2?n[Vn]:d,d}function Oo(n,t,e,i,s){let r=n.data[t];if(r===null)r=kR(n,t,e,i,s),yO()&&(r.flags|=32);else if(r.type&64){r.type=e,r.value=i,r.attrs=s;let o=mO();r.injectorIndex=o===null?-1:o.injectorIndex}return yr(r,!0),r}function kR(n,t,e,i,s){let r=iC(),o=bm(),a=o?r:r&&r.parent,l=n.data[t]=HR(n,a,e,t,i,s);return n.firstChild===null&&(n.firstChild=l),r!==null&&(o?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function KC(n,t,e,i){if(e===0)return-1;let s=t.length;for(let r=0;r<e;r++)t.push(i),n.blueprint.push(i),n.data.push(null);return s}function XC(n,t,e,i,s){let r=Ji(),o=i&2;try{pr(-1),o&&t.length>fn&&GC(n,t,fn,!1),bi(o?2:0,s),e(i,s)}finally{pr(r),bi(o?3:1,s)}}function Rm(n,t,e){if(pm(t)){let i=Ae(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=n.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{Ae(i)}}}function Nm(n,t,e){tC()&&(qR(n,t,e,jn(e,t)),(e.flags&64)===64&&JC(n,t,e))}function km(n,t,e=jn){let i=t.localNames;if(i!==null){let s=t.index+1;for(let r=0;r<i.length;r+=2){let o=i[r+1],a=o===-1?e(t,n):n[o];n[s++]=a}}}function QC(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Fm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Fm(n,t,e,i,s,r,o,a,l,c,u){let d=fn+i,h=d+s,f=FR(d,h),p=typeof c=="function"?c():c;return f[de]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function FR(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Hn);return e}function LR(n,t,e,i){let r=i.get(nR,PC)||e===yi.ShadowDom,o=n.selectRootElement(t,r);return VR(o),o}function VR(n){BR(n)}var BR=()=>null;function jR(n,t,e,i){let s=nx(t);s.push(e),n.firstCreatePass&&ix(n).push(i,s.length-1)}function HR(n,t,e,i,s,r){let o=t?t.injectorIndex:-1,a=0;return nC()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function e1(n,t,e,i,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;i??={};let a,l=Te.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}n===0?t1(i,e,c,a,l):t1(i,e,c,a)}return i}function t1(n,t,e,i,s){let r;n.hasOwnProperty(e)?(r=n[e]).push(t,i):r=n[e]=[t,i],s!==void 0&&r.push(s)}function UR(n,t,e){let i=t.directiveStart,s=t.directiveEnd,r=n.data,o=t.attrs,a=[],l=null,c=null;for(let u=i;u<s;u++){let d=r[u],h=e?e.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=e1(0,d.inputs,u,l,f),c=e1(1,d.outputs,u,c,p);let g=l!==null&&o!==null&&!um(t)?sN(l,u,o):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function $R(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Lm(n,t,e,i,s,r,o,a){let l=jn(t,e),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(Bm(n,e,u,i,s),Ku(t)&&zR(e,t.index)):t.type&3?(i=$R(i),s=o!=null?o(s,t.value||"",i):s,r.setProperty(l,i,s)):t.type&12}function zR(n,t){let e=Rs(t,n);e[se]&16||(e[se]|=64)}function Vm(n,t,e,i){if(tC()){let s=i===null?null:{"":-1},r=KR(n,e),o,a;r===null?o=a=null:[o,a]=r,o!==null&&ZC(n,t,e,o,s,a),s&&XR(e,i,s)}e.mergedAttrs=Ra(e.mergedAttrs,e.attrs)}function ZC(n,t,e,i,s,r){for(let c=0;c<i.length;c++)bg(Su(e,t),n,i[c].type);ZR(e,n.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=KC(n,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];e.mergedAttrs=Ra(e.mergedAttrs,u.hostAttrs),JR(n,e,t,l,u),QR(l,u,s),u.contentQueries!==null&&(e.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(e.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}UR(n,e,r)}function WR(n,t,e,i,s){let r=s.hostBindings;if(r){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;GR(o)!=a&&o.push(a),o.push(e,i,r)}}function GR(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function qR(n,t,e,i){let s=e.directiveStart,r=e.directiveEnd;Ku(e)&&eN(t,e,n.data[s+e.componentOffset]),n.firstCreatePass||Su(e,t),Ps(i,t);let o=e.initialInputs;for(let a=s;a<r;a++){let l=n.data[a],c=mr(t,n,a,e);if(Ps(c,t),o!==null&&iN(t,a-s,c,l,e,o),Is(l)){let u=Rs(e.index,t);u[jt]=mr(t,n,a,e)}}}function JC(n,t,e){let i=e.directiveStart,s=e.directiveEnd,r=e.index,o=CO();try{pr(r);for(let a=i;a<s;a++){let l=n.data[a],c=t[a];mg(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&YR(l,c)}}finally{pr(-1),mg(o)}}function YR(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function KR(n,t){let e=n.directiveRegistry,i=null,s=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];if(R1(t,o.selectors,!1))if(i||(i=[]),Is(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o);let l=a.length;Sg(n,t,l)}else i.unshift(o),Sg(n,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return i===null?null:[i,s]}function Sg(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function XR(n,t,e){if(t){let i=n.localNames=[];for(let s=0;s<t.length;s+=2){let r=e[t[s+1]];if(r==null)throw new Y(-301,!1);i.push(t[s],r)}}}function QR(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Is(t)&&(e[""]=n)}}function ZR(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function JR(n,t,e,i,s){n.data[i]=s;let r=s.factory||(s.factory=yo(s.type,!0)),o=new gr(r,Is(s),F);n.blueprint[i]=o,e[i]=o,WR(n,t,i,KC(n,e,s.hostVars,Hn),s)}function eN(n,t,e){let i=jn(t,n),s=QC(e),r=n[si].rendererFactory,o=16;e.signals?o=4096:e.onPush&&(o=64);let a=ad(n,od(n,s,null,o,i,t,null,r.createRenderer(i,e),null,null,null));n[t.index]=a}function tN(n,t,e,i,s,r){let o=jn(n,t);nN(t[rt],o,r,n.value,e,i,s)}function nN(n,t,e,i,s,r,o){if(r==null)n.removeAttribute(t,s,e);else{let a=o==null?vo(r):o(r,i||"",s);n.setAttribute(t,s,a,e)}}function iN(n,t,e,i,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];YC(i,e,l,c,u,d)}}function sN(n,t,e){let i=null,s=0;for(;s<e.length;){let r=e[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(n.hasOwnProperty(r)){i===null&&(i=[]);let o=n[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){i.push(r,o[a+1],o[a+2],e[s+1]);break}}s+=2}return i}function ex(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function tx(n,t){let e=n.contentQueries;if(e!==null){let i=Ae(null);try{for(let s=0;s<e.length;s+=2){let r=e[s],o=e[s+1];if(o!==-1){let a=n.data[o];Cm(r),a.contentQueries(2,t[o],o)}}}finally{Ae(i)}}}function ad(n,t){return n[Fa]?n[$w][ii]=t:n[Fa]=t,n[$w]=t,t}function Dg(n,t,e){Cm(0);let i=Ae(null);try{t(n,e)}finally{Ae(i)}}function nx(n){return n[ka]||(n[ka]=[])}function ix(n){return n.cleanup||(n.cleanup=[])}function sx(n,t){let e=n[So],i=e?e.get(Ci,null):null;i&&i.handleError(t)}function Bm(n,t,e,i,s){for(let r=0;r<e.length;){let o=e[r++],a=e[r++],l=e[r++],c=t[o],u=n.data[o];YC(u,c,i,a,l,s)}}function rx(n,t,e){let i=Z1(t,n);gR(n[rt],i,e)}function rN(n,t){let e=Rs(t,n),i=e[de];oN(i,e);let s=e[Qi];s!==null&&e[Eo]===null&&(e[Eo]=Am(s,e[So])),jm(i,e,e[jt])}function oN(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function jm(n,t,e){xm(t);try{let i=n.viewQuery;i!==null&&Dg(1,i,e);let s=n.template;s!==null&&XC(n,t,s,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Ki]?.finishViewCreation(n),n.staticContentQueries&&tx(n,t),n.staticViewQueries&&Dg(2,n.viewQuery,e);let r=n.components;r!==null&&aN(t,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[se]&=-5,Em()}}function aN(n,t){for(let e=0;e<t.length;e++)rN(n,t[e])}function ld(n,t,e,i){let s=Ae(null);try{let r=t.tView,a=n[se]&4096?4096:16,l=od(n,r,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[t.index];l[qa]=c;let u=n[Ki];return u!==null&&(l[Ki]=u.createEmbeddedView(r)),jm(r,l,e),l}finally{Ae(s)}}function ox(n,t){let e=Ht+t;if(e<n.length)return n[e]}function ja(n,t){return!t||t.firstChild===null||SC(n)}function cd(n,t,e,i=!0){let s=t[de];if(yR(s,t,n,e),i){let o=Eg(e,n),a=t[rt],l=Pm(a,n[fr]);l!==null&&bR(s,n[En],a,t,l,o)}let r=t[Eo];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function ax(n,t){let e=Ba(n,t);return e!==void 0&&id(e[de],e),e}function Au(n,t,e,i,s=!1){for(;e!==null;){let r=t[e.index];r!==null&&i.push(wi(r)),Zi(r)&&lN(r,i);let o=e.type;if(o&8)Au(n,t,e.child,i);else if(o&32){let a=Im(e,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=UC(t,e);if(Array.isArray(a))i.push(...a);else{let l=Va(t[Vn]);Au(l[de],l,a,i,!0)}}e=s?e.projectionNext:e.next}return i}function lN(n,t){for(let e=Ht;e<n.length;e++){let i=n[e],s=i[de].firstChild;s!==null&&Au(i[de],i,s,t)}n[fr]!==n[Qi]&&t.push(n[fr])}var lx=[];function cN(n){return n[hr]??uN(n)}function uN(n){let t=lx.pop()??Object.create(hN);return t.lView=n,t}function dN(n){n.lView[hr]!==n&&(n.lView=null,lx.push(n))}var hN=ue(L({},iw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{La(n.lView)},consumerOnSignalRead(){this.lView[hr]=this}}),cx=100;function ux(n,t=!0,e=0){let i=n[si],s=i.rendererFactory,r=!1;r||s.begin?.();try{fN(n,e)}catch(o){throw t&&sx(n,o),o}finally{r||(s.end?.(),i.inlineEffectRunner?.flush())}}function fN(n,t){Mg(n,t);let e=0;for(;_m(n);){if(e===cx)throw new Y(103,!1);e++,Mg(n,1)}}function pN(n,t,e,i){let s=t[se];if((s&256)===256)return;let r=!1;!r&&t[si].inlineEffectRunner?.flush(),xm(t);let o=null,a=null;!r&&gN(n)&&(a=cN(t),o=sw(a));try{J1(t),vO(n.bindingStartIndex),e!==null&&XC(n,t,e,2,i);let l=(s&3)===3;if(!r)if(l){let d=n.preOrderCheckHooks;d!==null&&fu(t,d,null)}else{let d=n.preOrderHooks;d!==null&&pu(t,d,0,null),Yp(t,0)}if(mN(t),dx(t,0),n.contentQueries!==null&&tx(n,t),!r)if(l){let d=n.contentCheckHooks;d!==null&&fu(t,d)}else{let d=n.contentHooks;d!==null&&pu(t,d,1),Yp(t,1)}NR(n,t);let c=n.components;c!==null&&fx(t,c,0);let u=n.viewQuery;if(u!==null&&Dg(2,u,i),!r)if(l){let d=n.viewCheckHooks;d!==null&&fu(t,d)}else{let d=n.viewHooks;d!==null&&pu(t,d,2),Yp(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[qp]){for(let d of t[qp])d();t[qp]=null}r||(t[se]&=-73)}catch(l){throw La(t),l}finally{a!==null&&(rw(a,o),dN(a)),Em()}}function gN(n){return n.type!==2}function dx(n,t){for(let e=MC(n);e!==null;e=AC(e))for(let i=Ht;i<e.length;i++){let s=e[i];hx(s,t)}}function mN(n){for(let t=MC(n);t!==null;t=AC(t)){if(!(t[se]&fm.HasTransplantedViews))continue;let e=t[Do];for(let i=0;i<e.length;i++){let s=e[i],r=s[Rt];lO(s)}}}function _N(n,t,e){let i=Rs(t,n);hx(i,e)}function hx(n,t){mm(n)&&Mg(n,t)}function Mg(n,t){let i=n[de],s=n[se],r=n[hr],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&yp(r)),r&&(r.dirty=!1),n[se]&=-9217,o)pN(i,n,i.template,n[jt]);else if(s&8192){dx(n,1);let a=i.components;a!==null&&fx(n,a,1)}}function fx(n,t,e){for(let i=0;i<t.length;i++)_N(n,t[i],e)}function Hm(n){for(n[si].changeDetectionScheduler?.notify();n;){n[se]|=64;let t=Va(n);if(ZP(n)&&!t)return n;n=t}return null}var _r=class{get rootNodes(){let t=this._lView,e=t[de];return Au(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(t){this._lView[jt]=t}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Rt];if(Zi(t)){let e=t[Cu],i=e?e.indexOf(this):-1;i>-1&&(Ba(t,i),yu(e,i))}this._attachedToViewContainer=!1}id(this._lView[de],this._lView)}onDestroy(t){eC(this._lView,t)}markForCheck(){Hm(this._cdRefInjectingView||this._lView)}detach(){this._lView[se]&=-129}reattach(){gg(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,ux(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,LC(this._lView[de],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=t,gg(this._lView)}},xi=(()=>{class n{static{this.__NG_ELEMENT_ID__=yN}}return n})(),bN=xi,vN=class extends bN{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let s=ld(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new _r(s)}};function yN(){return ud(Ut(),ge())}function ud(n,t){return n.type&4?new vN(t,n,Io(n,t)):null}var LK=new RegExp(`^(\\d+)*(${eR}|${JO})*(.*)`);var wN=()=>null;function Ha(n,t){return wN(n,t)}var Tu=class{},Ag=class{},Iu=class{};function CN(n){let t=Error(`No component factory found for ${en(n)}.`);return t[xN]=n,t}var xN="ngComponent";var Tg=class{resolveComponentFactory(t){throw CN(t)}},dd=(()=>{class n{static{this.NULL=new Tg}}return n})(),Ua=class{},Ei=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>EN()}}return n})();function EN(){let n=ge(),t=Ut(),e=Rs(t.index,n);return(ur(e)?e:n)[rt]}var SN=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})(),Jp={};var n1=new Set;function Ro(n){n1.has(n)||(n1.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function i1(...n){}function DN(){let n=typeof Jt.requestAnimationFrame=="function",t=Jt[n?"requestAnimationFrame":"setTimeout"],e=Jt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let s=e[Zone.__symbol__("OriginalDelegate")];s&&(e=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Pe=class n{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&e,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=DN().nativeRequestAnimationFrame,TN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,MN,i1,i1);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},MN={};function Um(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function AN(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ig(n),n.isCheckStableRunning=!0,Um(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ig(n))}function TN(n){let t=()=>{AN(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,s,r,o,a)=>{if(IN(a))return e.invokeTask(s,r,o,a);try{return s1(n),e.invokeTask(s,r,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),r1(n)}},onInvoke:(e,i,s,r,o,a,l)=>{try{return s1(n),e.invoke(s,r,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),r1(n)}},onHasTask:(e,i,s,r)=>{e.hasTask(s,r),i===s&&(r.change=="microTask"?(n._hasPendingMicrotasks=r.microTask,Ig(n),Um(n)):r.change=="macroTask"&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,s,r)=>(e.handleError(s,r),n.runOutsideAngular(()=>n.onError.emit(r)),!1)})}function Ig(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function s1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function r1(n){n._nesting--,Um(n)}var Pg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new we,this.onMicrotaskEmpty=new we,this.onStable=new we,this.onError=new we}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,s){return t.apply(e,i)}};function IN(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function PN(n="zone.js",t){return n==="noop"?new Pg:n==="zone.js"?new Pe(t):n}var mo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(mo||{}),ON={destroy(){}};function hd(n,t){!t&&hm(hd);let e=t?.injector??P($t);if(!hR(e))return ON;Ro("NgAfterNextRender");let i=e.get($m),s=i.handler??=new Rg,r=t?.phase??mo.MixedReadWrite,o=()=>{s.unregister(l),a()},a=e.get(xr).onDestroy(o),l=ri(e,()=>new Og(r,()=>{o(),n()}));return s.register(l),{destroy:o}}var Og=class{constructor(t,e){this.phase=t,this.callbackFn=e,this.zone=P(Pe),this.errorHandler=P(Ci,{optional:!0}),P(Tu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},Rg=class{constructor(){this.executingCallbacks=!1,this.buckets={[mo.EarlyRead]:new Set,[mo.Write]:new Set,[mo.MixedReadWrite]:new Set,[mo.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let e of t)e.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},$m=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Pu(n,t,e){let i=e?n.styles:null,s=e?n.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=og(s,a);else if(r==2){let l=a,c=t[++o];i=og(i,l+": "+c+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=s:n.classesWithoutHost=s}var Ou=class extends dd{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Yi(t);return new br(e,this.ngModule)}};function o1(n){let t=[];for(let e in n){if(!n.hasOwnProperty(e))continue;let i=n[e];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return t}function RN(n){let t=n.toLowerCase();return t==="svg"?Q1:t==="math"?nO:null}var Ng=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=$u(i);let s=this.injector.get(t,Jp,i);return s!==Jp||e===Jp?s:this.parentInjector.get(t,e,i)}},br=class extends Iu{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=o1(t.inputs);if(e!==null)for(let s of i)e.hasOwnProperty(s.propName)&&(s.transform=e[s.propName]);return i}get outputs(){return o1(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=NP(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,s){let r=Ae(null);try{s=s||this.ngModule;let o=s instanceof Ct?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ng(t,o):t,l=a.get(Ua,null);if(l===null)throw new Y(407,!1);let c=a.get(SN,null),u=a.get($m,null),d=a.get(Tu,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?LR(f,i,this.componentDef.encapsulation,a):FC(f,p,RN(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let _=null;g!==null&&(_=Am(g,a,!0));let b=Fm(0,null,null,1,0,null,null,null,null,null,null),y=od(null,b,null,m,null,null,h,f,a,null,_);xm(y);let v,x;try{let S=this.componentDef,D,A=null;S.findHostDirectiveDefs?(D=[],A=new Map,S.findHostDirectiveDefs(S,D,A),D.push(S)):D=[S];let E=NN(y,g),I=kN(E,g,S,D,y,h,f);x=gm(b,fn),g&&VN(f,S,g,i),e!==void 0&&BN(x,this.ngContentSelectors,e),v=LN(I,S,D,A,y,[jN]),jm(b,y,null)}finally{Em()}return new kg(this.componentType,v,Io(x,y),y,x)}finally{Ae(r)}}},kg=class extends Ag{constructor(t,e,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new _r(s,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,s;if(i!==null&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView;Bm(r[de],r,s,t,e),this.previousInputValues.set(t,e);let o=Rs(this._tNode.index,r);Hm(o)}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function NN(n,t){let e=n[de],i=fn;return n[i]=t,Oo(e,i,2,"#host",null)}function kN(n,t,e,i,s,r,o){let a=s[de];FN(i,n,t,o);let l=null;t!==null&&(l=Am(t,s[So]));let c=r.rendererFactory.createRenderer(t,e),u=16;e.signals?u=4096:e.onPush&&(u=64);let d=od(s,QC(e),null,u,s[n.index],n,r,c,null,null,l);return a.firstCreatePass&&Sg(a,n,i.length-1),ad(s,d),s[n.index]=d}function FN(n,t,e,i){for(let s of n)t.mergedAttrs=Ra(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(Pu(t,t.mergedAttrs,!0),e!==null&&WC(i,e,t))}function LN(n,t,e,i,s,r){let o=Ut(),a=s[de],l=jn(o,s);ZC(a,s,o,e,null,i);for(let u=0;u<e.length;u++){let d=o.directiveStart+u,h=mr(s,a,d,o);Ps(h,s)}JC(a,s,o),l&&Ps(l,s);let c=mr(s,a,o.directiveStart+o.componentOffset,o);if(n[jt]=s[jt]=c,r!==null)for(let u of r)u(c,t);return Rm(a,o,s),c}function VN(n,t,e,i){if(i)ug(n,e,["ng-version","17.3.12"]);else{let{attrs:s,classes:r}=kP(t.selectors[0]);s&&ug(n,e,s),r&&r.length>0&&zC(n,e,r.join(" "))}}function BN(n,t,e){let i=n.projection=[];for(let s=0;s<t.length;s++){let r=e[s];i.push(r!=null?Array.from(r):null)}}function jN(){let n=Ut();ed(ge()[de],n)}var Si=(()=>{class n{static{this.__NG_ELEMENT_ID__=HN}}return n})();function HN(){let n=Ut();return gx(n,ge())}var UN=Si,px=class extends UN{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Io(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Sm(this._hostTNode,this._hostLView);if(pC(t)){let e=Eu(t,this._hostLView),i=xu(t),s=e[de].data[i+8];return new dr(s,e)}else return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=a1(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(t,e,i){let s,r;typeof i=="number"?s=i:i!=null&&(s=i.index,r=i.injector);let o=Ha(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},r,o);return this.insertImpl(a,s,ja(this._hostTNode,o)),a}createComponent(t,e,i,s,r){let o=t&&!QP(t),a;if(o)a=e;else{let p=e||{};a=p.index,i=p.injector,s=p.projectableNodes,r=p.environmentInjector||p.ngModuleRef}let l=o?t:new br(Yi(t)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let g=(o?c:this.parentInjector).get(Ct,null);g&&(r=g)}let u=Yi(l.componentType??{}),d=Ha(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,s,h,r);return this.insertImpl(f.hostView,a,ja(this._hostTNode,d)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let s=t._lView;if(aO(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[Rt],c=new px(l,l[En],l[Rt]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(e),o=this._lContainer;return cd(o,s,r,i),t.attachToViewContainerRef(),M1(eg(o),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=a1(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=Ba(this._lContainer,e);i&&(yu(eg(this._lContainer),e),id(i[de],i))}detach(t){let e=this._adjustIndex(t,-1),i=Ba(this._lContainer,e);return i&&yu(eg(this._lContainer),e)!=null?new _r(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function a1(n){return n[Cu]}function eg(n){return n[Cu]||(n[Cu]=[])}function gx(n,t){let e,i=t[n.index];return Zi(i)?e=i:(e=ex(i,t,null,n),t[n.index]=e,ad(t,e)),zN(e,t,n,i),new px(e,n,t)}function $N(n,t){let e=n[rt],i=e.createComment(""),s=jn(t,n),r=Pm(e,s);return Mu(e,r,i,DR(e,s),!1),i}var zN=qN,WN=()=>!1;function GN(n,t,e){return WN(n,t,e)}function qN(n,t,e,i){if(n[fr])return;let s;e.type&8?s=wi(i):s=$N(t,e),n[fr]=s}var Fg=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lg=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,s=[];for(let r=0;r<i;r++){let o=e.getByIndex(r),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new n(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)zm(t,e).matches!==null&&this.queries[e].setDirty()}},Ru=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=tk(t):this.predicate=t}},Vg=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let s=e!==null?e.length:0,r=this.getByIndex(i).embeddedTView(t,s);r&&(r.indexInDeclarationView=i,e!==null?e.push(r):e=[r])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Bg=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){let r=i[s];this.matchTNodeWithReadOption(t,e,YN(e,r)),this.matchTNodeWithReadOption(t,e,gu(e,t,r,!1,!1))}else i===xi?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,gu(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let s=this.metadata.read;if(s!==null)if(s===ot||s===Si||s===xi&&e.type&4)this.addMatch(e.index,-2);else{let r=gu(e,t,s,!1,!1);r!==null&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function YN(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function KN(n,t){return n.type&11?Io(n,t):n.type&4?ud(n,t):null}function XN(n,t,e,i){return e===-1?KN(t,n):e===-2?QN(n,t,i):mr(n,n[de],e,t)}function QN(n,t,e){if(e===ot)return Io(t,n);if(e===xi)return ud(t,n);if(e===Si)return gx(t,n)}function mx(n,t,e,i){let s=t[Ki].queries[i];if(s.matches===null){let r=n.data,o=e.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=r[c];a.push(XN(t,u,o[l+1],e.metadata.read))}}s.matches=a}return s.matches}function jg(n,t,e,i){let s=n.queries.getByIndex(e),r=s.matches;if(r!==null){let o=mx(n,t,s,e);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(o[a/2]);else{let c=r[a+1],u=t[-l];for(let d=Ht;d<u.length;d++){let h=u[d];h[qa]===h[Rt]&&jg(h[de],h,c,i)}if(u[Do]!==null){let d=u[Do];for(let h=0;h<d.length;h++){let f=d[h];jg(f[de],f,c,i)}}}}}return i}function ZN(n,t){return n[Ki].queries[t].queryList}function _x(n,t,e){let i=new Cg((e&4)===4);return jR(n,t,i,i.destroy),(t[Ki]??=new Lg).queries.push(new Fg(i))-1}function JN(n,t,e){let i=gt();return i.firstCreatePass&&(bx(i,new Ru(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),_x(i,ge(),t)}function ek(n,t,e,i){let s=gt();if(s.firstCreatePass){let r=Ut();bx(s,new Ru(t,e,i),r.index),nk(s,n),(e&2)===2&&(s.staticContentQueries=!0)}return _x(s,ge(),e)}function tk(n){return n.split(",").map(t=>t.trim())}function bx(n,t,e){n.queries===null&&(n.queries=new Vg),n.queries.track(new Bg(t,e))}function nk(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function zm(n,t){return n.queries.getByIndex(t)}function ik(n,t){let e=n[de],i=zm(e,t);return i.crossesNgTemplate?jg(e,n,t,[]):mx(e,n,i,t)}function sk(n){return typeof n=="function"&&n[vp]!==void 0}function vx(n){return sk(n)&&typeof n.set=="function"}function rk(n){let t=[],e=new Map;function i(s){let r=e.get(s);if(!r){let o=n(s);e.set(s,r=o.then(ck))}return r}return Nu.forEach((s,r)=>{let o=[];s.templateUrl&&o.push(i(s.templateUrl).then(c=>{s.template=c}));let a=typeof s.styles=="string"?[s.styles]:s.styles||[];if(s.styles=a,s.styleUrl&&s.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(s.styleUrls?.length){let c=s.styles.length,u=s.styleUrls;s.styleUrls.forEach((d,h)=>{a.push(""),o.push(i(d).then(f=>{a[c+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(s.styleUrls=void 0)}))})}else s.styleUrl&&o.push(i(s.styleUrl).then(c=>{a.push(c),s.styleUrl=void 0}));let l=Promise.all(o).then(()=>uk(r));t.push(l)}),ak(),Promise.all(t).then(()=>{})}var Nu=new Map,ok=new Set;function ak(){let n=Nu;return Nu=new Map,n}function lk(){return Nu.size===0}function ck(n){return typeof n=="string"?n:n.text()}function uk(n){ok.delete(n)}function dk(n){return Object.getPrototypeOf(n.prototype).constructor}function zt(n){let t=dk(n.type),e=!0,i=[n];for(;t;){let s;if(Is(n))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Y(903,!1);s=t.\u0275dir}if(s){if(e){i.push(s);let o=n;o.inputs=cu(n.inputs),o.inputTransforms=cu(n.inputTransforms),o.declaredInputs=cu(n.declaredInputs),o.outputs=cu(n.outputs);let a=s.hostBindings;a&&mk(n,a);let l=s.viewQuery,c=s.contentQueries;if(l&&pk(n,l),c&&gk(n,c),hk(n,s),JI(n.outputs,s.outputs),Is(s)&&s.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(n),a===zt&&(e=!1)}}t=Object.getPrototypeOf(t)}fk(i)}function hk(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let s=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(s))continue;n.inputTransforms??={},n.inputTransforms[s]=t.inputTransforms[s]}}}function fk(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let s=n[i];s.hostVars=t+=s.hostVars,s.hostAttrs=Ra(s.hostAttrs,e=Ra(e,s.hostAttrs))}}function cu(n){return n===wo?{}:n===hn?[]:n}function pk(n,t){let e=n.viewQuery;e?n.viewQuery=(i,s)=>{t(i,s),e(i,s)}:n.viewQuery=t}function gk(n,t){let e=n.contentQueries;e?n.contentQueries=(i,s,r)=>{t(i,s,r),e(i,s,r)}:n.contentQueries=t}function mk(n,t){let e=n.hostBindings;e?n.hostBindings=(i,s)=>{t(i,s),e(i,s)}:n.hostBindings=t}function Wm(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)&&s[3]&&(e[i]=s[3])}n.inputTransforms=e}var Os=class{},$a=class{};var ku=class extends Os{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ou(this);let s=L1(t);this._bootstrapComponents=kC(s.bootstrap),this._r3Injector=xC(t,e,[{provide:Os,useValue:this},{provide:dd,useValue:this.componentFactoryResolver},...i],en(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Fu=class extends $a{constructor(t){super(),this.moduleType=t}create(t){return new ku(this.moduleType,t,[])}};function _k(n,t,e){return new ku(n,t,e)}var Hg=class extends Os{constructor(t){super(),this.componentFactoryResolver=new Ou(this),this.instance=null;let e=new Na([...t.providers,{provide:Os,useValue:this},{provide:dd,useValue:this.componentFactoryResolver}],t.parent||qu(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function fd(n,t,e=null){return new Hg({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Er=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yx(n){return vk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function bk(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function vk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Gm(n,t,e){return n[t]=e}function yk(n,t){return n[t]}function Bn(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function wx(n,t,e,i){let s=Bn(n,t,e);return Bn(n,t+1,i)||s}function wk(n){return(n.flags&32)===32}function Ck(n,t,e,i,s,r,o,a,l){let c=t.consts,u=Oo(t,n,4,o||null,Mo(c,a));Vm(t,e,u,Mo(c,l)),ed(t,u);let d=u.tView=Fm(2,u,i,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function J(n,t,e,i,s,r,o,a){let l=ge(),c=gt(),u=n+fn,d=c.firstCreatePass?Ck(u,c,l,t,e,i,s,r,o):c.data[u];yr(d,!1);let h=xk(c,l,d,n);Zu()&&sd(c,l,h,d),Ps(h,l);let f=ex(h,l,h,d);return l[u]=f,ad(l,f),GN(f,d,l),Xu(d)&&Nm(c,l,d),o!=null&&km(l,d,a),J}var xk=Ek;function Ek(n,t,e,i){return Ju(!0),t[rt].createComment("")}function Un(n,t,e,i){let s=ge(),r=wr();if(Bn(s,r,t)){let o=gt(),a=Qu();tN(a,s,n,t,e,i)}return Un}function Sk(n,t,e,i){return Bn(n,wr(),e)?t+vo(e)+i:Hn}function Dk(n,t,e,i,s,r){let o=bO(),a=wx(n,o,e,s);return wm(2),a?t+vo(e)+i+vo(s)+r:Hn}function uu(n,t){return n<<17|t<<2}function vr(n){return n>>17&32767}function Mk(n){return(n&2)==2}function Ak(n,t){return n&131071|t<<17}function Ug(n){return n|2}function Ao(n){return(n&131068)>>2}function tg(n,t){return n&-131069|t<<2}function Tk(n){return(n&1)===1}function $g(n){return n|1}function Ik(n,t,e,i,s,r){let o=r?t.classBindings:t.styleBindings,a=vr(o),l=Ao(o);n[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||Ga(d,u)>0)&&(c=!0)}else u=e;if(s)if(l!==0){let h=vr(n[a+1]);n[i+1]=uu(h,a),h!==0&&(n[h+1]=tg(n[h+1],i)),n[a+1]=Ak(n[a+1],i)}else n[i+1]=uu(a,0),a!==0&&(n[a+1]=tg(n[a+1],i)),a=i;else n[i+1]=uu(l,0),a===0?a=i:n[l+1]=tg(n[l+1],i),l=i;c&&(n[i+1]=Ug(n[i+1])),l1(n,u,i,!0),l1(n,u,i,!1),Pk(t,u,n,i,r),o=uu(a,l),r?t.classBindings=o:t.styleBindings=o}function Pk(n,t,e,i,s){let r=s?n.residualClasses:n.residualStyles;r!=null&&typeof t=="string"&&Ga(r,t)>=0&&(e[i+1]=$g(e[i+1]))}function l1(n,t,e,i){let s=n[e+1],r=t===null,o=i?vr(s):Ao(s),a=!1;for(;o!==0&&(a===!1||r);){let l=n[o],c=n[o+1];Ok(l,t)&&(a=!0,n[o+1]=i?$g(c):Ug(c)),o=i?vr(c):Ao(c)}a&&(n[e+1]=i?Ug(s):$g(s))}function Ok(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Ga(n,t)>=0:!1}var ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rk(n){return n.substring(ni.key,ni.keyEnd)}function Nk(n){return kk(n),Cx(n,xx(n,0,ni.textEnd))}function Cx(n,t){let e=ni.textEnd;return e===t?-1:(t=ni.keyEnd=Fk(n,ni.key=t,e),xx(n,t,e))}function kk(n){ni.key=0,ni.keyEnd=0,ni.value=0,ni.valueEnd=0,ni.textEnd=n.length}function xx(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Fk(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function k(n,t,e){let i=ge(),s=wr();if(Bn(i,s,t)){let r=gt(),o=Qu();Lm(r,o,i,n,t,i[rt],e,!1)}return k}function zg(n,t,e,i,s){let r=t.inputs,o=s?"class":"style";Bm(n,e,r[o],o,i)}function Ya(n,t,e){return Ex(n,t,e,!1),Ya}function $n(n,t){return Ex(n,t,null,!0),$n}function pd(n){Vk(zk,Lk,n,!0)}function Lk(n,t){for(let e=Nk(t);e>=0;e=Cx(t,e))cm(n,Rk(t),!0)}function Ex(n,t,e,i){let s=ge(),r=gt(),o=wm(2);if(r.firstUpdatePass&&Dx(r,n,o,i),t!==Hn&&Bn(s,o,t)){let a=r.data[Ji()];Mx(r,a,s,s[rt],n,s[o+1]=Gk(t,e),i,o)}}function Vk(n,t,e,i){let s=gt(),r=wm(2);s.firstUpdatePass&&Dx(s,null,r,i);let o=ge();if(e!==Hn&&Bn(o,r,e)){let a=s.data[Ji()];if(Ax(a,i)&&!Sx(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=og(l,e||"")),zg(s,a,o,e,i)}else Wk(s,a,o,o[rt],o[r+1],o[r+1]=$k(n,t,e),i,r)}}function Sx(n,t){return t>=n.expandoStartIndex}function Dx(n,t,e,i){let s=n.data;if(s[e+1]===null){let r=s[Ji()],o=Sx(n,e);Ax(r,i)&&t===null&&!o&&(t=!1),t=Bk(s,r,t,i),Ik(s,r,t,e,o,i)}}function Bk(n,t,e,i){let s=xO(n),r=i?t.residualClasses:t.residualStyles;if(s===null)(i?t.classBindings:t.styleBindings)===0&&(e=ng(null,n,t,e,i),e=za(e,t.attrs,i),r=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==s)if(e=ng(s,n,t,e,i),r===null){let l=jk(n,t,i);l!==void 0&&Array.isArray(l)&&(l=ng(null,n,t,l[1],i),l=za(l,t.attrs,i),Hk(n,t,i,l))}else r=Uk(n,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),e}function jk(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Ao(i)!==0)return n[vr(i)]}function Hk(n,t,e,i){let s=e?t.classBindings:t.styleBindings;n[vr(s)]=i}function Uk(n,t,e){let i,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=n[r].hostAttrs;i=za(i,o,e)}return za(i,t.attrs,e)}function ng(n,t,e,i,s){let r=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(r=t[a],i=za(i,r.hostAttrs,s),r!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function za(n,t,e){let i=e?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),cm(n,o,e?!0:t[++r]))}return n===void 0?null:n}function $k(n,t,e){if(e==null||e==="")return hn;let i=[],s=Po(e);if(Array.isArray(s))for(let r=0;r<s.length;r++)n(i,s[r],!0);else if(typeof s=="object")for(let r in s)s.hasOwnProperty(r)&&n(i,r,s[r]);else typeof s=="string"&&t(i,s);return i}function zk(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&cm(n,i,e)}function Wk(n,t,e,i,s,r,o,a){s===Hn&&(s=hn);let l=0,c=0,u=0<s.length?s[0]:null,d=0<r.length?r[0]:null;for(;u!==null||d!==null;){let h=l<s.length?s[l+1]:void 0,f=c<r.length?r[c+1]:void 0,p=null,g;u===d?(l+=2,c+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,g=f),p!==null&&Mx(n,t,e,i,p,g,o,a),u=l<s.length?s[l]:null,d=c<r.length?r[c]:null}}function Mx(n,t,e,i,s,r,o,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],u=Tk(c)?c1(l,t,e,s,Ao(c),o):void 0;if(!Lu(u)){Lu(r)||Mk(c)&&(r=c1(l,null,e,s,a,o));let d=Z1(Ji(),e);OR(i,o,d,s,r)}}function c1(n,t,e,i,s,r){let o=t===null,a;for(;s>0;){let l=n[s],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=e[s+1];h===Hn&&(h=d?hn:void 0);let f=d?Wp(h,i):u===i?h:void 0;if(c&&!Lu(f)&&(f=Wp(l,i)),Lu(f)&&(a=f,o))return a;let p=n[s+1];s=o?vr(p):Ao(p)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=Wp(l,i))}return a}function Lu(n){return n!==void 0}function Gk(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=en(Po(n)))),n}function Ax(n,t){return(n.flags&(t?8:16))!==0}var Wg=class{destroy(t){}updateValue(t,e){}swap(t,e){let i=Math.min(t,e),s=Math.max(t,e),r=this.detach(s);if(s-i>1){let o=this.detach(i);this.attach(i,r),this.attach(s,o)}else this.attach(i,r)}move(t,e){this.attach(e,this.detach(t))}};function ig(n,t,e,i,s){return n===e&&Object.is(t,i)?1:Object.is(s(n,t),s(e,i))?-1:0}function qk(n,t,e){let i,s,r=0,o=n.length-1;if(Array.isArray(t)){let a=t.length-1;for(;r<=o&&r<=a;){let l=n.at(r),c=t[r],u=ig(r,l,r,c,e);if(u!==0){u<0&&n.updateValue(r,c),r++;continue}let d=n.at(o),h=t[a],f=ig(o,d,a,h,e);if(f!==0){f<0&&n.updateValue(o,h),o--,a--;continue}let p=e(r,l),g=e(o,d),m=e(r,c);if(Object.is(m,g)){let _=e(a,h);Object.is(_,p)?(n.swap(r,o),n.updateValue(o,h),a--,o--):n.move(o,r),n.updateValue(r,c),r++;continue}if(i??=new Vu,s??=d1(n,r,o,e),Gg(n,i,r,m))n.updateValue(r,c),r++,o++;else if(s.has(m))i.set(p,n.detach(r)),o--;else{let _=n.create(r,t[r]);n.attach(r,_),r++,o++}}for(;r<=a;)u1(n,i,e,r,t[r]),r++}else if(t!=null){let a=t[Symbol.iterator](),l=a.next();for(;!l.done&&r<=o;){let c=n.at(r),u=l.value,d=ig(r,c,r,u,e);if(d!==0)d<0&&n.updateValue(r,u),r++,l=a.next();else{i??=new Vu,s??=d1(n,r,o,e);let h=e(r,u);if(Gg(n,i,r,h))n.updateValue(r,u),r++,o++,l=a.next();else if(!s.has(h))n.attach(r,n.create(r,u)),r++,o++,l=a.next();else{let f=e(r,c);i.set(f,n.detach(r)),o--}}}for(;!l.done;)u1(n,i,e,n.length,l.value),l=a.next()}for(;r<=o;)n.destroy(n.detach(o--));i?.forEach(a=>{n.destroy(a)})}function Gg(n,t,e,i){return t!==void 0&&t.has(i)?(n.attach(e,t.get(i)),t.delete(i),!0):!1}function u1(n,t,e,i,s){if(Gg(n,t,i,e(i,s)))n.updateValue(i,s);else{let r=n.create(i,s);n.attach(i,r)}}function d1(n,t,e,i){let s=new Set;for(let r=t;r<=e;r++)s.add(i(r,n.at(r)));return s}var Vu=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let s=this._vMap;for(;s.has(i);)i=s.get(i);s.set(i,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,i]of this.kvMap)if(t(i,e),this._vMap!==void 0){let s=this._vMap;for(;s.has(i);)i=s.get(i),t(i,e)}}};function Tx(n,t,e){Ro("NgControlFlow");let i=ge(),s=wr(),r=Xg(i,fn+n),o=0;if(Bn(i,s,t)){let a=Ae(null);try{if(ax(r,o),t!==-1){let l=Qg(i[de],fn+t),c=Ha(r,l.tView.ssrId),u=ld(i,l,e,{dehydratedView:c});cd(r,u,o,ja(l,c))}}finally{Ae(a)}}else{let a=ox(r,o);a!==void 0&&(a[jt]=e)}}var qg=class{constructor(t,e,i){this.lContainer=t,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-Ht}};function Ix(n,t){return t}var Yg=class{constructor(t,e,i){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=i}};function Px(n,t,e,i,s,r,o,a,l,c,u,d,h){Ro("NgControlFlow");let f=l!==void 0,p=ge(),g=a?o.bind(p[Vn][jt]):o,m=new Yg(f,g);p[fn+n]=m,J(n+1,t,e,i,s,r),f&&J(n+2,l,c,u,d,h)}var Kg=class extends Wg{constructor(t,e,i){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ht}at(t){return this.getLView(t)[jt].$implicit}attach(t,e){let i=e[Eo];this.needsIndexUpdate||=t!==this.length,cd(this.lContainer,e,t,ja(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Yk(this.lContainer,t)}create(t,e){let i=Ha(this.lContainer,this.templateTNode.tView.ssrId);return ld(this.hostLView,this.templateTNode,new qg(this.lContainer,e,t),{dehydratedView:i})}destroy(t){id(t[de],t)}updateValue(t,e){this.getLView(t)[jt].$implicit=e}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[jt].$index=t}getLView(t){return Kk(this.lContainer,t)}};function Ox(n){let t=Ae(null),e=Ji();try{let i=ge(),s=i[de],r=i[e];if(r.liveCollection===void 0){let a=e+1,l=Xg(i,a),c=Qg(s,a);r.liveCollection=new Kg(l,i,c)}else r.liveCollection.reset();let o=r.liveCollection;if(qk(o,n,r.trackByFn),o.updateIndexes(),r.hasEmptyBlock){let a=wr(),l=o.length===0;if(Bn(i,a,l)){let c=e+2,u=Xg(i,c);if(l){let d=Qg(s,c),h=Ha(u,d.tView.ssrId),f=ld(i,d,void 0,{dehydratedView:h});cd(u,f,0,ja(d,h))}else ax(u,0)}}}finally{Ae(t)}}function Xg(n,t){return n[t]}function Yk(n,t){return Ba(n,t)}function Kk(n,t){return ox(n,t)}function Qg(n,t){return gm(n,t)}function Xk(n,t,e,i,s,r){let o=t.consts,a=Mo(o,s),l=Oo(t,n,2,i,a);return Vm(t,e,l,Mo(o,r)),l.attrs!==null&&Pu(l,l.attrs,!1),l.mergedAttrs!==null&&Pu(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function C(n,t,e,i){let s=ge(),r=gt(),o=fn+n,a=s[rt],l=r.firstCreatePass?Xk(o,r,s,t,e,i):r.data[o],c=Qk(r,s,l,a,t,n);s[o]=c;let u=Xu(l);return yr(l,!0),WC(a,c,l),!wk(l)&&Zu()&&sd(r,s,c,l),dO()===0&&Ps(c,s),hO(),u&&(Nm(r,s,l),Rm(r,l,s)),i!==null&&km(s,l),C}function w(){let n=Ut();bm()?vm():(n=n.parent,yr(n,!1));let t=n;pO(t)&&gO(),fO();let e=gt();return e.firstCreatePass&&(ed(e,n),pm(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&PO(t)&&zg(e,t,ge(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&OO(t)&&zg(e,t,ge(),t.stylesWithoutHost,!1),w}function q(n,t,e,i){return C(n,t,e,i),w(),q}var Qk=(n,t,e,i,s,r)=>(Ju(!0),FC(i,s,MO()));function Zk(n,t,e,i,s){let r=t.consts,o=Mo(r,i),a=Oo(t,n,8,"ng-container",o);o!==null&&Pu(a,o,!0);let l=Mo(r,s);return Vm(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Ns(n,t,e){let i=ge(),s=gt(),r=n+fn,o=s.firstCreatePass?Zk(r,s,i,t,e):s.data[r];yr(o,!0);let a=Jk(s,i,o,n);return i[r]=a,Zu()&&sd(s,i,a,o),Ps(a,i),Xu(o)&&(Nm(s,i,o),Rm(s,o,i)),e!=null&&km(i,o),Ns}function ks(){let n=Ut(),t=gt();return bm()?vm():(n=n.parent,yr(n,!1)),t.firstCreatePass&&(ed(t,n),pm(n)&&t.queries.elementEnd(n)),ks}var Jk=(n,t,e,i)=>(Ju(!0),mR(t[rt],""));function me(){return ge()}function gd(n,t,e){let i=ge(),s=wr();if(Bn(i,s,t)){let r=gt(),o=Qu();Lm(r,o,i,n,t,i[rt],e,!0)}return gd}var Bu="en-US";var eF=Bu;function tF(n){typeof n=="string"&&(eF=n.toLowerCase().replace(/_/g,"-"))}function U(n,t,e,i){let s=ge(),r=gt(),o=Ut();return Rx(r,s,s[rt],o,n,t,i),U}function nF(n,t,e,i){let s=n.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===e&&s[r+1]===i){let a=t[ka],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function Rx(n,t,e,i,s,r,o){let a=Xu(i),c=n.firstCreatePass&&ix(n),u=t[jt],d=nx(t),h=!0;if(i.type&3||o){let g=jn(i,t),m=o?o(g):g,_=d.length,b=o?v=>o(wi(v[i.index])):i.index,y=null;if(!o&&a&&(y=nF(n,t,s,i.index)),y!==null){let v=y.__ngLastListenerFn__||y;v.__ngNextListenerFn__=r,y.__ngLastListenerFn__=r,h=!1}else{r=f1(i,t,u,r,!1);let v=e.listen(m,s,r);d.push(r,v),c&&c.push(s,b,_,_+1)}}else r=f1(i,t,u,r,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[s])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let _=p[m],b=p[m+1],x=t[_][b].subscribe(r),S=d.length;d.push(r,x),c&&c.push(s,i.index,S,-(S+1))}}}function h1(n,t,e,i){let s=Ae(null);try{return bi(6,t,e),e(i)!==!1}catch(r){return sx(n,r),!1}finally{bi(7,t,e),Ae(s)}}function f1(n,t,e,i,s){return function r(o){if(o===Function)return i;let a=n.componentOffset>-1?Rs(n.index,t):t;Hm(a);let l=h1(t,e,i,o),c=r.__ngNextListenerFn__;for(;c;)l=h1(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return s&&l===!1&&o.preventDefault(),l}}function j(n=1){return SO(n)}function iF(n,t){let e=null,i=TP(n);for(let s=0;s<t.length;s++){let r=t[s];if(r==="*"){e=s;continue}if(i===null?R1(n,r,!0):OP(i,r))return s}return e}function Nx(n){let t=ge()[Vn][En];if(!t.projection){let e=n?n.length:1,i=t.projection=yP(e,null),s=i.slice(),r=t.child;for(;r!==null;){let o=n?iF(r,n):0;o!==null&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function kx(n,t=0,e){let i=ge(),s=gt(),r=Oo(s,fn+n,16,null,e||null);r.projection===null&&(r.projection=t),vm(),(!i[Eo]||nC())&&(r.flags&32)!==32&&IR(s,i,r)}function Ka(n,t,e,i){ek(n,t,e,i)}function nn(n,t,e){JN(n,t,e)}function xt(n){let t=ge(),e=gt(),i=sC();Cm(i+1);let s=zm(e,i);if(n.dirty&&oO(t)===((s.metadata.flags&2)===2)){if(s.matches===null)n.reset([]);else{let r=ik(t,i);n.reset(r,WO),n.notifyOnChanges()}return!0}return!1}function Et(){return ZN(ge(),sC())}function sn(n){let t=_O();return rO(t,fn+n)}function M(n,t=""){let e=ge(),i=gt(),s=n+fn,r=i.firstCreatePass?Oo(i,s,1,t,null):i.data[s],o=sF(i,e,r,t,n);e[s]=o,Zu()&&sd(i,e,o,r),yr(r,!1)}var sF=(n,t,e,i,s)=>(Ju(!0),pR(t[rt],i));function _e(n){return Qe("",n,""),_e}function Qe(n,t,e){let i=ge(),s=Sk(i,n,t,e);return s!==Hn&&rx(i,Ji(),s),Qe}function Sr(n,t,e,i,s){let r=ge(),o=Dk(r,n,t,e,i,s);return o!==Hn&&rx(r,Ji(),o),Sr}function tt(n,t,e){vx(t)&&(t=t());let i=ge(),s=wr();if(Bn(i,s,t)){let r=gt(),o=Qu();Lm(r,o,i,n,t,i[rt],e,!1)}return tt}function at(n,t){let e=vx(n);return e&&n.set(t),e}function nt(n,t){let e=ge(),i=gt(),s=Ut();return Rx(i,e,e[rt],s,n,t),nt}function rF(n,t,e){let i=gt();if(i.firstCreatePass){let s=Is(n);Zg(e,i.data,i.blueprint,s,!0),Zg(t,i.data,i.blueprint,s,!1)}}function Zg(n,t,e,i,s){if(n=Zt(n),Array.isArray(n))for(let r=0;r<n.length;r++)Zg(n[r],t,e,i,s);else{let r=gt(),o=ge(),a=Ut(),l=xo(n)?n:Zt(n.provide),c=$1(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(xo(n)||!n.multi){let f=new gr(c,s,F),p=rg(l,t,s?u:u+h,d);p===-1?(bg(Su(a,o),r,l),sg(r,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{let f=rg(l,t,u+h,d),p=rg(l,t,u,u+h),g=f>=0&&e[f],m=p>=0&&e[p];if(s&&!m||!s&&!g){bg(Su(a,o),r,l);let _=lF(s?aF:oF,e.length,s,i,c);!s&&m&&(e[p].providerFactory=_),sg(r,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(_),o.push(_)}else{let _=Fx(e[s?p:f],c,!s&&i);sg(r,n,f>-1?f:p,_)}!s&&i&&m&&e[p].componentProviders++}}}function sg(n,t,e,i){let s=xo(t),r=$P(t);if(s||r){let l=(r?Zt(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function Fx(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function rg(n,t,e,i){for(let s=e;s<i;s++)if(t[s]===n)return s;return-1}function oF(n,t,e,i){return Jg(this.multi,[])}function aF(n,t,e,i){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=mr(e,e[de],this.providerFactory.index,i);r=a.slice(0,o),Jg(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],Jg(s,r);return r}function Jg(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function lF(n,t,e,i,s){let r=new gr(n,e,F);return r.multi=[],r.index=t,r.componentProviders=0,Fx(r,s,i&&!e),r}function li(n,t=[]){return e=>{e.providersResolver=(i,s)=>rF(i,s?s(n):n,t)}}var cF=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=j1(!1,e.type),s=i.length>0?fd([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,s)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(G(Ct))})}}return n})();function No(n){Ro("NgStandalone"),n.getStandaloneInjector=t=>t.get(cF).getOrCreateStandaloneInjector(n)}function Wt(n,t,e){let i=ym()+n,s=ge();return s[i]===Hn?Gm(s,i,e?t.call(e):t()):yk(s,i)}function rn(n,t,e,i){return uF(ge(),ym(),n,t,e,i)}function Dr(n,t,e,i,s){return dF(ge(),ym(),n,t,e,i,s)}function Lx(n,t){let e=n[t];return e===Hn?void 0:e}function uF(n,t,e,i,s,r){let o=t+e;return Bn(n,o,s)?Gm(n,o+1,r?i.call(r,s):i(s)):Lx(n,o+1)}function dF(n,t,e,i,s,r,o){let a=t+e;return wx(n,a,s,r)?Gm(n,a+2,o?i.call(o,s,r):i(s,r)):Lx(n,a+2)}function At(n,t){return ud(n,t)}var du=null;function hF(n){du!==null&&(n.defaultEncapsulation!==du.defaultEncapsulation||n.preserveWhitespaces!==du.preserveWhitespaces)||(du=n)}var md=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var qm=new K(""),Xa=new K(""),_d=(()=>{class n{constructor(e,i,s){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ym||(fF(s),s.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e()},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:s})}whenStable(e,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,s){return[]}static{this.\u0275fac=function(i){return new(i||n)(G(Pe),G(bd),G(Xa))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),bd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Ym?.findTestabilityInTree(this,e,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function fF(n){Ym=n}var Ym;function Mr(n){return!!n&&typeof n.then=="function"}function Vx(n){return!!n&&typeof n.subscribe=="function"}var vd=new K(""),Bx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=P(vd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let s of this.appInits){let r=s();if(Mr(r))e.push(r);else if(Vx(r)){let o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(s=>{this.reject(s)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yd=new K("");function pF(){aw(()=>{throw new Y(600,!1)})}function gF(n){return n.isBoundToModule}function mF(n,t,e){try{let i=e();return Mr(i)?i.catch(s=>{throw t.runOutsideAngular(()=>n.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}function jx(n,t){return Array.isArray(t)?t.reduce(jx,n):L(L({},n),t)}var es=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(EC),this.afterRenderEffectManager=P($m),this.externalTestViews=new Set,this.beforeRender=new Be,this.afterTick=new Be,this.componentTypes=[],this.components=[],this.isStable=P(Er).hasPendingTasks.pipe(ae(e=>!e)),this._injector=P(Ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){let s=e instanceof Iu;if(!this._injector.get(Bx).done){let h=!s&&F1(e),f=!1;throw new Y(405,f)}let o;s?o=e:o=this._injector.get(dd).resolveComponentFactory(e),this.componentTypes.push(o.componentType);let a=gF(o)?void 0:this._injector.get(Os),l=i||o.selector,c=o.create($t.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(qm,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),_u(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new Y(101,!1);let i=Ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Ae(i)}}detectChangesInAttachedViews(e){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===cx)throw new Y(103,!1);if(e){let r=i===0;this.beforeRender.next(r);for(let{_lView:o,notifyErrorHandler:a}of this._views)_F(o,r,a)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>em(r))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>em(r))))break}}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;_u(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(yd,[]);[...this._bootstrapListeners,...i].forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>_u(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Y(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _u(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _F(n,t,e){!t&&!em(n)||bF(n,e,t)}function em(n){return _m(n)}function bF(n,t,e){let i;e?(i=0,n[se]|=1024):n[se]&64?i=0:i=1,ux(n,t,i)}var tm=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},wd=(()=>{class n{compileModuleSync(e){return new Fu(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),s=L1(e),r=kC(s.declarations).reduce((o,a)=>{let l=Yi(a);return l&&o.push(new br(l)),o},[]);return new tm(i,r)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vF=new K("");function yF(n,t,e){let i=new Fu(e);return Promise.resolve(i)}function p1(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var wF=(()=>{class n{constructor(){this.zone=P(Pe),this.applicationRef=P(es)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CF(n){return[{provide:Pe,useFactory:n},{provide:Co,multi:!0,useFactory:()=>{let t=P(wF,{optional:!0});return()=>t.initialize()}},{provide:Co,multi:!0,useFactory:()=>{let t=P(SF);return()=>{t.initialize()}}},{provide:EC,useFactory:xF}]}function xF(){let n=P(Pe),t=P(Ci);return e=>n.runOutsideAngular(()=>t.handleError(e))}function EF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var SF=(()=>{class n{constructor(){this.subscription=new pt,this.initialized=!1,this.zone=P(Pe),this.pendingTasks=P(Er)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DF(){return typeof $localize<"u"&&$localize.locale||Bu}var Cd=new K("",{providedIn:"root",factory:()=>P(Cd,Se.Optional|Se.SkipSelf)||DF()});var Hx=new K(""),Ux=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){let s=PN(i?.ngZone,EF({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let r=_k(e.moduleType,this.injector,CF(()=>s)),o=r.injector.get(Ci,null);return s.runOutsideAngular(()=>{let a=s.onError.subscribe({next:l=>{o.handleError(l)}});r.onDestroy(()=>{_u(this._modules,r),a.unsubscribe()})}),mF(o,s,()=>{let a=r.injector.get(Bx);return a.runInitializers(),a.donePromise.then(()=>{let l=r.injector.get(Cd,Bu);return tF(l||Bu),this._moduleDoBootstrap(r),r})})})}bootstrapModule(e,i=[]){let s=jx({},i);return yF(this.injector,s,e).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(e){let i=e.injector.get(es);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(i);else throw new Y(-403,!1);this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(Hx,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(G($t))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Pa=null,$x=new K("");function MF(n){if(Pa&&!Pa.get($x,!1))throw new Y(400,!1);pF(),Pa=n;let t=n.get(Ux);return IF(n),t}function Km(n,t,e=[]){let i=`Platform: ${t}`,s=new K(i);return(r=[])=>{let o=zx();if(!o||o.injector.get($x,!1)){let a=[...e,...r,{provide:s,useValue:!0}];n?n(a):MF(AF(a,i))}return TF(s)}}function AF(n=[],t){return $t.create({name:t,providers:[{provide:Gu,useValue:"platform"},{provide:Hx,useValue:new Set([()=>Pa=null])},...n]})}function TF(n){let t=zx();if(!t)throw new Y(401,!1);return t}function zx(){return Pa?.get(Ux)??null}function IF(n){n.get(Dm,null)?.forEach(e=>e())}var ci=(()=>{class n{static{this.__NG_ELEMENT_ID__=PF}}return n})();function PF(n){return OF(Ut(),ge(),(n&16)===16)}function OF(n,t,e){if(Ku(n)&&!e){let i=Rs(n.index,t);return new _r(i,i)}else if(n.type&47){let i=t[Vn];return new _r(i,t)}return null}var nm=class{constructor(){}supports(t){return yx(t)}create(t){return new im(t)}},RF=(n,t)=>t,im=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||RF}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,s=0,r=null;for(;e||i;){let o=!i||e&&e.currentIndex<g1(i,s,r)?e:i,a=g1(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(e=e._next,o.previousIndex==null)s++;else{r||(r=[]);let c=a-s,u=l-s;if(c!=u){for(let h=0;h<c;h++){let f=h<r.length?r[h]:r[h]=0,p=f+h;u<=p&&p<c&&(r[h]=f+1)}let d=o.previousIndex;r[d]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!yx(t))throw new Y(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,s,r,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)r=t[a],o=this._trackByFn(a,r),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,r,o,a),i=!0):(i&&(e=this._verifyReinsertion(e,r,o,a)),Object.is(e.item,r)||this._addIdentityChange(e,r)),e=e._next}else s=0,bk(t,a=>{o=this._trackByFn(s,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,s),i=!0):(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,s){let r;return t===null?r=this._itTail:(r=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,s)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,s),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,s)):t=this._addAfter(new sm(e,i),r,s)),t}_verifyReinsertion(t,e,i,s){let r=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return r!==null?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let s=t._prevRemoved,r=t._nextRemoved;return s===null?this._removalsHead=r:s._nextRemoved=r,r===null?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let s=e===null?this._itHead:e._next;return t._next=s,t._prev=e,s===null?this._itTail=t:s._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new ju),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ju),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},sm=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},rm=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},ju=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new rm,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,s=this.map.get(i);return s?s.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function g1(n,t,e){let i=n.previousIndex;if(i===null)return i;let s=0;return e&&i<e.length&&(s=e[i]),i+t+s}function m1(){return new Xm([new nm])}var Xm=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:m1})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let s=i.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||m1()),deps:[[n,new am,new zu]]}}find(e){let i=this.factories.find(s=>s.supports(e));if(i!=null)return i;throw new Y(901,!1)}}return n})();var Wx=Km(null,"core",[]),Gx=(()=>{class n{constructor(e){}static{this.\u0275fac=function(i){return new(i||n)(G(es))}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();function Fs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xd(n,t){let e=Yi(n),i=t.elementInjector||qu();return new br(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}function qx(n){let t=Yi(n);if(!t)return null;let e=new br(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Jx=null;function Di(){return Jx}function eE(n){Jx??=n}var Ed=class{};var mt=new K(""),i0=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(kF),providedIn:"platform"})}}return n})(),tE=new K(""),kF=(()=>{class n extends i0{constructor(){super(),this._doc=P(mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(e){let i=Di().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Di().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,s){this._history.pushState(e,i,s)}replaceState(e,i,s){this._history.replaceState(e,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function s0(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function Yx(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function ts(n){return n&&n[0]!=="?"?"?"+n:n}var ns=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(r0),providedIn:"root"})}}return n})(),nE=new K(""),r0=(()=>{class n extends ns{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return s0(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+ts(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${i}${s}`:i}pushState(e,i,s,r){let o=this.prepareExternalUrl(s+ts(r));this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){let o=this.prepareExternalUrl(s+ts(r));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(G(i0),G(nE,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iE=(()=>{class n extends ns{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=s0(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,s,r){let o=this.prepareExternalUrl(s+ts(r));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){let o=this.prepareExternalUrl(s+ts(r));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(G(i0),G(nE,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fo=(()=>{class n{constructor(e){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=VF(Yx(Kx(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ts(i))}normalize(e){return n.stripTrailingSlash(LF(this._basePath,Kx(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",s=null){this._locationStrategy.pushState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ts(i)),s)}replaceState(e,i="",s=null){this._locationStrategy.replaceState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ts(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(s=>s(e,i))}subscribe(e,i,s){return this._subject.subscribe({next:e,error:i,complete:s})}static{this.normalizeQueryParams=ts}static{this.joinWithSlash=s0}static{this.stripTrailingSlash=Yx}static{this.\u0275fac=function(i){return new(i||n)(G(ns))}}static{this.\u0275prov=H({token:n,factory:()=>FF(),providedIn:"root"})}}return n})();function FF(){return new Fo(G(ns))}function LF(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Kx(n){return n.replace(/\/index.html$/,"")}function VF(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}function Sd(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[s,r]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var Qm=/\s+/,Xx=[],Lo=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=Xx,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(Qm):Xx}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Qm):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let s=this.stateMap.get(e);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],s=e[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Qm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static{this.\u0275fac=function(i){return new(i||n)(F(ot),F(Ei))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Te.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Zm=class{constructor(t,e,i,s){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=s}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gn=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,s){this._viewContainer=e,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((s,r,o)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Zm(s.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(r===null?void 0:r);else if(r!==null){let a=i.get(r);i.move(a,o),Qx(a,s)}});for(let s=0,r=i.length;s<r;s++){let a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{let r=i.get(s.currentIndex);Qx(r,s)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(F(Si),F(xi),F(Xm))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Qx(n,t){n.context.$implicit=t.item}var mn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Jm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Zx("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Zx("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(F(Si),F(xi))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Jm=class{constructor(){this.$implicit=null,this.ngIf=null}};function Zx(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${en(t)}'.`)}var sE=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(e,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}static{this.\u0275fac=function(i){return new(i||n)(F(Si))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[tn]})}}return n})();var rE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})(),o0="browser",BF="server";function oE(n){return n===o0}function Dd(n){return n===BF}var aE=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>oE(P(ai))?new e0(P(mt),window):new t0})}}return n})(),e0=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=jF(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}};function jF(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),s=i.currentNode;for(;s;){let r=s.shadowRoot;if(r){let o=r.getElementById(t)||r.querySelector(`[name="${t}"]`);if(o)return o}s=i.nextNode()}}return null}var t0=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},ko=class{};var Za=class{},Ad=class{},Ar=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let s=e.slice(0,i),r=s.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let s=(t.op==="a"?this.headers.get(e):void 0)||[];s.push(...i),this.headers.set(e,s);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>r.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var l0=class{encodeKey(t){return lE(t)}encodeValue(t){return lE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function $F(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{let r=s.indexOf("="),[o,a]=r==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,r)),t.decodeValue(s.slice(r+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}var zF=/%(\d[a-f0-9])/gi,WF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lE(n){return encodeURIComponent(n).replace(zF,(t,e)=>WF[e]??t)}function Md(n){return`${n}`}var Sn=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new l0,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=$F(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],s=Array.isArray(i)?i.map(Md):[Md(i)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let s=t[i];Array.isArray(s)?s.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Md(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],s=i.indexOf(Md(t.value));s!==-1&&i.splice(s,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var c0=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function GF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uE(n){return typeof Blob<"u"&&n instanceof Blob}function dE(n){return typeof FormData<"u"&&n instanceof FormData}function qF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Qa=class n{constructor(t,e,i,s){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let r;if(GF(this.method)||s?(this.body=i!==void 0?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new Ar,this.context??=new c0,!this.params)this.params=new Sn,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cE(this.body)||uE(this.body)||dE(this.body)||qF(this.body)?this.body:this.body instanceof Sn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dE(this.body)?null:uE(this.body)?this.body.type||null:cE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Sn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,s=t.responseType||this.responseType,r=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),u)),new n(e,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a,transferCache:r})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),Ja=class{constructor(t,e=Pd.Ok,i="OK"){this.headers=t.headers||new Ar,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},u0=class n extends Ja{constructor(t={}){super(t),this.type=Vo.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Td=class n extends Ja{constructor(t={}){super(t),this.type=Vo.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Id=class extends Ja{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Pd=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Pd||{});function a0(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var on=(()=>{class n{constructor(e){this.handler=e}request(e,i,s={}){let r;if(e instanceof Qa)r=e;else{let l;s.headers instanceof Ar?l=s.headers:l=new Ar(s.headers);let c;s.params&&(s.params instanceof Sn?c=s.params:c=new Sn({fromObject:s.params})),r=new Qa(e,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=Z(r).pipe(Gi(l=>this.handler.handle(l)));if(e instanceof Qa||s.observe==="events")return o;let a=o.pipe(st(l=>l instanceof Td));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ae(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Sn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,s={}){return this.request("PATCH",e,a0(s,i))}post(e,i,s={}){return this.request("POST",e,a0(s,i))}put(e,i,s={}){return this.request("PUT",e,a0(s,i))}static{this.\u0275fac=function(i){return new(i||n)(G(Za))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function gE(n,t){return t(n)}function YF(n,t){return(e,i)=>t.intercept(e,{handle:s=>n(s,i)})}function KF(n,t,e){return(i,s)=>ri(e,()=>t(i,r=>n(r,s)))}var XF=new K(""),d0=new K(""),QF=new K(""),ZF=new K("");function JF(){let n=null;return(t,e)=>{n===null&&(n=(P(XF,{optional:!0})??[]).reduceRight(YF,gE));let i=P(Er),s=i.add();return n(t,e).pipe(qi(()=>i.remove(s)))}}var hE=(()=>{class n extends Za{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=P(Er);let s=P(ZF,{optional:!0});this.backend=s??e}handle(e){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(d0),...this.injector.get(QF,[])]));this.chain=s.reduceRight((r,o)=>KF(r,o,this.injector),gE)}let i=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(qi(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(G(Ad),G(Ct))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();var eL=/^\)\]\}',?\n/;function tL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var fE=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Y(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?$e(i.\u0275loadImpl()):Z(null)).pipe(Bt(()=>new re(r=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((g,m)=>o.setRequestHeader(g,m.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let g=e.detectContentTypeHeader();g!==null&&o.setRequestHeader("Content-Type",g)}if(e.responseType){let g=e.responseType.toLowerCase();o.responseType=g!=="json"?g:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let g=o.statusText||"OK",m=new Ar(o.getAllResponseHeaders()),_=tL(o)||e.url;return l=new u0({headers:m,status:o.status,statusText:g,url:_}),l},u=()=>{let{headers:g,status:m,statusText:_,url:b}=c(),y=null;m!==Pd.NoContent&&(y=typeof o.response>"u"?o.responseText:o.response),m===0&&(m=y?Pd.Ok:0);let v=m>=200&&m<300;if(e.responseType==="json"&&typeof y=="string"){let x=y;y=y.replace(eL,"");try{y=y!==""?JSON.parse(y):null}catch(S){y=x,v&&(v=!1,y={error:S,text:y})}}v?(r.next(new Td({body:y,headers:g,status:m,statusText:_,url:b||void 0})),r.complete()):r.error(new Id({error:y,headers:g,status:m,statusText:_,url:b||void 0}))},d=g=>{let{url:m}=c(),_=new Id({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:m||void 0});r.error(_)},h=!1,f=g=>{h||(r.next(c()),h=!0);let m={type:Vo.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),e.responseType==="text"&&o.responseText&&(m.partialText=o.responseText),r.next(m)},p=g=>{let m={type:Vo.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),r.next(m)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",f),a!==null&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),r.next({type:Vo.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",f),a!==null&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(G(ko))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),mE=new K(""),nL="XSRF-TOKEN",iL=new K("",{providedIn:"root",factory:()=>nL}),sL="X-XSRF-TOKEN",rL=new K("",{providedIn:"root",factory:()=>sL}),Od=class{},oL=(()=>{class n{constructor(e,i,s){this.doc=e,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sd(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(G(mt),G(ai),G(iL))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function aL(n,t){let e=n.url.toLowerCase();if(!P(mE)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=P(Od).getToken(),s=P(rL);return i!=null&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,i)})),t(n)}var _E=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(_E||{});function lL(n,t){return{\u0275kind:n,\u0275providers:t}}function cL(...n){let t=[on,fE,hE,{provide:Za,useExisting:hE},{provide:Ad,useExisting:fE},{provide:d0,useValue:aL,multi:!0},{provide:mE,useValue:!0},{provide:Od,useClass:oL}];for(let e of n)t.push(...e.\u0275providers);return Wu(t)}var pE=new K("");function uL(){return lL(_E.LegacyInterceptors,[{provide:pE,useFactory:JF},{provide:d0,useExisting:pE,multi:!0}])}var bE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({providers:[cL(uL())]})}}return n})();var p0=class extends Ed{constructor(){super(...arguments),this.supportsDOMEvents=!0}},g0=class n extends p0{static makeCurrent(){eE(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=dL();return e==null?null:hL(e)}resetBaseElement(){el=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Sd(document.cookie,t)}},el=null;function dL(){return el=el||document.querySelector("base"),el?el.getAttribute("href"):null}function hL(n){return new URL(n,document.baseURI).pathname}var m0=class{addToWindow(t){Jt.getAngularTestability=(i,s=!0)=>{let r=t.findTestabilityInTree(i,s);if(r==null)throw new Y(5103,!1);return r},Jt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Jt.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let s=Jt.getAllAngularTestabilities(),r=s.length,o=function(){r--,r==0&&i()};s.forEach(a=>{a.whenStable(o)})};Jt.frameworkStabilizers||(Jt.frameworkStabilizers=[]),Jt.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let s=t.getTestability(e);return s??(i?Di().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},fL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),_0=new K(""),CE=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,s){return this._findPluginFor(i).addEventListener(e,i,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new Y(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(G(_0),G(Pe))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Rd=class{constructor(t){this._doc=t}},h0="ng-app-id",xE=(()=>{class n{constructor(e,i,s,r={}){this.doc=e,this.appId=i,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Dd(r),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(s=>s.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${h0}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(e,i){let s=this.styleRef;if(s.has(e)){let r=s.get(e);return r.usage+=i,r.usage}return s.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let s=this.styleNodesInDOM,r=s?.get(i);if(r?.parentNode===e)return s.delete(i),r.removeAttribute(h0),r;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(h0,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){let s=this.getStyleElement(e,i),r=this.styleRef,o=r.get(i)?.elements;o?o.push(s):r.set(i,{elements:[s],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(G(mt),G(td),G(Mm,8),G(ai))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),f0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},v0=/%COMP%/g,EE="%COMP%",pL=`_nghost-${EE}`,gL=`_ngcontent-${EE}`,mL=!0,_L=new K("",{providedIn:"root",factory:()=>mL});function bL(n){return gL.replace(v0,n)}function vL(n){return pL.replace(v0,n)}function SE(n,t){return t.map(e=>e.replace(v0,n))}var vE=(()=>{class n{constructor(e,i,s,r,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Dd(a),this.defaultRenderer=new tl(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===yi.ShadowDom&&(i=ue(L({},i),{encapsulation:yi.Emulated}));let s=this.getOrCreateRenderer(e,i);return s instanceof Nd?s.applyToHost(e):s instanceof nl&&s.applyStyles(),s}getOrCreateRenderer(e,i){let s=this.rendererByCompId,r=s.get(i.id);if(!r){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case yi.Emulated:r=new Nd(l,c,i,this.appId,u,o,a,d);break;case yi.ShadowDom:return new b0(l,c,e,i,o,a,this.nonce,d);default:r=new nl(l,c,i,u,o,a,d);break}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(G(CE),G(xE),G(td),G(_L),G(mt),G(ai),G(Pe),G(Mm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),tl=class{constructor(t,e,i,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(f0[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(yE(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(yE(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Y(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,s){if(s){e=s+":"+e;let r=f0[s];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let s=f0[i];s?t.removeAttributeNS(s,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,s){s&(Xi.DashCase|Xi.Important)?t.style.setProperty(e,i,s&Xi.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Xi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Di().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function yE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var b0=class extends tl{constructor(t,e,i,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=SE(s.id,s.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nl=class extends tl{constructor(t,e,i,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s,this.styles=l?SE(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Nd=class extends nl{constructor(t,e,i,s,r,o,a,l){let c=s+"-"+i.id;super(t,e,i,r,o,a,l,c),this.contentAttr=bL(c),this.hostAttr=vL(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},yL=(()=>{class n extends Rd{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,s){return e.addEventListener(i,s,!1),()=>this.removeEventListener(e,i,s)}removeEventListener(e,i,s){return e.removeEventListener(i,s)}static{this.\u0275fac=function(i){return new(i||n)(G(mt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),wE=["alt","control","meta","shift"],wL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xL=(()=>{class n extends Rd{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,s){let r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(e,r.domEventName,o))}static parseEventName(e){let i=e.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let r=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),wE.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=r,i.length!=0||r.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let s=wL[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(s=e.code,r="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),wE.forEach(o=>{if(o!==s){let a=CL[o];a(e)&&(r+=o+".")}}),r+=s,r===i)}static eventCallback(e,i,s){return r=>{n.matchEventFullKeyCode(r,e)&&s.runGuarded(()=>i(r))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(G(mt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function EL(){g0.makeCurrent()}function SL(){return new Ci}function DL(){return IC(document),document}var ML=[{provide:ai,useValue:o0},{provide:Dm,useValue:EL,multi:!0},{provide:mt,useFactory:DL,deps:[]}],DE=Km(Wx,"browser",ML),AL=new K(""),TL=[{provide:Xa,useClass:m0,deps:[]},{provide:qm,useClass:_d,deps:[Pe,bd,Xa]},{provide:_d,useClass:_d,deps:[Pe,bd,Xa]}],IL=[{provide:Gu,useValue:"root"},{provide:Ci,useFactory:SL,deps:[]},{provide:_0,useClass:yL,multi:!0,deps:[mt,Pe,ai]},{provide:_0,useClass:xL,multi:!0,deps:[mt]},vE,xE,CE,{provide:Ua,useExisting:vE},{provide:ko,useClass:fL,deps:[]},[]],ME=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:td,useValue:e.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(G(AL,12))}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({providers:[...IL,...TL],imports:[rE,Gx]})}}return n})();var AE=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(G(mt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var be="primary",_l=Symbol("RouteTitle"),E0=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function $o(n){return new E0(n)}function PL(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let s={};for(let r=0;r<i.length;r++){let o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function OL(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Mi(n[e],t[e]))return!1;return!0}function Mi(n,t){let e=n?S0(n):void 0,i=t?S0(t):void 0;if(!e||!i||e.length!=i.length)return!1;let s;for(let r=0;r<e.length;r++)if(s=e[r],!VE(n[s],t[s]))return!1;return!0}function S0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((s,r)=>i[r]===s)}else return n===t}function BE(n){return n.length>0?n[n.length-1]:null}function js(n){return Np(n)?n:Mr(n)?$e(Promise.resolve(n)):Z(n)}var RL={exact:HE,subset:UE},jE={exact:NL,subset:kL,ignored:()=>!0};function IE(n,t,e){return RL[e.paths](n.root,t.root,e.matrixParams)&&jE[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function NL(n,t){return Mi(n,t)}function HE(n,t,e){if(!Pr(n.segments,t.segments)||!Ld(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!HE(n.children[i],t.children[i],e))return!1;return!0}function kL(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>VE(n[e],t[e]))}function UE(n,t,e){return $E(n,t,t.segments,e)}function $E(n,t,e,i){if(n.segments.length>e.length){let s=n.segments.slice(0,e.length);return!(!Pr(s,e)||t.hasChildren()||!Ld(s,e,i))}else if(n.segments.length===e.length){if(!Pr(n.segments,e)||!Ld(n.segments,e,i))return!1;for(let s in t.children)if(!n.children[s]||!UE(n.children[s],t.children[s],i))return!1;return!0}else{let s=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!Pr(n.segments,s)||!Ld(n.segments,s,i)||!n.children[be]?!1:$E(n.children[be],t,r,i)}}function Ld(n,t,e){return t.every((i,s)=>jE[e](n[s].parameters,i.parameters))}var Ls=class{constructor(t=new Le([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){return VL.serialize(this)}},Le=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vd(this)}},Ir=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=$o(this.parameters),this._parameterMap}toString(){return WE(this)}};function FL(n,t){return Pr(n,t)&&n.every((e,i)=>Mi(e.parameters,t[i].parameters))}function Pr(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function LL(n,t){let e=[];return Object.entries(n.children).forEach(([i,s])=>{i===be&&(e=e.concat(t(s,i)))}),Object.entries(n.children).forEach(([i,s])=>{i!==be&&(e=e.concat(t(s,i)))}),e}var bl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>new cl,providedIn:"root"})}}return n})(),cl=class{parse(t){let e=new M0(t);return new Ls(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${il(t.root,!0)}`,i=HL(t.queryParams),s=typeof t.fragment=="string"?`#${BL(t.fragment)}`:"";return`${e}${i}${s}`}},VL=new cl;function Vd(n){return n.segments.map(t=>WE(t)).join("/")}function il(n,t){if(!n.hasChildren())return Vd(n);if(t){let e=n.children[be]?il(n.children[be],!1):"",i=[];return Object.entries(n.children).forEach(([s,r])=>{s!==be&&i.push(`${s}:${il(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=LL(n,(i,s)=>s===be?[il(n.children[be],!1)]:[`${s}:${il(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[be]!=null?`${Vd(n)}/${e[0]}`:`${Vd(n)}/(${e.join("//")})`}}function zE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kd(n){return zE(n).replace(/%3B/gi,";")}function BL(n){return encodeURI(n)}function D0(n){return zE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bd(n){return decodeURIComponent(n)}function PE(n){return Bd(n.replace(/\+/g,"%20"))}function WE(n){return`${D0(n.path)}${jL(n.parameters)}`}function jL(n){return Object.entries(n).map(([t,e])=>`;${D0(t)}=${D0(e)}`).join("")}function HL(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(s=>`${kd(e)}=${kd(s)}`).join("&"):`${kd(e)}=${kd(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var UL=/^[^\/()?;#]+/;function y0(n){let t=n.match(UL);return t?t[0]:""}var $L=/^[^\/()?;=#]+/;function zL(n){let t=n.match($L);return t?t[0]:""}var WL=/^[^=?&#]+/;function GL(n){let t=n.match(WL);return t?t[0]:""}var qL=/^[^&#]+/;function YL(n){let t=n.match(qL);return t?t[0]:""}var M0=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[be]=new Le(t,e)),i}parseSegment(){let t=y0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(t),new Ir(Bd(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=zL(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=y0(this.remaining);s&&(i=s,this.capture(i))}t[Bd(e)]=Bd(i)}parseQueryParam(t){let e=GL(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=YL(this.remaining);o&&(i=o,this.capture(i))}let s=PE(e),r=PE(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=y0(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new Y(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=be);let o=this.parseChildren();e[r]=Object.keys(o).length===1?o[be]:new Le([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Y(4011,!1)}};function GE(n){return n.segments.length>0?new Le([],{[be]:n}):n}function qE(n){let t={};for(let[i,s]of Object.entries(n.children)){let r=qE(s);if(i===be&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let e=new Le(n.segments,t);return KL(e)}function KL(n){if(n.numberOfChildren===1&&n.children[be]){let t=n.children[be];return new Le(n.segments.concat(t.segments),t.children)}return n}function zo(n){return n instanceof Ls}function XL(n,t,e=null,i=null){let s=YE(n);return KE(s,t,e,i)}function YE(n){let t;function e(r){let o={};for(let l of r.children){let c=e(l);o[l.outlet]=c}let a=new Le(r.url,o);return r===n&&(t=a),a}let i=e(n.root),s=GE(i);return t??s}function KE(n,t,e,i){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return w0(s,s,s,e,i);let r=QL(t);if(r.toRoot())return w0(s,s,new Le([],{}),e,i);let o=ZL(r,s,n),a=o.processChildren?ol(o.segmentGroup,o.index,r.commands):QE(o.segmentGroup,o.index,r.commands);return w0(s,o.segmentGroup,a,e,i)}function jd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ul(n){return typeof n=="object"&&n!=null&&n.outlets}function w0(n,t,e,i,s){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=XE(n,t,e);let a=GE(qE(o));return new Ls(a,r,s)}function XE(n,t,e){let i={};return Object.entries(n.children).forEach(([s,r])=>{r===t?i[s]=e:i[s]=XE(r,t,e)}),new Le(n.segments,i)}var Hd=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&jd(i[0]))throw new Y(4003,!1);let s=i.find(ul);if(s&&s!==BE(i))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Hd(!0,0,n);let t=0,e=!1,i=n.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new Hd(e,t,i)}var Ho=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function ZL(n,t,e){if(n.isAbsolute)return new Ho(t,!0,0);if(!e)return new Ho(t,!1,NaN);if(e.parent===null)return new Ho(e,!0,0);let i=jd(n.commands[0])?0:1,s=e.segments.length-1+i;return JL(e,s,n.numberOfDoubleDots)}function JL(n,t,e){let i=n,s=t,r=e;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Y(4005,!1);s=i.segments.length}return new Ho(i,!1,s-r)}function e2(n){return ul(n[0])?n[0].outlets:{[be]:n}}function QE(n,t,e){if(n??=new Le([],{}),n.segments.length===0&&n.hasChildren())return ol(n,t,e);let i=t2(n,t,e),s=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new Le(n.segments.slice(0,i.pathIndex),{});return r.children[be]=new Le(n.segments.slice(i.pathIndex),n.children),ol(r,0,s)}else return i.match&&s.length===0?new Le(n.segments,{}):i.match&&!n.hasChildren()?A0(n,t,e):i.match?ol(n,0,s):A0(n,t,e)}function ol(n,t,e){if(e.length===0)return new Le(n.segments,{});{let i=e2(e),s={};if(Object.keys(i).some(r=>r!==be)&&n.children[be]&&n.numberOfChildren===1&&n.children[be].segments.length===0){let r=ol(n.children[be],t,e);return new Le(n.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=QE(n.children[r],t,o))}),Object.entries(n.children).forEach(([r,o])=>{i[r]===void 0&&(s[r]=o)}),new Le(n.segments,s)}}function t2(n,t,e){let i=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=e.length)return r;let o=n.segments[s],a=e[i];if(ul(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!RE(l,c,o))return r;i+=2}else{if(!RE(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function A0(n,t,e){let i=n.segments.slice(0,t),s=0;for(;s<e.length;){let r=e[s];if(ul(r)){let l=n2(r.outlets);return new Le(i,l)}if(s===0&&jd(e[0])){let l=n.segments[t];i.push(new Ir(l.path,OE(e[0]))),s++;continue}let o=ul(r)?r.outlets[be]:`${r}`,a=s<e.length-1?e[s+1]:null;o&&a&&jd(a)?(i.push(new Ir(o,OE(a))),s+=2):(i.push(new Ir(o,{})),s++)}return new Le(i,{})}function n2(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=A0(new Le([],{}),0,i))}),t}function OE(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function RE(n,t,e){return n==e.path&&Mi(t,e.parameters)}var al="imperative",Tt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Tt||{}),Wn=class{constructor(t,e){this.id=t,this.url=e}},Wo=class extends Wn{constructor(t,e,i="imperative",s=null){super(t,e),this.type=Tt.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ai=class extends Wn{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mn||{}),Ud=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ud||{}),Vs=class extends Wn{constructor(t,e,i,s){super(t,e),this.reason=i,this.code=s,this.type=Tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bs=class extends Wn{constructor(t,e,i,s){super(t,e),this.reason=i,this.code=s,this.type=Tt.NavigationSkipped}},dl=class extends Wn{constructor(t,e,i,s){super(t,e),this.error=i,this.target=s,this.type=Tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$d=class extends Wn{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s,this.type=Tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T0=class extends Wn{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s,this.type=Tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I0=class extends Wn{constructor(t,e,i,s,r){super(t,e),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=Tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},P0=class extends Wn{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s,this.type=Tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},O0=class extends Wn{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s,this.type=Tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R0=class{constructor(t){this.route=t,this.type=Tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},N0=class{constructor(t){this.route=t,this.type=Tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},k0=class{constructor(t){this.snapshot=t,this.type=Tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F0=class{constructor(t){this.snapshot=t,this.type=Tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L0=class{constructor(t){this.snapshot=t,this.type=Tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V0=class{constructor(t){this.snapshot=t,this.type=Tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=Tt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},hl=class{},fl=class{constructor(t){this.url=t}};var B0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vl,this.attachRef=null}},vl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){let s=this.getOrCreateContext(e);s.outlet=i,this.contexts.set(e,s)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new B0,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wd=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=j0(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=j0(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=H0(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return H0(t,this._root).map(e=>e.value)}};function j0(n,t){if(n===t.value)return t;for(let e of t.children){let i=j0(n,e);if(i)return i}return null}function H0(n,t){if(n===t.value)return[t];for(let e of t.children){let i=H0(n,e);if(i.length)return i.unshift(t),i}return[]}var Dn=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function jo(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Gd=class extends Wd{constructor(t,e){super(t),this.snapshot=e,Q0(this,t)}toString(){return this.snapshot.toString()}};function ZE(n){let t=i2(n),e=new bt([new Ir("",{})]),i=new bt({}),s=new bt({}),r=new bt({}),o=new bt(""),a=new Nt(e,i,r,o,s,be,n,t.root);return a.snapshot=t.root,new Gd(new Dn(a,[]),t)}function i2(n){let t={},e={},i={},s="",r=new pl([],t,i,s,e,be,n,null,{});return new qd("",new Dn(r,[]))}var Nt=class{constructor(t,e,i,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(c=>c[_l]))??Z(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(t=>$o(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(t=>$o(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function X0(n,t,e="emptyOnly"){let i,{routeConfig:s}=n;return t!==null&&(e==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:L(L({},t.params),n.params),data:L(L({},t.data),n.data),resolve:L(L(L(L({},n.data),t.data),s?.data),n._resolvedData)}:i={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},s&&eS(s)&&(i.resolve[_l]=s.title),i}var pl=class{get title(){return this.data?.[_l]}constructor(t,e,i,s,r,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},qd=class extends Wd{constructor(t,e){super(e),this.url=t,Q0(this,e)}toString(){return JE(this._root)}};function Q0(n,t){t.value._routerState=n,t.children.forEach(e=>Q0(n,e))}function JE(n){let t=n.children.length>0?` { ${n.children.map(JE).join(", ")} } `:"";return`${n.value}${t}`}function C0(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Mi(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Mi(t.params,e.params)||n.paramsSubject.next(e.params),OL(t.url,e.url)||n.urlSubject.next(e.url),Mi(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function U0(n,t){let e=Mi(n.params,t.params)&&FL(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||U0(n.parent,t.parent))}function eS(n){return typeof n.title=="string"||n.title===null}var Z0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=be,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=P(vl),this.location=P(Si),this.changeDetector=P(ci),this.environmentInjector=P(Ct),this.inputBinder=P(Zd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:s}=e.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=e;let s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new $0(e,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[tn]})}}return n})(),$0=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Nt?this.route:t===vl?this.childContexts:this.parent.get(t,e)}},Zd=new K(""),NE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,s=co([i.queryParams,i.params,i.data]).pipe(Bt(([r,o,a],l)=>(a=L(L(L({},r),o),a),l===0?Z(a):Promise.resolve(a)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=qx(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,r[a])});this.outletDataSubscriptions.set(e,s)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function s2(n,t,e){let i=gl(n,t._root,e?e._root:void 0);return new Gd(i,t)}function gl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let s=r2(n,t,e);return new Dn(i,s)}else{if(n.shouldAttach(t.value)){let r=n.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>gl(n,a)),o}}let i=o2(t.value),s=t.children.map(r=>gl(n,r));return new Dn(i,s)}}function r2(n,t,e){return t.children.map(i=>{for(let s of e.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return gl(n,i,s);return gl(n,i)})}function o2(n){return new Nt(new bt(n.url),new bt(n.params),new bt(n.queryParams),new bt(n.fragment),new bt(n.data),n.outlet,n.component,n)}var tS="ngNavigationCancelingError";function nS(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=zo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=iS(!1,Mn.Redirect);return s.url=e,s.navigationBehaviorOptions=i,s}function iS(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[tS]=!0,e.cancellationCode=t,e}function a2(n){return sS(n)&&zo(n.url)}function sS(n){return!!n&&n[tS]}var l2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],standalone:!0,features:[No],decls:1,vars:0,template:function(i,s){i&1&&q(0,"router-outlet")},dependencies:[Z0],encapsulation:2})}}return n})();function c2(n,t){return n.providers&&!n._injector&&(n._injector=fd(n.providers,t,`Route: ${n.path}`)),n._injector??t}function J0(n){let t=n.children&&n.children.map(J0),e=t?ue(L({},n),{children:t}):L({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==be&&(e.component=l2),e}function Ti(n){return n.outlet||be}function u2(n,t){let e=n.filter(i=>Ti(i)===t);return e.push(...n.filter(i=>Ti(i)!==t)),e}function yl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var d2=(n,t,e,i)=>ae(s=>(new z0(t,s.targetRouterState,s.currentRouterState,e,i).activate(n),s)),z0=class{constructor(t,e,i,s,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),C0(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let s=jo(e);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){let s=t.value,r=e?e.value:null;if(s===r)if(s.component){let o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),s=i&&t.value.component?i.children:e,r=jo(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),s=i&&t.value.component?i.children:e,r=jo(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let s=jo(e);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new V0(r.value.snapshot))}),t.children.length&&this.forwardEvent(new F0(t.value.snapshot))}activateRoutes(t,e,i){let s=t.value,r=e?e.value:null;if(C0(s),s===r)if(s.component){let o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(s.component){let o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),C0(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=yl(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Yd=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Uo=class{constructor(t,e){this.component=t,this.route=e}};function h2(n,t,e){let i=n._root,s=t?t._root:null;return sl(i,s,e,[i.value])}function f2(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function qo(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!y1(n)?n:t.get(n):i}function sl(n,t,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=jo(t);return n.children.forEach(o=>{p2(o,r[o.value.outlet],e,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>ll(a,e.getContext(o),s)),s}function p2(n,t,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=g2(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Yd(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?sl(n,t,a?a.children:null,i,s):sl(n,t,e,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Uo(a.outlet.component,o))}else o&&ll(t,a,s),s.canActivateChecks.push(new Yd(i)),r.component?sl(n,null,a?a.children:null,i,s):sl(n,null,e,i,s);return s}function g2(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Pr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Pr(n.url,t.url)||!Mi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!U0(n,t)||!Mi(n.queryParams,t.queryParams);case"paramsChange":default:return!U0(n,t)}}function ll(n,t,e){let i=jo(n),s=n.value;Object.entries(i).forEach(([r,o])=>{s.component?t?ll(o,t.children.getContext(r),e):ll(o,null,e):ll(o,t,e)}),s.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Uo(t.outlet.component,s)):e.canDeactivateChecks.push(new Uo(null,s)):e.canDeactivateChecks.push(new Uo(null,s))}function wl(n){return typeof n=="function"}function m2(n){return typeof n=="boolean"}function _2(n){return n&&wl(n.canLoad)}function b2(n){return n&&wl(n.canActivate)}function v2(n){return n&&wl(n.canActivateChild)}function y2(n){return n&&wl(n.canDeactivate)}function w2(n){return n&&wl(n.canMatch)}function rS(n){return n instanceof Wi||n?.name==="EmptyError"}var Fd=Symbol("INITIAL_VALUE");function Go(){return Bt(n=>co(n.map(t=>t.pipe(dn(1),Ta(Fd)))).pipe(ae(t=>{for(let e of t)if(e!==!0){if(e===Fd)return Fd;if(e===!1||e instanceof Ls)return e}return!0}),st(t=>t!==Fd),dn(1)))}function C2(n,t){return it(e=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=e;return o.length===0&&r.length===0?Z(ue(L({},e),{guardsResult:!0})):x2(o,i,s,n).pipe(it(a=>a&&m2(a)?E2(i,r,n,t):Z(a)),ae(a=>ue(L({},e),{guardsResult:a})))})}function x2(n,t,e,i){return $e(n).pipe(it(s=>T2(s.component,s.route,e,t,i)),_i(s=>s!==!0,!0))}function E2(n,t,e,i){return $e(t).pipe(Gi(s=>Ds(D2(s.route.parent,i),S2(s.route,i),A2(n,s.path,e),M2(n,s.route,e))),_i(s=>s!==!0,!0))}function S2(n,t){return n!==null&&t&&t(new L0(n)),Z(!0)}function D2(n,t){return n!==null&&t&&t(new k0(n)),Z(!0)}function M2(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Z(!0);let s=i.map(r=>iu(()=>{let o=yl(t)??e,a=qo(r,o),l=b2(a)?a.canActivate(t,n):ri(o,()=>a(t,n));return js(l).pipe(_i())}));return Z(s).pipe(Go())}function A2(n,t,e){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>f2(o)).filter(o=>o!==null).map(o=>iu(()=>{let a=o.guards.map(l=>{let c=yl(o.node)??e,u=qo(l,c),d=v2(u)?u.canActivateChild(i,n):ri(c,()=>u(i,n));return js(d).pipe(_i())});return Z(a).pipe(Go())}));return Z(r).pipe(Go())}function T2(n,t,e,i,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return Z(!0);let o=r.map(a=>{let l=yl(t)??s,c=qo(a,l),u=y2(c)?c.canDeactivate(n,t,e,i):ri(l,()=>c(n,t,e,i));return js(u).pipe(_i())});return Z(o).pipe(Go())}function I2(n,t,e,i){let s=t.canLoad;if(s===void 0||s.length===0)return Z(!0);let r=s.map(o=>{let a=qo(o,n),l=_2(a)?a.canLoad(t,e):ri(n,()=>a(t,e));return js(l)});return Z(r).pipe(Go(),oS(i))}function oS(n){return Ap(vt(t=>{if(zo(t))throw nS(n,t)}),ae(t=>t===!0))}function P2(n,t,e,i){let s=t.canMatch;if(!s||s.length===0)return Z(!0);let r=s.map(o=>{let a=qo(o,n),l=w2(a)?a.canMatch(t,e):ri(n,()=>a(t,e));return js(l)});return Z(r).pipe(Go(),oS(i))}var ml=class{constructor(t){this.segmentGroup=t||null}},Kd=class extends Error{constructor(t){super(),this.urlTree=t}};function Bo(n){return mi(new ml(n))}function O2(n){return mi(new Y(4e3,!1))}function R2(n){return mi(iS(!1,Mn.GuardRejected))}var W0=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],s=e.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return Z(i);if(s.numberOfChildren>1||!s.children[be])return O2(t.redirectTo);s=s.children[be]}}applyRedirectCommands(t,e,i){let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Kd(s);return s}applyRedirectCreateUrlTree(t,e,i,s){let r=this.createSegmentGroup(t,e.root,i,s);return new Ls(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);i[s]=e[a]}else i[s]=r}),i}createSegmentGroup(t,e,i,s){let r=this.createSegments(t,e.segments,i,s),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,s)}),new Le(r,o)}createSegments(t,e,i,s){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,e,i){let s=i[e.path.substring(1)];if(!s)throw new Y(4001,!1);return s}findOrReturn(t,e){let i=0;for(let s of e){if(s.path===t.path)return e.splice(i),s;i++}return t}},G0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N2(n,t,e,i,s){let r=e_(n,t,e);return r.matched?(i=c2(t,i),P2(i,t,e,s).pipe(ae(o=>o===!0?r:L({},G0)))):Z(r)}function e_(n,t,e){if(t.path==="**")return k2(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?L({},G0):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let s=(t.matcher||PL)(e,n,t);if(!s)return L({},G0);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?L(L({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function k2(n){return{matched:!0,parameters:n.length>0?BE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kE(n,t,e,i){return e.length>0&&V2(n,e,i)?{segmentGroup:new Le(t,L2(i,new Le(e,n.children))),slicedSegments:[]}:e.length===0&&B2(n,e,i)?{segmentGroup:new Le(n.segments,F2(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Le(n.segments,n.children),slicedSegments:e}}function F2(n,t,e,i){let s={};for(let r of e)if(Jd(n,t,r)&&!i[Ti(r)]){let o=new Le([],{});s[Ti(r)]=o}return L(L({},i),s)}function L2(n,t){let e={};e[be]=t;for(let i of n)if(i.path===""&&Ti(i)!==be){let s=new Le([],{});e[Ti(i)]=s}return e}function V2(n,t,e){return e.some(i=>Jd(n,t,i)&&Ti(i)!==be)}function B2(n,t,e){return e.some(i=>Jd(n,t,i))}function Jd(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function j2(n,t,e,i){return Ti(n)!==i&&(i===be||!Jd(t,e,n))?!1:e_(t,n,e).matched}function H2(n,t,e){return t.length===0&&!n.children[e]}var q0=class{};function U2(n,t,e,i,s,r,o="emptyOnly"){return new Y0(n,t,e,i,s,o,r).recognize()}var $2=31,Y0=class{constructor(t,e,i,s,r,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new W0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Y(4002,`'${t.segmentGroup}'`)}recognize(){let t=kE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ae(e=>{let i=new pl([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},be,this.rootComponentType,null,{}),s=new Dn(i,e),r=new qd("",s),o=XL(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,be).pipe(Cn(i=>{if(i instanceof Kd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ml?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,s=X0(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),t.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(t,e,i,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,s,!0).pipe(ae(r=>r instanceof Dn?[r]:[]))}processChildren(t,e,i){let s=[];for(let r of Object.keys(i.children))r==="primary"?s.unshift(r):s.push(r);return $e(s).pipe(Gi(r=>{let o=i.children[r],a=u2(e,r);return this.processSegmentGroup(t,a,o,r)}),$p((r,o)=>(r.push(...o),r)),Ms(null),Up(),it(r=>{if(r===null)return Bo(i);let o=aS(r);return z2(o),Z(o)}))}processSegment(t,e,i,s,r,o){return $e(e).pipe(Gi(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,s,r,o).pipe(Cn(l=>{if(l instanceof ml)return Z(null);throw l}))),_i(a=>!!a),Cn(a=>{if(rS(a))return H2(i,s,r)?Z(new q0):Bo(i);throw a}))}processSegmentAgainstRoute(t,e,i,s,r,o,a){return j2(i,s,r,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,i,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,e,i,r,o):Bo(s):Bo(s)}expandSegmentAgainstRouteUsingRedirect(t,e,i,s,r,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=e_(e,s,r);if(!a)return Bo(e);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$2&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,d).pipe(it(h=>this.processSegment(t,i,e,h.concat(u),o,!1)))}matchSegmentAgainstRoute(t,e,i,s,r){let o=N2(e,i,s,t,this.urlSerializer);return i.path==="**"&&(e.children={}),o.pipe(Bt(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,s).pipe(Bt(({routes:l})=>{let c=i._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new pl(u,h,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,G2(i),Ti(i),i.component??i._loadedComponent??null,i,q2(i)),{segmentGroup:p,slicedSegments:g}=kE(e,u,d,l);if(g.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(ae(_=>_===null?null:new Dn(f,_)));if(l.length===0&&g.length===0)return Z(new Dn(f,[]));let m=Ti(i)===r;return this.processSegment(c,l,p,g,m?be:r,!0).pipe(ae(_=>new Dn(f,_ instanceof Dn?[_]:[])))}))):Bo(e)))}getChildConfig(t,e,i){return e.children?Z({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Z({routes:e._loadedRoutes,injector:e._loadedInjector}):I2(t,e,i,this.urlSerializer).pipe(it(s=>s?this.configLoader.loadChildren(t,e).pipe(vt(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):R2(e))):Z({routes:[],injector:t})}};function z2(n){n.sort((t,e)=>t.value.outlet===be?-1:e.value.outlet===be?1:t.value.outlet.localeCompare(e.value.outlet))}function W2(n){let t=n.value.routeConfig;return t&&t.path===""}function aS(n){let t=[],e=new Set;for(let i of n){if(!W2(i)){t.push(i);continue}let s=t.find(r=>i.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...i.children),e.add(s)):t.push(i)}for(let i of e){let s=aS(i.children);t.push(new Dn(i.value,s))}return t.filter(i=>!e.has(i))}function G2(n){return n.data||{}}function q2(n){return n.resolve||{}}function Y2(n,t,e,i,s,r){return it(o=>U2(n,t,e,i,o.extractedUrl,s,r).pipe(ae(({state:a,tree:l})=>ue(L({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function K2(n,t){return it(e=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=e;if(!s.length)return Z(e);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of lS(l))o.add(c);let a=0;return $e(o).pipe(Gi(l=>r.has(l)?X2(l,i,n,t):(l.data=X0(l,l.parent,n).resolve,Z(void 0))),vt(()=>a++),ho(1),it(l=>a===o.size?Z(e):Ot))})}function lS(n){let t=n.children.map(e=>lS(e)).flat();return[n,...t]}function X2(n,t,e,i){let s=n.routeConfig,r=n._resolve;return s?.title!==void 0&&!eS(s)&&(r[_l]=s.title),Q2(r,n,t,i).pipe(ae(o=>(n._resolvedData=o,n.data=X0(n,n.parent,e).resolve,null)))}function Q2(n,t,e,i){let s=S0(n);if(s.length===0)return Z({});let r={};return $e(s).pipe(it(o=>Z2(n[o],t,e,i).pipe(_i(),vt(a=>{r[o]=a}))),ho(1),Bp(r),Cn(o=>rS(o)?Ot:mi(o)))}function Z2(n,t,e,i){let s=yl(t)??i,r=qo(n,s),o=r.resolve?r.resolve(t,e):ri(s,()=>r(t,e));return js(o)}function x0(n){return Bt(t=>{let e=n(t);return e?$e(e).pipe(ae(()=>t)):Z(t)})}var cS=(()=>{class n{buildTitle(e){let i,s=e.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===be);return i}getResolvedTitleForRoute(e){return e.data[_l]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(J2),providedIn:"root"})}}return n})(),J2=(()=>{class n extends cS{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(G(AE))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cl=new K("",{providedIn:"root",factory:()=>({})}),Xd=new K(""),t_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(wd)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=js(e.loadComponent()).pipe(ae(uS),vt(r=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=r}),qi(()=>{this.componentLoaders.delete(e)})),s=new ro(i,()=>new Be).pipe(so());return this.componentLoaders.set(e,s),s}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=eV(i,this.compiler,e,this.onLoadEndListener).pipe(qi(()=>{this.childrenLoaders.delete(i)})),o=new ro(r,()=>new Be).pipe(so());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eV(n,t,e,i){return js(n.loadChildren()).pipe(ae(uS),it(s=>s instanceof $a||Array.isArray(s)?Z(s):$e(t.compileModuleAsync(s))),ae(s=>{i&&i(n);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(e).injector,o=r.get(Xd,[],{optional:!0,self:!0}).flat()),{routes:o.map(J0),injector:r}}))}function tV(n){return n&&typeof n=="object"&&"default"in n}function uS(n){return tV(n)?n.default:n}var n_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(nV),providedIn:"root"})}}return n})(),nV=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dS=new K(""),hS=new K("");function iV(n,t,e){let i=n.get(hS),s=n.get(mt);return n.get(Pe).runOutsideAngular(()=>{if(!s.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let r,o=new Promise(c=>{r=c}),a=s.startViewTransition(()=>(r(),sV(n))),{onViewTransitionCreated:l}=i;return l&&ri(n,()=>l({transition:a,from:t,to:e})),o})}function sV(n){return new Promise(t=>{hd(t,{injector:n})})}var i_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Be,this.transitionAbortSubject=new Be,this.configLoader=P(t_),this.environmentInjector=P(Ct),this.urlSerializer=P(bl),this.rootContexts=P(vl),this.location=P(Fo),this.inputBindingEnabled=P(Zd,{optional:!0})!==null,this.titleStrategy=P(cS),this.options=P(Cl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(n_),this.createViewTransition=P(dS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let e=s=>this.events.next(new R0(s)),i=s=>this.events.next(new N0(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(ue(L(L({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,s){return this.transitions=new bt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:al,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(st(r=>r.id!==0),ae(r=>ue(L({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Bt(r=>{let o=!1,a=!1;return Z(r).pipe(Bt(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),Ot;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ue(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Bs(l.id,this.urlSerializer.serialize(l.rawUrl),d,Ud.IgnoredSameUrlNavigation)),l.resolve(null),Ot}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(Bt(d=>{let h=this.transitions?.getValue();return this.events.next(new Wo(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Ot:Promise.resolve(d)}),Y2(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=ue(L({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new $d(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=l,m=new Wo(d,this.urlSerializer.serialize(h),f,p);this.events.next(m);let _=ZE(this.rootComponentType).snapshot;return this.currentTransition=r=ue(L({},l),{targetSnapshot:_,urlAfterRedirects:h,extras:ue(L({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Z(r)}else{let d="";return this.events.next(new Bs(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Ud.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ot}}),vt(l=>{let c=new T0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ae(l=>(this.currentTransition=r=ue(L({},l),{guards:h2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),r)),C2(this.environmentInjector,l=>this.events.next(l)),vt(l=>{if(r.guardsResult=l.guardsResult,zo(l.guardsResult))throw nS(this.urlSerializer,l.guardsResult);let c=new I0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),st(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Mn.GuardRejected),!1)),x0(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(vt(c=>{let u=new P0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Bt(c=>{let u=!1;return Z(c).pipe(K2(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Mn.NoDataFromResolver)}}))}),vt(c=>{let u=new O0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),x0(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(vt(h=>{u.component=h}),ae(()=>{})));for(let h of u.children)d.push(...c(h));return d};return co(c(l.targetSnapshot.root)).pipe(Ms(null),dn(1))}),x0(()=>this.afterPreactivation()),Bt(()=>{let{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?$e(u).pipe(ae(()=>r)):Z(r)}),ae(l=>{let c=s2(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r=ue(L({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),vt(()=>{this.events.next(new hl)}),d2(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),dn(1),vt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ai(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),pe(this.transitionAbortSubject.pipe(vt(l=>{throw l}))),qi(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cn(l=>{if(a=!0,sS(l))this.events.next(new Vs(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),a2(l)?this.events.next(new fl(l.url)):r.resolve(!1);else{this.events.next(new dl(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0));try{r.resolve(e.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Ot}))}))}cancelNavigationTransition(e,i,s){let r=new Vs(e.id,this.urlSerializer.serialize(e.extractedUrl),i,s);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rV(n){return n!==al}var oV=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(aV),providedIn:"root"})}}return n})(),K0=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},aV=(()=>{class n extends K0{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(lV),providedIn:"root"})}}return n})(),lV=(()=>{class n extends fS{constructor(){super(...arguments),this.location=P(Fo),this.urlSerializer=P(bl),this.options=P(Cl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(n_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ls,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof Wo)this.stateMemento=this.createStateMemento();else if(e instanceof Bs)this.rawUrlTree=i.initialUrl;else if(e instanceof $d){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else e instanceof hl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):e instanceof Vs&&(e.code===Mn.GuardRejected||e.code===Mn.NoDataFromResolver)?this.restoreHistory(i):e instanceof dl?this.restoreHistory(i,!0):e instanceof Ai&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let s=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let r=this.browserPageId,o=L(L({},i.extras.state),this.generateNgRouterState(i.id,r));this.location.replaceState(s,"",o)}else{let r=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",r)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,r=this.currentPageId-s;r!==0?this.location.historyGo(r):this.currentUrlTree===e.finalUrl&&r===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rl||{});function pS(n,t){n.events.pipe(st(e=>e instanceof Ai||e instanceof Vs||e instanceof dl||e instanceof Bs),ae(e=>e instanceof Ai||e instanceof Bs?rl.COMPLETE:(e instanceof Vs?e.code===Mn.Redirect||e.code===Mn.SupersededByNewNavigation:!1)?rl.REDIRECTING:rl.FAILED),st(e=>e!==rl.REDIRECTING),dn(1)).subscribe(()=>{t()})}function cV(n){throw n}var uV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ke=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=P(md),this.stateManager=P(fS),this.options=P(Cl,{optional:!0})||{},this.pendingTasks=P(Er),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(i_),this.urlSerializer=P(bl),this.location=P(Fo),this.urlHandlingStrategy=P(n_),this._events=new Be,this.errorHandler=this.options.errorHandler||cV,this.navigated=!1,this.routeReuseStrategy=P(oV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Xd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Zd,{optional:!0}),this.eventsSubscription=new pt,this.isNgZoneEnabled=P(Pe)instanceof Pe&&Pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(s!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof Vs&&i.code!==Mn.Redirect&&i.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ai)this.navigated=!0;else if(i instanceof fl){let o=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),a={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||rV(s.source)};this.scheduleNavigation(o,al,null,a,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}fV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),al,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,s){let r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(J0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a){case"merge":u=L(L({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=s?s.snapshot:this.routerState.snapshot.root;d=YE(h)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),d=this.currentUrlTree.root}return KE(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let s=zo(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,al,null,i)}navigate(e,i={skipLocationChange:!1}){return hV(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let s;if(i===!0?s=L({},uV):i===!1?s=L({},dV):s=i,zo(e))return IE(this.currentUrlTree,e,s);let r=this.parseUrl(e);return IE(this.currentUrlTree,r,s)}removeEmptyProps(e){return Object.entries(e).reduce((i,[s,r])=>(r!=null&&(i[s]=r),i),{})}scheduleNavigation(e,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return pS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hV(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Y(4008,!1)}function fV(n){return!(n instanceof hl)&&!(n instanceof fl)}var Gn=(()=>{class n{constructor(e,i,s,r,o,a){this.router=e,this.route=i,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Be,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Ai&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e!=null?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,s,r,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||s||r||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:RC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let s=this.renderer,r=this.el.nativeElement;i!==null?s.setAttribute(r,e,i):s.removeAttribute(r,e)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(F(Ke),F(Nt),Cr("tabindex"),F(Ei),F(ot),F(ns))}}static{this.\u0275dir=Oe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&U("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Un("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Te.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Fs],skipLocationChange:[Te.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Fs],replaceUrl:[Te.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Fs],routerLink:"routerLink"},standalone:!0,features:[Wm,tn]})}}return n})();var Qd=class{};var pV=(()=>{class n{constructor(e,i,s,r,o){this.router=e,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(st(e=>e instanceof Ai),Gi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let s=[];for(let r of i){r.providers&&!r._injector&&(r._injector=fd(r.providers,e,`Route: ${r.path}`));let o=r._injector??e,a=r._loadedInjector??o;(r.loadChildren&&!r._loadedRoutes&&r.canLoad===void 0||r.loadComponent&&!r._loadedComponent)&&s.push(this.preloadConfig(o,r)),(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return $e(s).pipe(uo())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(e,i):s=Z(null);let r=s.pipe(it(o=>o===null?Z(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return $e([r,o]).pipe(uo())}else return r})}static{this.\u0275fac=function(i){return new(i||n)(G(Ke),G(wd),G(Ct),G(Qd),G(t_))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gS=new K(""),gV=(()=>{class n{constructor(e,i,s,r,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=s,this.zone=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=P(Ct),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ai?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Bs&&e.code===Ud.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof zd&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>O(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),hd(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new zd(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){qC()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function mV(n){return n.routerState.root}function xl(n,t){return{\u0275kind:n,\u0275providers:t}}function _V(){let n=P($t);return t=>{let e=n.get(es);if(t!==e.components[0])return;let i=n.get(Ke),s=n.get(mS);n.get(s_)===1&&i.initialNavigation(),n.get(_S,null,Se.Optional)?.setUpPreloading(),n.get(gS,null,Se.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var mS=new K("",{factory:()=>new Be}),s_=new K("",{providedIn:"root",factory:()=>1});function bV(){return xl(2,[{provide:s_,useValue:0},{provide:vd,multi:!0,deps:[$t],useFactory:t=>{let e=t.get(tE,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let s=t.get(Ke),r=t.get(mS);pS(s,()=>{i(!0)}),t.get(i_).afterPreactivation=()=>(i(!0),r.closed?Z(void 0):r),s.initialNavigation()}))}}])}function vV(){return xl(3,[{provide:vd,multi:!0,useFactory:()=>{let t=P(Ke);return()=>{t.setUpLocationChangeListener()}}},{provide:s_,useValue:2}])}var _S=new K("");function yV(n){return xl(0,[{provide:_S,useExisting:pV},{provide:Qd,useExisting:n}])}function wV(){return xl(8,[NE,{provide:Zd,useExisting:NE}])}function CV(n){let t=[{provide:dS,useValue:iV},{provide:hS,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return xl(9,t)}var FE=new K("ROUTER_FORROOT_GUARD"),xV=[Fo,{provide:bl,useClass:cl},Ke,vl,{provide:Nt,useFactory:mV,deps:[Ke]},t_,[]],El=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[xV,[],{provide:Xd,multi:!0,useValue:e},{provide:FE,useFactory:MV,deps:[[Ke,new zu,new am]]},{provide:Cl,useValue:i||{}},i?.useHash?SV():DV(),EV(),i?.preloadingStrategy?yV(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?AV(i):[],i?.bindToComponentInputs?wV().\u0275providers:[],i?.enableViewTransitions?CV().\u0275providers:[],TV()]}}static forChild(e){return{ngModule:n,providers:[{provide:Xd,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(G(FE,8))}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();function EV(){return{provide:gS,useFactory:()=>{let n=P(aE),t=P(Pe),e=P(Cl),i=P(i_),s=P(bl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new gV(s,i,n,t,e)}}}function SV(){return{provide:ns,useClass:iE}}function DV(){return{provide:ns,useClass:r0}}function MV(n){return"guarded"}function AV(n){return[n.initialNavigation==="disabled"?vV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?bV().\u0275providers:[]]}var LE=new K("");function TV(){return[{provide:LE,useFactory:_V},{provide:yd,multi:!0,useExisting:LE}]}var Gt="/api/v1/courses/",qt=(()=>{class n{constructor(e){this.http=e}getCourseById(e){return this.http.get(Gt+e).pipe(Cn(i=>this.handleError(i)))}getRecommendedCourses(){return this.http.get(`${Gt}recommended`)}getTaughtCourses(e,i,s){return this.http.get(`${Gt}taught/${e}/?page=${i}&size=${s}`)}getCourses(e,i){return this.http.get(`${Gt}?page=${e}&size=${i}`)}isUserInstructor(e,i){return this.http.get(`${Gt}${e}/${i}`)}getPdf(e){return this.http.get(`${Gt}${e}/notes`,{responseType:"blob"})}handleError(e){return console.log("ERROR:"),console.error(e),mi("Server error ("+e.status+"): "+e.text())}updateCourse(e){return this.http.put(`/api/v1/courses/${e.id}`,e)}updateCourseImage(e,i){let s=new FormData;return s.append("imageFile",i),this.http.put(`${Gt}${e}/image`,s)}updateCourseNotes(e,i){let s=new FormData;return s.append("noteFile",i),this.http.put(`${Gt}${e}/notes`,s)}getCoursesByTopic(e,i,s){return this.http.get(`${Gt}topic/${e}?page=${i}&size=${s}`)}getCoursesByTitle(e,i,s){return this.http.get(`${Gt}title/${e}?page=${i}&size=${s}`)}createCourse(e){return this.http.post(Gt,e)}createCourseImage(e,i){let s=new FormData;return s.append("imageFile",i),this.http.post(`${Gt}${e}/image`,s)}createCourseNotes(e,i){let s=new FormData;return s.append("noteFile",i),this.http.post(`${Gt}${e}/notes`,s)}deleteCourse(e){return this.http.delete(`${Gt}/${e}`,{withCredentials:!0,responseType:"text"})}getCategoryEnrollments(){return this.http.get(`${Gt}mostpopular`)}getCategoryCourses(){return this.http.get(`${Gt}most-courses`)}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bS="/api/v1/auth",Yo=(()=>{class n{constructor(e){this.http=e,this.loggedInSubject=new bt(!1),this.loggedIn$=this.loggedInSubject.asObservable(),this.reqIsLogged()}reqIsLogged(){this.http.get("/api/v1/users/me",{withCredentials:!0}).subscribe(e=>{this.user=e,this.loggedInSubject.next(!0)},e=>{e.status!=404&&console.error("Error when asking if logged: "+JSON.stringify(e)),this.loggedInSubject.next(!1)})}logIn(e,i){return this.http.post(bS+"/login",{username:e,password:i},{withCredentials:!0}).pipe()}logOut(){return this.http.post(bS+"/logout",{withCredentials:!0}).subscribe(e=>{console.log("LOGOUT: Successfully"),this.loggedInSubject.next(!1),this.user=void 0})}isAdmin(){return this.user?.roles.includes("ADMIN")??!1}currentUser(){return this.user}isLogged(){return this.loggedInSubject.getValue()}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Or="/api/v1/reviews/",eh=(()=>{class n{constructor(e){this.http=e}addComment(e,i,s,r){return this.http.post(Or,{text:e,user:{id:i},course:{id:s},parent:r===null?null:{id:r}})}deleteReview(e){return this.http.delete(`${Or}${e}`)}ignoreReview(e){return this.http.put(`${Or}${e}/desmark-pending`,{})}markPending(e){return this.http.put(`${Or}${e}/mark-pending`,{})}getPendingReviews(){return this.http.get(`${Or}pending`)}getReviewsByCourse(e){return this.http.get(Or+"course/"+e).pipe(Cn(i=>this.handleError(i)))}editReview(e){return this.http.put(Or,e).pipe(Cn(i=>this.handleError(i)))}handleError(e){return console.log("ERROR:"),console.error(e),mi("Server error ("+e.status+"): "+e.text())}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var th="/api/v1/enrollments",nh=(()=>{class n{constructor(e){this.http=e}getEnrolledCourses(e,i,s){return this.http.get(`${th}/${e}/?page=${i}&size=${s}`)}isUserEnrolled(e,i){return this.http.get(`${th}/${e}/${i}`)}enrollCourse(e,i){let s=`${th}/${i}`,r=new Sn().set("userId",e.toString());return this.http.post(s,null,{params:r})}rateCourse(e,i){let s=`${th}/${e}`,r=new Sn().set("rating",i.toString());return this.http.put(s,null,{params:r})}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ii="/api/v1/users",Pi=(()=>{class n{constructor(e){this.http=e}getUserById(e){return this.http.get(`${Ii}/${e}`)}getUserInfo(){return this.http.get(`${Ii}/me`)}getAllUsers(){return this.http.get(`${Ii}`)}updateUser(e){return this.http.put(`${Ii}/`,e)}changePassword(e,i){return this.http.post(`${Ii}/me/change-password`,{currentPassword:e,newPassword:i})}deleteAccount(e){return this.http.delete(`${Ii}/${e}`,{withCredentials:!0,responseType:"text"})}uploadProfilePhoto(e){let i=new FormData;return i.append("image",e),this.http.post(`${Ii}/me/photo`,i)}getUsers(e){let i=new Sn;return e&&(i=i.set("name",e)),this.http.get(`${Ii}/`,{params:i})}createUser(e){return this.http.post(`${Ii}/`,e)}createUserImage(e,i){let s=new FormData;return s.append("imageFile",i),this.http.post(`${Ii}/${e}/image`,s)}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IS=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(F(Ei),F(ot))}}static{this.\u0275dir=Oe({type:n})}}return n})(),c_=(()=>{class n extends IS{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,features:[zt]})}}return n})(),Il=new K("");var IV={provide:Il,useExisting:xn(()=>_n),multi:!0};function PV(){let n=Di()?Di().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OV=new K(""),_n=(()=>{class n extends IS{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!PV())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Ei),F(ot),F(OV,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&U("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[li([IV]),zt]})}}return n})();function Us(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function PS(n){return n!=null&&typeof n.length=="number"}var Zo=new K(""),dh=new K(""),RV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,an=class{static min(t){return NV(t)}static max(t){return kV(t)}static required(t){return OS(t)}static requiredTrue(t){return FV(t)}static email(t){return LV(t)}static minLength(t){return VV(t)}static maxLength(t){return RS(t)}static pattern(t){return BV(t)}static nullValidator(t){return sh(t)}static compose(t){return BS(t)}static composeAsync(t){return jS(t)}};function NV(n){return t=>{if(Us(t.value)||Us(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function kV(n){return t=>{if(Us(t.value)||Us(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function OS(n){return Us(n.value)?{required:!0}:null}function FV(n){return n.value===!0?null:{required:!0}}function LV(n){return Us(n.value)||RV.test(n.value)?null:{email:!0}}function VV(n){return t=>Us(t.value)||!PS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function RS(n){return t=>PS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function BV(n){if(!n)return sh;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Us(i.value))return null;let s=i.value;return t.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}function sh(n){return null}function NS(n){return n!=null}function kS(n){return Mr(n)?$e(n):n}function FS(n){let t={};return n.forEach(e=>{t=e!=null?L(L({},t),e):t}),Object.keys(t).length===0?null:t}function LS(n,t){return t.map(e=>e(n))}function jV(n){return!n.validate}function VS(n){return n.map(t=>jV(t)?t:e=>t.validate(e))}function BS(n){if(!n)return null;let t=n.filter(NS);return t.length==0?null:function(e){return FS(LS(e,t))}}function u_(n){return n!=null?BS(VS(n)):null}function jS(n){if(!n)return null;let t=n.filter(NS);return t.length==0?null:function(e){let i=LS(e,t).map(kS);return kp(i).pipe(ae(FS))}}function d_(n){return n!=null?jS(VS(n)):null}function wS(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function HS(n){return n._rawValidators}function US(n){return n._rawAsyncValidators}function o_(n){return n?Array.isArray(n)?n:[n]:[]}function rh(n,t){return Array.isArray(n)?n.includes(t):n===t}function CS(n,t){let e=o_(t);return o_(n).forEach(s=>{rh(e,s)||e.push(s)}),e}function xS(n,t){return o_(t).filter(e=>!rh(n,e))}var oh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=u_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=d_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},is=class extends oh{get formDirective(){return null}get path(){return null}},Rr=class extends oh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ah=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},HV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xQ=ue(L({},HV),{"[class.ng-submitted]":"isSubmitted"}),qn=(()=>{class n extends ah{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(F(Rr,2))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&$n("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[zt]})}}return n})(),Yn=(()=>{class n extends ah{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(F(is,10))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&$n("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[zt]})}}return n})();var Dl="VALID",ih="INVALID",Ko="PENDING",Ml="DISABLED";function h_(n){return(hh(n)?n.validators:n)||null}function UV(n){return Array.isArray(n)?u_(n):n||null}function f_(n,t){return(hh(t)?t.asyncValidators:n)||null}function $V(n){return Array.isArray(n)?d_(n):n||null}function hh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function $S(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Y(1e3,"");if(!i[e])throw new Y(1001,"")}function zS(n,t,e){n._forEachChild((i,s)=>{if(e[s]===void 0)throw new Y(1002,"")})}var Xo=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Dl}get invalid(){return this.status===ih}get pending(){return this.status==Ko}get disabled(){return this.status===Ml}get enabled(){return this.status!==Ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(CS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(CS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(xS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(xS(t,this._rawAsyncValidators))}hasValidator(t){return rh(this._rawValidators,t)}hasAsyncValidator(t){return rh(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ko,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ml,this.errors=null,this._forEachChild(i=>{i.disable(ue(L({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(L({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Dl,this._forEachChild(i=>{i.enable(ue(L({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ue(L({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dl||this.status===Ko)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ml:Dl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ko,this._hasOwnPendingAsyncValidator=!0;let e=kS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,s)=>i&&i._find(s),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Ml:this.errors?ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ko)?Ko:this._anyControlsHaveStatus(ih)?ih:Dl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hh(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=UV(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=$V(this._rawAsyncValidators)}},Qo=class extends Xo{constructor(t,e,i){super(h_(e),f_(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){zS(this,!0,t),Object.keys(t).forEach(i=>{$S(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let s=this.controls[i];s&&s.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,s)=>{i.reset(t?t[s]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,s)=>((i.enabled||this.disabled)&&(e[s]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((s,r)=>{i=e(i,s,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var a_=class extends Qo{};var Pl=new K("CallSetDisabledState",{providedIn:"root",factory:()=>fh}),fh="always";function WS(n,t){return[...t.path,n]}function lh(n,t,e=fh){p_(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),WV(n,t),qV(n,t),GV(n,t),zV(n,t)}function ES(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),uh(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ch(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function zV(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function p_(n,t){let e=HS(n);t.validator!==null?n.setValidators(wS(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=US(n);t.asyncValidator!==null?n.setAsyncValidators(wS(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let s=()=>n.updateValueAndValidity();ch(t._rawValidators,s),ch(t._rawAsyncValidators,s)}function uh(n,t){let e=!1;if(n!==null){if(t.validator!==null){let s=HS(n);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.validator);r.length!==s.length&&(e=!0,n.setValidators(r))}}if(t.asyncValidator!==null){let s=US(n);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.asyncValidator);r.length!==s.length&&(e=!0,n.setAsyncValidators(r))}}}let i=()=>{};return ch(t._rawValidators,i),ch(t._rawAsyncValidators,i),e}function WV(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&GS(n,t)})}function GV(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&GS(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function GS(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qV(n,t){let e=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function qS(n,t){n==null,p_(n,t)}function YV(n,t){return uh(n,t)}function YS(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function KV(n){return Object.getPrototypeOf(n.constructor)===c_}function KS(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function XS(n,t){if(!t)return null;Array.isArray(t);let e,i,s;return t.forEach(r=>{r.constructor===_n?e=r:KV(r)?i=r:s=r}),s||i||e||null}function XV(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var QV={provide:is,useExisting:xn(()=>ss)},Al=Promise.resolve(),ss=(()=>{class n extends is{constructor(e,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new we,this.form=new Qo({},u_(e),d_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Al.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),lh(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Al.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Al.then(()=>{let i=this._findContainer(e.path),s=new Qo({});qS(s,e),i.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Al.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Al.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,KS(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(F(Zo,10),F(dh,10),F(Pl,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&U("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{options:[Te.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([QV]),zt]})}}return n})();function SS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function DS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Tl=class extends Xo{constructor(t=null,e,i){super(h_(e),f_(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(DS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){SS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){SS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){DS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var ZV=n=>n instanceof Tl;var JV={provide:Rr,useExisting:xn(()=>rs)},MS=Promise.resolve(),rs=(()=>{class n extends Rr{constructor(e,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Tl,this._registered=!1,this.name="",this.update=new we,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=XS(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),YS(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){MS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,s=i!==0&&Fs(i);MS.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?WS(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(F(is,9),F(Zo,10),F(dh,10),F(Il,10),F(ci,8),F(Pl,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Te.None,"disabled","isDisabled"],model:[Te.None,"ngModel","model"],options:[Te.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[li([JV]),zt,tn]})}}return n})(),Kn=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var QS=new K("");var eB={provide:is,useExisting:xn(()=>Ol)},Ol=(()=>{class n extends is{constructor(e,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new we,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return lh(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){ES(e.control||null,e,!1),XV(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,KS(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,s=this.form.get(e.path);i!==s&&(ES(i||null,e),ZV(s)&&(lh(s,e,this.callSetDisabledState),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);qS(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&YV(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){p_(this.form,this),this._oldForm&&uh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(F(Zo,10),F(dh,10),F(Pl,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&U("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{form:[Te.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([eB]),zt,tn]})}}return n})();var tB={provide:Rr,useExisting:xn(()=>Rl)},Rl=(()=>{class n extends Rr{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,s,r,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new we,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=XS(this,r)}ngOnChanges(e){this._added||this._setUpControl(),YS(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return WS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(F(is,13),F(Zo,10),F(dh,10),F(Il,10),F(QS,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[Te.None,"formControlName","name"],isDisabled:[Te.None,"disabled","isDisabled"],model:[Te.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[li([tB]),zt,tn]})}}return n})(),nB={provide:Il,useExisting:xn(()=>Oi),multi:!0};function ZS(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function iB(n){return n.split(":")[0]}var Oi=(()=>{class n extends c_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),s=ZS(i,e);this.setProperty("value",s)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=iB(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&U("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[li([nB]),zt]})}}return n})(),$s=(()=>{class n{constructor(e,i,s){this._element=e,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(ZS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(F(ot),F(Ei),F(Oi,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),sB={provide:Il,useExisting:xn(()=>JS),multi:!0};function AS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function rB(n){return n.split(":")[0]}var JS=(()=>{class n extends c_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let s=e.map(r=>this._getOptionId(r));i=(r,o)=>{r._setSelected(s.indexOf(o.toString())>-1)}}else i=(s,r)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let s=[],r=i.selectedOptions;if(r!==void 0){let o=r;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);s.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);s.push(c)}}}this.value=s,e(s)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=rB(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&U("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[li([sB]),zt]})}}return n})(),zs=(()=>{class n{constructor(e,i,s){this._element=e,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(AS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(AS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(F(ot),F(Ei),F(JS,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function oB(n){return typeof n=="number"?n:parseInt(n,10)}var eD=(()=>{class n{constructor(){this._validator=sh}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):sh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,features:[tn]})}}return n})();var aB={provide:Zo,useExisting:xn(()=>An),multi:!0};var An=(()=>{class n extends eD{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fs,this.createValidator=e=>OS}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Un("required",s._enabled?"":null)},inputs:{required:"required"},features:[li([aB]),zt]})}}return n})();var lB={provide:Zo,useExisting:xn(()=>Nl),multi:!0},Nl=(()=>{class n extends eD{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>oB(e),this.createValidator=e=>RS(e)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Un("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[li([lB]),zt]})}}return n})();var tD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})(),l_=class extends Xo{constructor(t,e,i){super(h_(e),f_(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),e&&(this.controls.splice(s,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){zS(this,!1,t),t.forEach((i,s)=>{$S(this,!1,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function TS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ph=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let s=this._reduceControls(e),r={};return TS(i)?r=i:i!==null&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new Qo(s,r)}record(e,i=null){let s=this._reduceControls(e);return new a_(s,i)}control(e,i,s){let r={};return this.useNonNullable?(TS(i)?r=i:(r.validators=i,r.asyncValidators=s),new Tl(e,ue(L({},r),{nonNullable:!0}))):new Tl(e,i,s)}array(e,i,s){let r=e.map(o=>this._createControl(o));return new l_(r,i,s)}_reduceControls(e){let i={};return Object.keys(e).forEach(s=>{i[s]=this._createControl(e[s])}),i}_createControl(e){if(e instanceof Tl)return e;if(e instanceof Xo)return e;if(Array.isArray(e)){let i=e[0],s=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(i,s,r)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nD=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Pl,useValue:e.callSetDisabledState??fh}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({imports:[tD]})}}return n})(),iD=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:QS,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Pl,useValue:e.callSetDisabledState??fh}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({imports:[tD]})}}return n})();function gh(n){n||(hm(gh),n=P(xr));let t=new re(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(pe(t))}var cB=["*"];var uB=n=>({$implicit:n});var dB=["dialog"],hB=["ngbNavOutlet",""];function fB(n,t){}function pB(n,t){if(n&1&&(C(0,"div",0),J(1,fB,0,0,"ng-template",1),w()),n&2){let e=j().$implicit,i=j();k("item",e)("nav",i.nav)("role",i.paneRole),T(),k("ngTemplateOutlet",(e.contentTpl==null?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",rn(5,uB,e.active||i.isPanelTransitioning(e)))}}function gB(n,t){if(n&1&&J(0,pB,2,7,"div",0),n&2){let e=t.$implicit,i=j();Tx(0,e.isPanelInDom()||i.isPanelTransitioning(e)?0:-1)}}var rD={animation:!0,transitionTimerDelayMs:5},oD=(()=>{class n{constructor(){this.animation=rD.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mB(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),s=parseFloat(e);return(i+s)*1e3}function aD(n){return typeof n=="string"}function Nr(n){return n!=null}function _B(n){return n&&n.then}function __(n){return(n||document.body).getBoundingClientRect()}function bB(n){return t=>new re(e=>{let i=o=>n.run(()=>e.next(o)),s=o=>n.run(()=>e.error(o)),r=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:s,complete:r})})}var vB=()=>{},{transitionTimerDelayMs:yB}=rD,mh=new Map,as=(n,t,e,i)=>{let s=i.context||{},r=mh.get(t);if(r)switch(i.runningTransition){case"continue":return Ot;case"stop":n.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),mh.delete(t)}let o=e(t,i.animation,s)||vB;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>o()),Z(void 0).pipe(bB(n));let a=new Be,l=new Be,c=a.pipe(Hp(!0));mh.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let u=mB(t);return n.runOutsideAngular(()=>{let d=ke(t,"transitionend").pipe(pe(c),st(({target:f})=>f===t)),h=Fp(u+yB).pipe(pe(c));Lp(h,d,l).pipe(pe(c)).subscribe(()=>{mh.delete(t),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var lD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var cD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var uD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})(),dD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var os=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(os||{});var vZ=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})();var wB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hD(n){let t=Array.from(n.querySelectorAll(wB)).filter(e=>e.tabIndex!==-1);return[t[0],t[t.length-1]]}var CB=(n,t,e,i=!1)=>{n.runOutsideAngular(()=>{let s=ke(t,"focusin").pipe(pe(e),ae(r=>r.target));ke(t,"keydown").pipe(pe(e),st(r=>r.which===os.Tab),ou(s)).subscribe(([r,o])=>{let[a,l]=hD(t);(o===a||o===t)&&r.shiftKey&&(l.focus(),r.preventDefault()),o===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&ke(t,"click").pipe(pe(e),ou(s),ae(r=>r[1])).subscribe(r=>r.focus())})};var yZ=new Date(1882,10,12),wZ=new Date(2174,10,25);var CZ=1e3*60*60*24;var b_=1080,xB=24*b_,EB=12*b_+793,xZ=29*xB+EB,EZ=11*b_+204;var fD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var pD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})(),SB=(()=>{class n{constructor(){this._ngbConfig=P(oD),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ea=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}};var DB=(()=>{class n{constructor(){this._document=P(mt)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,s=i.style,{overflow:r,paddingRight:o}=s;if(e>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);s.paddingRight=`${a+e}px`}return s.overflow="hidden",()=>{e>0&&(s.paddingRight=o),s.overflow=r}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),MB=(()=>{class n{constructor(){this._nativeElement=P(ot).nativeElement,this._zone=P(Pe)}ngOnInit(){this._zone.onStable.asObservable().pipe(dn(1)).subscribe(()=>{as(this._zone,this._nativeElement,(e,i)=>{i&&__(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return as(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,s){i&2&&(pd("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),$n("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[No],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})(),_h=class{update(t){}close(t){}dismiss(t){}},AB=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],TB=["animation","backdropClass"],g_=class{_applyWindowOptions(t,e){AB.forEach(i=>{Nr(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){TB.forEach(i=>{Nr(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(pe(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(pe(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,s){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Be,this._dismissed=new Be,this._hidden=new Be,t.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let e=this._beforeDismiss();_B(e)?e.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):e!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Z(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Aa(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},m_=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(m_||{}),IB=(()=>{class n{constructor(){this._document=P(mt),this._elRef=P(ot),this._zone=P(Pe),this._closed$=new Be,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new we,this.shown=new Be,this.hidden=new Be}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":aD(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(dn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=as(this._zone,e,()=>e.classList.remove("show"),i),r=as(this._zone,this._dialogEl.nativeElement,()=>{},i),o=Aa(s,r);return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){let e={animation:this.animation,runningTransition:"continue"},i=as(this._zone,this._elRef.nativeElement,(r,o)=>{o&&__(r),r.classList.add("show")},e),s=as(this._zone,this._dialogEl.nativeElement,()=>{},e);Aa(i,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ke(e,"keydown").pipe(pe(this._closed$),st(s=>s.which===os.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(m_.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;ke(this._dialogEl.nativeElement,"mousedown").pipe(pe(this._closed$),vt(()=>i=!1),Bt(()=>ke(e,"mouseup").pipe(pe(this._closed$),dn(1))),st(({target:s})=>e===s)).subscribe(()=>{i=!0}),ke(e,"click").pipe(pe(this._closed$)).subscribe(({target:s})=>{e===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(m_.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let i=e.querySelector("[ngbAutofocus]"),s=hD(e)[0];(i||s||e).focus()}}_restoreFocus(){let e=this._document.body,i=this._elWithFocus,s;i&&i.focus&&e.contains(i)?s=i:s=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&as(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,s){if(i&1&&nn(dB,7),i&2){let r;xt(r=Et())&&(s._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,s){i&2&&(Un("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),pd("modal d-block"+(s.windowClass?" "+s.windowClass:"")),$n("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[No],ngContentSelectors:cB,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,s){i&1&&(Nx(),C(0,"div",1,0)(2,"div",2),kx(3),w()()),i&2&&pd("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),PB=(()=>{class n{constructor(){this._applicationRef=P(es),this._injector=P($t),this._environmentInjector=P(Ct),this._document=P(mt),this._scrollBar=P(DB),this._activeWindowCmptHasChanged=new Be,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new we;let e=P(Pe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];CB(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,s){let r=s.container instanceof HTMLElement?s.container:Nr(s.container)?this._document.querySelector(s.container):this._document.body;if(!r)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let o=new _h;e=s.injector||e;let a=e.get(Ct,null)||this._environmentInjector,l=this._getContentRef(e,a,i,o,s),c=s.backdrop!==!1?this._attachBackdrop(r):void 0,u=this._attachWindowComponent(r,l.nodes),d=new g_(u,l,c,s.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(u),d.hidden.pipe(dn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),o.close=h=>{d.close(h)},o.dismiss=h=>{d.dismiss(h)},o.update=h=>{d.update(h)},d.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),c&&c.instance&&c.changeDetectorRef.detectChanges(),u.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=xd(MB,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let s=xd(IB,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(s.hostView),e.appendChild(s.location.nativeElement),s}_getContentRef(e,i,s,r,o){return s?s instanceof xi?this._createFromTemplateRef(s,r):aD(s)?this._createFromString(s):this._createFromComponent(e,i,s,r,o):new ea([])}_createFromTemplateRef(e,i){let s={$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}},r=e.createEmbeddedView(s);return this._applicationRef.attachView(r),new ea([r.rootNodes],r)}_createFromString(e){let i=this._document.createTextNode(`${e}`);return new ea([[i]])}_createFromComponent(e,i,s,r,o){let a=$t.create({providers:[{provide:_h,useValue:r}],parent:e}),l=xd(s,{environmentInjector:i,elementInjector:a}),c=l.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new ea([[c]],l.hostView,l)}_setAriaHidden(e){let i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(s=>{s!==e&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let i=()=>{let s=this._modalRefs.indexOf(e);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ls=(()=>{class n{constructor(){this._injector=P($t),this._modalStack=P(PB),this._config=P(SB)}open(e,i={}){let s=L(ue(L({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,e,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({providers:[ls]})}}return n})(),OB=(()=>{class n{constructor(){this._ngbConfig=P(oD),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mD=n=>Nr(n)&&n!=="",RB=0,v_=(()=>{class n{constructor(){this.templateRef=P(xi)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["ng-template","ngbNavContent",""]],standalone:!0})}}return n})(),_D=(()=>{class n{constructor(e){this.role=e,this.nav=P(kl)}static{this.\u0275fac=function(i){return new(i||n)(Cr("role"))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(i,s){i&2&&Un("role",s.role?s.role:s.nav.roles?"presentation":void 0)},standalone:!0})}}return n})(),bh=(()=>{class n{constructor(){this._nav=P(kl),this._nativeElement=P(ot).nativeElement,this.disabled=!1,this.shown=new we,this.hidden=new we}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){Nr(this.domId)||(this.domId=`ngb-nav-${RB++}`)}get active(){return this._nav.activeId===this.id}get id(){return mD(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(Nr(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngbNavItem",""]],contentQueries:function(i,s,r){if(i&1&&Ka(r,v_,4),i&2){let o;xt(o=Et())&&(s.contentTpls=o)}},hostVars:2,hostBindings:function(i,s){i&2&&$n("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[Te.None,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0})}}return n})(),kl=(()=>{class n{constructor(e){this.role=e,this._config=P(OB),this._cd=P(ci),this._document=P(mt),this._nativeElement=P(ot).nativeElement,this.destroyRef=P(xr),this._navigatingWithKeyboard=!1,this.activeIdChange=new we,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new we,this.hidden=new we,this.navItemChange$=new Be,this.navChange=new we}click(e){e.disabled||this._updateActiveId(e.id)}onFocusout({relatedTarget:e}){this._nativeElement.contains(e)||(this._navigatingWithKeyboard=!1)}onKeyDown(e){if(this.roles!=="tablist"||!this.keyboard)return;let i=e.which,s=this.links.filter(a=>!a.navItem.disabled),{length:r}=s,o=-1;if(s.forEach((a,l)=>{a.nativeElement===this._document.activeElement&&(o=l)}),r){switch(i){case os.ArrowUp:case os.ArrowLeft:o=(o-1+r)%r;break;case os.ArrowRight:case os.ArrowDown:o=(o+1)%r;break;case os.Home:o=0;break;case os.End:o=r-1;break}this.keyboard==="changeWithArrows"&&this.select(s[o].navItem.id),s[o].nativeElement.focus(),this._navigatingWithKeyboard=!0,e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!Nr(this.activeId)){let e=this.items.first?this.items.first.id:null;mD(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(gh(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}_updateActiveId(e,i=!0){if(this.activeId!==e){let s=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{s=!0}}),s||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(i=>i.id===e)||null}static{this.\u0275fac=function(i){return new(i||n)(Cr("role"))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngbNav",""]],contentQueries:function(i,s,r){if(i&1&&(Ka(r,bh,4),Ka(r,vh,5)),i&2){let o;xt(o=Et())&&(s.items=o),xt(o=Et())&&(s.links=o)}},hostVars:6,hostBindings:function(i,s){i&1&&U("keydown.arrowLeft",function(o){return s.onKeyDown(o)})("keydown.arrowRight",function(o){return s.onKeyDown(o)})("keydown.arrowDown",function(o){return s.onKeyDown(o)})("keydown.arrowUp",function(o){return s.onKeyDown(o)})("keydown.Home",function(o){return s.onKeyDown(o)})("keydown.End",function(o){return s.onKeyDown(o)})("focusout",function(o){return s.onFocusout(o)}),i&2&&(Un("aria-orientation",s.orientation==="vertical"&&s.roles==="tablist"?"vertical":void 0)("role",s.role?s.role:s.roles?"tablist":void 0),$n("nav",!0)("flex-column",s.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[tn]})}}return n})(),vh=(()=>{class n{constructor(e){this.role=e,this.navItem=P(bh),this.nav=P(kl),this.nativeElement=P(ot).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(i){return new(i||n)(Cr("role"))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(i,s){i&2&&(gd("id",s.navItem.domId),Un("role",s.role?s.role:s.nav.roles?"tab":void 0)("tabindex",s.tabindex)("aria-controls",s.navItem.isPanelInDom()?s.navItem.panelDomId:null)("aria-selected",s.navItem.active)("aria-disabled",s.navItem.disabled),$n("nav-link",!0)("nav-item",s.navItem.isNgContainer())("active",s.navItem.active)("disabled",s.navItem.disabled))},standalone:!0})}}return n})();var bD=(()=>{class n extends vh{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=oi(n)))(s||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostBindings:function(i,s){i&1&&U("click",function(o){return s.nav.click(s.navItem),o.preventDefault()})},standalone:!0,features:[zt]})}}return n})(),NB=({classList:n})=>(n.remove("show"),()=>n.remove("active")),kB=(n,t)=>{t&&__(n),n.classList.add("show")},sD=(()=>{class n{constructor(){this.nativeElement=P(ot).nativeElement}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,s){i&2&&(gd("id",s.item.panelDomId),Un("role",s.role?s.role:s.nav.roles?"tabpanel":void 0)("aria-labelledby",s.item.domId),$n("fade",s.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0})}}return n})(),vD=(()=>{class n{constructor(){this._cd=P(ci),this._ngZone=P(Pe),this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(gh(this.nav.destroyRef),Ta(this._activePane?.item||null),jp(),zp(1)).subscribe(e=>{let i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?as(this._ngZone,this._activePane.nativeElement,NB,i).subscribe(()=>{let s=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),as(this._ngZone,this._activePane.nativeElement,kB,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),s&&(s.hidden.emit(),this.nav.hidden.emit(s.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show"),this._activePane?.nativeElement.classList.add("active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,s){if(i&1&&nn(sD,5),i&2){let r;xt(r=Et())&&(s._panes=r)}},hostVars:2,hostBindings:function(i,s){i&2&&$n("tab-content",!0)},inputs:{paneRole:"paneRole",nav:[Te.None,"ngbNavOutlet","nav"]},standalone:!0,features:[No],attrs:hB,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,s){i&1&&Px(0,gB,1,1,null,null,Ix),i&2&&Ox(s.nav.items)},dependencies:[sD,sE],encapsulation:2,changeDetection:0})}}return n})();var yD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var wD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var CD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var xD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var ED=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var SD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var DD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var MD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var AD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var SZ=new K("live announcer delay",{providedIn:"root",factory:()=>100});var TD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})();var ID=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({})}}return n})(),FB=[lD,cD,uD,dD,fD,pD,gD,yD,ID,wD,CD,xD,ED,SD,DD,MD,AD,TD],PD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({imports:[FB,lD,cD,uD,dD,fD,pD,gD,yD,ID,wD,CD,xD,ED,SD,DD,MD,AD,TD]})}}return n})();var ra={};ew(ra,{AbortException:()=>Nj,AnnotationEditorLayer:()=>kj,AnnotationEditorParamsType:()=>Fj,AnnotationEditorType:()=>Xb,AnnotationEditorUIManager:()=>Lj,AnnotationLayer:()=>Vj,AnnotationMode:()=>Bj,ColorPicker:()=>jj,DOMSVGFactory:()=>Hj,DrawLayer:()=>Uj,FeatureTest:()=>$j,GlobalWorkerOptions:()=>Qb,ImageKind:()=>zj,InvalidPDFException:()=>Wj,MissingPDFException:()=>Gj,OPS:()=>qj,OutputScale:()=>Yj,PDFDataRangeTransport:()=>Kj,PDFDateString:()=>Xj,PDFWorker:()=>Qj,PasswordResponses:()=>Zj,PermissionFlag:()=>Jj,PixelsPerInch:()=>eH,RenderingCancelledException:()=>tH,TextLayer:()=>nH,UnexpectedResponseException:()=>iH,Util:()=>sH,VerbosityLevel:()=>Zb,XfaLayer:()=>rH,build:()=>oH,createValidAbsoluteUrl:()=>aH,fetchData:()=>lH,getDocument:()=>Jb,getFilenameFromUrl:()=>cH,getPdfFilenameFromUrl:()=>uH,getXfaPageViewport:()=>dH,isDataScheme:()=>hH,isPdfFile:()=>fH,noContextMenu:()=>pH,normalizeUnicode:()=>gH,setLayerDimensions:()=>mH,shadow:()=>_H,version:()=>ic});var Hl={};Hl.d=(n,t)=>{for(var e in t)Hl.o(t,e)&&!Hl.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Hl.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var le=globalThis.pdfjsLib={};Hl.d(le,{AbortException:()=>ps,AnnotationEditorLayer:()=>Rj,AnnotationEditorParamsType:()=>oe,AnnotationEditorType:()=>ve,AnnotationEditorUIManager:()=>ql,AnnotationLayer:()=>Fb,AnnotationMode:()=>Ws,ColorPicker:()=>of,DOMSVGFactory:()=>Zl,DrawLayer:()=>Ub,FeatureTest:()=>kt,GlobalWorkerOptions:()=>Fr,ImageKind:()=>Dh,InvalidPDFException:()=>Th,MissingPDFException:()=>fs,OPS:()=>di,OutputScale:()=>Gl,PDFDataRangeTransport:()=>Wh,PDFDateString:()=>Ph,PDFWorker:()=>ia,PasswordResponses:()=>HB,PermissionFlag:()=>jB,PixelsPerInch:()=>Gs,RenderingCancelledException:()=>Wl,TextLayer:()=>Xl,UnexpectedResponseException:()=>sa,Util:()=>X,VerbosityLevel:()=>lf,XfaLayer:()=>Yh,build:()=>Pj,createValidAbsoluteUrl:()=>WB,fetchData:()=>hf,getDocument:()=>Mj,getFilenameFromUrl:()=>JB,getPdfFilenameFromUrl:()=>ej,getXfaPageViewport:()=>tj,isDataScheme:()=>ff,isPdfFile:()=>Wb,noContextMenu:()=>Qn,normalizeUnicode:()=>XB,setLayerDimensions:()=>Lr,shadow:()=>Ie,version:()=>Ij});var Kt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qD=[1,0,0,1,0,0],S_=[.001,0,0,.001,0,0],LB=1e7,Sh=1.35,VB=.35,MZ=VB/Sh,In={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ws={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},BB="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},jB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},St={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var Ll={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var lf={ERRORS:0,WARNINGS:1,INFOS:5},di={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},HB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},cf=lf.WARNINGS;function UB(n){Number.isInteger(n)&&(cf=n)}function $B(){return cf}function uf(n){cf>=lf.INFOS&&console.log(`Info: ${n}`)}function Ee(n){cf>=lf.WARNINGS&&console.log(`Warning: ${n}`)}function Ze(n){throw new Error(n)}function Dt(n,t){n||Ze(t)}function zB(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function WB(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=KB(n)}catch{}let i=t?new URL(n,t):new URL(n);if(zB(i))return i}catch{}return null}function Ie(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}var qs=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}(),Ul=class extends qs{constructor(t,e){super(t,"PasswordException"),this.code=e}},$l=class extends qs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},Th=class extends qs{constructor(t){super(t,"InvalidPDFException")}},fs=class extends qs{constructor(t){super(t,"MissingPDFException")}},sa=class extends qs{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},D_=class extends qs{constructor(t){super(t,"FormatError")}},ps=class extends qs{constructor(t){super(t,"AbortException")}};function YD(n){(typeof n!="object"||n?.length===void 0)&&Ze("Invalid argument for bytesToString");let t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);let i=[];for(let s=0;s<t;s+=e){let r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function df(n){typeof n!="string"&&Ze("Invalid argument for stringToBytes");let t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function GB(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function $b(n){let t=Object.create(null);for(let[e,i]of n)t[e]=i;return t}function qB(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function YB(){try{return new Function(""),!0}catch{return!1}}var kt=class{static get isLittleEndian(){return Ie(this,"isLittleEndian",qB())}static get isEvalSupported(){return Ie(this,"isEvalSupported",YB())}static get isOffscreenCanvasSupported(){return Ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Ie(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Ie(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Ie(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},y_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),X=class{static makeHexColor(t,e,i){return`#${y_[t]}${y_[e]}${y_[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){let i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){let i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,r]}static getAxialAlignedBoundingBox(t,e){let i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){let e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;let r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static#e(t,e,i,s,r,o,a,l,c,u){if(c<=0||c>=1)return;let d=1-c,h=c*c,f=h*c,p=d*(d*(d*t+3*c*e)+3*h*i)+f*s,g=d*(d*(d*r+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(t,e,i,s,r,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(t,e,i,s,r,o,a,l,-d/u,h);return}let f=u**2-4*d*c;if(f<0)return;let p=Math.sqrt(f),g=2*c;this.#e(t,e,i,s,r,o,a,l,(-u+p)/g,h),this.#e(t,e,i,s,r,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(t,e,i,s,r,o,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],this.#t(t,i,r,a,e,s,o,l,3*(-t+3*(i-r)+a),6*(t-2*i+r),3*(i-t),c),this.#t(t,i,r,a,e,s,o,l,3*(-e+3*(s-o)+l),6*(e-2*s+o),3*(s-e),c),c}};function KB(n){return decodeURIComponent(escape(n))}var w_=null,OD=null;function XB(n){return w_||(w_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,OD=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(w_,(t,e,i)=>e?e.normalize("NFKC"):OD.get(i))}function QB(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let t=0;t<32;t++)n[t]=Math.floor(Math.random()*255);return YD(n)}var zb="pdfjs_internal_id_",cs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function ZB(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(YD(n))}var ds="http://www.w3.org/2000/svg",Gs=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function hf(n,t="text"){return O(this,null,function*(){if(jl(n,document.baseURI)){let e=yield fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{let s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})})}var zl=class n{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=r;let a=(t[2]+t[0])/2,l=(t[3]+t[1])/2,c,u,d,h;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h);let f,p,g,m;c===0?(f=Math.abs(l-t[1])*e+s,p=Math.abs(a-t[0])*e+r,g=(t[3]-t[1])*e,m=(t[2]-t[0])*e):(f=Math.abs(a-t[0])*e+s,p=Math.abs(l-t[1])*e+r,g=(t[2]-t[0])*e,m=(t[3]-t[1])*e),this.transform=[c*e,u*e,d*e,h*e,f-c*e*a-d*e*l,p-u*e*a-h*e*l],this.width=g,this.height=m}get rawDims(){let{viewBox:t}=this;return Ie(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new n({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return X.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){let e=X.applyTransform([t[0],t[1]],this.transform),i=X.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return X.applyInverseTransform([t,e],this.transform)}},Wl=class extends qs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function ff(n){let t=n.length,e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Wb(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function JB(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function ej(n,t="document.pdf"){if(typeof n!="string")return t;if(ff(n))return Ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n),r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}var Ih=class{started=Object.create(null);times=[];time(t){t in this.started&&Ee(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ee(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:i}of this.times)e=Math.max(i.length,e);for(let{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}};function jl(n,t){try{let{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function Qn(n){n.preventDefault()}function RD(n){console.log("Deprecated API usage: "+n)}var Ph=class{static#e;static toDateObject(t){if(!t||typeof t!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#e.exec(t);if(!e)return null;let i=parseInt(e[1],10),s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(i,s,r,o,a,l))}};function tj(n,{scale:t=1,rotation:e=0}){let{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new zl({viewBox:r,scale:t,rotation:e})}function Gb(n){if(n.startsWith("#")){let t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ee(`Not a valid color format: "${n}"`),[0,0,0])}function nj(n){let t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(let e of n.keys()){t.style.color=e;let i=window.getComputedStyle(t).color;n.set(e,Gb(i))}t.remove()}function lt(n){let{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function us(n){let{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function Lr(n,t,e=!1,i=!0){if(t instanceof zl){let{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,a=kt.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}i&&n.setAttribute("data-main-rotation",t.rotation)}var Gl=class{constructor(){let t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},M_=class n{#e=null;#t=null;#n;#i=null;#s=null;static#r=null;constructor(t){this.#n=t,n.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let t=this.#e=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Qn,{signal:e}),t.addEventListener("pointerdown",n.#l,{signal:e});let i=this.#i=document.createElement("div");i.className="buttons",t.append(i);let s=this.#n.toolbarPosition;if(s){let{style:r}=t,o=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}get div(){return this.#e}static#l(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#u(t){this.#n._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#a(t){let e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Qn,{signal:e})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#d(){let{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",n.#r[t]),this.#a(i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#o(){let t=document.createElement("div");return t.className="divider",t}addAltText(t){return O(this,null,function*(){let e=yield t.render();this.#a(e),this.#i.prepend(e,this.#o),this.#s=t})}addColorPicker(t){this.#t=t;let e=t.renderButton();this.#a(e),this.#i.prepend(e,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},A_=class{#e=null;#t=null;#n;constructor(t){this.#n=t}#i(){let t=this.#t=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Qn,{signal:this.#n._signal});let e=this.#e=document.createElement("div");return e.className="buttons",t.append(e),this.#r(),t}#s(t,e){let i=0,s=0;for(let r of t){let o=r.y+r.height;if(o<i)continue;let a=r.x+(e?r.width:0);if(o>i){s=a,i=o;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,i]}show(t,e,i){let[s,r]=this.#s(e,i),{style:o}=this.#t||=this.#i();t.append(this.#t),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){let t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=this.#n._signal;t.addEventListener("contextmenu",Qn,{signal:i}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(t)}};function Oh(n,t,e){for(let i of e)t.addEventListener(i,n[i].bind(n))}function ij(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var T_=class{#e=0;get id(){return`${BB}${this.#e++}`}},I_=class n{#e=QB();#t=0;#n=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;let r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ie(this,"_isSVGFittingCanvas",r)}#i(t,e){return O(this,null,function*(){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(i.url=e,s=yield hf(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){let r=n._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},o.onload=()=>O(this,null,function*(){let d=i.svgUrl=o.result;a.src=(yield r)?`${d}#svgView(preserveAspectRatio(none))`:d}),a.onerror=o.onerror=u});o.readAsDataURL(s),yield l}else i.bitmap=yield createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i})}getFromFile(t){return O(this,null,function*(){let{lastModified:e,name:i,size:s,type:r}=t;return this.#i(`${e}_${i}_${s}_${r}`,t)})}getFromUrl(t){return O(this,null,function*(){return this.#i(t,t)})}getFromBlob(t,e){return O(this,null,function*(){let i=yield e;return this.#i(t,i)})}getFromId(t){return O(this,null,function*(){this.#n||=new Map;let e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;let s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){let e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;let e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:i}=e;if(!e.url&&!e.file){let s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=s.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#e}_`)}},P_=class{#e=[];#t=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&t(),this.#t)return;let l={cmd:t,undo:e,post:i,type:r};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(l);return}if(o&&this.#e[this.#i].type===r){a&&(l.undo=this.#e[this.#i].undo),this.#e[this.#i]=l;return}let c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#i===-1)return;this.#t=!0;let{undo:t,post:e}=this.#e[this.#i];t(),e?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;let{cmd:t,post:e}=this.#e[this.#i];t(),e?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}},Vr=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=kt.platform;for(let[i,s,r={}]of t)for(let o of i){let a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#e(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let i=this.callbacks.get(this.#e(e));if(!i)return;let{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...o,e)(),r||(e.stopPropagation(),e.preventDefault()))}},O_=class n{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return nj(t),Ie(this,"_colors",t)}convert(t){let e=Gb(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return n._colorsMapping.get(i);return e}getHexCode(t){let e=this._colors.get(t);return e?X.makeHexColor(...e):t}},ql=(()=>{class n{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#s=null;#r=null;#l=null;#c=new P_;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#_=!1;#m=null;#b=null;#y=null;#x=null;#w=!1;#C=null;#I=new T_;#M=!1;#E=!1;#A=null;#D=null;#P=null;#R=null;#S=ve.NONE;#v=new Set;#T=null;#O=null;#L=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#F=null;#V=null;#B=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=n.prototype,i=a=>a.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ie(this,"_keyboardManager",new Vr([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#V.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(e,i,s,r,o,a,l,c,u,d,h){let f=this._signal=this.#e.signal;this.#V=e,this.#B=i,this.#s=s,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:f}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),r._on("setpreference",this.onSetPreference.bind(this),{signal:f}),r._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),this.#ee(),this.#se(),this.#q(),this.#r=o.annotationStorage,this.#m=o.filterFactory,this.#O=a,this.#x=l||null,this.#f=c,this.#g=u,this.#_=d,this.#R=h||null,this.viewParameters={realScale:Gs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#N?.resolve(),this.#N=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#v.clear(),this.#c.destroy(),this.#s?.destroy(),this.#C?.hide(),this.#C=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#R}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#_}get hcmFilter(){return Ie(this,"hcmFilter",this.#O?this.#m.addHCMFilter(this.#O.foreground,this.#O.background):"none")}get direction(){return Ie(this,"direction",getComputedStyle(this.#V).direction)}get highlightColors(){return Ie(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(e=>e.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return Ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#P=e}editAltText(e,i=!1){this.#s?.editAltText(this,e,i)}switchToMode(e,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,i){this._eventBus.dispatch("setpreference",{source:this,name:e,value:i})}onSetPreference({name:e,value:i}){switch(e){case"enableNewAltTextWhenAddingImage":this.#_=i;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#V.focus()}findParent(e,i){for(let s of this.#i.values()){let{x:r,y:o,width:a,height:l}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&i>=o&&i<=o+l)return s}return null}disableUserSelect(e=!1){this.#B.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Gs.PDF_TO_CSS_UNITS;for(let i of this.#p)i.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#G(e){let{currentLayer:i}=this;if(i.hasTextLayer(e))return i;for(let s of this.#i.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e=""){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a}=i,l=i.toString(),u=this.#z(i).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;i.empty();let h=this.#G(u),f=this.#S===ve.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ve.HIGHLIGHT,p);return}p()}#Z(){let e=document.getSelection();if(!e||e.isCollapsed)return;let s=this.#z(e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#C||=new A_(this),this.#C.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#J(){let e=document.getSelection();if(!e||e.isCollapsed){this.#T&&(this.#C?.hide(),this.#T=null,this.#k({hasSelectedText:!1}));return}let{anchorNode:i}=e;if(i===this.#T)return;let r=this.#z(e).closest(".textLayer");if(!r){this.#T&&(this.#C?.hide(),this.#T=null,this.#k({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#T=i,this.#k({hasSelectedText:!0}),!(this.#S!==ve.HIGHLIGHT&&this.#S!==ve.NONE)&&(this.#S===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){let o=this.#S===ve.HIGHLIGHT?this.#G(r):null;o?.toggleDrawing();let a=new AbortController,l=this.combinedSignal(a),c=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#W(e=""){this.#S===ve.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#Z()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#y)return;this.#y=new AbortController;let e=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let i of this.#v)if(i.div.contains(e)){this.#D=[i,e],i._focusEventsAllowed=!1;break}}focus(){if(!this.#D)return;let[e,i]=this.#D;this.#D=null,i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#q(){if(this.#A)return;this.#A=new AbortController;let e=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ie(){this.#A?.abort(),this.#A=null}#Y(){if(this.#u)return;this.#u=new AbortController;let e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#K(){this.#u?.abort(),this.#u=null}#se(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#q(),this.#Y()}removeEditListeners(){this.#ie(),this.#K()}dragOver(e){for(let{type:i}of e.dataTransfer.items)for(let s of this.#h)if(s.isHandlingMimeForPasting(i)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let i of e.dataTransfer.items)for(let s of this.#h)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let i=[];for(let s of this.#v){let r=s.serialize(!0);r&&i.push(r)}i.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){return O(this,null,function*(){e.preventDefault();let{clipboardData:i}=e;for(let o of i.items)for(let a of this.#h)if(a.isHandlingMimeForPasting(o.type)){a.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){Ee(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();let r=this.currentLayer;try{let o=[];for(let c of s){let u=yield r.deserialize(c);if(!u)return;o.push(u)}let a=()=>{for(let c of o)this.#X(c);this.#Q(o)},l=()=>{for(let c of o)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(o){Ee(`paste: "${o.message}".`)}})}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==ve.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#k(e){Object.entries(e).some(([s,r])=>this.#H[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#S===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[oe.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#Y(),this.#k({isEditing:this.#S!==ve.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#K(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(let i of this.#h)this.#U(i.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#i.set(e.pageIndex,e),this.#M?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}updateMode(e,i=null,s=!1){return O(this,null,function*(){if(this.#S!==e&&!(this.#N&&(yield this.#N.promise,!this.#N))){if(this.#N=Promise.withResolvers(),this.#S=e,e===ve.NONE){this.setEditingState(!1),this.#oe(),this.#N.resolve();return}this.setEditingState(!0),yield this.#re(),this.unselectAll();for(let r of this.#i.values())r.updateMode(e);if(!i){s&&this.addNewEditorFromKeyboard(),this.#N.resolve();return}for(let r of this.#n.values())r.annotationElementId===i?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#N.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,i){if(this.#h){switch(e){case oe.CREATE:this.currentLayer.addNewEditor();return;case oe.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(i);break;case oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(e,i),this.showAllEditors("highlight",i);break}for(let s of this.#v)s.updateParams(e,i);for(let s of this.#h)s.updateDefaultParams(e,i)}}showAllEditors(e,i,s=!1){for(let o of this.#n.values())o.editorType===e&&o.show(i);(this.#L?.get(oe.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#U([[oe.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(e=!1){if(this.#E!==e){this.#E=e;for(let i of this.#i.values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}#re(){return O(this,null,function*(){if(!this.#M){this.#M=!0;let e=[];for(let i of this.#i.values())e.push(i.enable());yield Promise.all(e);for(let i of this.#n.values())i.enable()}})}#oe(){if(this.unselectAll(),this.#M){this.#M=!1;for(let e of this.#i.values())e.disable();for(let e of this.#n.values())e.disable()}}getEditors(e){let i=[];for(let s of this.#n.values())s.pageIndex===e&&i.push(s);return i}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){let i=this.#i.get(e.pageIndex);i?i.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#v);return e}updateUI(e){this.#ae===e&&this.#U(e.propertiesToUpdate)}toggleSelected(e){if(this.#v.has(e)){this.#v.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#v.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){for(let i of this.#v)i!==e&&i.unselect();this.#v.clear(),this.#v.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#v.has(e)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(e){e.unselect(),this.#v.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let e=[...this.#v],i=()=>{for(let r of e)r.remove()},s=()=>{for(let r of e)this.#X(r)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(e){for(let i of this.#v)i.unselect();this.#v.clear();for(let i of e)i.isEmpty()||(this.#v.add(i),i.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#v)e.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==ve.NONE))&&this.hasSelection){for(let e of this.#v)e.unselect();this.#v.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=e,this.#j[1]+=i;let[r,o]=this.#j,a=[...this.#v],l=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(let c of a)this.#n.has(c.id)&&c.translateInPage(r,o)},undo:()=>{for(let c of a)this.#n.has(c.id)&&c.translateInPage(-r,-o)},mustExec:!1})},l);for(let c of a)c.translateInPage(e,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(let e of this.#v)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);let e=this.#o;this.#o=null;let i=!1;for(let[{x:r,y:o,pageIndex:a},l]of e)l.newX=r,l.newY=o,l.newPageIndex=a,i||=r!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!i)return!1;let s=(r,o,a,l)=>{if(this.#n.has(r.id)){let c=this.#i.get(l);c?r._setParentAndPosition(c,o,a):(r.pageIndex=l,r.x=o,r.y=a)}};return this.addCommands({cmd:()=>{for(let[r,{newX:o,newY:a,newPageIndex:l}]of e)s(r,o,a,l)},undo:()=>{for(let[r,{savedX:o,savedY:a,savedPageIndex:l}]of e)s(r,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(this.#o)for(let s of this.#o.keys())s.drag(e,i)}rebuild(e){if(e.parent===null){let i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#S}get imageManager(){return Ie(this,"imageManager",new I_)}getSelectionBoxes(e){if(!e)return null;let i=document.getSelection();for(let u=0,d=i.rangeCount;u<d;u++)if(!e.contains(i.getRangeAt(u).commonAncestorContainer))return null;let{x:s,y:r,width:o,height:a}=e.getBoundingClientRect(),l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-r)/a,y:1-(u+h-s)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-s)/o,y:1-(d+f-r)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-r)/a,y:(u-s)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-s)/o,y:(d-r)/a,width:h/o,height:f/a});break}let c=[];for(let u=0,d=i.rangeCount;u<d;u++){let h=i.getRangeAt(u);if(!h.collapsed)for(let{x:f,y:p,width:g,height:m}of h.getClientRects())g===0||m===0||c.push(l(f,p,g,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:i}){(this.#l||=new Map).set(e,i)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){let i=this.#l?.get(e.data.id);if(!i)return;let s=this.#r.getRawValue(i);s&&(this.#S===ve.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}}return n})(),ND=(()=>{class n{#e=null;#t=!1;#n=null;#i=null;#s=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,n.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){n._l10n??=e}render(){return O(this,null,function*(){let e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";let i=this.#i=document.createElement("span");e.append(i),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",n.#h.missing),i.setAttribute("data-l10n-id",n.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let s=this.#u._uiManager._signal;e.addEventListener("contextmenu",Qn,{signal:s}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});let r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#l=!0,r(o))},{signal:s}),yield this.#f(),e})}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}setGuessedText(e){return O(this,null,function*(){this.#e===null&&(this.#a=e,this.#d=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())})}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){let i=this.#c=document.createElement("div");i.className="noAltTextBadge",this.#u.div.append(i)}this.#c.classList.toggle("hidden",!e)}serialize(e){let i=this.#e;return!e&&this.#a===i&&(i=this.#d),{altText:i,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#a=s,this.#d=r),!(this.#e===e&&this.#t===i)&&(o||(this.#e=e,this.#t=i),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#c?.remove(),this.#c=null}#f(){return O(this,null,function*(){let e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",n.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",n.#h[`${this.#p}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#s;if(!i){this.#s=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#u.id}`;let r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:o})}this.#t?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#e),i.parentNode||e.append(i),this.#u.getImageForAltText()?.setAttribute("aria-describedby",i.id)})}}return n})(),He=class n{#e=null;#t=null;#n=null;#i=!1;#s=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#_=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#b=!1;#y=n._zIndex++;static _borderLineWidth=-1;static _colorManager=new O_;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=n.prototype._resizeWithKeyboard,e=ql.TRANSLATE_SMALL,i=ql.TRANSLATE_BIG;return Ie(this,"_resizerKeyboardManager",new Vr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],n.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;let{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];let[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new R_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(n._l10n??=t,n._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),n._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#b}set _isDraggable(t){this.#b=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#y}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#L(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){let[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}#x([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()}translate(t,e){this.#x(this.parentDimensions,t,e)}translateInPage(t,e){this.#d||=[this.x,this.y],this.#x(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#d||=[this.x,this.y];let[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this,[a,l]=this.getBaseTranslation();r+=a,o+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:i}=n,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let[e,i]=this.pageDimensions,{x:s,y:r,width:o,height:a}=this;if(o*=e,a*=i,s*=e,r*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-o,s)),r=Math.max(0,Math.min(i-a,r));break;case 90:s=Math.max(0,Math.min(e-a,s)),r=Math.min(i,Math.max(o,r));break;case 180:s=Math.min(e,Math.max(o,s)),r=Math.min(i,Math.max(a,r));break;case 270:s=Math.min(e,Math.max(a,s)),r=Math.max(0,Math.min(i-o,r));break}this.x=s/=e,this.y=r/=i;let[l,c]=this.getBaseTranslation();s+=l,r+=c;let{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}static#w(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return n.#w(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return n.#w(t,e,360-this.parentRotation)}#C(t){switch(t){case 90:{let[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){let[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){let{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!this.#s&&e.endsWith("%");if(s&&r)return;let[o,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#s&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#I(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let i of t){let s=document.createElement("div");this.#r.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#M.bind(this,i),{signal:e}),s.addEventListener("contextmenu",Qn,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#r)}#M(t,e){e.preventDefault();let{isMac:i}=kt.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);let s=this._isDraggable;this._isDraggable=!1;let r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#A.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Qn,{signal:o});let a=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let f=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=h,this.#E(a,l,c,u)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#E(t,e,i,s){let r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===i&&l===s||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=r,this.y=o;let[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;let[c,u]=this.parentDimensions;this.setDims(c*i,u*s),this.fixAndSetPosition()},mustExec:!0})}#A(t,e){let[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=n.MIN_SIZE/i,u=n.MIN_SIZE/s,d=$=>Math.round($*1e4)/1e4,h=this.#C(this.rotation),f=($,ne)=>[h[0]*$+h[2]*ne,h[1]*$+h[3]*ne],p=this.#C(360-this.rotation),g=($,ne)=>[p[0]*$+p[2]*ne,p[1]*$+p[3]*ne],m,_,b=!1,y=!1;switch(t){case"topLeft":b=!0,m=($,ne)=>[0,0],_=($,ne)=>[$,ne];break;case"topMiddle":m=($,ne)=>[$/2,0],_=($,ne)=>[$/2,ne];break;case"topRight":b=!0,m=($,ne)=>[$,0],_=($,ne)=>[0,ne];break;case"middleRight":y=!0,m=($,ne)=>[$,ne/2],_=($,ne)=>[0,ne/2];break;case"bottomRight":b=!0,m=($,ne)=>[$,ne],_=($,ne)=>[0,0];break;case"bottomMiddle":m=($,ne)=>[$/2,ne],_=($,ne)=>[$/2,0];break;case"bottomLeft":b=!0,m=($,ne)=>[0,ne],_=($,ne)=>[$,0];break;case"middleLeft":y=!0,m=($,ne)=>[0,ne/2],_=($,ne)=>[$,ne/2];break}let v=m(a,l),x=_(a,l),S=f(...x),D=d(r+S[0]),A=d(o+S[1]),E=1,I=1,[N,W]=this.screenToPageTranslation(e.movementX,e.movementY);if([N,W]=g(N/i,W/s),b){let $=Math.hypot(a,l);E=I=Math.max(Math.min(Math.hypot(x[0]-v[0]-N,x[1]-v[1]-W)/$,1/a,1/l),c/a,u/l)}else y?E=Math.max(c,Math.min(1,Math.abs(x[0]-v[0]-N)))/a:I=Math.max(u,Math.min(1,Math.abs(x[1]-v[1]-W)))/l;let Q=d(a*E),ee=d(l*I);S=f(..._(Q,ee));let z=D-S[0],ce=A-S[1];this.width=Q,this.height=ee,this.x=z,this.y=ce,this.setDims(i*Q,s*ee),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){return O(this,null,function*(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new M_(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return O(this,null,function*(){this.#n||(ND.initialize(n._l10n),this.#n=new ND(this),this.#e&&(this.#n.data=this.#e,this.#e=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(t){return O(this,null,function*(){yield this.#n?.setGuessedText(t)})}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#R();let[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);let[i,s]=this.getInitialTranslation();return this.translate(i,s),Oh(this,this.div,["pointerdown"]),this.div}pointerdown(t){let{isMac:e}=kt.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#P(t);return}this.#D(t)}get isSelected(){return this._uiManager.isSelected(this)}#D(t){let{isMac:e}=kt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let i=new AbortController,s=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),this.#g=t.clientX,this.#_=t.clientY;let o=a=>{let{clientX:l,clientY:c}=a,[u,d]=this.screenToPageTranslation(l-this.#g,c-this.#_);this.#g=l,this.#_=c,this._uiManager.dragSelectedEditors(u,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:s})}let r=()=>{i.abort(),e&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#D(t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){let s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/s,u=e/s,d=this.x*r,h=this.y*o,f=this.width*r,p=this.height*o;switch(i){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[i,s,r,o]=t,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,e-o,a,l];case 90:return[i,e-s,l,a];case 180:return[r,e-s,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#R(){if(this.#c||!this.div)return;this.#c=new AbortController;let t=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#R()}rotate(t){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ze("An editor must be serializable")}static deserialize(t,e,i){return O(this,null,function*(){let s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,s.#e=t.accessibilityData;let[r,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(t.rect,o);return s.x=a/r,s.y=l/o,s.width=c/r,s.height=u/o,s})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(let t of this.#m.values())clearTimeout(t);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#r.classList.remove("hidden"),Oh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#r.children;if(!this.#t){this.#t=Array.from(e);let o=this.#S.bind(this),a=this.#v.bind(this),l=this._uiManager._signal;for(let c of this.#t){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#T.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",n._l10nResizer[u])}}let i=this.#t[0],s=0;for(let o of e){if(o===i)break;s++}let r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)this.#r.append(this.#r.firstChild);else if(r>s)for(let a=0;a<r-s;a++)this.#r.firstChild.before(this.#r.lastChild);let o=0;for(let a of e){let c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",n._l10nResizer[c])}}this.#O(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#S(t){n._resizerKeyboardManager.exec(this,t)}#v(t){this.#p&&t.relatedTarget?.parentNode!==this.#r&&this.#L()}#T(t){this.#u=this.#p?t:""}#O(t){if(this.#t)for(let e of this.#t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#p&&this.#A(this.#u,{movementX:t,movementY:e})}#L(){if(this.#p=!1,this.#O(-1),this.#l){let{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#l;this.#E(t,e,i,s),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(t){this.#o=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#s=!0;let i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#m||=new Map;let{action:i}=t,s=this.#m.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#m.delete(i),this.#m.size===0&&(this.#m=null)},n._telemetryTimeout),this.#m.set(i,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},R_=class extends He{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},kD=3285377520,Xn=4294901760,Ri=65535,Rh=class{constructor(t){this.h1=t?t&4294967295:kD,this.h2=t?t&4294967295:kD}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let g=0,m=t.length;g<m;g++){let _=t.charCodeAt(g);_<=255?e[i++]=_:(e[i++]=_>>>8,e[i++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s),a=0,l=0,c=this.h1,u=this.h2,d=3432918353,h=461845907,f=d&Ri,p=h&Ri;for(let g=0;g<s;g++)g&1?(a=o[g],a=a*d&Xn|a*f&Ri,a=a<<15|a>>>17,a=a*h&Xn|a*p&Ri,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&Xn|l*f&Ri,l=l<<15|l>>>17,l=l*h&Xn|l*p&Ri,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[s*4+2]<<16;case 2:a^=e[s*4+1]<<8;case 1:a^=e[s*4],a=a*d&Xn|a*f&Ri,a=a<<15|a>>>17,a=a*h&Xn|a*p&Ri,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Xn|t*36045&Ri,e=e*4283543511&Xn|((e<<16|t>>>16)*2950163797&Xn)>>>16,t^=e>>>1,t=t*444984403&Xn|t*60499&Ri,e=e*3301882366&Xn|((e<<16|t>>>16)*3120437893&Xn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},N_=Object.freeze({map:null,hash:"",transfer:void 0}),Yl=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let e of this.#n.values())if(e instanceof He)return;this.onAnnotationEditor(null)}}setValue(t,e){let i=this.#n.get(t),s=!1;if(i!==void 0)for(let[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,this.#n.set(t,e);s&&this.#i(),e instanceof He&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}getAll(){return this.#n.size>0?$b(this.#n):null}setAll(t){for(let[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Nh(this)}get serializable(){if(this.#n.size===0)return N_;let t=new Map,e=new Rh,i=[],s=Object.create(null),r=!1;for(let[o,a]of this.#n){let l=a instanceof He?a.serialize(!1,s):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(let o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:N_}get editorStats(){let t=null,e=new Map;for(let i of this.#n.values()){if(!(i instanceof He))continue;let s=i.telemetryFinalData;if(!s)continue;let{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||=Object.create(null);let o=t[r]||=new Map;for(let[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));let u=c.get(l)??0;c.set(l,u+1)}}for(let[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let t=[];for(let e of this.#n.values())!(e instanceof He)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#t={ids:new Set(t),hash:t.join(",")}}},Nh=class extends Yl{#e;constructor(t){super();let{map:e,hash:i,transfer:s}=t.serializable,r=structuredClone(e,s?{transfer:s}:null);this.#e={map:r,hash:i,transfer:s}}get print(){Ze("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Ie(this,"modifiedIds",{ids:new Set,hash:""})}},k_=class{#e=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return O(this,arguments,function*({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#e.has(t.loadedName))){if(Dt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:s,src:r,style:o}=t,a=new FontFace(s,r,o);this.addNativeFontFace(a);try{yield a.load(),this.#e.add(s),e?.(t)}catch{Ee(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ze("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return O(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{yield i.loaded}catch(s){throw Ee(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(i=>{let s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}})}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return Ie(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Kt||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ie(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Dt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){let r=i.shift();setTimeout(r.callback,0)}}let{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ie(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(v,x){return v.charCodeAt(x)<<24|v.charCodeAt(x+1)<<16|v.charCodeAt(x+2)<<8|v.charCodeAt(x+3)&255}function s(v,x,S,D){let A=v.substring(0,x),E=v.substring(x+S);return A+D+E}let r,o,a=this._document.createElement("canvas");a.width=1,a.height=1;let l=a.getContext("2d"),c=0;function u(v,x){if(++c>30){Ee("Load test font never loaded."),x();return}if(l.font="30px "+v,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(u.bind(null,v,x))}let d=`lt${Date.now()}${this.loadTestFontId++}`,h=this._loadTestFont;h=s(h,976,d.length,d);let p=16,g=1482184792,m=i(h,p);for(r=0,o=d.length-3;r<o;r+=4)m=m-g+i(d,r)|0;r<d.length&&(m=m-g+i(d+"XXX",r)|0),h=s(h,p,4,GB(m));let _=`url(data:font/opentype;base64,${btoa(h)});`,b=`@font-face {font-family:"${d}";src:${_}}`;this.insertRule(b);let y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(let v of[t.loadedName,d]){let x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=v,y.append(x)}this._document.body.append(y),u(d,()=>{y.remove(),e.complete()})}},F_=class{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(let s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${ZB(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){Ee(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,o){};let s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case cs.BEZIER_CURVE_TO:{let[a,l,c,u,d,h]=i.slice(r,r+6);s.push(f=>f.bezierCurveTo(a,l,c,u,d,h)),r+=6}break;case cs.MOVE_TO:{let[a,l]=i.slice(r,r+2);s.push(c=>c.moveTo(a,l)),r+=2}break;case cs.LINE_TO:{let[a,l]=i.slice(r,r+2);s.push(c=>c.lineTo(a,l)),r+=2}break;case cs.QUADRATIC_CURVE_TO:{let[a,l,c,u]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(a,l,c,u)),r+=4}break;case cs.RESTORE:s.push(a=>a.restore());break;case cs.SAVE:s.push(a=>a.save());break;case cs.SCALE:Dt(s.length===2,"Scale command is only valid at the third position.");break;case cs.TRANSFORM:{let[a,l,c,u,d,h]=i.slice(r,r+6);s.push(f=>f.transform(a,l,c,u,d,h)),r+=6}break;case cs.TRANSLATE:{let[a,l]=i.slice(r,r+2);s.push(c=>c.translate(a,l)),r+=2}break}return this.compiledGlyphs[e]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let l=2,c=s.length;l<c;l++)s[l](o)}}},kh=class{#e=!1;constructor({enableHWA:t=!1}){this.#e=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ze("Abstract method `_createCanvas` called.")}},L_=class extends kh{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},Fh=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return O(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetch(t){return O(this,null,function*(){Ze("Abstract method `_fetch` called.")})}},Lh=class extends Fh{_fetch(t){return O(this,null,function*(){let e=yield hf(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):df(e)})}},Vh=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}},V_=class extends Vh{#e;#t;#n;#i;#s;#r;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#s=e}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){let t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let i=this.#s.createElementNS(ds,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#s.createElementNS(ds,"defs"),t.append(i),i.append(this.#n),this.#s.body.append(t)}return this.#n}#d(t){if(t.length===1){let l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;let u=c.join(",");return[u,u,u]}let[e,i,s]=t,r=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)r[l]=e[l]/255,o[l]=i[l]/255,a[l]=s[l]/255;return[r.join(","),o.join(","),a.join(",")]}#o(t){if(this.#e===void 0){this.#e="";let e=this.#s.URL;e!==this.#s.baseURI&&(ff(e)?Ee('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=e.split("#",1)[0])}return`url(${this.#e}#${t})`}addFilter(t){if(!t)return"none";let e=this.#c.get(t);if(e)return e;let[i,s,r]=this.#d(t),o=t.length===1?i:`${i}${s}${r}`;if(e=this.#c.get(o),e)return this.#c.set(t,e),e;let a=`g_${this.#i}_transfer_map_${this.#l++}`,l=this.#o(a);this.#c.set(t,l),this.#c.set(o,l);let c=this.#f(a);return this.#_(i,s,r,c),l}addHCMFilter(t,e){let i=`${t}-${e}`,s="base",r=this.#u.get(s);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#u.set(s,r)),!t||!e))return r.url;let o=this.#b(t);t=X.makeHexColor(...o);let a=this.#b(e);if(e=X.makeHexColor(...a),this.#a.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;let l=new Array(256);for(let f=0;f<=255;f++){let p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#i}_hcm_filter`,d=r.filter=this.#f(u);this.#_(c,c,c,d),this.#p(d);let h=(f,p)=>{let g=o[f]/255,m=a[f]/255,_=new Array(p+1);for(let b=0;b<=p;b++)_[b]=g+b/p*(m-g);return _.join(",")};return this.#_(h(0,5),h(1,5),h(2,5),d),r.url=this.#o(u),r.url}addAlphaFilter(t){let e=this.#c.get(t);if(e)return e;let[i]=this.#d([t]),s=`alpha_${i}`;if(e=this.#c.get(s),e)return this.#c.set(t,e),e;let r=`g_${this.#i}_alpha_map_${this.#l++}`,o=this.#o(r);this.#c.set(t,o),this.#c.set(s,o);let a=this.#f(r);return this.#m(i,a),o}addLuminosityFilter(t){let e=this.#c.get(t||"luminosity");if(e)return e;let i,s;if(t?([i]=this.#d([t]),s=`luminosity_${i}`):s="luminosity",e=this.#c.get(s),e)return this.#c.set(t,e),e;let r=`g_${this.#i}_luminosity_map_${this.#l++}`,o=this.#o(r);this.#c.set(t,o),this.#c.set(s,o);let a=this.#f(r);return this.#h(a),t&&this.#m(i,a),o}addHighlightHCMFilter(t,e,i,s,r){let o=`${e}-${i}-${s}-${r}`,a=this.#u.get(t);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(t,a)),!e||!i))return a.url;let[l,c]=[e,i].map(this.#b.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[s,r].map(this.#b.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#a.style.color="";let p=(_,b,y)=>{let v=new Array(256),x=(d-u)/y,S=_/255,D=(b-_)/(255*y),A=0;for(let E=0;E<=y;E++){let I=Math.round(u+E*x),N=S+E*D;for(let W=A;W<=I;W++)v[W]=N;A=I+1}for(let E=A;E<256;E++)v[E]=v[A-1];return v.join(",")},g=`g_${this.#i}_hcm_${t}_filter`,m=a.filter=this.#f(g);return this.#p(m),this.#_(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),m),a.url=this.#o(g),a.url}destroy(t=!1){t&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(t){let e=this.#s.createElementNS(ds,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){let e=this.#s.createElementNS(ds,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){let e=this.#s.createElementNS(ds,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#a.append(e),e}#g(t,e,i){let s=this.#s.createElementNS(ds,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)}#_(t,e,i,s){let r=this.#s.createElementNS(ds,"feComponentTransfer");s.append(r),this.#g(r,"feFuncR",t),this.#g(r,"feFuncG",e),this.#g(r,"feFuncB",i)}#m(t,e){let i=this.#s.createElementNS(ds,"feComponentTransfer");e.append(i),this.#g(i,"feFuncA",t)}#b(t){return this.#a.style.color=t,Gb(getComputedStyle(this.#a).getPropertyValue("color"))}},Bh=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return O(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetch(t){return O(this,null,function*(){Ze("Abstract method `_fetch` called.")})}},jh=class extends Bh{_fetch(t){return O(this,null,function*(){let e=yield hf(t,"arraybuffer");return new Uint8Array(e)})}};Kt&&(Mh=Promise.withResolvers(),Ah=null,O(void 0,null,function*(){let t=yield import("./chunk-L2HEV66R.js"),e=yield import("./chunk-BMBYILCS.js"),i=yield import("./chunk-ALIQTIYY.js"),s=yield import("./chunk-NYZOWURK.js"),r,o;return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:r,path2d:o}))}).then(t=>{Ah=t,Mh.resolve()},t=>{Ee(`loadPackages: ${t}`),Ah=new Map,Mh.resolve()}));var Mh,Ah,Ni=class{static get promise(){return Mh.promise}static get(t){return Ah?.get(t)}};function KD(n){return O(this,null,function*(){let e=yield Ni.get("fs").promises.readFile(n);return new Uint8Array(e)})}var B_=class extends Vh{},j_=class extends kh{_createCanvas(t,e){return Ni.get("canvas").createCanvas(t,e)}},H_=class extends Fh{_fetch(t){return O(this,null,function*(){return KD(t)})}},U_=class extends Bh{_fetch(t){return O(this,null,function*(){return KD(t)})}},ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $_(n,t){if(!t)return;let e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}var Kl=class{getPattern(){Ze("Abstract method `getPattern` called.")}},z_=class extends Kl{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===ln.STROKE||s===ln.FILL){let o=e.current.getClippedPathBoundingBox(s,lt(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=X.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),$_(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(c.canvas,"no-repeat");let d=new DOMMatrix(i);r.setTransform(d)}else $_(t,this._bbox),r=this._createGradient(t);return r}};function C_(n,t,e,i,s,r,o,a){let l=t.coords,c=t.colors,u=n.data,d=n.width*4,h;l[e+1]>l[i+1]&&(h=e,e=i,i=h,h=r,r=o,o=h),l[i+1]>l[s+1]&&(h=i,i=s,s=h,h=o,o=a,a=h),l[e+1]>l[i+1]&&(h=e,e=i,i=h,h=r,r=o,o=h);let f=(l[e]+t.offsetX)*t.scaleX,p=(l[e+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,_=(l[s]+t.offsetX)*t.scaleX,b=(l[s+1]+t.offsetY)*t.scaleY;if(p>=b)return;let y=c[r],v=c[r+1],x=c[r+2],S=c[o],D=c[o+1],A=c[o+2],E=c[a],I=c[a+1],N=c[a+2],W=Math.round(p),Q=Math.round(b),ee,z,ce,$,ne,Fn,cn,It;for(let Xe=W;Xe<=Q;Xe++){if(Xe<m){let et=Xe<p?0:(p-Xe)/(p-m);ee=f-(f-g)*et,z=y-(y-S)*et,ce=v-(v-D)*et,$=x-(x-A)*et}else{let et;Xe>b?et=1:m===b?et=0:et=(m-Xe)/(m-b),ee=g-(g-_)*et,z=S-(S-E)*et,ce=D-(D-I)*et,$=A-(A-N)*et}let Ye;Xe<p?Ye=0:Xe>b?Ye=1:Ye=(p-Xe)/(p-b),ne=f-(f-_)*Ye,Fn=y-(y-E)*Ye,cn=v-(v-I)*Ye,It=x-(x-N)*Ye;let gi=Math.round(Math.min(ee,ne)),$i=Math.round(Math.max(ee,ne)),Vt=d*Xe+gi*4;for(let et=gi;et<=$i;et++)Ye=(ee-et)/(ee-ne),Ye<0?Ye=0:Ye>1&&(Ye=1),u[Vt++]=z-(z-Fn)*Ye|0,u[Vt++]=ce-(ce-cn)*Ye|0,u[Vt++]=$-($-It)*Ye|0,u[Vt++]=255}}function sj(n,t,e){let i=t.coords,s=t.colors,r,o;switch(t.type){case"lattice":let a=t.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let d=0;d<c;d++,u++)C_(n,e,i[u],i[u+1],i[u+a],s[u],s[u+1],s[u+a]),C_(n,e,i[u+a+1],i[u+1],i[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)C_(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}var W_=class extends Kl{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){let a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},m=d+2*2,_=h+2*2,b=i.getCanvas("mesh",m,_),y=b.context,v=y.createImageData(d,h);if(e){let S=v.data;for(let D=0,A=S.length;D<A;D+=4)S[D]=e[0],S[D+1]=e[1],S[D+2]=e[2],S[D+3]=255}for(let S of this._figures)sj(v,S,g);return y.putImageData(v,2,2),{canvas:b.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,e,i,s){$_(t,this._bbox);let r;if(s===ln.SHADING)r=X.singularValueDecompose2dScale(lt(t));else if(r=X.singularValueDecompose2dScale(e.baseTransform),this.matrix){let a=X.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}let o=this._createMeshCanvas(r,s===ln.SHADING?null:this._background,e.cachedCanvases);return s!==ln.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}},G_=class extends Kl{getPattern(){return"hotpink"}};function rj(n){switch(n[0]){case"RadialAxial":return new z_(n);case"Mesh":return new W_(n);case"Dummy":return new G_}throw new Error(`Unknown IR type: ${n[0]}`)}var FD={COLORED:1,UNCOLORED:2},oj=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(e,i,s,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=i,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){let{bbox:i,operatorList:s,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),uf("TilingType: "+o);let d=i[0],h=i[1],f=i[2],p=i[3],g=f-d,m=p-h,_=X.singularValueDecompose2dScale(this.matrix),b=X.singularValueDecompose2dScale(this.baseTransform),y=_[0]*b[0],v=_[1]*b[1],x=g,S=m,D=!1,A=!1,E=Math.ceil(c*y),I=Math.ceil(u*v),N=Math.ceil(g*y),W=Math.ceil(m*v);E>=N?x=c:D=!0,I>=W?S=u:A=!0;let Q=this.getSizeAndScale(x,this.ctx.canvas.width,y),ee=this.getSizeAndScale(S,this.ctx.canvas.height,v),z=e.cachedCanvases.getCanvas("pattern",Q.size,ee.size),ce=z.context,$=l.createCanvasGraphics(ce);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,r,a),ce.translate(-Q.scale*d,-ee.scale*h),$.transform(Q.scale,0,0,ee.scale,0,0),ce.save(),this.clipBbox($,d,h,f,p),$.baseTransform=lt($.ctx),$.executeOperatorList(s),$.endDrawing(),ce.restore(),D||A){let ne=z.canvas;D&&(x=c),A&&(S=u);let Fn=this.getSizeAndScale(x,this.ctx.canvas.width,y),cn=this.getSizeAndScale(S,this.ctx.canvas.height,v),It=Fn.size,Xe=cn.size,Ye=e.cachedCanvases.getCanvas("pattern-workaround",It,Xe),gi=Ye.context,$i=D?Math.floor(g/c):0,Vt=A?Math.floor(m/u):0;for(let et=0;et<=$i;et++)for(let zi=0;zi<=Vt;zi++)gi.drawImage(ne,It*et,Xe*zi,It,Xe,0,0,It,Xe);return{canvas:Ye.canvas,scaleX:Fn.scale,scaleY:cn.scale,offsetX:d,offsetY:h}}return{canvas:z.canvas,scaleX:Q.scale,scaleY:ee.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,i,s){let r=Math.max(n.MAX_PATTERN_SIZE,i),o=Math.ceil(e*s);return o>=r?o=r:s=o/e,{scale:s,size:o}}clipBbox(e,i,s,r,o){let a=r-i,l=o-s;e.ctx.rect(i,s,a,l),e.current.updateRectMinMax(lt(e.ctx),[i,s,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,i,s){let r=e.ctx,o=e.current;switch(i){case FD.COLORED:let a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case FD.UNCOLORED:let l=X.makeHexColor(s[0],s[1],s[2]);r.fillStyle=l,r.strokeStyle=l,o.fillColor=l,o.strokeColor=l;break;default:throw new D_(`Unsupported paint type: ${i}`)}}getPattern(e,i,s,r){let o=s;r!==ln.SHADING&&(o=X.transform(o,i.baseTransform),this.matrix&&(o=X.transform(o,this.matrix)));let a=this.createPatternCanvas(i),l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return n})();function aj({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){let a=kt.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=i>>3,d=i&7,h=n.length;e=new Uint32Array(e.buffer);let f=0;for(let p=0;p<s;p++){for(let m=t+u;t<m;t++){let _=t<h?n[t]:255;e[f++]=_&128?c:l,e[f++]=_&64?c:l,e[f++]=_&32?c:l,e[f++]=_&16?c:l,e[f++]=_&8?c:l,e[f++]=_&4?c:l,e[f++]=_&2?c:l,e[f++]=_&1?c:l}if(d===0)continue;let g=t<h?n[t++]:255;for(let m=0;m<d;m++)e[f++]=g&1<<7-m?c:l}return{srcPos:t,destPos:f}}var LD=16,VD=100,lj=15,BD=10,jD=1e3,vn=16;function cj(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,l){t.transform(i,s,r,o,a,l),this.__originalTransform(i,s,r,o,a,l)},n.setTransform=function(i,s,r,o,a,l){t.setTransform(i,s,r,o,a,l),this.__originalSetTransform(i,s,r,o,a,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,a){t.bezierCurveTo(e,i,s,r,o,a),this.__originalBezierCurveTo(e,i,s,r,o,a)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var q_=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function yh(n,t,e,i,s,r,o,a,l,c){let[u,d,h,f,p,g]=lt(n);if(d===0&&h===0){let b=o*u+p,y=Math.round(b),v=a*f+g,x=Math.round(v),S=(o+l)*u+p,D=Math.abs(Math.round(S)-y)||1,A=(a+c)*f+g,E=Math.abs(Math.round(A)-x)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),y,x),n.drawImage(t,e,i,s,r,0,0,D,E),n.setTransform(u,d,h,f,p,g),[D,E]}if(u===0&&f===0){let b=a*h+p,y=Math.round(b),v=o*d+g,x=Math.round(v),S=(a+c)*h+p,D=Math.abs(Math.round(S)-y)||1,A=(o+l)*d+g,E=Math.abs(Math.round(A)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,y,x),n.drawImage(t,e,i,s,r,0,0,E,D),n.setTransform(u,d,h,f,p,g),[E,D]}n.drawImage(t,e,i,s,r,o,a,l,c);let m=Math.hypot(u,d),_=Math.hypot(h,f);return[m*l,_*c]}function uj(n){let{width:t,height:e}=n;if(t>jD||e>jD)return null;let i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1,o=new Uint8Array(r*(e+1)),a,l,c,u=t+7&-8,d=new Uint8Array(u*e),h=0;for(let _ of n.data){let b=128;for(;b>0;)d[h++]=_&b?0:255,b>>=1}let f=0;for(h=0,d[h]!==0&&(o[0]=1,++f),l=1;l<t;l++)d[h]!==d[h+1]&&(o[l]=d[h]?2:1,++f),h++;for(d[h]!==0&&(o[l]=2,++f),a=1;a<e;a++){h=a*u,c=a*r,d[h-u]!==d[h]&&(o[c]=d[h]?1:8,++f);let _=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<t;l++)_=(_>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),s[_]&&(o[c+l]=s[_],++f),h++;if(d[h-u]!==d[h]&&(o[c+l]=d[h]?2:4,++f),f>i)return null}for(h=u*(e-1),c=a*r,d[h]!==0&&(o[c]=8,++f),l=1;l<t;l++)d[h]!==d[h+1]&&(o[c+l]=d[h]?4:8,++f),h++;if(d[h]!==0&&(o[c+l]=4,++f),f>i)return null;let p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=e;a++){let _=a*r,b=_+t;for(;_<b&&!o[_];)_++;if(_===b)continue;g.moveTo(_%r,a);let y=_,v=o[_];do{let x=p[v];do _+=x;while(!o[_]);let S=o[_];S!==5&&S!==10?(v=S,o[_]=0):(v=S&51*v>>4,o[_]&=v>>2|v<<2),g.lineTo(_%r,_/r|0),o[_]||--f}while(y!==_);--a}return d=null,o=null,function(_){_.save(),_.scale(1/t,-1/e),_.translate(0,-e),_.fill(g),_.beginPath(),_.restore()}}var Hh=class{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=qD,this.textMatrixScale=1,this.fontMatrix=S_,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Yt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=X.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){let i=X.applyTransform(e,t),s=X.applyTransform(e.slice(2),t),r=X.applyTransform([e[0],e[3]],t),o=X.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(t,e){X.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,r,o,a,l,c,u){let d=X.bezierBoundingBox(e,i,s,r,o,a,l,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=ln.FILL,e=null){let i=[this.minX,this.minY,this.maxX,this.maxY];if(t===ln.STROKE){e||Ze("Stroke bounding box must include transform.");let s=X.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){let t=X.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=ln.FILL,e=null){return X.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function HD(n,t){if(typeof ImageData<"u"&&t instanceof ImageData){n.putImageData(t,0,0);return}let e=t.height,i=t.width,s=e%vn,r=(e-s)/vn,o=s===0?r:r+1,a=n.createImageData(i,vn),l=0,c,u=t.data,d=a.data,h,f,p,g;if(t.kind===Dh.GRAYSCALE_1BPP){let m=u.byteLength,_=new Uint32Array(d.buffer,0,d.byteLength>>2),b=_.length,y=i+7>>3,v=4294967295,x=kt.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<r?vn:s,c=0,f=0;f<p;f++){let S=m-l,D=0,A=S>y?i:S*8-7,E=A&-8,I=0,N=0;for(;D<E;D+=8)N=u[l++],_[c++]=N&128?v:x,_[c++]=N&64?v:x,_[c++]=N&32?v:x,_[c++]=N&16?v:x,_[c++]=N&8?v:x,_[c++]=N&4?v:x,_[c++]=N&2?v:x,_[c++]=N&1?v:x;for(;D<A;D++)I===0&&(N=u[l++],I=128),_[c++]=N&I?v:x,I>>=1}for(;c<b;)_[c++]=0;n.putImageData(a,0,h*vn)}}else if(t.kind===Dh.RGBA_32BPP){for(f=0,g=i*vn*4,h=0;h<r;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,f),f+=vn;h<o&&(g=i*s*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,f))}else if(t.kind===Dh.RGB_24BPP)for(p=vn,g=i*p,h=0;h<o;h++){for(h>=r&&(p=s,g=i*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,h*vn)}else throw new Error(`bad image kind: ${t.kind}`)}function UD(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}let e=t.height,i=t.width,s=e%vn,r=(e-s)/vn,o=s===0?r:r+1,a=n.createImageData(i,vn),l=0,c=t.data,u=a.data;for(let d=0;d<o;d++){let h=d<r?vn:s;({srcPos:l}=aj({src:c,srcPos:l,dest:u,width:i,height:h,nonBlackColor:0})),n.putImageData(a,0,d*vn)}}function Vl(n,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function wh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Kt){let{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function $D(n,t){if(t)return!0;let e=X.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);let i=Math.fround((globalThis.devicePixelRatio||1)*Gs.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}var dj=["butt","round","square"],hj=["miter","round","bevel"],fj={},zD={},na=class n{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=t,this.current=new Hh(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new q_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){let r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){let l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...lt(this.compositeCtx))}this.ctx.save(),wh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=lt(this.ctx)}executeOperatorList(t,e,i,s){let r=t.argsArray,o=t.fnArray,a=e||0,l=r.length;if(l===a)return a;let c=l-a>BD&&typeof i=="function",u=c?Date.now()+lj:0,d=0,h=this.commonObjs,f=this.objs,p;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(p=o[a],p!==di.dependency)this[p].apply(this,r[a]);else for(let g of r[a]){let m=g.startsWith("g_")?h:f;if(!m.has(g))return m.get(g,i),a}if(a++,a===l)return a;if(c&&++d>BD){if(Date.now()>u)return i(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let i=t.width??t.displayWidth,s=t.height??t.displayHeight,r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=s,c="prescale1",u,d;for(;r>2&&a>1||o>2&&l>1;){let h=a,f=l;r>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(t,0,0,a,l,0,0,h,f),t=u.canvas,a=h,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){let e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,a=lt(e),l,c,u,d;if((t.bitmap||t.data)&&t.count>1){let A=t.bitmap||t.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(A),l||(l=new Map,this._cachedBitmapsMap.set(A,l));let E=l.get(c);if(E&&!o){let I=Math.round(Math.min(a[0],a[2])+a[4]),N=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:E,offsetX:I,offsetY:N}}u=E}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),UD(d.context,t));let h=X.transform(a,[1/i,0,0,-1/s,0,0]);h=X.transform(h,[1,0,0,1,0,-s]);let[f,p,g,m]=X.getAxialAlignedBoundingBox([0,0,i,s],h),_=Math.round(g-f)||1,b=Math.round(m-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",_,b),v=y.context,x=f,S=p;v.translate(-x,-S),v.transform(...h),u||(u=this._scaleImage(d.canvas,us(v)),u=u.img,l&&o&&l.set(c,u)),v.imageSmoothingEnabled=$D(lt(v),t.interpolate),yh(v,u,0,0,u.width,u.height,0,0,i,s),v.globalCompositeOperation="source-in";let D=X.transform(us(v),[1,0,0,1,-x,-S]);return v.fillStyle=o?r.getPattern(e,this,D,ln.FILL):r,v.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,y.canvas)),{canvas:y.canvas,offsetX:Math.round(x),offsetY:Math.round(S)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=dj[t]}setLineJoin(t){this.ctx.lineJoin=hj[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;let r=this.ctx;r.setTransform(...lt(this.suspendedCtx)),Vl(this.suspendedCtx,r),cj(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Vl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){let r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,a,l,c,u,d){let h=t.canvas,f=l-u,p=c-d;if(o){let m=X.makeHexColor(...o);if(f<0||p<0||f+i>h.width||p+s>h.height){let _=this.cachedCanvases.getCanvas("maskExtension",i,s),b=_.context;b.drawImage(h,-f,-p),b.globalCompositeOperation="destination-atop",b.fillStyle=m,b.fillRect(0,0,i,s),b.globalCompositeOperation="source-over",h=_.canvas,f=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let _=new Path2D;_.rect(f,p,i,s),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=m,t.fillRect(f,p,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));let g=new Path2D;g.rect(l,c,i,s),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(h,f,p,i,s,l,c,i,s),e.restore()}save(){this.inSMaskMode?(Vl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Vl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,r,o){this.ctx.transform(t,e,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let s=this.ctx,r=this.current,o=r.x,a=r.y,l,c,u=lt(s),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,h=d?i.slice(0):null;for(let f=0,p=0,g=t.length;f<g;f++)switch(t[f]|0){case di.rectangle:o=e[p++],a=e[p++];let m=e[p++],_=e[p++],b=o+m,y=a+_;s.moveTo(o,a),m===0||_===0?s.lineTo(b,y):(s.lineTo(b,a),s.lineTo(b,y),s.lineTo(o,y)),d||r.updateRectMinMax(u,[o,a,b,y]),s.closePath();break;case di.moveTo:o=e[p++],a=e[p++],s.moveTo(o,a),d||r.updatePathMinMax(u,o,a);break;case di.lineTo:o=e[p++],a=e[p++],s.lineTo(o,a),d||r.updatePathMinMax(u,o,a);break;case di.curveTo:l=o,c=a,o=e[p+4],a=e[p+5],s.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],o,a),r.updateCurvePathMinMax(u,l,c,e[p],e[p+1],e[p+2],e[p+3],o,a,h),p+=6;break;case di.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,e[p],e[p+1],e[p+2],e[p+3]),r.updateCurvePathMinMax(u,l,c,o,a,e[p],e[p+1],e[p+2],e[p+3],h),o=e[p+2],a=e[p+3],p+=4;break;case di.curveTo3:l=o,c=a,o=e[p+2],a=e[p+3],s.bezierCurveTo(e[p],e[p+1],o,a,o,a),r.updateCurvePathMinMax(u,l,c,e[p],e[p+1],o,a,o,a,h),p+=4;break;case di.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(u,h),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){let e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,us(e),ln.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){let e=this.ctx,i=this.current.fillColor,s=this.current.patternFill,r=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,us(e),ln.FILL),r=!0);let o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=fj}eoClip(){this.pendingClip=zD}beginText(){this.current.textMatrix=qD,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(let i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){let i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||S_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ee("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;let r=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`,a="normal";i.black?a="900":i.bold&&(a="bold");let l=i.italic?"italic":"normal",c=e;e<LD?c=LD:e>VD&&(c=VD),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,r,o){this.current.textMatrix=[t,e,i,s,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){let r=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&Yt.FILL_STROKE_MASK,d=!!(l&Yt.ADD_TO_PATH_FLAG),h=o.patternFill&&!a.missingFile,f;(a.disableFontFace||d||h)&&(f=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||h?(r.save(),r.translate(e,i),r.beginPath(),f(r,c),s&&r.setTransform(...s),(u===Yt.FILL||u===Yt.FILL_STROKE)&&r.fill(),(u===Yt.STROKE||u===Yt.FILL_STROKE)&&r.stroke(),r.restore()):((u===Yt.FILL||u===Yt.FILL_STROKE)&&r.fillText(t,e,i),(u===Yt.STROKE||u===Yt.FILL_STROKE)&&r.strokeText(t,e,i)),d&&(this.pendingTextPaths||=[]).push({transform:lt(r),x:e,y:i,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return Ie(this,"isFontSubpixelAAEnabled",i)}showText(t){let e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);let s=e.fontSize;if(s===0)return;let r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,h=i.vertical,f=h?1:-1,p=i.defaultVMetrics,g=s*e.fontMatrix[0],m=e.textRenderingMode===Yt.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),c>0?r.scale(u,-1):r.scale(u,1);let _;if(e.patternFill){r.save();let S=e.fillColor.getPattern(r,this,us(r),ln.FILL);_=lt(r),r.restore(),r.fillStyle=S}let b=e.lineWidth,y=e.textMatrixScale;if(y===0||b===0){let S=e.textRenderingMode&Yt.FILL_STROKE_MASK;(S===Yt.STROKE||S===Yt.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=y;if(o!==1&&(r.scale(o,o),b/=o),r.lineWidth=b,i.isInvalidPDFjsFont){let S=[],D=0;for(let A of t)S.push(A.unicode),D+=A.width;r.fillText(S.join(""),0,0),e.x+=D*g*u,r.restore(),this.compose();return}let v=0,x;for(x=0;x<d;++x){let S=t[x];if(typeof S=="number"){v+=f*S*s/1e3;continue}let D=!1,A=(S.isSpace?l:0)+a,E=S.fontChar,I=S.accent,N,W,Q=S.width;if(h){let z=S.vmetric||p,ce=-(S.vmetric?z[1]:Q*.5)*g,$=z[2]*g;Q=z?-z[0]:Q,N=ce/o,W=(v+$)/o}else N=v/o,W=0;if(i.remeasure&&Q>0){let z=r.measureText(E).width*1e3/s*o;if(Q<z&&this.isFontSubpixelAAEnabled){let ce=Q/z;D=!0,r.save(),r.scale(ce,1),N/=ce}else Q!==z&&(N+=(Q-z)/2e3*s/o)}if(this.contentVisible&&(S.isInFont||i.missingFile)){if(m&&!I)r.fillText(E,N,W);else if(this.paintChar(E,N,W,_),I){let z=N+s*I.offset.x/o,ce=W-s*I.offset.y/o;this.paintChar(I.fontChar,z,ce,_)}}let ee=h?Q*g-A*c:Q*g+A*c;v+=ee,D&&r.restore()}h?e.y-=v:e.x+=v*u,r.restore(),this.compose()}showType3Text(t){let e=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,d=i.fontMatrix||S_,h=t.length,f=i.textRenderingMode===Yt.INVISIBLE,p,g,m,_;if(!(f||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(u,o),p=0;p<h;++p){if(g=t[p],typeof g=="number"){_=a*g*r/1e3,this.ctx.translate(_,0),i.x+=_*u;continue}let b=(g.isSpace?c:0)+l,y=s.charProcOperatorList[g.operatorListId];if(!y){Ee(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(y),this.restore()),m=X.applyTransform([g.width,0],d)[0]*r+b,e.translate(m,0),i.x+=m*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){let i=t[1],s=this.baseTransform||lt(this.ctx),r={createCanvasGraphics:o=>new n(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new oj(t,i,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=X.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=X.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=rj(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;let e=this.ctx;this.save();let i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,us(e),ln.SHADING);let s=us(e);if(s){let{width:r,height:o}=e.canvas,[a,l,c,u]=X.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ze("Should not call beginInlineImage")}beginImageData(){Ze("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=lt(this.ctx),e)){let i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(lt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let e=this.ctx;t.isolated||uf("TODO: Support non-isolated groups."),t.knockout&&Ee("Knockout groups not supported.");let i=lt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=X.getAxialAlignedBoundingBox(t.bbox,lt(e)),r=[0,0,e.canvas.width,e.canvas.height];s=X.intersect(s,r)||[0,0,0,0];let o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...i),t.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Vl(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;let e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let s=lt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);let r=X.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(this.#e(),wh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){let o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;let[l,c]=X.singularValueDecompose2dScale(lt(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);let{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),wh(this.ctx)}else wh(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new Hh(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;let e=t.count;t=this.getObject(t.data,t),t.count=e;let i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=uj(t)),s.compiled)){s.compiled(i);return}let r=this._createMaskCanvas(t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);let a=this.ctx;a.save();let l=lt(a);a.transform(e,i,s,r,0,0);let c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){let h=X.transform(l,[e,i,s,r,o[u],o[u+1]]),[f,p]=X.applyTransform([0,0],h);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;let e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(let r of t){let{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();let h=this.getObject(o,r);UD(d,h),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,us(e),ln.FILL):i,d.fillRect(0,0,a,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),yh(e,u.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;let e=this.getObject(t);if(!e){Ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;let r=this.getObject(t);if(!r){Ee("Dependent image isn't ready yet");return}let o=r.width,a=r.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[e,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;let e=t.width,i=t.height,s=this.ctx;if(this.save(),!Kt){let{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{let l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;HD(l,t),r=this.applyTransferMapsToCanvas(l)}let o=this._scaleImage(r,us(s));s.imageSmoothingEnabled=$D(lt(s),t.interpolate),yh(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;let i=this.ctx,s;if(t.bitmap)s=t.bitmap;else{let r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;HD(l,t),s=this.applyTransferMapsToCanvas(l)}for(let r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),yh(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){let e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let i=this.ctx;this.pendingClip&&(e||(this.pendingClip===zD?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=lt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform(),o,a;if(i===0&&s===0){let l=Math.abs(e),c=Math.abs(r);if(l===c)if(t===0)o=a=1/l;else{let u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{let u=l*t,d=c*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{let l=Math.abs(e*r-i*s),c=Math.hypot(e,i),u=Math.hypot(s,r);if(t===0)o=u/l,a=c/l;else{let d=t*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){let{ctx:e}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=i||1,s===1&&r===1){e.stroke();return}let o=e.getLineDash();if(t&&e.save(),e.scale(s,r),o.length>0){let a=Math.max(s,r);e.setLineDash(o.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let n in di)na.prototype[n]!==void 0&&(na.prototype[di[n]]=na.prototype[n]);var Fr=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#e=t}static get workerSrc(){return this.#t}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#t=t}},Ch={UNKNOWN:0,DATA:1,ERROR:2},yt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Tn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ps(n.message);case"MissingPDFException":return new fs(n.message);case"PasswordException":return new Ul(n.message,n.code);case"UnexpectedResponseException":return new sa(n.message,n.status);case"UnknownErrorException":return new $l(n.message,n.details);default:return new $l(n.message,n.toString())}}var kr=class{#e=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){let i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ch.DATA)s.resolve(t.data);else if(t.callback===Ch.ERROR)s.reject(Tn(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let i=this.sourceName,s=t.sourceName,r=this.comObj;new Promise(function(o){o(e(t.data))}).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:Ch.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:Ch.ERROR,callbackId:t.callbackId,reason:Tn(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){let i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){let s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){let r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:c.desiredSize},s),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:yt.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Dt(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:yt.CANCEL,streamId:r,reason:Tn(c)}),u.promise}},i)}#n(t){let e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:yt.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:yt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){Dt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:yt.ERROR,streamId:e,reason:Tn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(c){c(a(t.data,l))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:yt.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:yt.START_COMPLETE,streamId:e,reason:Tn(c)})})}#i(t){let e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case yt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Tn(t.reason));break;case yt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Tn(t.reason));break;case yt.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:yt.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(l){l(a.onPull?.())}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:yt.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:yt.PULL_COMPLETE,streamId:e,reason:Tn(l)})});break;case yt.ENQUEUE:if(Dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case yt.CLOSE:if(Dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#s(o,e);break;case yt.ERROR:Dt(o,"error should have stream controller"),o.controller.error(Tn(t.reason)),this.#s(o,e);break;case yt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Tn(t.reason)),this.#s(o,e);break;case yt.CANCEL:if(!a)break;new Promise(function(l){l(a.onCancel?.(Tn(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:yt.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:yt.CANCEL_COMPLETE,streamId:e,reason:Tn(l)})}),a.sinkCapability.reject(Tn(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#s(t,e){return O(this,null,function*(){yield Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]})}destroy(){this.#e?.abort(),this.#e=null}},Y_=class{#e;#t;constructor({parsedData:t,rawData:e}){this.#e=t,this.#t=e}getRaw(){return this.#t}get(t){return this.#e.get(t)??null}getAll(){return $b(this.#e)}has(t){return this.#e.has(t)}},ta=Symbol("INTERNAL"),K_=class{#e=!1;#t=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){this.#e=!!(t&In.DISPLAY),this.#t=!!(t&In.PRINT),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;let{print:t,view:e}=this.usage;return this.#e?e?.viewState!=="OFF":this.#t?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==ta&&Ze("Internal method `_setVisible` called."),this.#n=i,this.#i=e}},X_=class{#e=null;#t=new Map;#n=null;#i=null;constructor(t,e=In.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(let i of t.groups)this.#t.set(i.id,new K_(e,i));if(t.baseState==="OFF")for(let i of this.#t.values())i._setVisible(ta,!1);for(let i of t.on)this.#t.get(i)._setVisible(ta,!0);for(let i of t.off)this.#t.get(i)._setVisible(ta,!1);this.#n=this.getHash()}}#s(t){let e=t.length;if(e<2)return!0;let i=t[0];for(let s=1;s<e;s++){let r=t[s],o;if(Array.isArray(r))o=this.#s(r);else if(this.#t.has(r))o=this.#t.get(r).visible;else return Ee(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#t.size===0)return!0;if(!t)return uf("Optional content group not defined."),!0;if(t.type==="OCG")return this.#t.has(t.id)?this.#t.get(t.id).visible:(Ee(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#t.has(e))return Ee(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#t.has(e))return Ee(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#t.has(e))return Ee(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#t.has(e))return Ee(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return Ee(`Unknown optional content policy ${t.policy}.`),!0}return Ee(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){let s=this.#t.get(t);if(!s){Ee(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(let r of s.rbGroups)for(let o of r)o!==t&&this.#t.get(o)?._setVisible(ta,!1,!0);s._setVisible(ta,!!e,!0),this.#e=null}setOCGState({state:t,preserveRB:e}){let i;for(let s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}let r=this.#t.get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?$b(this.#t):null}getGroup(t){return this.#t.get(t)||null}getHash(){if(this.#e!==null)return this.#e;let t=new Rh;for(let[e,i]of this.#t)t.update(`${e}:${i.visible}`);return this.#e=t.hexdigest()}},Q_=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Dt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,r?.length>0){let l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});Dt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new Z_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new J_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},Z_=class{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Wb(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(let r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return O(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},J_=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return O(this,null,function*(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function pj(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),r(u)}if(e=o(n),e){let u=c(e);return r(u)}if(e=i("filename","i").exec(n),e){e=e[1];let u=a(e);return u=c(u),r(u)}function i(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let h=new TextDecoder(u,{fatal:!0}),f=df(d);d=h.decode(f),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function o(u){let d=[],h,f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,m,_]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[m,_]}let p=[];for(let g=0;g<d.length&&g in d;++g){let[m,_]=d[g];_=a(_),m&&(_=unescape(_),g===0&&(_=l(_))),p.push(_)}return p.join("")}function a(u){if(u.startsWith('"')){let d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){let f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){let d=u.indexOf("'");if(d===-1)return u;let h=u.slice(0,d),p=u.slice(d+1).replace(/^[^']*'/,"");return s(h,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}),s(h,p);try{p=atob(p)}catch{}return s(h,p)})}return""}function qb(n,t){let e=new Headers;if(!n||!t||typeof t!="object")return e;for(let i in t){let s=t[i];s!==void 0&&e.append(i,s)}return e}function Yb({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){let s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Kb(n){let t=n.get("Content-Disposition");if(t){let e=pj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Wb(e))return e}return null}function pf(n,t){return n===404||n===0&&t.startsWith("file:")?new fs('Missing PDF "'+t+'".'):new sa(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function XD(n){return n===200||n===206}function QD(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ZD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}var Uh=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=qb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new eb(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new tb(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},eb=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let i=new Headers(t.headers),s=e.url;fetch(s,QD(i,this._withCredentials,this._abortController)).then(r=>{if(!XD(r.status))throw pf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();let o=r.headers,{allowRangeRequests:a,suggestedLength:l}=Yb({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=Kb(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ps("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return O(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:ZD(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},tb=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;let s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;let r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);let o=s.url;fetch(o,QD(r,this._withCredentials,this._abortController)).then(a=>{if(!XD(a.status))throw pf(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return O(this,null,function*(){yield this._readCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:ZD(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},x_=200,E_=206;function gj(n){let t=n.response;return typeof t!="string"?t:df(t).buffer}var nb=class{constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=qb(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){let s={begin:t,end:e};for(let r in i)s[r]=i[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){let e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=E_):s.expectedStatus=x_,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){let i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){let i=this.pendingRequests[t];if(!i)return;let s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError?.(s.status);return}let r=s.status||x_;if(!(r===x_&&i.expectedStatus===E_)&&r!==i.expectedStatus){i.onError?.(s.status);return}let a=gj(s);if(r===E_){let l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):i.onError?.(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},ib=class{constructor(t){this._source=t,this._manager=new nb(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new sb(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let i=new rb(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},sb=class{constructor(t,e){this._manager=t;let i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{let[a,...l]=o.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=Yb({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Kb(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=pf(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return O(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},rb=class{constructor(t,e,i){this._manager=t;let s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=pf(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return O(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},mj=/^[a-z][a-z0-9\-+.]+:/i;function _j(n){if(mj.test(n))return new URL(n);let t=Ni.get("url");return new URL(t.pathToFileURL(n))}function JD(n,t,e){return n.protocol==="http:"?Ni.get("http").request(n,{headers:t},e):Ni.get("https").request(n,{headers:t},e)}var ob=class{constructor(t){this.source=t,this.url=_j(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=qb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new cb(this):new ab(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=this.isFsUrl?new ub(this,t,e):new lb(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},$h=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return O(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ps("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},zh=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return O(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},ab=class extends $h{constructor(t){super(t);let e=Object.fromEntries(t.headers),i=s=>{if(s.statusCode===404){let l=new fs(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(s);let r=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=Yb({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Kb(r)};this._request=JD(this._url,e,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}},lb=class extends zh{constructor(t,e,i){super(t);let s=Object.fromEntries(t.headers);s.Range=`bytes=${e}-${i-1}`;let r=o=>{if(o.statusCode===404){let a=new fs(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=JD(this._url,s,r),this._request.on("error",o=>{this._storedError=o}),this._request.end()}},cb=class extends $h{constructor(t){super(t);let e=Ni.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new fs(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}},ub=class extends zh{constructor(t,e,i){super(t);let s=Ni.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}},bj=1e5,bn=30,vj=.8,Xl=class n{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#_=new WeakMap;#m=null;static#b=new Map;static#y=new Map;static#x=new WeakMap;static#w=null;static#C=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=e,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;this.#m=[1,0,0,-1,-o,a+r],this.#c=s,this.#l=r,n.#P(),Lr(e,i),this.#e.promise.finally(()=>{n.#C.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=kt.platform;return Ie(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#u.read().then(({value:e,done:i})=>{if(i){this.#e.resolve();return}this.#s??=e.lang,Object.assign(this.#h,e.styles),this.#I(e.items),t()},this.#e.reject)};return this.#u=this.#f.getReader(),n.#C.add(this),t(),this.#e.promise}update({viewport:t,onBefore:e=null}){let i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,Lr(this.#a,{rotation:s})),i!==this.#o){e?.(),this.#o=i;let r={div:null,properties:null,ctx:n.#A(this.#s)};for(let o of this.#g)r.properties=this.#_.get(o),r.div=o,this.#E(r)}}cancel(){let t=new ps("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#e.reject(t)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#I(t){if(this.#n)return;this.#r.ctx??=n.#A(this.#s);let e=this.#g,i=this.#p;for(let s of t){if(e.length>bj){Ee("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id!==null&&this.#t.setAttribute("id",`${s.id}`),r.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(s.str),this.#M(s)}}#M(t){let e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#g.push(e);let s=X.transform(this.#m,t.transform),r=Math.atan2(s[1],s[0]),o=this.#h[t.fontName];o.vertical&&(r+=Math.PI/2);let a=this.#i&&o.fontSubstitution||o.fontFamily;a=n.fontFamilyMap.get(a)||a;let l=Math.hypot(s[2],s[3]),c=l*n.#R(a,this.#s),u,d;r===0?(u=s[4],d=s[5]-c):(u=s[4]+c*Math.sin(r),d=s[5]-c*Math.cos(r));let h="calc(var(--scale-factor)*",f=e.style;this.#t===this.#a?(f.left=`${(100*u/this.#c).toFixed(2)}%`,f.top=`${(100*d/this.#l).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(n.#w*l).toFixed(2)}px)`,f.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let g=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);g!==m&&Math.max(g,m)/Math.min(g,m)>1.5&&(p=!0)}if(p&&(i.canvasWidth=o.vertical?t.height:t.width),this.#_.set(e,i),this.#r.div=e,this.#r.properties=i,this.#E(this.#r),i.hasText&&this.#t.append(e),i.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#E(t){let{div:e,properties:i,ctx:s}=t,{style:r}=e,o="";if(n.#w>1&&(o=`scale(${1/n.#w})`),i.canvasWidth!==0&&i.hasText){let{fontFamily:a}=r,{canvasWidth:l,fontSize:c}=i;n.#D(s,c*this.#o,a);let{width:u}=s.measureText(e.textContent);u>0&&(o=`scaleX(${l*this.#o/u}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#C.size>0)){this.#b.clear();for(let{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#A(t=null){let e=this.#y.get(t||="");if(!e){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#D(t,e,i){let s=this.#x.get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)}static#P(){if(this.#w!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#R(t,e){let i=this.#b.get(t);if(i)return i;let s=this.#A(e);s.canvas.width=s.canvas.height=bn,this.#D(s,bn,t);let r=s.measureText(""),o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){let u=o/(o+a);return this.#b.set(t,u),s.canvas.width=s.canvas.height=0,u}s.strokeStyle="red",s.clearRect(0,0,bn,bn),s.strokeText("g",0,0);let l=s.getImageData(0,0,bn,bn).data;a=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){a=Math.ceil(u/4/bn);break}s.clearRect(0,0,bn,bn),s.strokeText("A",0,bn),l=s.getImageData(0,0,bn,bn).data,o=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){o=bn-Math.floor(u/4/bn);break}s.canvas.width=s.canvas.height=0;let c=o?o/(o+a):vj;return this.#b.set(t,c),c}},Ql=class n{static textContent(t){let e=[],i={items:e,styles:Object.create(null)};function s(r){if(!r)return;let o=null,a=r.name;if(a==="#text")o=r.value;else if(n.shouldBuildText(a))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(let l of r.children)s(l)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},yj=65536,wj=100,Cj=5e3,xj=Kt?j_:L_,Ej=Kt?H_:Lh,Sj=Kt?B_:V_,Dj=Kt?U_:jh;function Mj(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let t=new db,{docId:e}=t,i=n.url?Aj(n.url):null,s=n.data?Tj(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof Wh?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:yj,u=n.worker instanceof ia?n.worker:null,d=n.verbosity,h=typeof n.docBaseUrl=="string"&&!ff(n.docBaseUrl)?n.docBaseUrl:null,f=typeof n.cMapUrl=="string"?n.cMapUrl:null,p=n.cMapPacked!==!1,g=n.CMapReaderFactory||Ej,m=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,_=n.StandardFontDataFactory||Dj,b=n.stopAtErrors!==!0,y=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,v=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Kt,S=typeof n.isChrome=="boolean"?n.isChrome:!kt.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,A=typeof n.disableFontFace=="boolean"?n.disableFontFace:Kt,E=n.fontExtraProperties===!0,I=n.enableXfa===!0,N=n.ownerDocument||globalThis.document,W=n.disableRange===!0,Q=n.disableStream===!0,ee=n.disableAutoFetch===!0,z=n.pdfBug===!0,ce=n.CanvasFactory||xj,$=n.FilterFactory||Sj,ne=n.enableHWA===!0,Fn=l?l.length:n.length??NaN,cn=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Kt&&!A,It=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:g===Lh&&_===jh&&f&&m&&jl(f,document.baseURI)&&jl(m,document.baseURI);n.canvasFactory&&RD("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&RD("`filterFactory`-instance option, please use `FilterFactory` instead.");let Xe=null;UB(d);let Ye={canvasFactory:new ce({ownerDocument:N,enableHWA:ne}),filterFactory:new $({docId:e,ownerDocument:N}),cMapReaderFactory:It?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:It?null:new _({baseUrl:m})};if(!u){let Vt={verbosity:d,port:Fr.workerPort};u=Vt.port?ia.fromPort(Vt):new ia(Vt),t._worker=u}let gi={docId:e,apiVersion:"4.8.69",data:s,password:a,disableAutoFetch:ee,rangeChunkSize:c,length:Fn,docBaseUrl:h,enableXfa:I,evaluatorOptions:{maxImageSize:y,disableFontFace:A,ignoreErrors:b,isEvalSupported:v,isOffscreenCanvasSupported:x,isChrome:S,canvasMaxAreaInBytes:D,fontExtraProperties:E,useSystemFonts:cn,cMapUrl:It?f:null,standardFontDataUrl:It?m:null}},$i={disableFontFace:A,fontExtraProperties:E,ownerDocument:N,pdfBug:z,styleElement:Xe,loadingParams:{disableAutoFetch:ee,enableXfa:I}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Vt=u.messageHandler.sendWithPromise("GetDocRequest",gi,s?[s.buffer]:null),et;if(l)et=new Q_(l,{disableRange:W,disableStream:Q});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let zi;Kt?zi=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&jl(i)?Uh:ob:zi=jl(i)?Uh:ib,et=new zi({url:i,length:Fn,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:W,disableStream:Q})}return Vt.then(zi=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let gp=new kr(e,zi,u.port),dI=new gb(gp,t,et,$i,Ye);t._transport=dI,gp.send("Ready",null)})}).catch(t._capability.reject),t}function Aj(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Kt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Tj(n){if(Kt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return df(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function WD(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}var db=class n{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${n.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return O(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}},Wh=class{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(let i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},hb=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},fb=class{#e=null;#t=!1;constructor(t,e,i,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new Ih:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new Gh,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new zl({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ie(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return O(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=Ws.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");let h=this._transport.getRenderingIntent(i,s,u,d),{renderingIntent:f,cacheKey:p}=h;this.#t=!1,this.#i(),a||=this._transport.getOptionalContentConfig(f);let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);let m=!!(f&In.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));let _=v=>{g.renderTasks.delete(b),(this._maybeCleanupAfterRender||m)&&(this.#t=!0),this.#n(!m),v?(b.capability.reject(v),this._abortOperatorList({intentState:g,reason:v instanceof Error?v:new Error(v)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new _b({callback:_,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(b);let y=b.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([v,x])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(x.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:v,optionalContentConfig:x}),b.operatorListChanged()}).catch(_),y}getOperatorList({intent:t="display",annotationMode:e=Ws.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let o=this._transport.getRenderingIntent(t,e,i,s,!0),a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ql.textContent(i));let e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:c}){if(c){i(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}let o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(t)}cleanup(t=!1){this.#t=!0;let e=this.#n(!1);return t&&e&&(this._stats&&=new Ih),e}#n(t=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(t)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},Cj),!1;for(let{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(t,e){let i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){let{map:r,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),c=this._intentStates.get(e);c.streamReader=l;let u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let h of c.renderTasks)h.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Wl){let s=wj;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new ps(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}},pb=class{#e=new Map;#t=Promise.resolve();postMessage(t,e){let i={data:structuredClone(t,e?{transfer:e}:null)};this.#t.then(()=>{for(let[s]of this.#e)s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if(i?.signal instanceof AbortSignal){let{signal:r}=i;if(r.aborted){Ee("LoopbackPort - cannot use an `aborted` signal.");return}let o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#e.set(e,s)}removeEventListener(t,e){this.#e.get(e)?.(),this.#e.delete(e)}terminate(){for(let[,t]of this.#e)t?.();this.#e.clear()}},ia=class n{static#e=0;static#t=!1;static#n;static{Kt&&(this.#t=!0,Fr.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}let s=new URL(e,i);return i.origin===s.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=$B()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(n.#n?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(n.#n||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Kt?Promise.all([Ni.promise,this._readyCapability.promise]):this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new kr("main","worker",t),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(n.#t||n.#s){this._setupFakeWorker();return}let{workerSrc:t}=n;try{n._isSameOrigin(window.location.href,t)||(t=n._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),i=new kr("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=e,this._webWorker=e,this.#i()}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});let o=()=>{let a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{uf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){n.#t||(Ee("Setting up fake worker."),n.#t=!0),n._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new pb;this._port=e;let i=`fake${n.#e++}`,s=new kr(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new kr(i,i+"_worker",e),this.#i()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),n.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#n?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new n(t)}static get workerSrc(){if(Fr.workerSrc)return Fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return Ie(this,"_setupFakeWorkerGlobal",O(this,null,function*(){return this.#s?this.#s:(yield import(this.workerSrc)).WorkerMessageHandler}))}},gb=class{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#s=null;constructor(t,e,i,s,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Gh,this.fontLoader=new k_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(t,e=null){let i=this.#e.get(t);if(i)return i;let s=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,s),s}get annotationStorage(){return Ie(this,"annotationStorage",new Yl)}getRenderingIntent(t,e=Ws.ENABLE,i=null,s=!1,r=!1){let o=In.DISPLAY,a=N_;switch(t){case"any":o=In.ANY;break;case"display":break;case"print":o=In.PRINT;break;default:Ee(`getRenderingIntent - invalid intent: ${t}`)}let l=o&In.PRINT&&i instanceof Nh?i:this.annotationStorage;switch(e){case Ws.DISABLE:o+=In.ANNOTATIONS_DISABLE;break;case Ws.ENABLE:break;case Ws.ENABLE_FORMS:o+=In.ANNOTATIONS_FORMS;break;case Ws.ENABLE_STORAGE:o+=In.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ee(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=In.IS_EDITING),r&&(o+=In.OPLIST);let{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let i of this.#t.values())t.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Xl.cleanup(),this._networkStream?.cancelAllRequests(new ps("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}Dt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",i=>O(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}})),t.on("GetRangeReader",(i,s)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}Dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new hb(i,this))}),t.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new Ul(i.message,i.code);break;case"InvalidPDFException":s=new Th(i.message);break;case"MissingPDFException":s=new fs(i.message);break;case"UnexpectedResponseException":s=new sa(i.message,i.status);break;case"UnknownErrorException":s=new $l(i.message,i.details);break;default:Ze("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",i=>{if(this.#s=Promise.withResolvers(),e.onPassword){let s=r=>{r instanceof Error?this.#s.reject(r):this.#s.resolve({password:r})};try{e.onPassword(s,i.code)}catch(r){this.#s.reject(r)}}else this.#s.reject(new Ul(i.message,i.code));return this.#s.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":let{disableFontFace:o,fontExtraProperties:a,pdfBug:l}=this._params;if("error"in r){let h=r.error;Ee(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}let c=l&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new F_(r,{disableFontFace:o,inspectFont:c});this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":let{imageRef:d}=r;Dt(d,"The imageRef must be defined.");for(let h of this.#t.values())for(let[,f]of h.objs)if(f?.ref===d)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{if(this.destroyed)return;let a=this.#t.get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":a.objs.resolve(i,o),o?.dataLen>LB&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>O(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)})),t.on("FetchStandardFontData",i=>O(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,i=this.#n.get(e);if(i)return i;let s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#i.set(r.refStr,t);let o=new fb(e,r,this,this._params.pdfBug);return this.#t.set(e,o),o});return this.#n.set(e,s),s}getPageIndex(t){return WD(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new X_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#e.get(t);if(e)return e;let i=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new Y_(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return O(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#t.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Xl.cleanup()}})}cachedPageNumber(t){if(!WD(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}},xh=Symbol("INITIAL_DATA"),Gh=class{#e=Object.create(null);#t(t){return this.#e[t]||=ue(L({},Promise.withResolvers()),{data:xh})}get(t,e=null){if(e){let s=this.#t(t);return s.promise.then(()=>e(s.data)),null}let i=this.#e[t];if(!i||i.data===xh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){let e=this.#e[t];return!!e&&e.data!==xh}resolve(t,e=null){let i=this.#t(t);i.data=e,i.resolve()}clear(){for(let t in this.#e){let{data:e}=this.#e[t];e?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let t in this.#e){let{data:e}=this.#e[t];e!==xh&&(yield[t,e])}}},mb=class{#e=null;constructor(t){this.#e=t,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#e;return t.form||t.canvas&&e?.size>0}},_b=class n{#e=null;static#t=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new mb(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(n.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new na(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),n.#t.delete(this._canvas),this.callback(t||new Wl(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return O(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n.#t.delete(this._canvas),this.callback())))})}},Ij="4.8.69",Pj="3634dab10";function GD(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Bl(n){return Math.max(0,Math.min(255,255*n))}var qh=class{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Bl(t),[t,t,t]}static G_HTML([t]){let e=GD(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Bl)}static RGB_HTML(t){return`#${t.map(GD).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Bl(1-Math.min(1,t+s)),Bl(1-Math.min(1,i+s)),Bl(1-Math.min(1,e+s))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){let s=1-t,r=1-e,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}},bb=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ze("Abstract method `_createSVG` called.")}},Zl=class extends bb{_createSVG(t){return document.createElementNS(ds,t)}},Yh=class{static setupStorage(t,e,i,s,r){let o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{s.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(let a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{let l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){let{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(let[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){let e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});let a=r!=="richText",l=t.div;if(l.append(o),t.viewport){let d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(s.children.length===0){if(s.value){let d=document.createTextNode(s.value);o.append(d),a&&Ql.shouldBuildText(s.name)&&c.push(d)}return{textDivs:c}}let u=[[s,-1,o]];for(;u.length>0;){let[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}let p=d.children[++u.at(-1)[1]];if(p===null)continue;let{name:g}=p;if(g==="#text"){let _=document.createTextNode(p.value);c.push(_),f.append(_);continue}let m=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(m),p.attributes&&this.setAttributes({html:m,element:p,storage:e,intent:r,linkService:i}),p.children?.length>0)u.push([p,-1,m]);else if(p.value){let _=document.createTextNode(p.value);a&&Ql.shouldBuildText(g)&&c.push(_),m.append(_)}}for(let d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},nc=1e3,Oj=9,Br=new WeakSet;function hs(n){return{width:n[2]-n[0],height:n[3]-n[1]}}var vb=class{static create(t){switch(t.data.annotationType){case St.LINK:return new Kh(t);case St.TEXT:return new yb(t);case St.WIDGET:switch(t.data.fieldType){case"Tx":return new wb(t);case"Btn":return t.data.radioButton?new Xh(t):t.data.checkBox?new xb(t):new Eb(t);case"Ch":return new Sb(t);case"Sig":return new Cb(t)}return new gs(t);case St.POPUP:return new Jl(t);case St.FREETEXT:return new Qh(t);case St.LINE:return new Mb(t);case St.SQUARE:return new Ab(t);case St.CIRCLE:return new Tb(t);case St.POLYLINE:return new Zh(t);case St.CARET:return new Pb(t);case St.INK:return new ec(t);case St.POLYGON:return new Ib(t);case St.HIGHLIGHT:return new Jh(t);case St.UNDERLINE:return new Ob(t);case St.SQUIGGLY:return new Rb(t);case St.STRIKEOUT:return new Nb(t);case St.STAMP:return new ef(t);case St.FILEATTACHMENT:return new kb(t);default:return new _t(t)}}},_t=class n{#e=null;#t=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};let{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(t){let{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i?.splice(0,4,...t);let{width:c,height:u}=hs(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,s===0?(e.width=`${100*c/r}%`,e.height=`${100*u/o}%`):this.setRotation(s)}_createContainer(t){let{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof gs||(r.tabIndex=nc);let{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Jl){let{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}let{width:a,height:l}=hs(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;let g=e.borderStyle.horizontalCornerRadius,m=e.borderStyle.verticalCornerRadius;if(g>0||m>0){let b=`calc(${g}px * var(--scale-factor)) / calc(${m}px * var(--scale-factor))`;o.borderRadius=b}else if(this instanceof Xh){let b=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=b}switch(e.borderStyle.style){case Ll.SOLID:o.borderStyle="solid";break;case Ll.DASHED:o.borderStyle="dashed";break;case Ll.BEVELED:Ee("Unimplemented border style: beveled");break;case Ll.INSET:Ee("Unimplemented border style: inset");break;case Ll.UNDERLINE:o.borderBottomStyle="solid";break;default:break}let _=e.borderColor||null;_?(this.#t=!0,o.borderColor=X.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}let c=X.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=s.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-f)/d}%`;let{rotation:p}=e;return e.hasOwnCanvas||p===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(p,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=hs(this.data.rect),a,l;t%180===0?(a=100*r/i,l=100*o/s):(a=100*o/i,l=100*r/s),e.style.width=`${a}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,i,s)=>{let r=s.detail[e],o=r[0],a=r.slice(1);s.target.style[i]=qh[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:qh[`${o}_rgb`](a)})};return Ie(this,"_commonActions",{display:e=>{let{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){let i=this._commonActions;for(let s of Object.keys(e.detail))(t[s]||i[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let i=this._commonActions;for(let[s,r]of Object.entries(e)){let o=i[s];if(o){let a={detail:{[s]:r},target:t};o(a),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,i,s,r]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){let[g,m,_,b]=t.subarray(2,6);if(s===g&&r===m&&e===_&&i===b)return}let{style:o}=this.container,a;if(this.#t){let{borderColor:g,borderWidth:m}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}let l=s-e,c=r-i,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);let h=u.createElement("defs");d.append(h);let f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,m=t.length;g<m;g+=8){let _=t[g],b=t[g+1],y=t[g+2],v=t[g+3],x=u.createElement("rect"),S=(y-e)/l,D=(r-b)/c,A=(_-y)/l,E=(b-v)/c;x.setAttribute("x",S),x.setAttribute("y",D),x.setAttribute("width",A),x.setAttribute("height",E),f.append(x),a?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${D}" width="${A}" height="${E}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){let{data:t}=this,e=this.#n=new Jl({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let i=[];if(this._fieldObjects){let s=this._fieldObjects[t];if(s)for(let{page:r,id:o,exportValues:a}of s){if(r===-1||o===e)continue;let l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Br.has(c)){Ee(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:c})}return i}for(let s of document.getElementsByName(t)){let{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&Br.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}},Kh=class extends _t{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(this.#t(i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#n(i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#e()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#e()}#t(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#e()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#e()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let s of Object.keys(e.actions)){let r=i.get(s);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}t.onclick||(t.onclick=()=>!1),this.#e()}_bindResetFormAction(t,e){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:s,refs:r,include:o}=e,a=[];if(s.length!==0||r.length!==0){let u=new Set(r);for(let d of s){let h=this._fieldObjects[d]||[];for(let{id:f}of h)u.add(f)}for(let d of Object.values(this._fieldObjects))for(let h of d)u.has(h.id)===o&&a.push(h)}else for(let u of Object.values(this._fieldObjects))a.push(...u);let l=this.annotationStorage,c=[];for(let u of a){let{id:d}=u;switch(c.push(d),u.type){case"text":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;l.setValue(d,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}default:continue}let h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!Br.has(h)){Ee(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},yb=class extends _t{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},gs=class extends _t{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return kt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}})})}_setEventListeners(t,e,i,s){for(let[r,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,o,s),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":X.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Oj,r=t.style,o,a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(Sh*s))||1,d=c/u;o=Math.min(s,l(d/Sh))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/Sh))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=X.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},wb=class extends gs{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){let r=this.annotationStorage;for(let o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let s=t.getValue(e,{value:this.data.fieldValue}),r=s.value||"",o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let a=s.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let l={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Br.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=nc,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue??"";i.value=l.userValue=d,l.formattedValue=null});let c=u=>{let{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;let{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);let h={value(f){l.userValue=f.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){let{formattedValue:p}=f.detail;l.formattedValue=p,p!=null&&f.target!==document.activeElement&&(f.target.value=p),t.setValue(e,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{let{charLimit:p}=f.detail,{target:g}=f;if(p===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",p);let m=l.userValue;!m||m.length<=p||(m=m.slice(0,p),g.value=l.userValue=m,t.setValue(e,{value:m}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if(d.key==="Escape"?h=0:d.key==="Enter"&&!this.data.multiLine?h=2:d.key==="Tab"&&(l.commitKey=3),h===-1)return;let{value:f}=d.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});let u=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;let{data:h,target:f}=d,{value:p,selectionStart:g,selectionEnd:m}=f,_=g,b=m;switch(d.inputType){case"deleteWordBackward":{let y=p.substring(0,g).match(/\w*[^\w]*$/);y&&(_-=y[0].length);break}case"deleteWordForward":{let y=p.substring(g).match(/^[^\w]*\w*/);y&&(b+=y[0].length);break}case"deleteContentBackward":g===m&&(_-=1);break;case"deleteContentForward":g===m&&(b+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:h||"",willCommit:!1,selStart:_,selEnd:b}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){let d=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Cb=class extends gs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},xb=class extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,i=e.id,s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let r=document.createElement("input");return Br.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=nc,r.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,i)){let u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{let a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{let a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},Xh=class extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,i=e.id,s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(let o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});let r=document.createElement("input");if(Br.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=nc,r.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{let a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){let o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{let l={value:c=>{let u=o===c.detail.value;for(let d of this._getElementsByName(c.target.name)){let h=u&&d.id===i;d.domElement&&(d.domElement.checked=h),t.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},Eb=class extends Kh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},Sb=class extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Br.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=nc;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue;for(let h of s.options)h.selected=h.value===d});for(let u of this.data.options){let d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,i.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}let a=u=>{let d=u?"value":"textContent",{options:h,multiple:f}=s;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]},l=a(!1),c=u=>{let d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{let d={value(h){o?.();let f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(let g of s.options)g.selected=p.has(g.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(h){s.multiple=!0},remove(h){let f=s.options,p=h.detail.remove;f[p].selected=!1,s.remove(p),f.length>0&&Array.prototype.findIndex.call(f,m=>m.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(h){let{index:f,displayValue:p,exportValue:g}=h.detail.insert,m=s.children[f],_=document.createElement("option");_.textContent=p,_.value=g,m?m.before(_):s.append(_),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},items(h){let{items:f}=h.detail;for(;s.length!==0;)s.remove(0);for(let p of f){let{displayValue:g,exportValue:m}=p,_=document.createElement("option");_.textContent=g,_.value=m,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){let f=new Set(h.detail.indices);for(let p of h.target.options)p.selected=f.has(p.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),s.addEventListener("input",u=>{let d=a(!0),h=a(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Jl=class extends _t{constructor(t){let{data:e,elements:i}=t;super(t,{isRenderable:_t._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");let t=this.popup=new Db({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(let i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${zb}${i}`).join(",")),this.container}},Db=class{#e=this.#I.bind(this);#t=this.#D.bind(this);#n=this.#A.bind(this);#i=this.#E.bind(this);#s=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#_=null;#m=null;#b=!1;constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){this.#r=t,this.#_=s,this.#l=o,this.#g=a,this.#a=l,this.#s=e,this.#f=c,this.#d=u,this.#u=i,this.#c=Ph.toDateObject(r),this.trigger=i.flatMap(h=>h.getElementsToTriggerPopup());for(let h of this.trigger)h.addEventListener("click",this.#i),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#t),h.classList.add("popupTriggerArea");for(let h of i)h.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,d&&this.#E()}render(){if(this.#h)return;let t=this.#h=document.createElement("div");if(t.className="popup",this.#s){let r=t.style.outlineColor=X.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=X.makeHexColor(...this.#s.map(a=>Math.floor(.7*(255-a)+a)))}let e=document.createElement("span");e.className="header";let i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#_,t.append(e),this.#c){let r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),e.append(r)}let s=this.#y;if(s)Yh.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{let r=this._formatContents(this.#l);t.append(r)}this.#r.append(t)}get#y(){let t=this.#g,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#g.html||null}get#x(){return this.#y?.attributes?.style?.fontSize||0}get#w(){return this.#y?.attributes?.style?.color||null}#C(t){let e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#w,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(let r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i}_formatContents({str:t,dir:e}){let i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;let s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){let a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}#I(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#o)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#m||={contentsObj:this.#l,richText:this.#g},t&&(this.#p=null),e&&(this.#g=this.#C(e),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#g}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#M(){if(this.#p!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=this.#a,o=!!this.#d,a=o?this.#d:this.#f;for(let p of this.#u)if(!a||X.intersect(p.data.rect,a)!==null){a=p.data.rect,o=!0;break}let l=X.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];this.#p=[100*(d-s)/e,100*(h-r)/i];let{style:f}=this.#r;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#E(){this.#o=!this.#o,this.#o?(this.#A(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#e)):(this.#D(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#e))}#A(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#M(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#D(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#r.hidden=!0)}maybeShow(){this.#b&&(this.#h||this.#A(),this.#b=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}},Qh=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Mb=class extends _t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let t=this.data,{width:e,height:i}=hs(t.rect),s=this.svgFactory.create(e,i,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Ab=class extends _t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let t=this.data,{width:e,height:i}=hs(t.rect),s=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",i-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Tb=class extends _t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let t=this.data,{width:e,height:i}=hs(t.rect),s=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",i/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Zh=class extends _t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:i,popupRef:s}}=this;if(!e)return this.container;let{width:r,height:o}=hs(t),a=this.svgFactory.create(r,o,!0),l=[];for(let u=0,d=e.length;u<d;u+=2){let h=e[u]-t[0],f=t[3]-e[u+1];l.push(`${h},${f}`)}l=l.join(" ");let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Ib=class extends Zh{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Pb=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},ec=class extends _t{#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,inkLists:e,borderStyle:i,popupRef:s}}=this,{width:r,height:o}=hs(t),a=this.svgFactory.create(r,o,!0);for(let l of e){let c=[];for(let d=0,h=l.length;d<h;d+=2){let f=l[d]-t[0],p=t[3]-l[d+1];c.push(`${f},${p}`)}c=c.join(" ");let u=this.svgFactory.createElement(this.svgElementName);this.#e.push(u),u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Jh=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Ob=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Rb=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},Nb=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},ef=class extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},kb=class extends _t{#e=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",L({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;let{isMac:s}=kt.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&this.#t()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Fb=class{#e=null;#t=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){this.div=t,this.#e=e,this.#t=i,this.#i=a||null,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}#s(t,e){return O(this,null,function*(){let i=t.firstChild||t,s=i.id=`${zb}${e}`,r=yield this.#i?.getAriaAttributes(s);if(r)for(let[o,a]of r)i.setAttribute(o,a);this.div.append(t),this.#e?.moveElementInDOM(this.div,t,i,!1)})}render(t){return O(this,null,function*(){let{annotations:e}=t,i=this.div;Lr(i,this.viewport);let s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Zl,annotationStorage:t.annotationStorage||new Yl,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let o of e){if(o.noHTML)continue;let a=o.annotationType===St.POPUP;if(a){let u=s.get(o.id);if(!u)continue;r.elements=u}else{let{width:u,height:d}=hs(o.rect);if(u<=0||d<=0)continue}r.data=o;let l=vb.create(r);if(!l.isRenderable)continue;if(!a&&o.popupRef){let u=s.get(o.popupRef);u?u.push(l):s.set(o.popupRef,[l])}let c=l.render();o.hidden&&(c.style.visibility="hidden"),yield this.#s(c,o.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()})}update({viewport:t}){let e=this.div;this.viewport=t,Lr(e,{rotation:t.rotation}),this.#r(),e.hidden=!1}#r(){if(!this.#t)return;let t=this.div;for(let[e,i]of this.#t){let s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";let{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}},Eh=/\r\n?|\n/g,Lb=class n extends He{#e;#t="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=n.prototype,e=r=>r.isEmpty(),i=ql.TRANSLATE_SMALL,s=ql.TRANSLATE_BIG;return Ie(this,"_keyboardManager",new Vr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=ve.FREETEXT;constructor(t){super(ue(L({},t),{name:"freeTextEditor"})),this.#e=t.color||n._defaultColor||He._defaultLineColor,this.#s=t.fontSize||n._defaultFontSize}static initialize(t,e){He.initialize(t,e);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case oe.FREETEXT_SIZE:n._defaultFontSize=e;break;case oe.FREETEXT_COLOR:n._defaultColor=e;break}}updateParams(t,e){switch(t){case oe.FREETEXT_SIZE:this.#r(e);break;case oe.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[oe.FREETEXT_SIZE,n._defaultFontSize],[oe.FREETEXT_COLOR,n._defaultColor||He._defaultLineColor]]}get propertiesToUpdate(){return[[oe.FREETEXT_SIZE,this.#s],[oe.FREETEXT_COLOR,this.#e]]}#r(t){let e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#s)*this.parentScale),this.#s=s,this.#u()},i=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){let e=s=>{this.#e=this.editorDiv.style.color=s},i=this.#e;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-n._internalPadding*t,-(n._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ve.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;let t=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){let t=[];this.editorDiv.normalize();let e=null;for(let i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(n.#a(i)),e=i);return t.join(`
`)}#u(){let[t,e]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:s,div:r}=this,o=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#t,e=this.#t=this.#c().trimEnd();if(t===e)return;let i=s=>{if(this.#t=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){n._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Oh(this,this.div,["dblclick","keydown"]),this.width){let[s,r]=this.parentDimensions;if(this.annotationElementId){let{position:o}=this._initialData,[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);let[c,u]=this.pageDimensions,[d,h]=this.pageTranslation,f,p;switch(this.rotation){case 0:f=t+(o[0]-d)/c,p=e+this.height-(o[1]-h)/u;break;case 90:f=t+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=t-this.width+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=t+(o[0]-d-this.height*u)/c,p=e+(o[1]-h-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(f*s,p*r,a,l)}else this.setAt(t*s,e*r,this.width*s,this.height*r);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Eh,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let s=n.#h(e.getData("text")||"").replaceAll(Eh,`
`);if(!s)return;let r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();let o=r.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}let{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){let f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(Eh,"")),f!==this.editorDiv){let p=c;for(let g of this.editorDiv.childNodes){if(g===f){p=u;continue}p.push(n.#a(g))}}c.push(a.nodeValue.slice(0,l).replaceAll(Eh,""))}else if(a===this.editorDiv){let f=c,p=0;for(let g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(n.#a(g))}this.#t=`${c.join(`
`)}${s}${u.join(`
`)}`,this.#d();let d=new Range,h=c.reduce((f,p)=>f+p.length,0);for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}r.removeAllRanges(),r.addRange(d)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let t of this.#t.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#o(){return this.#t.replaceAll("\xA0"," ")}static#h(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){return O(this,null,function*(){let s=null;if(t instanceof Qh){let{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d},textContent:h,textPosition:f,parent:{page:{pageNumber:p}}}=t;if(!h||h.length===0)return null;s=t={annotationType:ve.FREETEXT,color:Array.from(a),fontSize:o,value:h.join(`
`),position:f,pageIndex:p-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:d}}let r=yield Zr(n,this,"deserialize").call(this,t,e,i);return r.#s=t.fontSize,r.#e=X.makeHexColor(...t.color),r.#t=n.#h(t.value),r.annotationElementId=t.id||null,r._initialData=s,r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=n._internalPadding*this.parentScale,i=this.getRect(e,e),s=He._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),r={annotationType:ve.FREETEXT,color:s,fontSize:this.#s,value:this.#o(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!this.#p(r)?null:(r.id=this.annotationElementId,r)}#p(t){let{value:e,fontSize:i,color:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,a)=>o!==s[a])||t.pageIndex!==r}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(this.deleted)return e;let{style:i}=e;i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#e,e.replaceChildren();for(let r of this.#t.split(`
`)){let o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}let s=n._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#t}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},tf=class{toSVGPath(){Ze("Abstract method `toSVGPath` must be implemented.")}get box(){Ze("Abstract getter `box` must be implemented.")}serialize(t,e){Ze("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ze("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ze("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}},nf=class n{#e;#t=[];#n;#i;#s=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#g=n.#p+n.#f;constructor({x:t,y:e},i,s,r,o,a=0){this.#e=i,this.#o=r*s,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=a,this.#a=n.#p*s,this.#u=n.#g*s,this.#d=s,this.#h.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#_(){let t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,s,r,o]=this.#e;return[(this.#l+(t[0]-e[0])/2-i)/r,(this.#c+(t[1]-e[1])/2-s)/o,(this.#l+(e[0]-t[0])/2-i)/r,(this.#c+(e[1]-t[1])/2-s)/o]}add({x:t,y:e}){this.#l=t,this.#c=e;let[i,s,r,o]=this.#e,[a,l,c,u]=this.#r.subarray(8,12),d=t-c,h=e-u,f=Math.hypot(d,h);if(f<this.#u)return!1;let p=f-this.#a,g=p/f,m=g*d,_=g*h,b=a,y=l;a=c,l=u,c+=m,u+=_,this.#h?.push(t,e);let v=-_/p,x=m/p,S=v*this.#o,D=x*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+S,u+D],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-S,u-D],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([a+S,l+D],2),this.#s.push(NaN,NaN,NaN,NaN,(a+S-i)/r,(l+D-s)/o),this.#r.set([a-S,l-D],14),this.#t.push(NaN,NaN,NaN,NaN,(a-S-i)/r,(l-D-s)/o)),this.#r.set([b,y,a,l,c,u],6),!this.isEmpty()):(this.#r.set([b,y,a,l,c,u],6),Math.abs(Math.atan2(y-l,b-a)-Math.atan2(_,m))<Math.PI/2?([a,l,c,u]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((a+c)/2-i)/r,((l+u)/2-s)/o),[a,l,b,y]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((b+a)/2-i)/r,((y+l)/2-s)/o),!0):([b,y,a,l,c,u]=this.#r.subarray(0,6),this.#s.push(((b+5*a)/6-i)/r,((y+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),[c,u,a,l,b,y]=this.#r.subarray(12,18),this.#t.push(((b+5*a)/6-i)/r,((y+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#s,e=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();let i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#y(i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#b(i),i.join(" ")}#m(){let[t,e,i,s]=this.#e,[r,o,a,l]=this.#_();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/s} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/s} L${r} ${o} L${a} ${l} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/s} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/s} Z`}#b(t){let e=this.#t;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){let[e,i,s,r]=this.#e,o=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[l,c,u,d]=this.#_();t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${l} ${c} L${u} ${d} L${(a[0]-e)/s} ${(a[1]-i)/r}`)}newFreeDrawOutline(t,e,i,s,r,o){return new sf(t,e,i,s,r,o)}getOutlines(){let t=this.#s,e=this.#t,i=this.#r,[s,r,o,a]=this.#e,l=new Float64Array((this.#h?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#h[d]-s)/o,l[d+1]=(this.#h[d+1]-r)/a;if(l[l.length-2]=(this.#l-s)/o,l[l.length-1]=(this.#c-r)/a,isNaN(i[6])&&!this.isEmpty())return this.#x(l);let c=new Float64Array(this.#s.length+24+this.#t.length),u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#C(c,u);for(let d=e.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(e[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+h],c[u+1]=e[d+h+1],u+=2}return this.#w(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#d,this.#n,this.#i)}#x(t){let e=this.#r,[i,s,r,o]=this.#e,[a,l,c,u]=this.#_(),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,this.#e,this.#d,this.#n,this.#i)}#w(t,e){let i=this.#t;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#C(t,e){let i=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[r,o,a,l]=this.#e,[c,u,d,h]=this.#_();return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l],e),e+=24}},sf=class extends tf{#e;#t=null;#n;#i;#s;#r;#l;constructor(t,e,i,s,r,o){super(),this.#l=t,this.#s=e,this.#e=i,this.#r=s,this.#n=r,this.#i=o,this.#a(o);let{x:a,y:l,width:c,height:u}=this.#t;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){let t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,i=this.#l.length;e<i;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,s],r){let o=i-t,a=s-e,l,c;switch(r){case 0:l=this.#c(this.#l,t,s,o,-a),c=this.#c(this.#s,t,s,o,-a);break;case 90:l=this.#u(this.#l,t,e,o,a),c=this.#u(this.#s,t,e,o,a);break;case 180:l=this.#c(this.#l,i,e,-o,a),c=this.#c(this.#s,i,e,-o,a);break;case 270:l=this.#u(this.#l,i,s,-o,-a),c=this.#u(this.#s,i,s,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#c(t,e,i,s,r){let o=new Float64Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*s,o[a+1]=i+t[a+1]*r;return o}#u(t,e,i,s,r){let o=new Float64Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*s,o[a+1]=i+t[a]*r;return o}#a(t){let e=this.#l,i=e[4],s=e[5],r=i,o=s,a=i,l=s,c=i,u=s,d=t?Math.max:Math.min;for(let m=6,_=e.length;m<_;m+=6){if(isNaN(e[m]))r=Math.min(r,e[m+4]),o=Math.min(o,e[m+5]),a=Math.max(a,e[m+4]),l=Math.max(l,e[m+5]),u<e[m+5]?(c=e[m+4],u=e[m+5]):u===e[m+5]&&(c=d(c,e[m+4]));else{let b=X.bezierBoundingBox(i,s,...e.slice(m,m+6));r=Math.min(r,b[0]),o=Math.min(o,b[1]),a=Math.max(a,b[2]),l=Math.max(l,b[3]),u<b[3]?(c=b[2],u=b[3]):u===b[3]&&(c=d(c,b[2]))}i=e[m+4],s=e[m+5]}let h=r-this.#n,f=o-this.#n,p=a-r+2*this.#n,g=l-o+2*this.#n;this.#t={x:h,y:f,width:p,height:g,lastPoint:[c,u]}}get box(){return this.#t}newOutliner(t,e,i,s,r,o=0){return new nf(t,e,i,s,r,o)}getNewOutline(t,e){let{x:i,y:s,width:r,height:o}=this.#t,[a,l,c,u]=this.#e,d=r*c,h=o*u,f=i*c+a,p=s*u+l,g=this.newOutliner({x:this.#s[0]*d+f,y:this.#s[1]*h+p},this.#e,this.#r,t,this.#i,e??this.#n);for(let m=2;m<this.#s.length;m+=2)g.add({x:this.#s[m]*d+f,y:this.#s[m+1]*h+p});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}},rf=class{#e;#t=[];#n=[];constructor(t,e=0,i=0,s=!0){let r=1/0,o=-1/0,a=1/0,l=-1/0,u=10**-4;for(let{x:_,y:b,width:y,height:v}of t){let x=Math.floor((_-e)/u)*u,S=Math.ceil((_+y+e)/u)*u,D=Math.floor((b-e)/u)*u,A=Math.ceil((b+v+e)/u)*u,E=[x,D,A,!0],I=[S,D,A,!1];this.#t.push(E,I),r=Math.min(r,x),o=Math.max(o,S),a=Math.min(a,D),l=Math.max(l,A)}let d=o-r+2*i,h=l-a+2*i,f=r-i,p=a-i,g=this.#t.at(s?-1:-2),m=[g[0],g[2]];for(let _ of this.#t){let[b,y,v]=_;_[0]=(b-f)/d,_[1]=(y-p)/h,_[2]=(v-p)/h}this.#e={x:f,y:p,width:d,height:h,lastPoint:m}}getOutlines(){this.#t.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);let t=[];for(let e of this.#t)e[3]?(t.push(...this.#c(e)),this.#r(e)):(this.#l(e),t.push(...this.#c(e)));return this.#i(t)}#i(t){let e=[],i=new Set;for(let o of t){let[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){let l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}let s=[],r;for(;i.size>0;){let o=i.values().next().value,[a,l,c,u,d]=o;i.delete(o);let h=a,f=l;for(r=[a,c],s.push(r);;){let p;if(i.has(u))p=u;else if(i.has(d))p=d;else break;i.delete(p),[a,l,c,u,d]=p,h!==a&&(r.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}r.push(h,f)}return new Vb(s,this.#e)}#s(t){let e=this.#n,i=0,s=e.length-1;for(;i<=s;){let r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1}#r([,t,e]){let i=this.#s(t);this.#n.splice(i,0,[t,e])}#l([,t,e]){let i=this.#s(t);for(let s=i;s<this.#n.length;s++){let[r,o]=this.#n[s];if(r!==t)break;if(r===t&&o===e){this.#n.splice(s,1);return}}for(let s=i-1;s>=0;s--){let[r,o]=this.#n[s];if(r!==t)break;if(r===t&&o===e){this.#n.splice(s,1);return}}}#c(t){let[e,i,s]=t,r=[[e,i,s]],o=this.#s(s);for(let a=0;a<o;a++){let[l,c]=this.#n[a];for(let u=0,d=r.length;u<d;u++){let[,h,f]=r[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,f>c&&r.push([e,c,f])}}}return r}},Vb=class extends tf{#e;#t;constructor(t,e){super(),this.#t=t,this.#e=e}toSVGPath(){let t=[];for(let e of this.#t){let[i,s]=e;t.push(`M${i} ${s}`);for(let r=2;r<e.length;r+=2){let o=e[r],a=e[r+1];o===i?(t.push(`V${a}`),s=a):a===s&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,s],r){let o=[],a=i-t,l=s-e;for(let c of this.#t){let u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*a,u[d+1]=s-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}},tc=class extends nf{newFreeDrawOutline(t,e,i,s,r,o){return new Bb(t,e,i,s,r,o)}get classNamesForDrawing(){return["highlight","free"]}},Bb=class extends sf{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,i,s,r,o=0){return new tc(t,e,i,s,r,o)}},of=class n{#e=null;#t=null;#n;#i=null;#s=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return Ie(this,"_keyboardManager",new Vr([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#d=oe.HIGHLIGHT_COLOR,this.#l=t):(this.#r=!0,this.#d=oe.HIGHLIGHT_DEFAULT_COLOR),this.#a=t?._uiManager||e,this.#c=this.#a._eventBus,this.#n=t?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",n.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#e=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);let e=this.#a._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#f.bind(this),{signal:e});let i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){let t=this.#i=this.#h();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#h(){let t=document.createElement("div"),e=this.#a._signal;t.addEventListener("contextmenu",Qn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[i,s]of this.#a.highlightColors){let r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",n.#o[i]);let o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===this.#n),r.addEventListener("click",this.#p.bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#f.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#e){this.#g(t);return}let e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#g(t);return}if(t.target===this.#e){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#g(t);return}this.#i.lastChild?.focus()}#f(t){n._keyboardManager.exec(this,t)}#g(t){if(this.#m){this.hideDropdown();return}if(this.#s=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#_.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}let e=this.#i=this.#h();this.#e.append(e)}#_(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#t&&(this.#t.style.backgroundColor=t),!this.#i)return;let e=this.#a.highlightColors.values();for(let i of this.#i.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}},af=class n extends He{#e=null;#t=0;#n;#i=null;#s=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#g="";#_;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ve.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=n.prototype;return Ie(this,"_keyboardManager",new Vr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(ue(L({},t),{name:"highlightEditor"})),this.color=t.color||n._defaultColor,this.#_=t.thickness||n._defaultThickness,this.#p=t.opacity||n._defaultOpacity,this.#n=t.boxes||null,this.#m=t.methodOfCreation||"",this.#g=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#o=!0,this.#y(t),this.#M()):this.#n&&(this.#e=t.anchorNode,this.#t=t.anchorOffset,this.#l=t.focusNode,this.#c=t.focusOffset,this.#b(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#_,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){let t=new rf(this.#n,.001);this.#a=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;let e=new rf(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();let{lastPoint:i}=this.#r.box;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#a=t;let s=1.5;if(this.#r=t.getNewOutline(this.#_/2+s,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeLine(e,t),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,t),this.parent.drawLayer.updateBox(this.#d,n.#E(this.#a.box,(u-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,n.#E(this.#r.box,u))}let{x:r,y:o,width:a,height:l}=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{let[u,d]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{let[u,d]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*d/u,this.height=l*u/d;break}}let{lastPoint:c}=this.#r.box;this.#h=[(c[0]-r)/a,(c[1]-o)/l]}static initialize(t,e){He.initialize(t,e),n._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case oe.HIGHLIGHT_DEFAULT_COLOR:n._defaultColor=e;break;case oe.HIGHLIGHT_THICKNESS:n._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#h}updateParams(t,e){switch(t){case oe.HIGHLIGHT_COLOR:this.#x(e);break;case oe.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[oe.HIGHLIGHT_DEFAULT_COLOR,n._defaultColor],[oe.HIGHLIGHT_THICKNESS,n._defaultThickness]]}get propertiesToUpdate(){return[[oe.HIGHLIGHT_COLOR,this.color||n._defaultColor],[oe.HIGHLIGHT_THICKNESS,this.#_||n._defaultThickness],[oe.HIGHLIGHT_FREE,this.#o]]}#x(t){let e=(r,o)=>{this.color=r,this.parent?.drawLayer.changeColor(this.#d,r),this.#s?.updateColor(r),this.#p=o,this.parent?.drawLayer.changeOpacity(this.#d,o)},i=this.color,s=this.#p;this.addCommands({cmd:e.bind(this,t,n._defaultOpacity),undo:e.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){let e=this.#_,i=s=>{this.#_=s,this.#C(s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}addEditToolbar(){return O(this,null,function*(){let t=yield Zr(n.prototype,this,"addEditToolbar").call(this);return t?(this._uiManager.highlightColors&&(this.#s=new of({editor:this}),t.addColorPicker(this.#s)),t):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#I(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#I():t&&(this.#M(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#C(t){if(!this.#o)return;this.#y({highlightOutlines:this.#a.getNewOutline(t/2)}),this.fixAndSetPosition();let[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#I(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw(this.#a,this.color,this.#p),this.#f=t.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#i))}static#E({x:t,y:e,width:i,height:s},r){switch(r){case 90:return{x:1-e-s,y:t,width:s,height:i};case 180:return{x:1-t-i,y:1-e-s,width:i,height:s};case 270:return{x:e,y:1-t-i,width:s,height:i}}return{x:t,y:e,width:i,height:s}}rotate(t){let{drawLayer:e}=this.parent,i;this.#o?(t=(t-this.rotation+360)%360,i=n.#E(this.#a.box,t)):i=n.#E(this,t),e.rotate(this.#d,t),e.rotate(this.#f,t),e.updateBox(this.#d,i),e.updateBox(this.#f,n.#E(this.#r.box,t))}render(){if(this.div)return this.div;let t=super.render();this.#g&&(t.setAttribute("aria-label",this.#g),t.setAttribute("role","mark")),this.#o?t.classList.add("free"):this.div.addEventListener("keydown",this.#A.bind(this),{signal:this._uiManager._signal});let e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;let[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),Oh(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#A(t){n._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(t){if(!this.#e)return;let e=window.getSelection();t?e.setPosition(this.#e,this.#t):e.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#D(!1))}get _mustFixPosition(){return!this.#o}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#d,t),this.parent.drawLayer.show(this.#f,t))}#P(){return this.#o?this.rotation:0}#R(){if(this.#o)return null;let[t,e]=this.pageDimensions,[i,s]=this.pageTranslation,r=this.#n,o=new Float32Array(r.length*8),a=0;for(let{x:l,y:c,width:u,height:d}of r){let h=l*t+i,f=(1-c-d)*e+s;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*t,o[a+5]=o[a+7]=f+d*e,a+=8}return o}#S(t){return this.#a.serialize(t,this.#P())}static startHighlighting(t,e,{target:i,x:s,y:r}){let{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),h=p=>{p.preventDefault(),p.stopPropagation()},f=p=>{u.abort(),this.#T(t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",h,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Qn,{signal:d}),i.addEventListener("pointermove",this.#v.bind(this,t),{signal:d}),this._freeHighlight=new tc({x:s,y:r},[o,a,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#v(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#T(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){return O(this,null,function*(){let s=null;if(t instanceof Jh){let{data:{quadPoints:p,rect:g,rotation:m,id:_,color:b,opacity:y,popupRef:v},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:ve.HIGHLIGHT,color:Array.from(b),opacity:y,quadPoints:p,boxes:null,pageIndex:x-1,rect:g.slice(0),rotation:m,id:_,deleted:!1,popupRef:v}}else if(t instanceof ec){let{data:{inkLists:p,rect:g,rotation:m,id:_,color:b,borderStyle:{rawWidth:y},popupRef:v},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:ve.HIGHLIGHT,color:Array.from(b),thickness:y,inkLists:p,boxes:null,pageIndex:x-1,rect:g.slice(0),rotation:m,id:_,deleted:!1,popupRef:v}}let{color:r,quadPoints:o,inkLists:a,opacity:l}=t,c=yield Zr(n,this,"deserialize").call(this,t,e,i);c.color=X.makeHexColor(...r),c.#p=l||1,a&&(c.#_=t.thickness),c.annotationElementId=t.id||null,c._initialData=s;let[u,d]=c.pageDimensions,[h,f]=c.pageTranslation;if(o){let p=c.#n=[];for(let g=0;g<o.length;g+=8)p.push({x:(o[g]-h)/u,y:1-(o[g+1]-f)/d,width:(o[g+2]-o[g])/u,height:(o[g+1]-o[g+5])/d});c.#b(),c.#M(),c.rotate(c.rotation)}else if(a){c.#o=!0;let p=a[0],g={x:p[0]-h,y:d-(p[1]-f)},m=new tc(g,[0,0,u,d],1,c.#_/2,!0,.001);for(let y=0,v=p.length;y<v;y+=2)g.x=p[y]-h,g.y=d-(p[y+1]-f),m.add(g);let{id:_,clipPathId:b}=e.drawLayer.draw(m,c.color,c._defaultOpacity,!0);c.#y({highlightOutlines:m.getOutlines(),highlightId:_,clipPathId:b}),c.#M()}return c})}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=this.getRect(0,0),i=He._colorManager.convert(this.color),s={annotationType:ve.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#_,quadPoints:this.#R(),outlines:this.#S(e),pageIndex:this.pageIndex,rect:e,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(s)?null:(s.id=this.annotationElementId,s)}#O(t){let{color:e}=this._initialData;return t.color.some((i,s)=>i!==e[s])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},jb=class n extends He{#e=0;#t=0;#n=null;#i=new Path2D;#s=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ve.INK;constructor(t){super(ue(L({},t),{name:"inkEditor"})),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){He.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case oe.INK_THICKNESS:n._defaultThickness=e;break;case oe.INK_COLOR:n._defaultColor=e;break;case oe.INK_OPACITY:n._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case oe.INK_THICKNESS:this.#p(e);break;case oe.INK_COLOR:this.#f(e);break;case oe.INK_OPACITY:this.#g(e);break}}static get defaultPropertiesToUpdate(){return[[oe.INK_THICKNESS,n._defaultThickness],[oe.INK_COLOR,n._defaultColor||He._defaultLineColor],[oe.INK_OPACITY,Math.round(n._defaultOpacity*100)]]}get propertiesToUpdate(){return[[oe.INK_THICKNESS,this.thickness||n._defaultThickness],[oe.INK_COLOR,this.color||n._defaultColor||He._defaultLineColor],[oe.INK_OPACITY,Math.round(100*(this.opacity??n._defaultOpacity))]]}#p(t){let e=s=>{this.thickness=s,this.#N()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(t){let e=s=>{this.color=s,this.#E()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){let e=s=>{this.opacity=s,this.#E()};t/=100;let i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#S()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#N()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){let[t,e]=this.parentDimensions,i=this.width*t,s=this.height*e;this.setDimensions(i,s)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#A())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#D())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#_(){let{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#m(){let{ctx:t,color:e,opacity:i,thickness:s,parentScale:r,scaleFactor:o}=this;t.lineWidth=s*r/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${ij(i)}`}#b(t,e){this.canvas.addEventListener("contextmenu",Qn,{signal:this._uiManager._signal}),this.#D(),this.#r=new AbortController;let i=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#c||(this.#c=!0,this.#v(),this.thickness||=n._defaultThickness,this.color||=n._defaultColor||He._defaultLineColor,this.opacity??=n._defaultOpacity),this.currentPath.push([t,e]),this.#l=!1,this.#m(),this.#h=()=>{this.#C(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#y(t,e){let[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===s)return;let r=this.currentPath,o=this.#i;if(r.push([t,e]),this.#l=!0,r.length<=2){o.moveTo(...r[0]),o.lineTo(t,e);return}r.length===3&&(this.#i=o=new Path2D,o.moveTo(...r[0])),this.#I(o,...r.at(-3),...r.at(-2),t,e)}#x(){if(this.currentPath.length===0)return;let t=this.currentPath.at(-1);this.#i.lineTo(...t)}#w(t,e){this.#h=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#y(t,e),this.#x();let i;if(this.currentPath.length!==1)i=this.#M();else{let l=[t,e];i=[[l,l.slice(),l.slice(),l]]}let s=this.#i,r=this.currentPath;this.currentPath=[],this.#i=new Path2D;let o=()=>{this.allRawPaths.push(r),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#S()),this.#N())};this.addCommands({cmd:o,undo:a,mustExec:!0})}#C(){if(!this.#l)return;this.#l=!1;let t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map(u=>u[0]),s=e.map(u=>u[1]),r=Math.min(...i)-t,o=Math.max(...i)+t,a=Math.min(...s)-t,l=Math.max(...s)+t,{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(let u of this.bezierPath2D)c.stroke(u);c.stroke(this.#i),c.restore()}#I(t,e,i,s,r,o,a){let l=(e+s)/2,c=(i+r)/2,u=(s+o)/2,d=(r+a)/2;t.bezierCurveTo(l+2*(s-l)/3,c+2*(r-c)/3,u+2*(s-u)/3,d+2*(r-d)/3,u,d)}#M(){let t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];let e=[],i,[s,r]=t[0];for(i=1;i<t.length-2;i++){let[h,f]=t[i],[p,g]=t[i+1],m=(h+p)/2,_=(f+g)/2,b=[s+2*(h-s)/3,r+2*(f-r)/3],y=[m+2*(h-m)/3,_+2*(f-_)/3];e.push([[s,r],b,y,[m,_]]),[s,r]=[m,_]}let[o,a]=t[i],[l,c]=t[i+1],u=[s+2*(o-s)/3,r+2*(a-r)/3],d=[l+2*(o-l)/3,c+2*(a-c)/3];return e.push([[s,r],u,d,[l,c]]),e}#E(){if(this.isEmpty()){this.#O();return}this.#m();let{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#O();for(let i of this.bezierPath2D)e.stroke(i)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#N(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#A(){if(this.#a)return;this.#a=new AbortController;let t=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#D(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#b(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#y(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#P(t)}canvasPointerleave(t){this.#P(t)}#P(t){this.#r?.abort(),this.#r=null,this.#A(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",Qn)},10),this.#w(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#S(){this.#u=new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[i,s,r,o]=this.#_();if(this.setAt(i,s,0,0),this.setDims(r,o),this.#R(),this.width){let[a,l]=this.parentDimensions;this.setAspectRatio(this.width*a,this.height*l),this.setAt(t*a,e*l,this.width*a,this.height*l),this.#c=!0,this.#v(),this.setDims(this.width*a,this.height*l),this.#E(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#S(),this.div}#v(){if(!this.#c)return;let[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#O()}setDimensions(t,e){let i=Math.round(t),s=Math.round(e);if(this.#d===i&&this.#o===s)return;this.#d=i,this.#o=s,this.canvas.style.visibility="hidden";let[r,o]=this.parentDimensions;this.width=t/r,this.height=e/o,this.fixAndSetPosition(),this.#s&&this.#T(t,e),this.#v(),this.#E(),this.canvas.style.visibility="visible",this.fixDims()}#T(t,e){let i=this.#B(),s=(t-i)/this.#t,r=(e-i)/this.#e;this.scaleFactor=Math.min(s,r)}#O(){let t=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#L(t){let e=new Path2D;for(let i=0,s=t.length;i<s;i++){let[r,o,a,l]=t[i];i===0&&e.moveTo(...r),e.bezierCurveTo(o[0],o[1],a[0],a[1],l[0],l[1])}return e}static#H(t,e,i){let[s,r,o,a]=e;switch(i){case 0:for(let l=0,c=t.length;l<c;l+=2)t[l]+=s,t[l+1]=a-t[l+1];break;case 90:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=t[l+1]+s,t[l+1]=u+r}break;case 180:for(let l=0,c=t.length;l<c;l+=2)t[l]=o-t[l],t[l+1]+=r;break;case 270:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=o-t[l+1],t[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return t}static#j(t,e,i){let[s,r,o,a]=e;switch(i){case 0:for(let l=0,c=t.length;l<c;l+=2)t[l]-=s,t[l+1]=a-t[l+1];break;case 90:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=t[l+1]-r,t[l+1]=u-s}break;case 180:for(let l=0,c=t.length;l<c;l+=2)t[l]=o-t[l],t[l+1]-=r;break;case 270:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=a-t[l+1],t[l+1]=o-u}break;default:throw new Error("Invalid rotation")}return t}#F(t,e,i,s){let r=[],o=this.thickness/2,a=t*e+o,l=t*i+o;for(let c of this.paths){let u=[],d=[];for(let h=0,f=c.length;h<f;h++){let[p,g,m,_]=c[h];if(p[0]===_[0]&&p[1]===_[1]&&f===1){let I=t*p[0]+a,N=t*p[1]+l;u.push(I,N),d.push(I,N);break}let b=t*p[0]+a,y=t*p[1]+l,v=t*g[0]+a,x=t*g[1]+l,S=t*m[0]+a,D=t*m[1]+l,A=t*_[0]+a,E=t*_[1]+l;h===0&&(u.push(b,y),d.push(b,y)),u.push(v,x,S,D,A,E),d.push(v,x),h===f-1&&d.push(A,E)}r.push({bezier:n.#H(u,s,this.rotation),points:n.#H(d,s,this.rotation)})}return r}#V(){let t=1/0,e=-1/0,i=1/0,s=-1/0;for(let r of this.paths)for(let[o,a,l,c]of r){let u=X.bezierBoundingBox(...o,...a,...l,...c);t=Math.min(t,u[0]),i=Math.min(i,u[1]),e=Math.max(e,u[2]),s=Math.max(s,u[3])}return[t,i,e,s]}#B(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#N(t=!1){if(this.isEmpty())return;if(!this.#s){this.#E();return}let e=this.#V(),i=this.#B();this.#t=Math.max(He.MIN_SIZE,e[2]-e[0]),this.#e=Math.max(He.MIN_SIZE,e[3]-e[1]);let s=Math.ceil(i+this.#t*this.scaleFactor),r=Math.ceil(i+this.#e*this.scaleFactor),[o,a]=this.parentDimensions;this.width=s/o,this.height=r/a,this.setAspectRatio(s,r);let l=this.translationX,c=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#v(),this.#E(),this.#d=s,this.#o=r,this.setDims(s,r);let u=t?i/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}static deserialize(t,e,i){return O(this,null,function*(){if(t instanceof ec)return null;let s=yield Zr(n,this,"deserialize").call(this,t,e,i);s.thickness=t.thickness,s.color=X.makeHexColor(...t.color),s.opacity=t.opacity;let[r,o]=s.pageDimensions,a=s.width*r,l=s.height*o,c=s.parentScale,u=t.thickness/2;s.#s=!0,s.#d=Math.round(a),s.#o=Math.round(l);let{paths:d,rect:h,rotation:f}=t;for(let{bezier:g}of d){g=n.#j(g,h,f);let m=[];s.paths.push(m);let _=c*(g[0]-u),b=c*(g[1]-u);for(let v=2,x=g.length;v<x;v+=6){let S=c*(g[v]-u),D=c*(g[v+1]-u),A=c*(g[v+2]-u),E=c*(g[v+3]-u),I=c*(g[v+4]-u),N=c*(g[v+5]-u);m.push([[_,b],[S,D],[A,E],[I,N]]),_=I,b=N}let y=this.#L(m);s.bezierPath2D.push(y)}let p=s.#V();return s.#t=Math.max(He.MIN_SIZE,p[2]-p[0]),s.#e=Math.max(He.MIN_SIZE,p[3]-p[1]),s.#T(a,l),s})}serialize(){if(this.isEmpty())return null;let t=this.getRect(0,0),e=He._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ve.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}},Hb=class n extends He{#e=null;#t=null;#n=null;#i=null;#s=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ve.STAMP;constructor(t){super(ue(L({},t),{name:"stampEditor"})),this.#i=t.bitmapUrl,this.#s=t.bitmapFile}static initialize(t,e){He.initialize(t,e)}static get supportedTypes(){return Ie(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return Ie(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(ve.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#o(t,e=!1){if(!t){this.remove();return}this.#e=t.bitmap,e||(this.#t=t.id,this.#a=t.isSvg),t.file&&(this.#r=t.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(t=null,e=!0){return O(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:s,width:r,height:o}=t||this.copyCanvas(null,null,!0).imageData,a=yield i.guess({name:"altText",request:{data:s,width:r,height:o,channels:s.length/(r*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");let l=a.output;return yield this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#o(i,!0)).finally(()=>this.#h());return}if(this.#i){let i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#o(s)).finally(()=>this.#h());return}if(this.#s){let i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(s=>this.#o(s)).finally(()=>this.#h());return}let t=document.createElement("input");t.type="file",t.accept=n.supportedTypesStr;let e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",()=>O(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let s=yield this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(s)}i()}),{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#h()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){let[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s)}return this.div}#f(){let{div:t}=this,{width:e,height:i}=this.#e,[s,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*s,i=this.height*r;else if(e>o*s||i>o*r){let u=Math.min(o*s/e,o*r/i);e*=u,i*=u}let[a,l]=this.parentDimensions;this.setDims(e*a/s,i*l/r),this._uiManager.enableWaiting(!1);let c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(e,i),this.#y(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&c.setAttribute("aria-label",this.#r)}copyCanvas(t,e,i=!1){t||(t=224);let{width:s,height:r}=this.#e,o=new Gl,a=this.#e,l=s,c=r,u=null;if(e){if(s>e||r>e){let S=Math.min(e/s,e/r);l=Math.floor(s*S),c=Math.floor(r*S)}u=document.createElement("canvas");let h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#a||(a=this.#_(h,f));let p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");let _=15,b=_*o.sx,y=_*o.sy,v=new OffscreenCanvas(b*2,y*2),x=v.getContext("2d");x.fillStyle=g,x.fillRect(0,0,b*2,y*2),x.fillStyle=m,x.fillRect(0,0,b,y),x.fillRect(b,y,b,y),p.fillStyle=p.createPattern(v,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(i){let h,f;if(o.symmetric&&a.width<t&&a.height<t)h=a.width,f=a.height;else if(a=this.#e,s>t||r>t){let m=Math.min(t/s,t/r);h=Math.floor(s*m),f=Math.floor(r*m),this.#a||(a=this.#_(h,f))}let g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#g(t,e){let[i,s]=this.parentDimensions;this.width=t/i,this.height=e/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);let r=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(t,e)},r)}#_(t,e){let{width:i,height:s}=this.#e,r=i,o=s,a=this.#e;for(;r>2*t||o>2*e;){let l=r,c=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let u=new OffscreenCanvas(r,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,r,o),a=u.transferToImageBitmap()}return a}#m(t,e){let i=new Gl,s=Math.ceil(t*i.sx),r=Math.ceil(e*i.sy),o=this.#l;if(!o||o.width===s&&o.height===r)return;o.width=s,o.height=r;let a=this.#a?this.#e:this.#_(s,r),l=o.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(a,0,0,a.width,a.height,0,0,s,r)}getImageForAltText(){return this.#l}#b(t){if(t){if(this.#a){let s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#e,e.getContext("2d").drawImage(this.#e,0,0),e.toDataURL()}if(this.#a){let[e,i]=this.pageDimensions,s=Math.round(this.width*e*Gs.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*Gs.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,r);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,r),o.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this._uiManager._signal&&(this.#c=new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.#g(e.width,e.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(t,e,i){return O(this,null,function*(){let s=null;if(t instanceof ef){let{data:{rect:p,rotation:g,id:m,structParent:_,popupRef:b},container:y,parent:{page:{pageNumber:v}}}=t,x=y.querySelector("canvas"),S=i.imageManager.getFromCanvas(y.id,x);x.remove();let D=(yield e._structTree.getAriaAttributes(`${zb}${m}`))?.get("aria-label")||"";s=t={annotationType:ve.STAMP,bitmapId:S.id,bitmap:S.bitmap,pageIndex:v-1,rect:p.slice(0),rotation:g,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:_,popupRef:b}}let r=yield Zr(n,this,"deserialize").call(this,t,e,i),{rect:o,bitmap:a,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:d}=t;c&&i.imageManager.isValidId(c)?(r.#t=c,a&&(r.#e=a)):r.#i=l,r.#a=u;let[h,f]=r.pageDimensions;return r.width=(o[2]-o[0])/h,r.height=(o[3]-o[1])/f,r.annotationElementId=t.id||null,d&&(r.altTextData=d),r._initialData=s,r.#d=!!s,r})}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i={annotationType:ve.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i;let{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){let a=this.#x(i);if(a.isSame)return null;a.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;let o=this.#a?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#t))e.stamps.set(this.#t,{area:o,serialized:i}),i.bitmap=this.#b(!1);else if(this.#a){let a=e.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#b(!1))}return i}#x(t){let{rect:e,pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.rect.every((l,c)=>Math.abs(l-e[c])<1),o=t.pageIndex===i,a=(t.accessibilityData?.alt||"")===s;return{isSame:r&&o&&a,isSameAltText:a}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}},Rj=(()=>{class n{#e;#t=!1;#n=null;#i=null;#s=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Lb,jb,Hb,af].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){let h=[...n.#h.values()];if(!n._initialized){n._initialized=!0;for(let f of h)f.initialize(d,e)}e.registerEditorTypes(h),this.#o=e,this.pageIndex=i,this.div=s,this.#e=o,this.#n=a,this.viewport=u,this.#a=c,this.drawLayer=l,this._structTree=r,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ve.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:i}=this.div;for(let s of n.#h.values())i.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==ve.INK)return;if(!e){for(let s of this.#r.values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}enable(){return O(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let s of this.#r.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#o.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!this.#n)return;let i=this.#n.getEditableAnnotations();for(let s of i){if(s.hide(),this.#o.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;let r=yield this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}})}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,i=new Map;for(let r of this.#r.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else i.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){let r=this.#n.getEditableAnnotations();for(let o of r){let{id:a}=o.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=i.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);let{classList:s}=this.div;for(let r of n.#h.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;let e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();let{target:i}=e;if(i===this.#a.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#a.div.contains(i)){let{isMac:s}=kt.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),af.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;let e=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#r.set(e.id,e);let{annotationElementId:i}=e;i&&this.#o.isDeletedAnnotationElement(i)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),He.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){let i=e.render();this.div.append(i),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),i.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let i=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return n.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#g(e){let i=this.#f;return i?new i.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,i){this.#o.updateToolbar(e),this.#o.updateMode(e);let{offsetX:s,offsetY:r}=this.#_(),o=this.getNextId(),a=this.#g(L({parent:this,id:o,x:s,y:r,uiManager:this.#o,isCentered:!0},i));a&&this.add(a)}deserialize(e){return O(this,null,function*(){return(yield n.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o))||null})}createAndAddNewEditor(e,i,s={}){let r=this.getNextId(),o=this.#g(L({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:i},s));return o&&this.add(o),o}#_(){let{x:e,y:i,width:s,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),a=Math.max(0,i),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,i+r),u=(o+l)/2-e,d=(a+c)/2-i,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(){this.createAndAddNewEditor(this.#_(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){let{isMac:i}=kt.platform;if(!(e.button!==0||e.ctrlKey&&i)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===ve.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}let{isMac:i}=kt.platform;if(e.button!==0||e.ctrlKey&&i||e.target!==this.div)return;this.#l=!0;let s=this.#o.getActive();this.#t=!s||s.isEmpty()}findNewParent(e,i,s){let r=this.#o.findParent(i,s);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(let e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,Lr(this.div,e);for(let i of this.#o.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();let i=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Lr(this.div,{rotation:s}),i!==s)for(let r of this.#r.values())r.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:e,pageHeight:i}=this.viewport.rawDims;return[e,i]}get scale(){return this.#o.viewParameters.realScale}}return n})(),Ub=class n{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#e){this.#e=t;return}if(this.#e!==t){if(this.#n.size>0)for(let e of this.#n.values())e.remove(),t.append(e);this.#e=t}}static get _svgFactory(){return Ie(this,"_svgFactory",new Zl)}static#s(t,{x:e=0,y:i=0,width:s=1,height:r=1}={}){let{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`}#r(t){let e=n._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),n.#s(e,t),e}#l(t,e){let i=n._svgFactory.createElement("clipPath");t.append(i);let s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");let r=n._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s}draw(t,e,i,s=!1){let r=this.#t++,o=this.#r(t.box);o.classList.add(...t.classNamesForDrawing);let a=n._svgFactory.createElement("defs");o.append(a);let l=n._svgFactory.createElement("path");a.append(l);let c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),s&&this.#i.set(r,l);let u=this.#l(a,c),d=n._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",e),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),this.#n.set(r,o),{id:r,clipPathId:`url(#${u})`}}drawOutline(t){let e=this.#t++,i=this.#r(t.box);i.classList.add(...t.classNamesForOutlining);let s=n._svgFactory.createElement("defs");i.append(s);let r=n._svgFactory.createElement("path");s.append(r);let o=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",o),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.mustRemoveSelfIntersections){let u=n._svgFactory.createElement("mask");s.append(u),a=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");let d=n._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let h=n._svgFactory.createElement("use");u.append(h),h.setAttribute("href",`#${o}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}let l=n._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);let c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#n.set(e,i),e}finalizeLine(t,e){let i=this.#i.get(t);this.#i.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#n.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){this.#i.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){n.#s(this.#n.get(t),e)}show(t,e){this.#n.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#n.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#n.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#n.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#n.get(t).classList.add(e)}removeClass(t,e){this.#n.get(t).classList.remove(e)}getSVGRoot(t){return this.#n.get(t)}remove(t){this.#i.delete(t),this.#e!==null&&(this.#n.get(t).remove(),this.#n.delete(t))}destroy(){this.#e=null;for(let t of this.#n.values())t.remove();this.#n.clear(),this.#i.clear()}};var Nj=le.AbortException,kj=le.AnnotationEditorLayer,Fj=le.AnnotationEditorParamsType,Xb=le.AnnotationEditorType,Lj=le.AnnotationEditorUIManager,Vj=le.AnnotationLayer,Bj=le.AnnotationMode,jj=le.ColorPicker,Hj=le.DOMSVGFactory,Uj=le.DrawLayer,$j=le.FeatureTest,Qb=le.GlobalWorkerOptions,zj=le.ImageKind,Wj=le.InvalidPDFException,Gj=le.MissingPDFException,qj=le.OPS,Yj=le.OutputScale,Kj=le.PDFDataRangeTransport,Xj=le.PDFDateString,Qj=le.PDFWorker,Zj=le.PasswordResponses,Jj=le.PermissionFlag,eH=le.PixelsPerInch,tH=le.RenderingCancelledException,nH=le.TextLayer,iH=le.UnexpectedResponseException,sH=le.Util,Zb=le.VerbosityLevel,rH=le.XfaLayer,oH=le.build,aH=le.createValidAbsoluteUrl,lH=le.fetchData,Jb=le.getDocument,cH=le.getFilenameFromUrl,uH=le.getPdfFilenameFromUrl,dH=le.getXfaPageViewport,hH=le.isDataScheme,fH=le.isPdfFile,pH=le.noContextMenu,gH=le.normalizeUnicode,mH=le.setLayerDimensions,_H=le.shadow,ic=le.version;var Hv={};ew(Hv,{AnnotationLayerBuilder:()=>sU,DownloadManager:()=>rU,EventBus:()=>oU,FindState:()=>aU,GenericL10n:()=>Fv,LinkTarget:()=>$r,PDFFindController:()=>Lv,PDFHistory:()=>lU,PDFLinkService:()=>Vv,PDFPageView:()=>cU,PDFScriptingManager:()=>uU,PDFSinglePageViewer:()=>Bv,PDFViewer:()=>jv,ProgressBar:()=>dU,RenderingStates:()=>hU,ScrollMode:()=>fU,SimpleLinkService:()=>pU,SpreadMode:()=>gU,StructTreeLayerBuilder:()=>mU,TextLayerBuilder:()=>_U,XfaLayerBuilder:()=>bU,parseQueryString:()=>vU});var rc={};rc.d=(n,t)=>{for(var e in t)rc.o(t,e)&&!rc.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};rc.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var ct=globalThis.pdfjsViewer={};rc.d(ct,{AnnotationLayerBuilder:()=>Ef,DownloadManager:()=>hv,EventBus:()=>Sf,FindState:()=>Ys,GenericL10n:()=>ca,LinkTarget:()=>jr,PDFFindController:()=>uv,PDFHistory:()=>xv,PDFLinkService:()=>Cf,PDFPageView:()=>Pf,PDFScriptingManager:()=>Ov,PDFSinglePageViewer:()=>kv,PDFViewer:()=>Of,ProgressBar:()=>cv,RenderingStates:()=>dt,ScrollMode:()=>Re,SimpleLinkService:()=>lc,SpreadMode:()=>Xt,StructTreeLayerBuilder:()=>Af,TextLayerBuilder:()=>Tf,XfaLayerBuilder:()=>If,parseQueryString:()=>Rf});var bH="auto",RM=1,eM=1.1,vH=.1,yH=10,ev=0,wH=1.25,tM=40,nM=5,dt={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},oa={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var ki={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},Re={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},Xt={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function NM(n,t,e=!1){let i=n.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}let s=n.offsetTop+n.clientTop,r=n.offsetLeft+n.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||e&&(i.classList.contains("markedContent")||getComputedStyle(i).overflow==="hidden");)if(s+=i.offsetTop,r+=i.offsetLeft,i=i.offsetParent,!i)return;t&&(t.top!==void 0&&(s+=t.top),t.left!==void 0&&(r+=t.left,i.scrollLeft=r)),i.scrollTop=s}function CH(n,t,e=void 0){let i=function(o){r||(r=window.requestAnimationFrame(function(){r=null;let l=n.scrollLeft,c=s.lastX;l!==c&&(s.right=l>c),s.lastX=l;let u=n.scrollTop,d=s.lastY;u!==d&&(s.down=u>d),s.lastY=u,t(s)}))},s={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:i},r=null;return n.addEventListener("scroll",i,{useCapture:!0,signal:e}),e?.addEventListener("abort",()=>window.cancelAnimationFrame(r),{once:!0}),s}function Rf(n){let t=new Map;for(let[e,i]of new URLSearchParams(n))t.set(e.toLowerCase(),i);return t}var iM=/[\x00-\x1F]/g;function oc(n,t=!1){return iM.test(n)?t?n.replaceAll(iM,e=>e==="\0"?"":" "):n.replaceAll("\0",""):n}function ac(n,t,e=0){let i=e,s=n.length-1;if(s<0||!t(n[s]))return n.length;if(t(n[i]))return i;for(;i<s;){let r=i+s>>1,o=n[r];t(o)?s=r:i=r+1}return i}function sM(n){if(Math.floor(n)===n)return[n,1];let t=1/n,e=8;if(t>e)return[1,e];if(Math.floor(t)===t)return[1,t];let i=n>1?t:n,s=0,r=1,o=1,a=1;for(;;){let c=s+o,u=r+a;if(u>e)break;i<=c/u?(o=c,a=u):(s=c,r=u)}let l;return i-s/r<o/a-i?l=i===n?[s,r]:[r,s]:l=i===n?[o,a]:[a,o],l}function gf(n,t){return n-n%t}function xH(n,t,e){if(n<2)return n;let i=t[n].div,s=i.offsetTop+i.clientTop;s>=e&&(i=t[n-1].div,s=i.offsetTop+i.clientTop);for(let r=n-2;r>=0&&(i=t[r].div,!(i.offsetTop+i.clientTop+i.clientHeight<=s));--r)n=r;return n}function EH({scrollEl:n,views:t,sortByVisibility:e=!1,horizontal:i=!1,rtl:s=!1}){let r=n.scrollTop,o=r+n.clientHeight,a=n.scrollLeft,l=a+n.clientWidth;function c(b){let y=b.div;return y.offsetTop+y.clientTop+y.clientHeight>r}function u(b){let y=b.div,v=y.offsetLeft+y.clientLeft,x=v+y.clientWidth;return s?v<l:x>a}let d=[],h=new Set,f=t.length,p=ac(t,i?u:c);p>0&&p<f&&!i&&(p=xH(p,t,r));let g=i?l:-1;for(let b=p;b<f;b++){let y=t[b],v=y.div,x=v.offsetLeft+v.clientLeft,S=v.offsetTop+v.clientTop,D=v.clientWidth,A=v.clientHeight,E=x+D,I=S+A;if(g===-1)I>=o&&(g=I);else if((i?x:S)>g)break;if(I<=r||S>=o||E<=a||x>=l)continue;let N=Math.max(0,r-S)+Math.max(0,I-o),W=Math.max(0,a-x)+Math.max(0,E-l),Q=(A-N)/A,ee=(D-W)/D,z=Q*ee*100|0;d.push({id:y.id,x,y:S,view:y,percent:z,widthPercent:ee*100|0}),h.add(y.id)}let m=d[0],_=d.at(-1);return e&&d.sort(function(b,y){let v=b.percent-y.percent;return Math.abs(v)>.001?-v:b.id-y.id}),{first:m,last:_,views:d,ids:h}}function kM(n){return Number.isInteger(n)&&n%90===0}function SH(n){return Number.isInteger(n)&&Object.values(Re).includes(n)&&n!==Re.UNKNOWN}function DH(n){return Number.isInteger(n)&&Object.values(Xt).includes(n)&&n!==Xt.UNKNOWN}function rM(n){return n.width<=n.height}var TZ=new Promise(function(n){window.requestAnimationFrame(n)}),MH=document.documentElement.style;function AH(n,t,e){return Math.min(Math.max(n,t),e)}var cv=class{#e=null;#t=null;#n=0;#i=null;#s=!0;constructor(t){this.#e=t.classList,this.#i=t.style}get percent(){return this.#n}set percent(t){if(this.#n=AH(t,0,100),isNaN(t)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`)}setWidth(t){if(!t)return;let i=t.parentNode.offsetWidth-t.offsetWidth;i>0&&this.#i.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(t=5e3){this.#n===100||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},t))}hide(){this.#s&&(this.#s=!1,this.#e.add("hidden"))}show(){this.#s||(this.#s=!0,this.#e.remove("hidden"))}};function TH(n){let t=Re.VERTICAL,e=Xt.NONE;switch(n){case"SinglePage":t=Re.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=Re.PAGE;case"TwoColumnLeft":e=Xt.ODD;break;case"TwoPageRight":t=Re.PAGE;case"TwoColumnRight":e=Xt.EVEN;break}return{scrollMode:t,spreadMode:e}}var mf=function(){let n=document.createElement("div");return n.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)",n.style.width==="calc(1320px)"?Math.fround:t=>t}(),hi={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function IH(n){return n<11904}function PH(n){return(n&65408)===0}function OH(n){return n>=97&&n<=122||n>=65&&n<=90}function RH(n){return n>=48&&n<=57}function NH(n){return n===32||n===9||n===13||n===10}function kH(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}function FH(n){return n>=12448&&n<=12543}function LH(n){return n>=12352&&n<=12447}function VH(n){return n>=65376&&n<=65439}function BH(n){return(n&65408)===3584}function _f(n){return IH(n)?PH(n)?NH(n)?hi.SPACE:OH(n)||RH(n)||n===95?hi.ALPHA_LETTER:hi.PUNCT:BH(n)?hi.THAI_LETTER:n===160?hi.SPACE:hi.ALPHA_LETTER:kH(n)?hi.HAN_LETTER:FH(n)?hi.KATAKANA_LETTER:LH(n)?hi.HIRAGANA_LETTER:VH(n)?hi.HALFWIDTH_KATAKANA_LETTER:hi.ALPHA_LETTER}var oM;function jH(){return oM||="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6",oM}var Ys={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},HH=250,UH=-50,$H=-400,aM={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},lM=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),cM,zH=new RegExp("\\p{M}+","gu"),WH=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),GH=new RegExp("([^\\p{M}])\\p{M}*$","u"),qH=new RegExp("^\\p{M}*([^\\p{M}])","u"),YH=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,uM=new Map,KH="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",dM=new Map,tv=null,nv=null;function iv(n){let t=[],e;for(;(e=YH.exec(n))!==null;){let{index:f}=e;for(let p of e[0]){let g=uM.get(p);g||(g=p.normalize("NFD").length,uM.set(p,g)),t.push([g,f++])}}let i;if(t.length===0&&tv)i=tv;else if(t.length>0&&nv)i=nv;else{let f=Object.keys(aM).join(""),p=jH(),b=`([${f}])|([${p}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;t.length===0?i=tv=new RegExp(b+"|(\\u0000)","gum"):i=nv=new RegExp(b+`|(${KH})`,"gum")}let s=[];for(;(e=zH.exec(n))!==null;)s.push([e[0].length,e.index]);let r=n.normalize("NFD"),o=[[0,0]],a=0,l=0,c=0,u=0,d=0,h=!1;return r=r.replace(i,(f,p,g,m,_,b,y,v,x,S,D)=>{if(D-=u,p){let A=aM[p],E=A.length;for(let I=1;I<E;I++)o.push([D-c+I,c-I]);return c-=E-1,A}if(g){let A=dM.get(g);A||(A=g.normalize("NFKC"),dM.set(g,A));let E=A.length;for(let I=1;I<E;I++)o.push([D-c+I,c-I]);return c-=E-1,A}if(m)return h=!0,D+d===s[a]?.[1]?++a:(o.push([D-1-c+1,c-1]),c-=1,u+=1),o.push([D-c+1,c]),u+=1,d+=1,m.charAt(0);if(_){let A=_.endsWith(`
`),E=A?_.length-2:_.length;h=!0;let I=E;D+d===s[a]?.[1]&&(I-=s[a][0],++a);for(let N=1;N<=I;N++)o.push([D-1-c+N,c-N]);return c-=I,u+=I,A?(D+=E-1,o.push([D-c+1,1+c]),c+=1,u+=1,d+=1,_.slice(0,E)):_}if(b)return o.push([D-c+3,1+c]),c+=1,u+=1,d+=1,b.replace(`
`,"");if(y){let A=y.length-2;return o.push([D-c+A,1+c]),c+=1,u+=1,d+=1,y.slice(0,-2)}if(v){let A=v.length-1;return o.push([D-c+A,c]),u+=1,d+=1,v.slice(0,-1)}if(x)return o.push([D-c+1,c-1]),c-=1,u+=1,d+=1," ";if(D+d===t[l]?.[1]){let A=t[l][0]-1;++l;for(let E=1;E<=A;E++)o.push([D-(c-E),c-E]);c-=A,u+=A}return S}),o.push([r.length,c]),[r,o,h]}function XH(n,t,e){if(!n)return[t,e];let i=t,s=t+e-1,r=ac(n,u=>u[0]>=i);n[r][0]>i&&--r;let o=ac(n,u=>u[0]>=s,r);n[o][0]>s&&--o;let a=i+n[r][1],c=s+n[o][1]+1-a;return[a,c]}var uv=class{#e=null;#t=!0;#n=0;constructor({linkService:t,eventBus:e,updateMatchesCountOnProgress:i=!0}){this._linkService=t,this._eventBus=e,this.#t=i,this.onIsPageVisible=null,this.#s(),e._on("find",this.#i.bind(this)),e._on("findbarclose",this.#b.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(t){this._pdfDocument&&this.#s(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}#i(t){if(!t)return;let e=this._pdfDocument,{type:i}=t;(this.#e===null||this.#l(t))&&(this._dirtyMatch=!0),this.#e=t,i!=="highlightallchange"&&this.#w(Ys.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||e&&this._pdfDocument!==e)return;this.#d();let s=!this._highlightMatches,r=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#p():i==="again"?(this.#p(),s&&this.#e.highlightAll&&this.#h()):i==="highlightallchange"?(r?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},HH)})}scrollMatchIntoView({element:t=null,selectedLeft:e=0,pageIndex:i=-1,matchIndex:s=-1}){if(!this._scrollMatches||!t)return;if(s===-1||s!==this._selected.matchIdx)return;if(i===-1||i!==this._selected.pageIdx)return;this._scrollMatches=!1;let r={top:UH,left:e+$H};NM(t,r,!0)}#s(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#r(){let{query:t}=this.#e;return typeof t=="string"?(t!==this._rawQuery&&(this._rawQuery=t,[this._normalizedQuery]=iv(t)),this._normalizedQuery):(t||[]).filter(e=>!!e).map(e=>iv(e)[0])}#l(t){let e=t.query,i=this.#e.query,s=typeof e;if(s!==typeof i)return!0;if(s==="string"){if(e!==i)return!0}else if(JSON.stringify(e)!==JSON.stringify(i))return!0;switch(t.type){case"again":let o=this._selected.pageIdx+1,a=this._linkService;return o>=1&&o<=a.pagesCount&&o!==a.page&&!(this.onIsPageVisible?.(o)??!0);case"highlightallchange":return!1}return!0}#c(t,e,i){let s=t.slice(0,e).match(GH);if(s){let r=t.charCodeAt(e),o=s[1].charCodeAt(0);if(_f(r)===_f(o))return!1}if(s=t.slice(e+i).match(qH),s){let r=t.charCodeAt(e+i-1),o=s[1].charCodeAt(0);if(_f(r)===_f(o))return!1}return!0}#u(t,e){let{matchDiacritics:i}=this.#e,s=!1;t=t.replaceAll(WH,(o,a,l,c,u,d)=>a?`[ ]*\\${a}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":i?u||d:u?lM.has(u.charCodeAt(0))?u:"":e?(s=!0,`${d}\\p{M}*`):d);let r="[ ]*";return t.endsWith(r)&&(t=t.slice(0,t.length-r.length)),i&&e&&(cM||=String.fromCharCode(...lM),s=!0,t=`${t}(?=[${cM}]|[^\\p{M}]|$)`),[s,t]}#a(t){let e=this.#r;if(e.length===0)return;let i=this._pageContents[t],s=this.match(e,i,t),r=this._pageMatches[t]=[],o=this._pageMatchesLength[t]=[],a=this._pageDiffs[t];s?.forEach(({index:c,length:u})=>{let[d,h]=XH(a,c,u);h&&(r.push(d),o.push(h))}),this.#e.highlightAll&&this.#o(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this.#g());let l=r.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#x():++this.#n===this._linkService.pagesCount&&this.#x()}match(t,e,i){let s=this._hasDiacritics[i],r=!1;if(typeof t=="string"?[r,t]=this.#u(t,s):t=t.sort().reverse().map(d=>{let[h,f]=this.#u(d,s);return r||=h,`(${f})`}).join("|"),!t)return;let{caseSensitive:o,entireWord:a}=this.#e,l=`g${r?"u":""}${o?"":"i"}`;t=new RegExp(t,l);let c=[],u;for(;(u=t.exec(e))!==null;)a&&!this.#c(e,u.index,u[0].length)||c.push({index:u.index,length:u[0].length});return c}#d(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve(),e={disableNormalization:!0};for(let i=0,s=this._linkService.pagesCount;i<s;i++){let{promise:r,resolve:o}=Promise.withResolvers();this._extractTextPromises[i]=r,t=t.then(()=>this._pdfDocument.getPage(i+1).then(a=>a.getTextContent(e)).then(a=>{let l=[];for(let c of a.items)l.push(c.str),c.hasEOL&&l.push(`
`);[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=iv(l.join("")),o()},a=>{console.error(`Unable to get text content for page ${i+1}`,a),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,o()}))}}#o(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){let t=this.#e.findPrevious,e=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let o=0;o<i;o++)this._pendingFindMatches.has(o)||(this._pendingFindMatches.add(o),this._extractTextPromises[o].then(()=>{this._pendingFindMatches.delete(o),this.#a(o)}))}if(this.#r.length===0){this.#w(Ys.FOUND);return}if(this._resumePageIdx)return;let r=this._offset;if(this._pagesToSearch=i,r.matchIdx!==null){let o=this._pageMatches[r.pageIdx].length;if(!t&&r.matchIdx+1<o||t&&r.matchIdx>0){r.matchIdx=t?r.matchIdx-1:r.matchIdx+1,this.#m(!0);return}this.#_(t)}this.#g()}#f(t){let e=this._offset,i=t.length,s=this.#e.findPrevious;return i?(e.matchIdx=s?i-1:0,this.#m(!0),!0):(this.#_(s),e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0)?(this.#m(!1),!0):!1)}#g(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let t=null;do{let e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!this.#f(t))}#_(t){let e=this._offset,i=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=i||e.pageIdx<0)&&(e.pageIdx=t?i-1:0,e.wrapped=!0)}#m(t=!1){let e=Ys.NOT_FOUND,i=this._offset.wrapped;if(this._offset.wrapped=!1,t){let s=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=i?Ys.WRAPPED:Ys.FOUND,s!==-1&&s!==this._selected.pageIdx&&this.#o(s)}this.#w(e,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#b(t){let e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(Ys.FOUND),this._highlightMatches=!1,this.#h())})}#y(){let{pageIdx:t,matchIdx:e}=this._selected,i=0,s=this._matchesCountTotal;if(e!==-1){for(let r=0;r<t;r++)i+=this._pageMatches[r]?.length||0;i+=e+1}return(i<1||i>s)&&(i=s=0),{current:i,total:s}}#x(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#y()})}#w(t,e=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||t===Ys.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,entireWord:this.#e?.entireWord??null,matchesCount:this.#y(),rawQuery:this.#e?.query??null})}},QH="noopener noreferrer nofollow",jr={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},Cf=class n{externalLinkEnabled=!0;constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:i=null,ignoreDestinationZoom:s=!1}={}){this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=i,this._ignoreDestinationZoom=s,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}goToDestination(t){return O(this,null,function*(){if(!this.pdfDocument)return;let e,i,s;if(typeof t=="string"?(e=t,i=yield this.pdfDocument.getDestination(t)):(e=null,i=yield t),!Array.isArray(i)){console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${t}".`);return}let[r]=i;if(r&&typeof r=="object"){if(s=this.pdfDocument.cachedPageNumber(r),!s)try{s=(yield this.pdfDocument.getPageIndex(r))+1}catch{console.error(`goToDestination: "${r}" is not a valid page reference, for dest="${t}".`);return}}else Number.isInteger(r)&&(s=r+1);if(!s||s<1||s>this.pagesCount){console.error(`goToDestination: "${s}" is not a valid page number, for dest="${t}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:i,pageNumber:s})),this.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom})})}goToPage(t){if(!this.pdfDocument)return;let e=typeof t=="string"&&this.pdfViewer.pageLabelToPageNumber(t)||t|0;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})}addLinkAttributes(t,e,i=!1){if(!e||typeof e!="string")throw new Error('A valid "url" parameter must provided.');let s=i?jr.BLANK:this.externalLinkTarget,r=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title=`Disabled: ${e}`,t.onclick=()=>!1);let o="";switch(s){case jr.NONE:break;case jr.SELF:o="_self";break;case jr.BLANK:o="_blank";break;case jr.PARENT:o="_parent";break;case jr.TOP:o="_top";break}t.target=o,t.rel=typeof r=="string"?r:QH}getDestinationHash(t){if(typeof t=="string"){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){let e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}setHash(t){if(!this.pdfDocument)return;let e,i;if(t.includes("=")){let s=Rf(t);if(s.has("search")){let r=s.get("search").replaceAll('"',""),o=s.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:o?r:r.match(/\S+/g)})}if(s.has("page")&&(e=s.get("page")|0||1),s.has("zoom")){let r=s.get("zoom").split(","),o=r[0],a=parseFloat(o);o.includes("Fit")?o==="Fit"||o==="FitB"?i=[null,{name:o}]:o==="FitH"||o==="FitBH"||o==="FitV"||o==="FitBV"?i=[null,{name:o},r.length>1?r[1]|0:null]:o==="FitR"?r.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:o},r[1]|0,r[2]|0,r[3]|0,r[4]|0]:console.error(`PDFLinkService.setHash: "${o}" is not a valid zoom value.`):i=[null,{name:"XYZ"},r.length>1?r[1]|0:null,r.length>2?r[2]|0:null,a?a/100:o]}i?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:i,allowNegativeOffset:!0}):e&&(this.page=e),s.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:s.get("pagemode")}),s.has("nameddest")&&this.goToDestination(s.get("nameddest"));return}i=unescape(t);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}if(typeof i=="string"||n.#e(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}executeNamedAction(t){if(this.pdfDocument){switch(t){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:t})}}executeSetOCGState(t){return O(this,null,function*(){if(!this.pdfDocument)return;let e=this.pdfDocument,i=yield this.pdfViewer.optionalContentConfigPromise;e===this.pdfDocument&&(i.setOCGState(t),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))})}static#e(t){if(!Array.isArray(t)||t.length<2)return!1;let[e,i,...s]=t;if(!(typeof e=="object"&&Number.isInteger(e?.num)&&Number.isInteger(e?.gen))&&!Number.isInteger(e)||!(typeof i=="object"&&typeof i?.name=="string"))return!1;let r=s.length,o=!0;switch(i.name){case"XYZ":if(r<2||r>3)return!1;break;case"Fit":case"FitB":return r===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r>1)return!1;break;case"FitR":if(r!==4)return!1;o=!1;break;default:return!1}for(let a of s)if(!(typeof a=="number"||o&&a===null))return!1;return!0}},lc=class extends Cf{setDocument(t,e=null){}},{AbortException:ZH,AnnotationEditorLayer:JH,AnnotationEditorParamsType:IZ,AnnotationEditorType:Pn,AnnotationEditorUIManager:e3,AnnotationLayer:t3,AnnotationMode:_s,build:PZ,ColorPicker:OZ,createValidAbsoluteUrl:n3,DOMSVGFactory:RZ,DrawLayer:i3,FeatureTest:NZ,fetchData:hM,getDocument:kZ,getFilenameFromUrl:FZ,getPdfFilenameFromUrl:s3,getXfaPageViewport:LZ,GlobalWorkerOptions:VZ,ImageKind:BZ,InvalidPDFException:jZ,isDataScheme:HZ,isPdfFile:r3,MissingPDFException:UZ,noContextMenu:$Z,normalizeUnicode:o3,OPS:zZ,OutputScale:a3,PasswordResponses:WZ,PDFDataRangeTransport:GZ,PDFDateString:qZ,PDFWorker:YZ,PermissionFlag:bf,PixelsPerInch:ms,RenderingCancelledException:dv,setLayerDimensions:l3,shadow:xf,TextLayer:c3,UnexpectedResponseException:KZ,Util:XZ,VerbosityLevel:QZ,version:fM,XfaLayer:sv}=globalThis.pdfjsLib,Ef=class{#e=null;#t=null;constructor({pdfPage:t,linkService:e,downloadManager:i,annotationStorage:s=null,imageResourcesPath:r="",renderForms:o=!0,enableScripting:a=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:h=null,onAppend:f=null}){this.pdfPage=t,this.linkService=e,this.downloadManager=i,this.imageResourcesPath=r,this.renderForms=o,this.annotationStorage=s,this.enableScripting=a,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=h,this.#e=f,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=e.eventBus}render(t,e,i="display"){return O(this,null,function*(){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:t.clone({dontFlip:!0})});return}let[s,r,o]=yield Promise.all([this.pdfPage.getAnnotations({intent:i}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;let a=this.div=document.createElement("div");if(a.className="annotationLayer",this.#e?.(a),s.length===0){this.hide();return}this.annotationLayer=new t3({div:a,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:t.clone({dontFlip:!0}),structTreeLayer:e?.structTreeLayer||null}),yield this.annotationLayer.render({annotations:s,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:r,fieldObjects:o}),this.linkService.isInPresentationMode&&this.#n(oa.FULLSCREEN),this.#t||(this.#t=new AbortController,this._eventBus?._on("presentationmodechanged",l=>{this.#n(l.state)},{signal:this.#t.signal}))})}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(t){if(!this.div)return;let e=!1;switch(t){case oa.FULLSCREEN:e=!0;break;case oa.NORMAL:break;default:return}for(let i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=e)}};function pM(n,t){let e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=n,e.target="_parent","download"in e&&(e.download=t),(document.body||document.documentElement).append(e),e.click(),e.remove()}var hv=class{#e=new WeakMap;downloadData(t,e,i){let s=URL.createObjectURL(new Blob([t],{type:i}));pM(s,e)}openOrDownloadData(t,e,i=null){let r=r3(e)?"application/pdf":"";return this.downloadData(t,e,r),!1}download(t,e,i){let s;if(t)s=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!n3(e,"http://example.com")){console.error(`download - not a valid URL: ${e}`);return}s=e+"#pdfjs.action=download"}pM(s,i)}},gM={EVENT:"event",TIMEOUT:"timeout"};function u3(i){return O(this,arguments,function*({target:n,name:t,delay:e=0}){if(typeof n!="object"||!(t&&typeof t=="string")||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");let{promise:s,resolve:r}=Promise.withResolvers(),o=new AbortController;function a(u){o.abort(),clearTimeout(c),r(u)}let l=n instanceof Sf?"_on":"addEventListener";n[l](t,a.bind(null,gM.EVENT),{signal:o.signal});let c=setTimeout(a.bind(null,gM.TIMEOUT),e);return s})}var Sf=class{#e=Object.create(null);on(t,e,i=null){this._on(t,e,{external:!0,once:i?.once,signal:i?.signal})}off(t,e,i=null){this._off(t,e)}dispatch(t,e){let i=this.#e[t];if(!i||i.length===0)return;let s;for(let{listener:r,external:o,once:a}of i.slice(0)){if(a&&this._off(t,r),o){(s||=[]).push(r);continue}r(e)}if(s){for(let r of s)r(e);s=null}}_on(t,e,i=null){let s=null;if(i?.signal instanceof AbortSignal){let{signal:o}=i;if(o.aborted){console.error("Cannot use an `aborted` signal.");return}let a=()=>this._off(t,e);s=()=>o.removeEventListener("abort",a),o.addEventListener("abort",a)}(this.#e[t]||=[]).push({listener:e,external:i?.external===!0,once:i?.once===!0,rmAbort:s})}_off(t,e,i=null){let s=this.#e[t];if(s)for(let r=0,o=s.length;r<o;r++){let a=s[r];if(a.listener===e){a.rmAbort?.(),s.splice(r,1);return}}}};var aa=class{constructor(t){this.value=t}valueOf(){return this.value}},ht=class extends aa{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}},fi=class extends aa{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}},Ur=class extends aa{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}},mM=100,d3="\u2068",h3="\u2069";function f3(n,t,e){if(e===t||e instanceof fi&&t instanceof fi&&e.value===t.value)return!0;if(t instanceof fi&&typeof e=="string"){let i=n.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value);if(e===i)return!0}return!1}function _M(n,t,e){return t[e]?la(n,t[e].value):(n.reportError(new RangeError("No default")),new ht)}function fv(n,t){let e=[],i=Object.create(null);for(let s of t)s.type==="narg"?i[s.name]=cc(n,s.value):e.push(cc(n,s));return{positional:e,named:i}}function cc(n,t){switch(t.type){case"str":return t.value;case"num":return new fi(t.value,{minimumFractionDigits:t.precision});case"var":return p3(n,t);case"mesg":return g3(n,t);case"term":return m3(n,t);case"func":return _3(n,t);case"select":return b3(n,t);default:return new ht}}function p3(n,{name:t}){let e;if(n.params)if(Object.prototype.hasOwnProperty.call(n.params,t))e=n.params[t];else return new ht(`$${t}`);else if(n.args&&Object.prototype.hasOwnProperty.call(n.args,t))e=n.args[t];else return n.reportError(new ReferenceError(`Unknown variable: $${t}`)),new ht(`$${t}`);if(e instanceof aa)return e;switch(typeof e){case"string":return e;case"number":return new fi(e);case"object":if(e instanceof Date)return new Ur(e.getTime());default:return n.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof e}`)),new ht(`$${t}`)}}function g3(n,{name:t,attr:e}){let i=n.bundle._messages.get(t);if(!i)return n.reportError(new ReferenceError(`Unknown message: ${t}`)),new ht(t);if(e){let s=i.attributes[e];return s?la(n,s):(n.reportError(new ReferenceError(`Unknown attribute: ${e}`)),new ht(`${t}.${e}`))}return i.value?la(n,i.value):(n.reportError(new ReferenceError(`No value: ${t}`)),new ht(t))}function m3(n,{name:t,attr:e,args:i}){let s=`-${t}`,r=n.bundle._terms.get(s);if(!r)return n.reportError(new ReferenceError(`Unknown term: ${s}`)),new ht(s);if(e){let a=r.attributes[e];if(a){n.params=fv(n,i).named;let l=la(n,a);return n.params=null,l}return n.reportError(new ReferenceError(`Unknown attribute: ${e}`)),new ht(`${s}.${e}`)}n.params=fv(n,i).named;let o=la(n,r.value);return n.params=null,o}function _3(n,{name:t,args:e}){let i=n.bundle._functions[t];if(!i)return n.reportError(new ReferenceError(`Unknown function: ${t}()`)),new ht(`${t}()`);if(typeof i!="function")return n.reportError(new TypeError(`Function ${t}() is not callable`)),new ht(`${t}()`);try{let s=fv(n,e);return i(s.positional,s.named)}catch(s){return n.reportError(s),new ht(`${t}()`)}}function b3(n,{selector:t,variants:e,star:i}){let s=cc(n,t);if(s instanceof ht)return _M(n,e,i);for(let r of e){let o=cc(n,r.key);if(f3(n,s,o))return la(n,r.value)}return _M(n,e,i)}function FM(n,t){if(n.dirty.has(t))return n.reportError(new RangeError("Cyclic reference")),new ht;n.dirty.add(t);let e=[],i=n.bundle._useIsolating&&t.length>1;for(let s of t){if(typeof s=="string"){e.push(n.bundle._transform(s));continue}if(n.placeables++,n.placeables>mM)throw n.dirty.delete(t),new RangeError(`Too many placeables expanded: ${n.placeables}, max allowed is ${mM}`);i&&e.push(d3),e.push(cc(n,s).toString(n)),i&&e.push(h3)}return n.dirty.delete(t),e.join("")}function la(n,t){return typeof t=="string"?n.bundle._transform(t):FM(n,t)}var pv=class{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!this.errors||!(t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle._intls.get(t);i||(i={},this.bundle._intls.set(t,i));let s=JSON.stringify(e);return i[s]||(i[s]=new t(this.bundle.locales,e)),i[s]}};function Df(n,t){let e=Object.create(null);for(let[i,s]of Object.entries(n))t.includes(i)&&(e[i]=s.valueOf());return e}var bM=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function v3(n,t){let e=n[0];if(e instanceof ht)return new ht(`NUMBER(${e.valueOf()})`);if(e instanceof fi)return new fi(e.valueOf(),L(L({},e.opts),Df(t,bM)));if(e instanceof Ur)return new fi(e.valueOf(),L({},Df(t,bM)));throw new TypeError("Invalid argument to NUMBER")}var vM=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function y3(n,t){let e=n[0];if(e instanceof ht)return new ht(`DATETIME(${e.valueOf()})`);if(e instanceof Ur)return new Ur(e.valueOf(),L(L({},e.opts),Df(t,vM)));if(e instanceof fi)return new Ur(e.valueOf(),L({},Df(t,vM)));throw new TypeError("Invalid argument to DATETIME")}var yM=new Map;function w3(n){let t=Array.isArray(n)?n.join(" "):n,e=yM.get(t);return e===void 0&&(e=new Map,yM.set(t,e)),e}var gv=class{constructor(t,{functions:e,useIsolating:i=!0,transform:s=r=>r}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(t)?t:[t],this._functions=L({NUMBER:v3,DATETIME:y3},e),this._useIsolating=i,this._transform=s,this._intls=w3(t)}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:e=!1}={}){let i=[];for(let s=0;s<t.body.length;s++){let r=t.body[s];if(r.id.startsWith("-")){if(e===!1&&this._terms.has(r.id)){i.push(new Error(`Attempt to override an existing term: "${r.id}"`));continue}this._terms.set(r.id,r)}else{if(e===!1&&this._messages.has(r.id)){i.push(new Error(`Attempt to override an existing message: "${r.id}"`));continue}this._messages.set(r.id,r)}}return i}formatPattern(t,e=null,i=null){if(typeof t=="string")return this._transform(t);let s=new pv(this,i,e);try{return FM(s,t).toString(s)}catch(r){if(s.errors&&r instanceof Error)return s.errors.push(r),new ht().toString(s);throw r}}},rv=/^(-?[a-zA-Z][\w-]*) *= */gm,wM=/\.([a-zA-Z][\w-]*) *= */y,C3=/\*?\[/y,ov=/(-?[0-9]+(?:\.([0-9]+))?)/y,x3=/([a-zA-Z][\w-]*)/y,CM=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,E3=/^[A-Z][A-Z0-9_-]*$/,vf=/([^{}\n\r]+)/y,S3=/([^\\"\n\r]*)/y,xM=/\\([\\"])/y,EM=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,D3=/^\n+/,SM=/ +$/,M3=/ *\r?\n/g,A3=/( *)$/,T3=/{\s*/y,DM=/\s*}/y,I3=/\[\s*/y,P3=/\s*] */y,O3=/\s*\(\s*/y,R3=/\s*->\s*/y,N3=/\s*:\s*/y,k3=/\s*,?\s*/y,F3=/\s+/y,mv=class{constructor(t){this.body=[],rv.lastIndex=0;let e=0;for(;;){let E=rv.exec(t);if(E===null)break;e=rv.lastIndex;try{this.body.push(l(E[1]))}catch(I){if(I instanceof SyntaxError)continue;throw I}}function i(E){return E.lastIndex=e,E.test(t)}function s(E,I){if(t[e]===E)return e++,!0;if(I)throw new I(`Expected ${E}`);return!1}function r(E,I){if(i(E))return e=E.lastIndex,!0;if(I)throw new I(`Expected ${E.toString()}`);return!1}function o(E){E.lastIndex=e;let I=E.exec(t);if(I===null)throw new SyntaxError(`Expected ${E.toString()}`);return e=E.lastIndex,I}function a(E){return o(E)[1]}function l(E){let I=u(),N=c();if(I===null&&Object.keys(N).length===0)throw new SyntaxError("Expected message value or attributes");return{id:E,value:I,attributes:N}}function c(){let E=Object.create(null);for(;i(wM);){let I=a(wM),N=u();if(N===null)throw new SyntaxError("Expected attribute value");E[I]=N}return E}function u(){let E;if(i(vf)&&(E=a(vf)),t[e]==="{"||t[e]==="}")return d(E?[E]:[],1/0);let I=S();return I?E?d([E,I],I.length):(I.value=D(I.value,D3),d([I],I.length)):E?D(E,SM):null}function d(E=[],I){for(;;){if(i(vf)){E.push(a(vf));continue}if(t[e]==="{"){E.push(h());continue}if(t[e]==="}")throw new SyntaxError("Unbalanced closing brace");let ee=S();if(ee){E.push(ee),I=Math.min(I,ee.length);continue}break}let N=E.length-1,W=E[N];typeof W=="string"&&(E[N]=D(W,SM));let Q=[];for(let ee of E)ee instanceof Mf&&(ee=ee.value.slice(0,ee.value.length-I)),ee&&Q.push(ee);return Q}function h(){r(T3,SyntaxError);let E=f();if(r(DM))return E;if(r(R3)){let I=m();return r(DM,SyntaxError),L({type:"select",selector:E},I)}throw new SyntaxError("Unclosed placeable")}function f(){if(t[e]==="{")return h();if(i(CM)){let[,E,I,N=null]=o(CM);if(E==="$")return{type:"var",name:I};if(r(O3)){let W=p();if(E==="-")return{type:"term",name:I,attr:N,args:W};if(E3.test(I))return{type:"func",name:I,args:W};throw new SyntaxError("Function names must be all upper-case")}return E==="-"?{type:"term",name:I,attr:N,args:[]}:{type:"mesg",name:I,attr:N}}return b()}function p(){let E=[];for(;;){switch(t[e]){case")":return e++,E;case void 0:throw new SyntaxError("Unclosed argument list")}E.push(g()),r(k3)}}function g(){let E=f();return E.type!=="mesg"?E:r(N3)?{type:"narg",name:E.name,value:b()}:E}function m(){let E=[],I=0,N;for(;i(C3);){s("*")&&(N=I);let W=_(),Q=u();if(Q===null)throw new SyntaxError("Expected variant value");E[I++]={key:W,value:Q}}if(I===0)return null;if(N===void 0)throw new SyntaxError("Expected default variant");return{variants:E,star:N}}function _(){r(I3,SyntaxError);let E;return i(ov)?E=y():E={type:"str",value:a(x3)},r(P3,SyntaxError),E}function b(){if(i(ov))return y();if(t[e]==='"')return v();throw new SyntaxError("Invalid expression")}function y(){let[,E,I=""]=o(ov),N=I.length;return{type:"num",value:parseFloat(E),precision:N}}function v(){s('"',SyntaxError);let E="";for(;;){if(E+=a(S3),t[e]==="\\"){E+=x();continue}if(s('"'))return{type:"str",value:E};throw new SyntaxError("Unclosed string literal")}}function x(){if(i(xM))return a(xM);if(i(EM)){let[,E,I]=o(EM),N=parseInt(E||I,16);return N<=55295||57344<=N?String.fromCodePoint(N):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function S(){let E=e;switch(r(F3),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return A(t.slice(E,e))}return t[e-1]===" "?A(t.slice(E,e)):!1}function D(E,I){return E.replace(I,"")}function A(E){let I=E.replace(M3,`
`),N=A3.exec(E)[1].length;return new Mf(I,N)}}},Mf=class{constructor(t,e){this.value=t,this.length=e}},L3=/<|&#?\w+;/,V3={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},B3={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function j3(n,t){let{value:e}=t;if(typeof e=="string")if(n.localName==="title"&&n.namespaceURI==="http://www.w3.org/1999/xhtml")n.textContent=e;else if(!L3.test(e))n.textContent=e;else{let i=n.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=e,H3(i.content,n)}LM(t,n)}function H3(n,t){for(let e of n.childNodes)if(e.nodeType!==e.TEXT_NODE){if(e.hasAttribute("data-l10n-name")){let i=$3(t,e);n.replaceChild(i,e);continue}if(W3(e)){let i=z3(e);n.replaceChild(i,e);continue}console.warn(`An element of forbidden type "${e.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),n.replaceChild(_v(e),e)}t.textContent="",t.appendChild(n)}function U3(n,t){if(!n)return!1;for(let e of n)if(e.name===t)return!0;return!1}function LM(n,t){let e=t.hasAttribute("data-l10n-attrs")?t.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(let i of Array.from(t.attributes))MM(i.name,t,e)&&!U3(n.attributes,i.name)&&t.removeAttribute(i.name);if(n.attributes)for(let i of Array.from(n.attributes))MM(i.name,t,e)&&t.getAttribute(i.name)!==i.value&&t.setAttribute(i.name,i.value)}function $3(n,t){let e=t.getAttribute("data-l10n-name"),i=n.querySelector(`[data-l10n-name="${e}"]`);if(!i)return console.warn(`An element named "${e}" wasn't found in the source.`),_v(t);if(i.localName!==t.localName)return console.warn(`An element named "${e}" was found in the translation but its type ${t.localName} didn't match the element found in the source (${i.localName}).`),_v(t);n.removeChild(i);let s=i.cloneNode(!1);return VM(t,s)}function z3(n){let t=n.ownerDocument.createElement(n.localName);return VM(n,t)}function _v(n){return n.ownerDocument.createTextNode(n.textContent)}function W3(n){let t=V3[n.namespaceURI];return t&&t.includes(n.localName)}function MM(n,t,e=null){if(e&&e.includes(n))return!0;let i=B3[t.namespaceURI];if(!i)return!1;let s=n.toLowerCase(),r=t.localName;if(i.global.includes(s))return!0;if(!i[r])return!1;if(i[r].includes(s))return!0;if(t.namespaceURI==="http://www.w3.org/1999/xhtml"&&r==="input"&&s==="value"){let o=t.type.toLowerCase();if(o==="submit"||o==="button"||o==="reset")return!0}return!1}function VM(n,t){return t.textContent=n.textContent,LM(n,t),t}var bv=class extends Array{static from(t){return t instanceof this?t:new this(t)}};var vv=class extends bv{constructor(t){if(super(),Symbol.asyncIterator in Object(t))this.iterator=t[Symbol.asyncIterator]();else if(Symbol.iterator in Object(t))this.iterator=t[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){let t=this,e=0;return{next(){return O(this,null,function*(){return t.length<=e&&t.push(t.iterator.next()),t[e++]})}}}touchNext(t=1){return O(this,null,function*(){let e=0;for(;e++<t;){let i=this[this.length-1];if(i&&(yield i).done)break;this.push(this.iterator.next())}return this[this.length-1]})}},yv=class{constructor(t=[],e){this.resourceIds=t,this.generateBundles=e,this.onChange(!0)}addResourceIds(t,e=!1){return this.resourceIds.push(...t),this.onChange(e),this.resourceIds.length}removeResourceIds(t){return this.resourceIds=this.resourceIds.filter(e=>!t.includes(e)),this.onChange(),this.resourceIds.length}formatWithFallback(t,e){return O(this,null,function*(){let i=[],s=!1;try{for(var r=tw(this.bundles),o,a,l;o=!(a=yield r.next()).done;o=!1){let c=a.value;s=!0;let u=Y3(e,c,t,i);if(u.size===0)break;if(typeof console<"u"){let d=c.locales[0],h=Array.from(u).join(", ");console.warn(`[fluent] Missing translations in ${d}: ${h}`)}}}catch{l=[a]}finally{try{o&&(a=r.return)&&(yield a.call(r))}finally{if(l)throw l[0]}}return!s&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(t)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i})}formatMessages(t){return this.formatWithFallback(t,q3)}formatValues(t){return this.formatWithFallback(t,G3)}formatValue(t,e){return O(this,null,function*(){let[i]=yield this.formatValues([{id:t,args:e}]);return i})}handleEvent(){this.onChange()}onChange(t=!1){this.bundles=vv.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}};function G3(n,t,e,i){return e.value?n.formatPattern(e.value,i,t):null}function q3(n,t,e,i){let s={value:null,attributes:null};e.value&&(s.value=n.formatPattern(e.value,i,t));let r=Object.keys(e.attributes);if(r.length>0){s.attributes=new Array(r.length);for(let[o,a]of r.entries()){let l=n.formatPattern(e.attributes[a],i,t);s.attributes[o]={name:a,value:l}}}return s}function Y3(n,t,e,i){let s=[],r=new Set;return e.forEach(({id:o,args:a},l)=>{if(i[l]!==void 0)return;let c=t.getMessage(o);if(c){if(s.length=0,i[l]=n(t,s,c,a),s.length>0&&typeof console<"u"){let u=t.locales[0],d=s.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${o}: ${d}.`)}}else r.add(o)}),r}var Hr="data-l10n-id",sc="data-l10n-args",K3=`[${Hr}]`,wv=class extends yv{constructor(t,e){super(t,e),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Hr,sc]}}onChange(t=!1){super.onChange(t),this.roots&&this.translateRoots()}setAttributes(t,e,i){return t.setAttribute(Hr,e),i?t.setAttribute(sc,JSON.stringify(i)):t.removeAttribute(sc),t}getAttributes(t){return{id:t.getAttribute(Hr),args:JSON.parse(t.getAttribute(sc)||null)}}connectRoot(t){for(let e of this.roots)if(e===t||e.contains(t)||t.contains(e))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(e=>this.translateMutations(e));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}disconnectRoot(t){return this.roots.delete(t),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){let t=Array.from(this.roots);return Promise.all(t.map(e=>this.translateFragment(e)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(let t of this.roots)this.mutationObserver.observe(t,this.observerConfig)}translateMutations(t){for(let e of t)switch(e.type){case"attributes":e.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(e.target);break;case"childList":for(let i of e.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(let s of this.getTranslatables(i))this.pendingElements.add(s);else i.hasAttribute(Hr)&&this.pendingElements.add(i);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(t){return this.translateElements(this.getTranslatables(t))}translateElements(t){return O(this,null,function*(){if(!t.length)return;let e=t.map(this.getKeysForElement),i=yield this.formatMessages(e);return this.applyTranslations(t,i)})}applyTranslations(t,e){this.pauseObserving();for(let i=0;i<t.length;i++)e[i]!==void 0&&j3(t[i],e[i]);this.resumeObserving()}getTranslatables(t){let e=Array.from(t.querySelectorAll(K3));return typeof t.hasAttribute=="function"&&t.hasAttribute(Hr)&&e.push(t),e}getKeysForElement(t){return{id:t.getAttribute(Hr),args:JSON.parse(t.getAttribute(sc)||null)}}},Cv=class n{#e;#t;#n;#i;constructor({lang:t,isRTL:e},i=null){this.#n=n.#s(t),this.#i=i,this.#e=e??n.#r(this.#n)?"rtl":"ltr"}_setL10n(t){this.#i=t}getLanguage(){return this.#n}getDirection(){return this.#e}get(t,e=null,i){return O(this,null,function*(){return Array.isArray(t)?(t=t.map(o=>({id:o})),(yield this.#i.formatMessages(t)).map(o=>o.value)):(yield this.#i.formatMessages([{id:t,args:e}]))[0]?.value||i})}translate(t){return O(this,null,function*(){(this.#t||=new Set).add(t);try{this.#i.connectRoot(t),yield this.#i.translateRoots()}catch{}})}translateOnce(t){return O(this,null,function*(){try{yield this.#i.translateElements([t])}catch(e){console.error(`translateOnce: "${e}".`)}})}destroy(){return O(this,null,function*(){if(this.#t){for(let t of this.#t)this.#i.disconnectRoot(t);this.#t.clear(),this.#t=null}this.#i.pauseObserving()})}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#s(t){return t=t?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t]||t}static#r(t){let e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)}};function AM(n,t){let e=new mv(t),i=new gv(n),s=i.addResource(e);return s.length&&console.error("L10n errors",s),i}var ca=class n extends Cv{constructor(t){super({lang:t});let e=t?n.#e.bind(n,"en-us",this.getLanguage()):n.#i.bind(n,this.getLanguage());this._setL10n(new wv([],e))}static#e(t,e){return _p(this,null,function*(){let{baseURL:i,paths:s}=yield new Rc(this.#n()),r=[e];if(t!==e){let o=e.split("-",1)[0];o!==e&&r.push(o),r.push(t)}for(let o of r){let a=yield new Rc(this.#t(o,i,s));a?yield a:o==="en-us"&&(yield this.#s(o))}})}static#t(t,e,i){return O(this,null,function*(){let s=i[t];if(!s)return null;let r=new URL(s,e),o=yield hM(r,"text");return AM(t,o)})}static#n(){return O(this,null,function*(){try{let{href:t}=document.querySelector('link[type="application/l10n"]'),e=yield hM(t,"json");return{baseURL:t.replace(/[^/]*$/,"")||"./",paths:e}}catch{}return{baseURL:"./",paths:Object.create(null)}})}static#i(t){return _p(this,null,function*(){yield this.#s(t)})}static#s(t){return O(this,null,function*(){return AM(t,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties\u2026
pdfjs-document-properties-button-label = Document Properties\u2026
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)
pdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } \xD7 { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } \xD7 { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing\u2026
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document\u2026
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text2 =
    .aria-label = Text Editor
    .default-content = Start typing\u2026
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button =
    .aria-label = Alt text
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button =
    .aria-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, \u201CA young man sits down at a table to eat a meal\u201D
pdfjs-editor-resizer-top-left =
    .aria-label = Top left corner \u2014 resize
pdfjs-editor-resizer-top-middle =
    .aria-label = Top middle \u2014 resize
pdfjs-editor-resizer-top-right =
    .aria-label = Top right corner \u2014 resize
pdfjs-editor-resizer-middle-right =
    .aria-label = Middle right \u2014 resize
pdfjs-editor-resizer-bottom-right =
    .aria-label = Bottom right corner \u2014 resize
pdfjs-editor-resizer-bottom-middle =
    .aria-label = Bottom middle \u2014 resize
pdfjs-editor-resizer-bottom-left =
    .aria-label = Bottom left corner \u2014 resize
pdfjs-editor-resizer-middle-left =
    .aria-label = Middle left \u2014 resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all
pdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)
pdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)
pdfjs-editor-new-alt-text-textarea =
    .placeholder = Write your description here\u2026
pdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.
pdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more
pdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically
pdfjs-editor-new-alt-text-not-now-button = Not now
pdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically
pdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.
pdfjs-editor-new-alt-text-error-close-button = Close
pdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
pdfjs-editor-new-alt-text-added-button =
    .aria-label = Alt text added
pdfjs-editor-new-alt-text-added-button-label = Alt text added
pdfjs-editor-new-alt-text-missing-button =
    .aria-label = Missing alt text
pdfjs-editor-new-alt-text-missing-button-label = Missing alt text
pdfjs-editor-new-alt-text-to-review-button =
    .aria-label = Review alt text
pdfjs-editor-new-alt-text-to-review-button-label = Review alt text
pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }
pdfjs-image-alt-text-settings-button =
    .title = Image alt text settings
pdfjs-image-alt-text-settings-button-label = Image alt text settings
pdfjs-editor-alt-text-settings-dialog-label = Image alt text settings
pdfjs-editor-alt-text-settings-automatic-title = Automatic alt text
pdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically
pdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)
pdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.
pdfjs-editor-alt-text-settings-delete-model-button = Delete
pdfjs-editor-alt-text-settings-download-model-button = Download
pdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026
pdfjs-editor-alt-text-settings-editor-title = Alt text editor
pdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image
pdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.
pdfjs-editor-alt-text-settings-close-button = Close`)})}},X3=1e3,av=50,TM=1e3;function lv(){return document.location.hash}var xv=class{#e=null;constructor({linkService:t,eventBus:e}){this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:i=!1}){if(!t||typeof t!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let s=this._fingerprint!==""&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=i===!0,this._initialized=!0,this.#d();let r=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=lv(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#s(r,!0)||e){let{hash:a,page:l,rotation:c}=this.#l(!0);if(!a||s||e){this.#t(null,!0);return}this.#t({hash:a,page:l,rotation:c},!0);return}let o=r.destination;this.#r(o,r.uid,!0),o.rotation!==void 0&&(this._initialRotation=o.rotation),o.dest?(this._initialBookmark=JSON.stringify(o.dest),this._destination.page=null):o.hash?this._initialBookmark=o.hash:o.page&&(this._initialBookmark=`page=${o.page}`)}reset(){this._initialized&&(this.#a(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:i}){if(!this._initialized)return;if(t&&typeof t!="string"){console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);return}else if(Array.isArray(e)){if(!this.#i(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${e}" is not a valid explicitDest parameter.`);return}let s=t||JSON.stringify(e);if(!s)return;let r=!1;if(this._destination&&(Q3(this._destination.hash,s)||Z3(this._destination.dest,e))){if(this._destination.page)return;r=!0}this._popStateInProgress&&!r||(this.#t({dest:e,hash:s,page:i,rotation:this.linkService.rotation},r),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(t){if(this._initialized){if(!this.#i(t)){console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`);return}this._destination?.page!==t&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;let t=window.history.state;this.#s(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let t=window.history.state;this.#s(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(t,e=!1){let i=e||!this._destination,s={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};this.#r(t,s.uid);let r;if(this._updateUrl&&t?.hash){let o=document.location.href.split("#",1)[0];o.startsWith("file://")||(r=`${o}#${t.hash}`)}i?window.history.replaceState(s,"",r):window.history.pushState(s,"",r)}#n(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination){this.#t(e);return}if(this._destination.temporary){this.#t(e,!0);return}if(this._destination.hash===e.hash||!this._destination.page&&(av<=0||this._numPositionUpdates<=av))return;let i=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this.#t(e,i)}#i(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}#s(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint)if(e){if(typeof t.fingerprint!="string"||t.fingerprint.length!==this._fingerprint.length)return!1;let[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(t.uid)||t.uid<0||t.destination===null||typeof t.destination!="object")}#r(t,e,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&t?.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}#l(t=!1){let e=unescape(lv()).substring(1),i=Rf(e),s=i.get("nameddest")||"",r=i.get("page")|0;return(!this.#i(r)||t&&s.length>0)&&(r=null),{hash:e,page:r,rotation:this.linkService.rotation}}#c({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},!this._popStateInProgress&&(av>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,TM>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},TM)))}#u({state:t}){let e=lv(),i=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;let{hash:r,page:o,rotation:a}=this.#l();this.#t({hash:r,page:o,rotation:a},!0);return}if(!this.#s(t))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,u3({target:window,name:"hashchange",delay:X3}).then(()=>{this._blockHashChange--}));let s=t.destination;this.#r(s,t.uid,!0),kM(s.rotation)&&(this.linkService.rotation=s.rotation),s.dest?this.linkService.goToDestination(s.dest):s.hash?this.linkService.setHash(s.hash):s.page&&(this.linkService.page=s.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#a(){(!this._destination||this._destination.temporary)&&this.#n()}#d(){if(this.#e)return;this.#e=new AbortController;let{signal:t}=this.#e;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:t}),window.addEventListener("popstate",this.#u.bind(this),{signal:t}),window.addEventListener("pagehide",this.#a.bind(this),{signal:t})}#o(){this.#e?.abort(),this.#e=null}};function Q3(n,t){return typeof n!="string"||typeof t!="string"?!1:n===t||Rf(n).get("nameddest")===t}function Z3(n,t){function e(i,s){if(typeof i!=typeof s||Array.isArray(i)||Array.isArray(s))return!1;if(i!==null&&typeof i=="object"&&s!==null){if(Object.keys(i).length!==Object.keys(s).length)return!1;for(let r in i)if(!e(i[r],s[r]))return!1;return!0}return i===s||Number.isNaN(i)&&Number.isNaN(s)}if(!(Array.isArray(n)&&Array.isArray(t))||n.length!==t.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!e(n[i],t[i]))return!1;return!0}var Ev=class{#e=null;#t=null;#n=null;#i=null;#s=null;#r;constructor(t){this.pdfPage=t.pdfPage,this.accessibilityManager=t.accessibilityManager,this.l10n=t.l10n,this.l10n||=new ca,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#r=t.uiManager,this.#e=t.annotationLayer||null,this.#s=t.textLayer||null,this.#t=t.drawLayer||null,this.#n=t.onAppend||null,this.#i=t.structTreeLayer||null}render(t,e="display"){return O(this,null,function*(){if(e!=="display"||this._cancelled)return;let i=t.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:i}),this.show();return}let s=this.div=document.createElement("div");s.className="annotationEditorLayer",s.hidden=!0,s.dir=this.#r.direction,this.#n?.(s),this.annotationEditorLayer=new JH({uiManager:this.#r,div:s,structTreeLayer:this.#i,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:this.#e,textLayer:this.#s,drawLayer:this.#t});let r={viewport:i,div:s,annotations:null,intent:e};this.annotationEditorLayer.render(r),this.show()})}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}};{wf=new Map;let n=navigator.userAgent||"",t=navigator.platform||"",e=navigator.maxTouchPoints||1,i=/Android/.test(n),s=/\b(iPad|iPhone|iPod)(?=;)/.test(n)||t==="MacIntel"&&e>1;(function(){(s||i)&&wf.set("maxCanvasPixels",5242880)})(),function(){i&&wf.set("useSystemFonts",!1)}()}var wf,R={BROWSER:1,VIEWER:2,API:4,WORKER:8,EVENT_DISPATCH:16,PREFERENCE:128},Sv={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Fi={allowedGlobalEvents:{value:null,kind:R.BROWSER},canvasMaxAreaInBytes:{value:-1,kind:R.BROWSER+R.API},isInAutomation:{value:!1,kind:R.BROWSER},localeProperties:{value:{lang:navigator.language||"en-US"},kind:R.BROWSER},nimbusDataStr:{value:"",kind:R.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:R.BROWSER},supportsDocumentFonts:{value:!0,kind:R.BROWSER},supportsIntegratedFind:{value:!1,kind:R.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:R.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:R.BROWSER},supportsPinchToZoom:{value:!0,kind:R.BROWSER},toolbarDensity:{value:0,kind:R.BROWSER+R.EVENT_DISPATCH},altTextLearnMoreUrl:{value:"",kind:R.VIEWER+R.PREFERENCE},annotationEditorMode:{value:0,kind:R.VIEWER+R.PREFERENCE},annotationMode:{value:2,kind:R.VIEWER+R.PREFERENCE},cursorToolOnLoad:{value:0,kind:R.VIEWER+R.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:R.VIEWER},defaultZoomDelay:{value:400,kind:R.VIEWER+R.PREFERENCE},defaultZoomValue:{value:"",kind:R.VIEWER+R.PREFERENCE},disableHistory:{value:!1,kind:R.VIEWER},disablePageLabels:{value:!1,kind:R.VIEWER+R.PREFERENCE},enableAltText:{value:!1,kind:R.VIEWER+R.PREFERENCE},enableAltTextModelDownload:{value:!0,kind:R.VIEWER+R.PREFERENCE+R.EVENT_DISPATCH},enableGuessAltText:{value:!0,kind:R.VIEWER+R.PREFERENCE+R.EVENT_DISPATCH},enableHighlightFloatingButton:{value:!1,kind:R.VIEWER+R.PREFERENCE},enableNewAltTextWhenAddingImage:{value:!0,kind:R.VIEWER+R.PREFERENCE},enablePermissions:{value:!1,kind:R.VIEWER+R.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:R.VIEWER+R.PREFERENCE},enableScripting:{value:!0,kind:R.VIEWER+R.PREFERENCE},enableUpdatedAddImage:{value:!1,kind:R.VIEWER+R.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:R.VIEWER},externalLinkTarget:{value:0,kind:R.VIEWER+R.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:R.VIEWER+R.PREFERENCE},historyUpdateUrl:{value:!1,kind:R.VIEWER+R.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:R.VIEWER+R.PREFERENCE},imageResourcesPath:{value:"./images/",kind:R.VIEWER},maxCanvasPixels:{value:2**25,kind:R.VIEWER},forcePageColors:{value:!1,kind:R.VIEWER+R.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:R.VIEWER+R.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:R.VIEWER+R.PREFERENCE},pdfBugEnabled:{value:!1,kind:R.VIEWER+R.PREFERENCE},printResolution:{value:150,kind:R.VIEWER},sidebarViewOnLoad:{value:-1,kind:R.VIEWER+R.PREFERENCE},scrollModeOnLoad:{value:-1,kind:R.VIEWER+R.PREFERENCE},spreadModeOnLoad:{value:-1,kind:R.VIEWER+R.PREFERENCE},textLayerMode:{value:1,kind:R.VIEWER+R.PREFERENCE},viewOnLoad:{value:0,kind:R.VIEWER+R.PREFERENCE},cMapPacked:{value:!0,kind:R.API},cMapUrl:{value:"../web/cmaps/",kind:R.API},disableAutoFetch:{value:!1,kind:R.API+R.PREFERENCE},disableFontFace:{value:!1,kind:R.API+R.PREFERENCE},disableRange:{value:!1,kind:R.API+R.PREFERENCE},disableStream:{value:!1,kind:R.API+R.PREFERENCE},docBaseUrl:{value:"",kind:R.API},enableHWA:{value:!0,kind:R.API+R.VIEWER+R.PREFERENCE},enableXfa:{value:!0,kind:R.API+R.PREFERENCE},fontExtraProperties:{value:!1,kind:R.API},isEvalSupported:{value:!0,kind:R.API},isOffscreenCanvasSupported:{value:!0,kind:R.API},maxImageSize:{value:-1,kind:R.API},pdfBug:{value:!1,kind:R.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:R.API},useSystemFonts:{value:void 0,kind:R.API,type:Sv.BOOLEAN+Sv.UNDEFINED},verbosity:{value:1,kind:R.API},workerPort:{value:null,kind:R.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:R.WORKER}};Fi.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:R.VIEWER},Fi.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:R.VIEWER},Fi.viewerCssTheme={value:0,kind:R.VIEWER+R.PREFERENCE},Fi.enableFakeMLManager={value:!0,kind:R.VIEWER};Fi.disablePreferences={value:!1,kind:R.VIEWER};var Dv=class{static eventBus;static#e=new Map;static{for(let t in Fi)this.#e.set(t,Fi[t].value);for(let[t,e]of wf)this.#e.set(t,e);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>this.get("disablePreferences")?!0:(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(t){return this.#e.get(t)}static getAll(t=null,e=!1){let i=Object.create(null);for(let s in Fi){let r=Fi[s];t&&!(t&r.kind)||(i[s]=e?r.value:this.#e.get(s))}return i}static set(t,e){this.setAll({[t]:e})}static setAll(t,e=!1){this._hasInvokedSet||=!0;let i;for(let s in t){let r=Fi[s],o=t[s];if(!r||!(typeof o==typeof r.value||Sv[(typeof o).toUpperCase()]&r.type))continue;let{kind:a}=r;e&&!(a&R.BROWSER||a&R.PREFERENCE)||(this.eventBus&&a&R.EVENT_DISPATCH&&(i||=new Map).set(s,o),this.#e.set(s,o))}if(i)for(let[s,r]of i)this.eventBus.dispatch(s.toLowerCase(),{source:this,value:r})}},Mv=class{#e=null;constructor(t){this.pageIndex=t.pageIndex}render(t="display"){return O(this,null,function*(){t!=="display"||this.#e||this._cancelled||(this.#e=new i3({pageIndex:this.pageIndex}))})}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(t){this.#e?.setParent(t)}getDrawLayer(){return this.#e}},IM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},J3=/^H(\d+)$/,Af=class{#e;#t=null;#n;#i=new Map;#s;#r=null;constructor(t,e){this.#e=t.getStructTree(),this.#s=e}render(){return O(this,null,function*(){if(this.#n)return this.#n;let{promise:t,resolve:e,reject:i}=Promise.withResolvers();this.#n=t;try{this.#t=this.#u(yield this.#e)}catch(s){i(s)}return this.#e=null,this.#t?.classList.add("structTree"),e(this.#t),t})}getAriaAttributes(t){return O(this,null,function*(){try{return yield this.render(),this.#i.get(t)}catch{}return null})}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#l(t,e){let{alt:i,id:s,lang:r}=t;if(i!==void 0){let o=!1,a=oc(i);for(let l of t.children)if(l.type==="annotation"){let c=this.#i.get(l.id);c||(c=new Map,this.#i.set(l.id,c)),c.set("aria-label",a),o=!0}o||e.setAttribute("aria-label",a)}s!==void 0&&e.setAttribute("aria-owns",s),r!==void 0&&e.setAttribute("lang",oc(r,!0))}#c(t,e){let{alt:i,bbox:s,children:r}=t,o=r?.[0];if(!this.#s||!i||!s||o?.type!=="content")return!1;let{id:a}=o;if(!a)return!1;e.setAttribute("aria-owns",a);let l=document.createElement("span");(this.#r||=new Map).set(a,l),l.setAttribute("role","img"),l.setAttribute("aria-label",oc(i));let{pageHeight:c,pageX:u,pageY:d}=this.#s,h="calc(var(--scale-factor)*",{style:f}=l;return f.width=`${h}${s[2]-s[0]}px)`,f.height=`${h}${s[3]-s[1]}px)`,f.left=`${h}${s[0]-u}px)`,f.top=`${h}${c-s[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#r){for(let[t,e]of this.#r)document.getElementById(t)?.append(e);this.#r.clear(),this.#r=null}}#u(t){if(!t)return null;let e=document.createElement("span");if("role"in t){let{role:i}=t,s=i.match(J3);if(s?(e.setAttribute("role","heading"),e.setAttribute("aria-level",s[1])):IM[i]&&e.setAttribute("role",IM[i]),i==="Figure"&&this.#c(t,e))return e}if(this.#l(t,e),t.children)if(t.children.length===1&&"id"in t.children[0])this.#l(t.children[0],e);else for(let i of t.children)e.append(this.#u(i));return e}},Av=class n{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(t){this.#t=t}static#s(t,e){let i=t.getBoundingClientRect(),s=e.getBoundingClientRect();if(i.width===0&&i.height===0)return 1;if(s.width===0&&s.height===0)return-1;let r=i.y,o=i.y+i.height,a=i.y+i.height/2,l=s.y,c=s.y+s.height,u=s.y+s.height/2;if(a<=l&&u>=o)return-1;if(u<=r&&a>=c)return 1;let d=i.x+i.width/2,h=s.x+s.width/2;return d-h}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(n.#s),this.#n.size>0){let t=this.#t;for(let[e,i]of this.#n){if(!document.getElementById(e)){this.#n.delete(e);continue}this.#r(e,t[i])}}for(let[t,e]of this.#i)this.addPointerInTextLayer(t,e);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(t){if(!this.#e){this.#i.delete(t);return}let e=this.#t;if(!e||e.length===0)return;let{id:i}=t,s=this.#n.get(i);if(s===void 0)return;let r=e[s];this.#n.delete(i);let o=r.getAttribute("aria-owns");o?.includes(i)&&(o=o.split(" ").filter(a=>a!==i).join(" "),o?r.setAttribute("aria-owns",o):(r.removeAttribute("aria-owns"),r.setAttribute("role","presentation")))}#r(t,e){let i=e.getAttribute("aria-owns");i?.includes(t)||e.setAttribute("aria-owns",i?`${i} ${t}`:t),e.removeAttribute("role")}addPointerInTextLayer(t,e){let{id:i}=t;if(!i)return null;if(!this.#e)return this.#i.set(t,e),null;e&&this.removePointerInTextLayer(t);let s=this.#t;if(!s||s.length===0)return null;let r=ac(s,c=>n.#s(t,c)<0),o=Math.max(0,r-1),a=s[o];this.#r(i,a),this.#n.set(i,o);let l=a.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(t,e,i,s){let r=this.addPointerInTextLayer(i,s);if(!t.hasChildNodes())return t.append(e),r;let o=Array.from(t.childNodes).filter(c=>c!==e);if(o.length===0)return r;let a=i||e,l=ac(o,c=>n.#s(a,c)<0);return l===0?o[0].before(e):o[l-1].after(e),r}},Tv=class{#e=null;constructor({findController:t,eventBus:e,pageIndex:i}){this.findController=t,this.matches=[],this.eventBus=e,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,e){this.textDivs=t,this.textContentItemsStr=e}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",t=>{(t.pageIndex===this.pageIdx||t.pageIndex===-1)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(t,e){if(!t)return[];let{textContentItemsStr:i}=this,s=0,r=0,o=i.length-1,a=[];for(let l=0,c=t.length;l<c;l++){let u=t[l];for(;s!==o&&u>=r+i[s].length;)r+=i[s].length,s++;s===i.length&&console.error("Could not find a matching mapping");let d={begin:{divIdx:s,offset:u-r}};for(u+=e[l];s!==o&&u>r+i[s].length;)r+=i[s].length,s++;d.end={divIdx:s,offset:u-r},a.push(d)}return a}_renderMatches(t){if(t.length===0)return;let{findController:e,pageIdx:i}=this,{textContentItemsStr:s,textDivs:r}=this,o=i===e.selected.pageIdx,a=e.selected.matchIdx,l=e.state.highlightAll,c=null,u={divIdx:-1,offset:void 0};function d(_,b){let y=_.divIdx;return r[y].textContent="",h(y,0,_.offset,b)}function h(_,b,y,v){let x=r[_];if(x.nodeType===Node.TEXT_NODE){let A=document.createElement("span");x.before(A),A.append(x),r[_]=A,x=A}let S=s[_].substring(b,y),D=document.createTextNode(S);if(v){let A=document.createElement("span");return A.className=`${v} appended`,A.append(D),x.append(A),v.includes("selected")?A.offsetLeft:0}return x.append(D),0}let f=a,p=f+1;if(l)f=0,p=t.length;else if(!o)return;let g=-1,m=-1;for(let _=f;_<p;_++){let b=t[_],y=b.begin;if(y.divIdx===g&&y.offset===m)continue;g=y.divIdx,m=y.offset;let v=b.end,x=o&&_===a,S=x?" selected":"",D=0;if(!c||y.divIdx!==c.divIdx?(c!==null&&h(c.divIdx,c.offset,u.offset),d(y)):h(c.divIdx,c.offset,y.offset),y.divIdx===v.divIdx)D=h(y.divIdx,y.offset,v.offset,"highlight"+S);else{D=h(y.divIdx,y.offset,u.offset,"highlight begin"+S);for(let A=y.divIdx+1,E=v.divIdx;A<E;A++)r[A].className="highlight middle"+S;d(v,"highlight end"+S)}c=v,x&&e.scrollMatchIntoView({element:r[y.divIdx],selectedLeft:D,pageIndex:i,matchIndex:a})}c&&h(c.divIdx,c.offset,u.offset)}_updateMatches(t=!1){if(!this.enabled&&!t)return;let{findController:e,matches:i,pageIdx:s}=this,{textContentItemsStr:r,textDivs:o}=this,a=-1;for(let u of i){let d=Math.max(a,u.begin.divIdx);for(let h=d,f=u.end.divIdx;h<=f;h++){let p=o[h];p.textContent=r[h],p.className=""}a=u.end.divIdx+1}if(!e?.highlightMatches||t)return;let l=e.pageMatches[s]||null,c=e.pageMatchesLength[s]||null;this.matches=this._convertMatches(l,c),this._renderMatches(this.matches)}},Tf=class n{#e=!1;#t=null;#n=!1;#i=null;static#s=new Map;static#r=null;constructor({pdfPage:t,highlighter:e=null,accessibilityManager:i=null,enablePermissions:s=!1,onAppend:r=null}){this.pdfPage=t,this.highlighter=e,this.accessibilityManager=i,this.#e=s===!0,this.#t=r,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(t,e=null){return O(this,null,function*(){if(this.#n&&this.#i){this.#i.update({viewport:t,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#i=new c3({textContentSource:this.pdfPage.streamTextContent(e||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:t});let{textDivs:i,textContentItemsStr:s}=this.#i;this.highlighter?.setTextMapping(i,s),this.accessibilityManager?.setTextMapping(i),yield this.#i.render(),this.#n=!0;let r=document.createElement("div");r.className="endOfContent",this.div.append(r),this.#l(r),this.#t?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()})}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),n.#c(this.div)}#l(t){let{div:e}=this;e.addEventListener("mousedown",()=>{e.classList.add("selecting")}),e.addEventListener("copy",i=>{if(!this.#e){let s=document.getSelection();i.clipboardData.setData("text/plain",oc(o3(s.toString())))}i.preventDefault(),i.stopPropagation()}),n.#s.set(e,t),n.#u()}static#c(t){this.#s.delete(t),this.#s.size===0&&(this.#r?.abort(),this.#r=null)}static#u(){if(this.#r)return;this.#r=new AbortController;let{signal:t}=this.#r,e=(o,a)=>{a.append(o),o.style.width="",o.style.height="",a.classList.remove("selecting")},i=!1;document.addEventListener("pointerdown",()=>{i=!0},{signal:t}),document.addEventListener("pointerup",()=>{i=!1,this.#s.forEach(e)},{signal:t}),window.addEventListener("blur",()=>{i=!1,this.#s.forEach(e)},{signal:t}),document.addEventListener("keyup",()=>{i||this.#s.forEach(e)},{signal:t});var s,r;document.addEventListener("selectionchange",()=>{let o=document.getSelection();if(o.rangeCount===0){this.#s.forEach(e);return}let a=new Set;for(let f=0;f<o.rangeCount;f++){let p=o.getRangeAt(f);for(let g of this.#s.keys())!a.has(g)&&p.intersectsNode(g)&&a.add(g)}for(let[f,p]of this.#s)a.has(f)?f.classList.add("selecting"):e(p,f);if(s??=getComputedStyle(this.#s.values().next().value).getPropertyValue("-moz-user-select")==="none",s)return;let l=o.getRangeAt(0),c=r&&(l.compareBoundaryPoints(Range.END_TO_END,r)===0||l.compareBoundaryPoints(Range.START_TO_END,r)===0),u=c?l.startContainer:l.endContainer;u.nodeType===Node.TEXT_NODE&&(u=u.parentNode);let d=u.parentElement?.closest(".textLayer"),h=this.#s.get(d);h&&(h.style.width=d.style.width,h.style.height=d.style.height,u.parentElement.insertBefore(h,c?u:u.nextSibling)),r=l.cloneRange()},{signal:t})}},If=class{constructor({pdfPage:t,annotationStorage:e=null,linkService:i,xfaHtml:s=null}){this.pdfPage=t,this.annotationStorage=e,this.linkService=i,this.xfaHtml=s,this.div=null,this._cancelled=!1}render(t,e="display"){return O(this,null,function*(){if(e==="print"){let r={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div=document.createElement("div"),r.div=this.div,sv.render(r)}let i=yield this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};let s={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div?sv.update(s):(this.div=document.createElement("div"),s.div=this.div,sv.render(s))})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}},eU={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new lc}},tU=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),Pf=class{#e=_s.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#s=null;#r=null;#l=null;#c=1;#u=1;#a=null;#d=dt.INITIAL;#o=ki.ENABLE;#h={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#p=new WeakMap;#f=[null,null,null,null];constructor(t){let e=t.container,i=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.#s=t.layerProperties||eU,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||RM,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.#o=t.textLayerMode??ki.ENABLE,this.#e=t.annotationMode??_s.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.maxCanvasPixels=t.maxCanvasPixels??Dv.get("maxCanvasPixels"),this.pageColors=t.pageColors||null,this.#t=t.enableHWA||!1,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.l10n=t.l10n,this.l10n||=new ca,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=e,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;let s=document.createElement("div");if(s.className="page",s.setAttribute("data-page-number",this.id),s.setAttribute("role","region"),s.setAttribute("data-l10n-id","pdfjs-page-landmark"),s.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=s,this.#_(),e?.append(s),this._isStandalone){e?.style.setProperty("--scale-factor",this.scale*ms.PDF_TO_CSS_UNITS),this.pageColors?.background&&e?.style.setProperty("--page-bg-color",this.pageColors.background);let{optionalContentConfigPromise:r}=t;r&&r.then(o=>{r===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)}),t.l10n||this.l10n.translate(this.div)}}#g(t,e){let i=tU.get(e),s=this.#f[i];if(this.#f[i]=t,s){s.replaceWith(t);return}for(let r=i-1;r>=0;r--){let o=this.#f[r];if(o){o.after(t);return}}this.div.prepend(t)}get renderingState(){return this.#d}set renderingState(t){if(t!==this.#d)switch(this.#d=t,this.#r&&(clearTimeout(this.#r),this.#r=null),t){case dt.PAUSED:this.div.classList.remove("loading");break;case dt.RUNNING:this.div.classList.add("loadingIcon"),this.#r=setTimeout(()=>{this.div.classList.add("loading"),this.#r=null},0);break;case dt.INITIAL:case dt.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#_(){let{viewport:t}=this;if(this.pdfPage){if(this.#l===t.rotation)return;this.#l=t.rotation}l3(this.div,t,!0,!1)}setPdfPage(t){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=t,this.pdfPageRotate=t.rotate;let e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*ms.PDF_TO_CSS_UNITS,rotation:e}),this.#_(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return xf(this,"_textHighlighter",new Tv({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#s.findController}))}#m(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})}#b(){return O(this,null,function*(){let t=null;try{yield this.annotationLayer.render(this.viewport,{structTreeLayer:this.structTreeLayer},"display")}catch(e){console.error(`#renderAnnotationLayer: "${e}".`),t=e}finally{this.#m("annotationlayerrendered",t)}})}#y(){return O(this,null,function*(){let t=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(e){console.error(`#renderAnnotationEditorLayer: "${e}".`),t=e}finally{this.#m("annotationeditorlayerrendered",t)}})}#x(){return O(this,null,function*(){try{yield this.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})}#w(){return O(this,null,function*(){let t=null;try{let e=yield this.xfaLayer.render(this.viewport,"display");e?.textDivs&&this._textHighlighter&&this.#M(e.textDivs)}catch(e){console.error(`#renderXfaLayer: "${e}".`),t=e}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#g(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#m("xfalayerrendered",t)}})}#C(){return O(this,null,function*(){if(!this.textLayer)return;let t=null;try{yield this.textLayer.render(this.viewport)}catch(e){if(e instanceof ZH)return;console.error(`#renderTextLayer: "${e}".`),t=e}this.#m("textlayerrendered",t),this.#I()})}#I(){return O(this,null,function*(){if(!this.textLayer)return;let t=yield this.structTreeLayer?.render();t&&(this.l10n.pause(),this.structTreeLayer?.addElementsToTextLayer(),this.canvas&&t.parentNode!==this.canvas&&this.canvas.append(t),this.l10n.resume()),this.structTreeLayer?.show()})}#M(t){return O(this,null,function*(){let e=yield this.pdfPage.getTextContent(),i=[];for(let s of e.items)i.push(s.str);this._textHighlighter.setTextMapping(t,i),this._textHighlighter.enable()})}_resetZoomLayer(t=!1){if(!this.zoomLayer)return;let e=this.zoomLayer.firstChild;this.#p.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:t=!1,keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:s=!1,keepTextLayer:r=!1}={}){this.cancelRendering({keepAnnotationLayer:e,keepAnnotationEditorLayer:i,keepXfaLayer:s,keepTextLayer:r}),this.renderingState=dt.INITIAL;let o=this.div,a=o.childNodes,l=t&&this.zoomLayer||null,c=e&&this.annotationLayer?.div||null,u=i&&this.annotationEditorLayer?.div||null,d=s&&this.xfaLayer?.div||null,h=r&&this.textLayer?.div||null;for(let f=a.length-1;f>=0;f--){let p=a[f];switch(p){case l:case c:case u:case d:case h:continue}p.remove();let g=this.#f.indexOf(p);g>=0&&(this.#f[g]=null)}o.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),h&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#p.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(t){this.hasEditableAnnotations()&&(this.#i=t,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:t=0,rotation:e=null,optionalContentConfigPromise:i=null,drawingDelay:s=-1}){this.scale=t||this.scale,typeof e=="number"&&(this.rotation=e),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(o=>{i===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)})),this.#h.directDrawing=!0;let r=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*ms.PDF_TO_CSS_UNITS,rotation:r}),this.#_(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let o=!1;if(this.#n){if(this.maxCanvasPixels===0)o=!0;else if(this.maxCanvasPixels>0){let{width:l,height:c}=this.viewport,{sx:u,sy:d}=this.outputScale;o=(Math.floor(l)*u|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}}let a=s>=0&&s<1e3;if(a||o){if(a&&!o&&this.renderingState!==dt.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:s}),this.renderingState=dt.FINISHED,this.#h.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!a,hideTextLayer:a}),a)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#a});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:s=!1,cancelExtraDelay:r=0}={}){this.renderTask&&(this.renderTask.cancel(r),this.renderTask=null),this.resume=null,this.textLayer&&(!s||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!t||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!e||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:t,redrawAnnotationLayer:e=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:s=!1,redrawTextLayer:r=!1,hideTextLayer:o=!1}){if(!t.hasAttribute("zooming")){t.setAttribute("zooming",!0);let{style:l}=t;l.width=l.height=""}let a=this.#p.get(t);if(this.viewport!==a){let l=this.viewport.rotation-a.rotation,c=Math.abs(l),u=1,d=1;if(c===90||c===270){let{width:h,height:f}=this.viewport;u=f/h,d=h/f}t.style.transform=`rotate(${l}deg) scale(${u}, ${d})`}e&&this.annotationLayer&&this.#b(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#x(),this.#y()),s&&this.xfaLayer&&this.#w(),this.textLayer&&(o?(this.textLayer.hide(),this.structTreeLayer?.hide()):r&&this.#C())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}#E(t,e=null){return O(this,null,function*(){if(t===this.renderTask&&(this.renderTask=null),e instanceof dv){this.#a=null;return}if(this.#a=e,this.renderingState=dt.FINISHED,this._resetZoomLayer(!0),this.#h.regularAnnotations=!t.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#a}),e)throw e})}draw(){return O(this,null,function*(){this.renderingState!==dt.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:t,l10n:e,pageColors:i,pdfPage:s,viewport:r}=this;if(!s)throw this.renderingState=dt.FINISHED,new Error("pdfPage is not loaded");this.renderingState=dt.RUNNING;let o=document.createElement("div");if(o.classList.add("canvasWrapper"),this.#g(o,"canvasWrapper"),!this.textLayer&&this.#o!==ki.DISABLE&&!s.isPureXfa&&(this._accessibilityManager||=new Av,this.textLayer=new Tf({pdfPage:s,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#o===ki.ENABLE_PERMISSIONS,onAppend:E=>{this.l10n.pause(),this.#g(E,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#e!==_s.DISABLE){let{annotationStorage:E,annotationEditorUIManager:I,downloadManager:N,enableScripting:W,fieldObjectsPromise:Q,hasJSActionsPromise:ee,linkService:z}=this.#s;this._annotationCanvasMap||=new Map,this.annotationLayer=new Ef({pdfPage:s,annotationStorage:E,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===_s.ENABLE_FORMS,linkService:z,downloadManager:N,enableScripting:W,hasJSActionsPromise:ee,fieldObjectsPromise:Q,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:I,onAppend:ce=>{this.#g(ce,"annotationLayer")}})}let a=E=>{if(h?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=dt.PAUSED,this.resume=()=>{this.renderingState=dt.RUNNING,E()};return}E()},{width:l,height:c}=r,u=document.createElement("canvas");u.setAttribute("role","presentation"),u.hidden=!0;let d=!!(i?.background&&i?.foreground),h=E=>{(!d||E)&&(u.hidden=!1,h=null)};o.append(u),this.canvas=u;let f=u.getContext("2d",{alpha:!1,willReadFrequently:!this.#t}),p=this.outputScale=new a3;if(this.maxCanvasPixels===0){let E=1/this.scale;p.sx*=E,p.sy*=E,this.#n=!0}else if(this.maxCanvasPixels>0){let E=l*c,I=Math.sqrt(this.maxCanvasPixels/E);p.sx>I||p.sy>I?(p.sx=I,p.sy=I,this.#n=!0):this.#n=!1}let g=sM(p.sx),m=sM(p.sy),_=u.width=gf(mf(l*p.sx),g[0]),b=u.height=gf(mf(c*p.sy),m[0]),y=gf(mf(l),g[1]),v=gf(mf(c),m[1]);p.sx=_/y,p.sy=b/v,this.#c!==g[1]&&(t.style.setProperty("--scale-round-x",`${g[1]}px`),this.#c=g[1]),this.#u!==m[1]&&(t.style.setProperty("--scale-round-y",`${m[1]}px`),this.#u=m[1]),this.#p.set(u,r);let x=p.scaled?[p.sx,0,0,p.sy,0,0]:null,S={canvasContext:f,transform:x,viewport:r,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i,isEditing:this.#i},D=this.renderTask=s.render(S);D.onContinue=a;let A=D.promise.then(()=>O(this,null,function*(){h?.(!0),yield this.#E(D),this.structTreeLayer||=new Af(s,r.rawDims),this.#C(),this.annotationLayer&&(yield this.#b());let{annotationEditorUIManager:E}=this.#s;E&&(this.drawLayer||=new Mv({pageIndex:this.id}),yield this.#x(),this.drawLayer.setParent(o),this.annotationEditorLayer||=new Ev({uiManager:E,pdfPage:s,l10n:e,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:I=>{this.#g(I,"annotationEditorLayer")}}),this.#y())}),E=>(E instanceof dv||h?.(!0),this.#E(D,E)));if(s.isPureXfa){if(!this.xfaLayer){let{annotationStorage:E,linkService:I}=this.#s;this.xfaLayer=new If({pdfPage:s,annotationStorage:E,linkService:I})}this.#w()}return t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),A})}setPageLabel(t){this.pageLabel=typeof t=="string"?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){let{directDrawing:t,initialOptionalContent:e,regularAnnotations:i}=this.#h;return t&&e&&i?this.canvas:null}};function nU(n){return O(this,null,function*(){let t="",e=t.split("#",1)[0],{info:i,metadata:s,contentDispositionFilename:r,contentLength:o}=yield n.getMetadata();if(!o){let{length:a}=yield n.getDownloadInfo();o=a}return ue(L({},i),{baseURL:e,filesize:o,filename:r||s3(t),metadata:s?.getRaw(),authors:s?.get("dc:creator"),numPages:n.numPages,URL:t})})}var Iv=class{constructor(t){this._ready=new Promise((e,i)=>{import(t).then(r=>{e(r.QuickJSSandbox())}).catch(i)})}createSandbox(t){return O(this,null,function*(){(yield this._ready).create(t)})}dispatchEventInSandbox(t){return O(this,null,function*(){let e=yield this._ready;setTimeout(()=>e.dispatchEvent(t),0)})}destroySandbox(){return O(this,null,function*(){(yield this._ready).nukeSandbox()})}},Pv=class{#e=null;#t=null;#n=null;#i=null;#s=null;#r=null;#l=null;#c=null;#u=!1;#a=null;#d=null;constructor({eventBus:t,externalServices:e=null,docProperties:i=null}){this.#s=t,this.#r=e,this.#n=i}setViewer(t){this.#c=t}setDocument(t){return O(this,null,function*(){if(this.#l&&(yield this.#g()),this.#l=t,!t)return;let[e,i,s]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(!e&&!s){yield this.#g();return}if(t!==this.#l)return;try{this.#a=this.#f()}catch(a){console.error(`setDocument: "${a.message}".`),yield this.#g();return}let r=this.#s;this.#i=new AbortController;let{signal:o}=this.#i;r._on("updatefromsandbox",a=>{a?.source===window&&this.#o(a.detail)},{signal:o}),r._on("dispatcheventinsandbox",a=>{this.#a?.dispatchEventInSandbox(a.detail)},{signal:o}),r._on("pagechanging",({pageNumber:a,previous:l})=>{a!==l&&(this.#p(l),this.#h(a))},{signal:o}),r._on("pagerendered",({pageNumber:a})=>{this._pageOpenPending.has(a)&&a===this.#c.currentPageNumber&&this.#h(a)},{signal:o}),r._on("pagesdestroy",()=>O(this,null,function*(){yield this.#p(this.#c.currentPageNumber),yield this.#a?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()}),{signal:o});try{let a=yield this.#n(t);if(t!==this.#l)return;yield this.#a.createSandbox({objects:e,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:ue(L({},a),{actions:s})}),r.dispatch("sandboxcreated",{source:this})}catch(a){console.error(`setDocument: "${a.message}".`),yield this.#g();return}yield this.#a?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield this.#h(this.#c.currentPageNumber,!0),Promise.resolve().then(()=>{t===this.#l&&(this.#u=!0)})})}dispatchWillSave(){return O(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})}dispatchDidSave(){return O(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})}dispatchWillPrint(){return O(this,null,function*(){if(this.#a){yield this.#d?.promise,this.#d=Promise.withResolvers();try{yield this.#a.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw this.#d.resolve(),this.#d=null,t}yield this.#d.promise}})}dispatchDidPrint(){return O(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#u}get _pageOpenPending(){return xf(this,"_pageOpenPending",new Set)}get _visitedPages(){return xf(this,"_visitedPages",new Map)}#o(t){return O(this,null,function*(){let e=this.#c,i=e.isInPresentationMode||e.isChangingPresentationMode,{id:s,siblings:r,command:o,value:a}=t;if(!s){switch(o){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(!i){let c=TH(a);e.spreadMode=c.spreadMode}break;case"page-num":e.currentPageNumber=a+1;break;case"print":yield e.pagesPromise,this.#s.dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":i||(e.currentScaleValue=a);break;case"SaveAs":this.#s.dispatch("download",{source:this});break;case"FirstPage":e.currentPageNumber=1;break;case"LastPage":e.currentPageNumber=e.pagesCount;break;case"NextPage":e.nextPage();break;case"PrevPage":e.previousPage();break;case"ZoomViewIn":i||e.increaseScale();break;case"ZoomViewOut":i||e.decreaseScale();break;case"WillPrintFinished":this.#d?.resolve(),this.#d=null;break}return}if(i&&t.focus)return;delete t.id,delete t.siblings;let l=r?[s,...r]:[s];for(let c of l){let u=document.querySelector(`[data-element-id="${c}"]`);u?u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):this.#l?.annotationStorage.setValue(c,t)}})}#h(t,e=!1){return O(this,null,function*(){let i=this.#l,s=this._visitedPages;if(e&&(this.#e=Promise.withResolvers()),!this.#e)return;let r=this.#c.getPageView(t-1);if(r?.renderingState!==dt.FINISHED){this._pageOpenPending.add(t);return}this._pageOpenPending.delete(t);let o=O(this,null,function*(){let a=yield s.has(t)?null:r.pdfPage?.getJSActions();i===this.#l&&(yield this.#a?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:a}))});s.set(t,o)})}#p(t){return O(this,null,function*(){let e=this.#l,i=this._visitedPages;if(!this.#e||this._pageOpenPending.has(t))return;let s=i.get(t);s&&(i.set(t,null),yield s,e===this.#l&&(yield this.#a?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})}#f(){if(this.#t=Promise.withResolvers(),this.#a)throw new Error("#initScripting: Scripting already exists.");return this.#r.createScripting()}#g(){return O(this,null,function*(){if(!this.#a){this.#l=null,this.#t?.resolve();return}this.#e&&(yield Promise.race([this.#e.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),this.#e=null),this.#l=null;try{yield this.#a.destroySandbox()}catch{}this.#d?.reject(new Error("Scripting destroyed.")),this.#d=null,this.#i?.abort(),this.#i=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#a=null,this.#u=!1,this.#t?.resolve()})}},Ov=class extends Pv{constructor(t){t.externalServices||window.addEventListener("updatefromsandbox",e=>{t.eventBus.dispatch("updatefromsandbox",{source:window,detail:e.detail})}),t.externalServices||={createScripting:()=>new Iv(t.sandboxBundleSrc)},t.docProperties||=e=>nU(e),super(t)}},iU=3e4,Rv=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),iU)))}getHighestPriority(t,e,i,s=!1){let r=t.views,o=r.length;if(o===0)return null;for(let d=0;d<o;d++){let h=r[d].view;if(!this.isViewFinished(h))return h}let a=t.first.id,l=t.last.id;if(l-a+1>o){let d=t.ids;for(let h=1,f=l-a;h<f;h++){let p=i?a+h:l-h;if(d.has(p))continue;let g=e[p-1];if(!this.isViewFinished(g))return g}}let c=i?l:a-2,u=e[c];return u&&!this.isViewFinished(u)||s&&(c+=i?1:-1,u=e[c],u&&!this.isViewFinished(u))?u:null}isViewFinished(t){return t.renderingState===dt.FINISHED}renderView(t){switch(t.renderingState){case dt.FINISHED:return!1;case dt.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case dt.RUNNING:this.highestPriorityPage=t.renderingId;break;case dt.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(e=>{e instanceof dv||console.error(`renderView: "${e}"`)});break}return!0}},PM=10,yf={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function OM(n){return Object.values(Pn).includes(n)&&n!==Pn.DISABLE}var Nv=class{#e=new Set;#t=0;constructor(t){this.#t=t}push(t){let e=this.#e;e.has(t)&&e.delete(t),e.add(t),e.size>this.#t&&this.#n()}resize(t,e=null){this.#t=t;let i=this.#e;if(e){let s=i.size,r=1;for(let o of i)if(e.has(o.id)&&(i.delete(o),i.add(o)),++r>s)break}for(;i.size>this.#t;)this.#n()}has(t){return this.#e.has(t)}[Symbol.iterator](){return this.#e.keys()}#n(){let t=this.#e.keys().next().value;t?.destroy(),this.#e.delete(t)}},Of=class{#e=null;#t=null;#n=null;#i=Pn.NONE;#s=null;#r=_s.ENABLE_FORMS;#l=null;#c=!1;#u=!1;#a=!1;#d=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#_=!1;#m=null;#b=!1;#y=0;#x=new ResizeObserver(this.#V.bind(this));#w=null;#C=null;#I=ki.ENABLE;constructor(t){let e="4.8.69";if(fM!==e)throw new Error(`The API version "${fM}" does not match the Viewer version "${e}".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#x.observe(this.container),this.eventBus=t.eventBus,this.linkService=t.linkService||new lc,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.#t=t.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=s=>this._getVisiblePages().ids.has(s)),this._scriptingManager=t.scriptingManager||null,this.#I=t.textLayerMode??ki.ENABLE,this.#r=t.annotationMode??_s.ENABLE_FORMS,this.#i=t.annotationEditorMode??Pn.NONE,this.#n=t.annotationEditorHighlightColors||null,this.#u=t.enableHighlightFloatingButton===!0,this.#d=t.enableUpdatedAddImage===!0,this.#o=t.enableNewAltTextWhenAddingImage===!0,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.removePageBorders=t.removePageBorders||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n,this.l10n||=new ca,this.#a=t.enablePermissions||!1,this.pageColors=t.pageColors||null,this.#p=t.mlManager||null,this.#c=t.enableHWA||!1,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new Rv,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue;let{abortSignal:i}=t;i?.addEventListener("abort",()=>{this.#x.disconnect(),this.#x=null},{once:!0}),this.scroll=CH(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=oa.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#F(),this.eventBus._on("thumbnailrendered",({pageNumber:s,pdfPage:r})=>{let o=this._pages[s-1];this.#e.has(o)||r?.cleanup()}),t.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(t=>t?.pdfPage)}get renderForms(){return this.#r===_s.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){if(this._currentPageNumber===t)return e&&this.#O(),!0;if(!(0<t&&t<=this.pagesCount))return!1;let i=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels?.[t-1]??null,previous:i}),e&&this.#O(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(t){if(!this.pdfDocument)return;let e=t|0;if(this._pageLabels){let i=this._pageLabels.indexOf(t);i>=0&&(e=i+1)}this._setCurrentPageNumber(e,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==ev?this._currentScale:RM}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#T(t,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this.#T(t,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!kM(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(t%=360,t<0&&(t+=360),this._pagesRotation===t))return;this._pagesRotation=t;let e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&this.#T(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){let t=this;return xf(this,"_layerProperties",{get annotationEditorUIManager(){return t.#s},get annotationStorage(){return t.pdfDocument?.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){return t.pdfDocument?.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){return t.pdfDocument?.hasJSActions()},get linkService(){return t.linkService}})}#M(t){let e={annotationEditorMode:this.#i,annotationMode:this.#r,textLayerMode:this.#I};return t&&(!t.includes(bf.COPY)&&this.#I===ki.ENABLE&&(e.textLayerMode=ki.ENABLE_PERMISSIONS),t.includes(bf.MODIFY_CONTENTS)||(e.annotationEditorMode=Pn.DISABLE),!t.includes(bf.MODIFY_ANNOTATIONS)&&!t.includes(bf.FILL_INTERACTIVE_FORMS)&&this.#r===_s.ENABLE_FORMS&&(e.annotationMode=_s.ENABLE)),e}#E(t){return O(this,null,function*(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;let e=Promise.withResolvers(),i=new AbortController;document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e.resolve()},{signal:typeof AbortSignal.any=="function"?AbortSignal.any([t,i.signal]):t}),yield Promise.race([this._onePageRenderedCapability.promise,e.promise]),i.abort()})}getAllText(){return O(this,null,function*(){let t=[],e=[];for(let i=1,s=this.pdfDocument.numPages;i<=s;++i){if(this.#b)return null;e.length=0;let r=yield this.pdfDocument.getPage(i),{items:o}=yield r.getTextContent();for(let a of o)a.str&&e.push(a.str),a.hasEOL&&e.push(`
`);t.push(oc(e.join("")))}return t.join(`
`)})}#A(t,e){let i=document.getSelection(),{focusNode:s,anchorNode:r}=i;if(r&&s&&i.containsNode(this.#m)){if(this.#_||t===ki.ENABLE_PERMISSIONS){e.preventDefault(),e.stopPropagation();return}this.#_=!0;let{classList:o}=this.viewer;o.add("copyAll");let a=new AbortController;window.addEventListener("keydown",l=>this.#b=l.key==="Escape",{signal:a.signal}),this.getAllText().then(l=>O(this,null,function*(){l!==null&&(yield navigator.clipboard.writeText(l))})).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#_=!1,this.#b=!1,a.abort(),o.remove("copyAll")}),e.preventDefault(),e.stopPropagation()}}setDocument(t){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#s?.destroy(),this.#s=null),this.pdfDocument=t,!t)return;let e=t.numPages,i=t.getPage(1),s=t.getOptionalContentConfig({intent:"display"}),r=this.#a?t.getPermissions():Promise.resolve(),{eventBus:o,pageColors:a,viewer:l}=this;this.#h=new AbortController;let{signal:c}=this.#h;if(e>yf.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let h=this._scrollMode=Re.PAGE;o.dispatch("scrollmodechanged",{source:this,mode:h})}this._pagesCapability.promise.then(()=>{o.dispatch("pagesloaded",{source:this,pagesCount:e})},()=>{});let u=h=>{let f=this._pages[h.pageNumber-1];f&&this.#e.push(f)};o._on("pagerender",u,{signal:c});let d=h=>{h.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:h.timestamp}),o._off("pagerendered",d))};o._on("pagerendered",d,{signal:c}),Promise.all([i,r]).then(([h,f])=>{if(t!==this.pdfDocument)return;this._firstPageCapability.resolve(h),this._optionalContentConfigPromise=s;let{annotationEditorMode:p,annotationMode:g,textLayerMode:m}=this.#M(f);if(m!==ki.DISABLE){let v=this.#m=document.createElement("div");v.id="hiddenCopyElement",l.before(v)}if(typeof AbortSignal.any=="function"&&p!==Pn.DISABLE){let v=p;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):OM(v)?(this.#s=new e3(this.container,l,this.#t,o,t,a,this.#n,this.#u,this.#d,this.#o,this.#p),o.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#s}),v!==Pn.NONE&&(v===Pn.STAMP&&this.#p?.loadModel("altText"),this.#s.updateMode(v))):console.error(`Invalid AnnotationEditor mode: ${v}`)}let _=this._scrollMode===Re.PAGE?null:l,b=this.currentScale,y=h.getViewport({scale:b*ms.PDF_TO_CSS_UNITS});l.style.setProperty("--scale-factor",y.scale),a?.background&&l.style.setProperty("--page-bg-color",a.background),(a?.foreground==="CanvasText"||a?.background==="Canvas")&&(l.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),l.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let v=1;v<=e;++v){let x=new Pf({container:_,eventBus:o,id:v,scale:b,defaultViewport:y.clone(),optionalContentConfigPromise:s,renderingQueue:this.renderingQueue,textLayerMode:m,annotationMode:g,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:a,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(x)}this._pages[0]?.setPdfPage(h),this._scrollMode===Re.PAGE?this.#D():this._spreadMode!==Xt.NONE&&this._updateSpreadMode(),this.#E(c).then(()=>O(this,null,function*(){if(t!==this.pdfDocument)return;if(this.findController?.setDocument(t),this._scriptingManager?.setDocument(t),this.#m&&document.addEventListener("copy",this.#A.bind(this,m),{signal:c}),this.#s&&o.dispatch("annotationeditormodechanged",{source:this,mode:this.#i}),t.loadingParams.disableAutoFetch||e>yf.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let v=e-1;if(v<=0){this._pagesCapability.resolve();return}for(let x=2;x<=e;++x){let S=t.getPage(x).then(D=>{let A=this._pages[x-1];A.pdfPage||A.setPdfPage(D),--v===0&&this._pagesCapability.resolve()},D=>{console.error(`Unable to get page ${x} to initialize viewer`,D),--v===0&&this._pagesCapability.resolve()});x%yf.PAUSE_EAGER_PAGE_INIT===0&&(yield S)}})),o.dispatch("pagesinit",{source:this}),t.getMetadata().then(({info:v})=>{t===this.pdfDocument&&v.Language&&(l.lang=v.Language)}),this.defaultRenderingQueue&&this.update()}).catch(h=>{console.error("Unable to initialize viewer",h),this._pagesCapability.reject(h)})}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let e=0,i=this._pages.length;e<i;e++)this._pages[e].setPageLabel(this._pageLabels?.[e]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=ev,this._currentScaleValue=null,this._pageLabels=null,this.#e=new Nv(PM),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=Re.VERTICAL,this._previousScrollMode=Re.UNKNOWN,this._spreadMode=Xt.NONE,this.#w={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#B()}#D(){if(this._scrollMode!==Re.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let t=this._currentPageNumber,e=this.#w,i=this.viewer;if(i.textContent="",e.pages.length=0,this._spreadMode===Xt.NONE&&!this.isInPresentationMode){let s=this._pages[t-1];i.append(s.div),e.pages.push(s)}else{let s=new Set,r=this._spreadMode-1;r===-1?s.add(t-1):t%2!==r?(s.add(t-1),s.add(t)):(s.add(t-2),s.add(t-1));let o=document.createElement("div");if(o.className="spread",this.isInPresentationMode){let a=document.createElement("div");a.className="dummyPage",o.append(a)}for(let a of s){let l=this._pages[a];l&&(o.append(l.div),e.pages.push(l))}i.append(o)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}_scrollUpdate(){this.pagesCount!==0&&this.update()}#P(t,e=null){let{div:i,id:s}=t;if(this._currentPageNumber!==s&&this._setCurrentPageNumber(s),this._scrollMode===Re.PAGE&&(this.#D(),this.update()),!e&&!this.isInPresentationMode){let r=i.offsetLeft+i.clientLeft,o=r+i.clientWidth,{scrollLeft:a,clientWidth:l}=this.container;(this._scrollMode===Re.HORIZONTAL||r<a||o>a+l)&&(e={left:0,top:0})}NM(i,e),!this._currentScaleValue&&this._location&&(this._location=null)}#R(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}#S(t,e,{noScroll:i=!1,preset:s=!1,drawingDelay:r=-1,origin:o=null}){if(this._currentScaleValue=e.toString(),this.#R(t)){s&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e});return}this.viewer.style.setProperty("--scale-factor",t*ms.PDF_TO_CSS_UNITS);let a=r>=0&&r<1e3;this.refresh(!0,{scale:t,drawingDelay:a?r:-1}),a&&(this.#C=setTimeout(()=>{this.#C=null,this.refresh()},r));let l=this._currentScale;if(this._currentScale=t,!i){let c=this._currentPageNumber,u;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0}),Array.isArray(o)){let d=t/l-1,[h,f]=this.containerTopLeft;this.container.scrollLeft+=(o[0]-f)*d,this.container.scrollTop+=(o[1]-h)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:s?e:void 0}),this.defaultRenderingQueue&&this.update()}get#v(){return this._spreadMode!==Xt.NONE&&this._scrollMode!==Re.HORIZONTAL?2:1}#T(t,e){let i=parseFloat(t);if(i>0)e.preset=!1,this.#S(i,t,e);else{let s=this._pages[this._currentPageNumber-1];if(!s)return;let r=tM,o=nM;this.isInPresentationMode?(r=o=4,this._spreadMode!==Xt.NONE&&(r*=2)):this.removePageBorders?r=o=0:this._scrollMode===Re.HORIZONTAL&&([r,o]=[o,r]);let a=(this.container.clientWidth-r)/s.width*s.scale/this.#v,l=(this.container.clientHeight-o)/s.height*s.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=l;break;case"page-fit":i=Math.min(a,l);break;case"auto":let c=rM(s)?a:Math.min(l,a);i=Math.min(wH,c);break;default:console.error(`#setScale: "${t}" is an unknown zoom value.`);return}e.preset=!0,this.#S(i,t,e)}}#O(){let t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#T(this._currentScaleValue,{noScroll:!0}),this.#P(t)}pageLabelToPageNumber(t){if(!this._pageLabels)return null;let e=this._pageLabels.indexOf(t);return e<0?null:e+1}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:s=!1}){if(!this.pdfDocument)return;let r=Number.isInteger(t)&&this._pages[t-1];if(!r){console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!e){this._setCurrentPageNumber(t,!0);return}let o=0,a=0,l=0,c=0,u,d,h=r.rotation%180!==0,f=(h?r.height:r.width)/r.scale/ms.PDF_TO_CSS_UNITS,p=(h?r.width:r.height)/r.scale/ms.PDF_TO_CSS_UNITS,g=0;switch(e[1].name){case"XYZ":o=e[2],a=e[3],g=e[4],o=o!==null?o:0,a=a!==null?a:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":a=e[2],g="page-width",a===null&&this._location?(o=this._location.left,a=this._location.top):(typeof a!="number"||a<0)&&(a=p);break;case"FitV":case"FitBV":o=e[2],l=f,c=p,g="page-height";break;case"FitR":o=e[2],a=e[3],l=e[4]-o,c=e[5]-a;let y=tM,v=nM;this.removePageBorders&&(y=v=0),u=(this.container.clientWidth-y)/l/ms.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-v)/c/ms.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(u),Math.abs(d));break;default:console.error(`scrollPageIntoView: "${e[1].name}" is not a valid destination type.`);return}if(s||(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===ev&&(this.currentScaleValue=bH)),g==="page-fit"&&!e[4]){this.#P(r);return}let m=[r.viewport.convertToViewportPoint(o,a),r.viewport.convertToViewportPoint(o+l,a+c)],_=Math.min(m[0][0],m[1][0]),b=Math.min(m[0][1],m[1][1]);i||(_=Math.max(_,0),b=Math.max(b,0)),this.#P(r,{left:_,top:b})}_updateLocation(t){let e=this._currentScale,i=this._currentScaleValue,s=parseFloat(i)===e?Math.round(e*1e4)/100:i,r=t.id,o=this._pages[r-1],a=this.container,l=o.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),c=Math.round(l[0]),u=Math.round(l[1]),d=`#page=${r}`;this.isInPresentationMode||(d+=`&zoom=${s},${c},${u}`),this._location={pageNumber:r,scale:s,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){let t=this._getVisiblePages(),e=t.views,i=e.length;if(i===0)return;let s=Math.max(PM,2*i+1);this.#e.resize(s,t.ids),this.renderingQueue.renderHighestPriority(t);let r=this._spreadMode===Xt.NONE&&(this._scrollMode===Re.PAGE||this._scrollMode===Re.VERTICAL),o=this._currentPageNumber,a=!1;for(let l of e){if(l.percent<100)break;if(l.id===o&&r){a=!0;break}}this._setCurrentPageNumber(a?o:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#L(){let t=this._getVisiblePages(),e=[],{ids:i,views:s}=t;for(let r of s){let{view:o}=r;if(!o.hasEditableAnnotations()){i.delete(o.id);continue}e.push(r)}return e.length===0?null:(this.renderingQueue.renderHighestPriority({first:e[0],last:e.at(-1),views:e,ids:i}),i)}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===oa.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===oa.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){let t=this._scrollMode===Re.PAGE?this.#w.pages:this._pages,e=this._scrollMode===Re.HORIZONTAL,i=e&&this._isContainerRtl;return EH({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:i})}cleanup(){for(let t of this._pages)t.renderingState!==dt.FINISHED&&t.reset()}_cancelRendering(){for(let t of this._pages)t.cancelRendering()}#H(t){return O(this,null,function*(){if(t.pdfPage)return t.pdfPage;try{let e=yield this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(e){return console.error("Unable to get page for page view",e),null}})}#j(t){if(t.first?.id===1)return!0;if(t.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case Re.PAGE:return this.#w.scrollDown;case Re.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(t){let e=t||this._getVisiblePages(),i=this.#j(e),s=this._spreadMode!==Xt.NONE&&this._scrollMode!==Re.HORIZONTAL,r=this.renderingQueue.getHighestPriority(e,this._pages,i,s);return r?(this.#H(r).then(()=>{this.renderingQueue.renderView(r)}),!0):!1}get hasEqualPageSizes(){let t=this._pages[0];for(let e=1,i=this._pages.length;e<i;++e){let s=this._pages[e];if(s.width!==t.width||s.height!==t.height)return!1}return!0}getPagesOverview(){let t;return this._pages.map(e=>{let i=e.pdfPage.getViewport({scale:1}),s=rM(i);if(t===void 0)t=s;else if(this.enablePrintAutoRotate&&s!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!SH(t))throw new Error(`Invalid scroll mode: ${t}`);this.pagesCount>yf.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(t=null){let e=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",e===Re.HORIZONTAL),i.classList.toggle("scrollWrapped",e===Re.WRAPPED),!(!this.pdfDocument||!t)&&(e===Re.PAGE?this.#D():this._previousScrollMode===Re.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#T(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!DH(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;let e=this.viewer,i=this._pages;if(this._scrollMode===Re.PAGE)this.#D();else if(e.textContent="",this._spreadMode===Xt.NONE)for(let s of this._pages)e.append(s.div);else{let s=this._spreadMode-1,r=null;for(let o=0,a=i.length;o<a;++o)r===null?(r=document.createElement("div"),r.className="spread",e.append(r)):o%2===s&&(r=r.cloneNode(!1),e.append(r)),r.append(i[o].div)}t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#T(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,e=!1){switch(this._scrollMode){case Re.WRAPPED:{let{views:i}=this._getVisiblePages(),s=new Map;for(let{id:r,y:o,percent:a,widthPercent:l}of i){if(a===0||l<100)continue;let c=s.get(o);c||s.set(o,c||=[]),c.push(r)}for(let r of s.values()){let o=r.indexOf(t);if(o===-1)continue;let a=r.length;if(a===1)break;if(e)for(let l=o-1,c=0;l>=c;l--){let u=r[l],d=r[l+1]-1;if(u<d)return t-d}else for(let l=o+1,c=a;l<c;l++){let u=r[l],d=r[l-1]+1;if(u>d)return d-t}if(e){let l=r[0];if(l<t)return t-l+1}else{let l=r[a-1];if(l>t)return l-t+1}break}break}case Re.HORIZONTAL:break;case Re.PAGE:case Re.VERTICAL:{if(this._spreadMode===Xt.NONE)break;let i=this._spreadMode-1;if(e&&t%2!==i)break;if(!e&&t%2===i)break;let{views:s}=this._getVisiblePages(),r=e?t-1:t+1;for(let{id:o,percent:a,widthPercent:l}of s)if(o===r){if(a>0&&l===100)return 2;break}break}}return 1}nextPage(){let t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;let i=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+i,e),!0}previousPage(){let t=this._currentPageNumber;if(t<=1)return!1;let e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}updateScale({drawingDelay:t,scaleFactor:e=null,steps:i=null,origin:s}){if(i===null&&e===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let r=this._currentScale;if(e>0&&e!==1)r=Math.round(r*e*100)/100;else if(i){let o=i>0?eM:1/eM,a=i>0?Math.ceil:Math.floor;i=Math.abs(i);do r=a((r*o).toFixed(2)*10)/10;while(--i>0)}r=Math.max(vH,Math.min(yH,r)),this.#T(r,{noScroll:!1,drawingDelay:t,origin:s})}increaseScale(t={}){this.updateScale(ue(L({},t),{steps:t.steps??1}))}decreaseScale(t={}){this.updateScale(ue(L({},t),{steps:-(t.steps??1)}))}#F(t=this.container.clientHeight){t!==this.#y&&(this.#y=t,MH.setProperty("--viewer-container-height",`${t}px`))}#V(t){for(let e of t)if(e.target===this.container){this.#F(Math.floor(e.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#f?.abort(),this.#f=null,this.#g!==null&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#s?this.#i:Pn.DISABLE}set annotationEditorMode({mode:t,editId:e=null,isFromKeyboard:i=!1}){if(!this.#s)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===t)return;if(!OM(t))throw new Error(`Invalid AnnotationEditor mode: ${t}`);if(!this.pdfDocument)return;t===Pn.STAMP&&this.#p?.loadModel("altText");let{eventBus:s}=this,r=()=>{this.#B(),this.#i=t,this.#s.updateMode(t,e,i),s.dispatch("annotationeditormodechanged",{source:this,mode:t})};if(t===Pn.NONE||this.#i===Pn.NONE){let o=t!==Pn.NONE;o||this.pdfDocument.annotationStorage.resetModifiedIds();for(let l of this._pages)l.toggleEditingMode(o);let a=this.#L();if(o&&a){this.#B(),this.#f=new AbortController;let l=AbortSignal.any([this.#h.signal,this.#f.signal]);s._on("pagerendered",({pageNumber:c})=>{a.delete(c),a.size===0&&(this.#g=setTimeout(r,0))},{signal:l});return}}r()}refresh(t=!1,e=Object.create(null)){if(this.pdfDocument){for(let i of this._pages)i.update(e);this.#C!==null&&(clearTimeout(this.#C),this.#C=null),t||this.update()}}},kv=class extends Of{_resetView(){super._resetView(),this._scrollMode=Re.PAGE,this._spreadMode=Xt.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}};var sU=ct.AnnotationLayerBuilder,rU=ct.DownloadManager,oU=ct.EventBus,aU=ct.FindState,Fv=ct.GenericL10n,$r=ct.LinkTarget,Lv=ct.PDFFindController,lU=ct.PDFHistory,Vv=ct.PDFLinkService,cU=ct.PDFPageView,uU=ct.PDFScriptingManager,Bv=ct.PDFSinglePageViewer,jv=ct.PDFViewer,dU=ct.ProgressBar,hU=ct.RenderingStates,fU=ct.ScrollMode,pU=ct.SimpleLinkService,gU=ct.SpreadMode,mU=ct.StructTreeLayerBuilder,_U=ct.TextLayerBuilder,bU=ct.XfaLayerBuilder,vU=ct.parseQueryString;var yU=["pdfViewerContainer"];function wU(n,t){let e=new n.EventBus;return CU(e,t),e}function CU(n,t){ke(n,"documentload").pipe(pe(t)).subscribe(()=>{let e=document.createEvent("CustomEvent");e.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(e)}),ke(n,"pagerendered").pipe(pe(t)).subscribe(({pageNumber:e,cssTransform:i,source:s})=>{let r=document.createEvent("CustomEvent");r.initCustomEvent("pagerendered",!0,!0,{pageNumber:e,cssTransform:i}),s.div.dispatchEvent(r)}),ke(n,"textlayerrendered").pipe(pe(t)).subscribe(({pageNumber:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:e}),i.textLayerDiv?.dispatchEvent(s)}),ke(n,"pagechanging").pipe(pe(t)).subscribe(({pageNumber:e,source:i})=>{let s=document.createEvent("UIEvents");s.initEvent("pagechanging",!0,!0),s.pageNumber=e,i.container.dispatchEvent(s)}),ke(n,"pagesinit").pipe(pe(t)).subscribe(({source:e})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),e.container.dispatchEvent(i)}),ke(n,"pagesloaded").pipe(pe(t)).subscribe(({pagesCount:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("pagesloaded",!0,!0,{pagesCount:e}),i.container.dispatchEvent(s)}),ke(n,"scalechange").pipe(pe(t)).subscribe(({scale:e,presetValue:i,source:s})=>{let r=document.createEvent("UIEvents");r.initEvent("scalechange",!0,!0),r.scale=e,r.presetValue=i,s.container.dispatchEvent(r)}),ke(n,"updateviewarea").pipe(pe(t)).subscribe(({location:e,source:i})=>{let s=document.createEvent("UIEvents");s.initEvent("updateviewarea",!0,!0),s.location=e,i.container.dispatchEvent(s)}),ke(n,"find").pipe(pe(t)).subscribe(({source:e,type:i,query:s,phraseSearch:r,caseSensitive:o,highlightAll:a,findPrevious:l})=>{if(e===window)return;let c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:s,phraseSearch:r,caseSensitive:o,highlightAll:a,findPrevious:l}),window.dispatchEvent(c)}),ke(n,"attachmentsloaded").pipe(pe(t)).subscribe(({attachmentsCount:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:e}),i.container.dispatchEvent(s)}),ke(n,"sidebarviewchanged").pipe(pe(t)).subscribe(({view:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("sidebarviewchanged",!0,!0,{view:e}),i.outerContainer.dispatchEvent(s)}),ke(n,"pagemode").pipe(pe(t)).subscribe(({mode:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("pagemode",!0,!0,{mode:e}),i.pdfViewer.container.dispatchEvent(s)}),ke(n,"namedaction").pipe(pe(t)).subscribe(({action:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("namedaction",!0,!0,{action:e}),i.pdfViewer.container.dispatchEvent(s)}),ke(n,"presentationmodechanged").pipe(pe(t)).subscribe(({active:e,switchInProgress:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("presentationmodechanged",!0,!0,{active:e,switchInProgress:i}),window.dispatchEvent(s)}),ke(n,"outlineloaded").pipe(pe(t)).subscribe(({outlineCount:e,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e}),i.container.dispatchEvent(s)})}function Uv(n,t,e){n[t]=e}function uc(){return typeof window>"u"}uc()||Uv(ra,"verbosity",Zb.INFOS);typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let n,t;return{promise:new Promise((i,s)=>{n=i,t=s}),resolve:n,reject:t}});var $v=function(n){return n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED",n}($v||{}),BM=(()=>{class n{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof ra<"u"?`https://unpkg.com/pdfjs-dist@${ic}/cmaps/`:null;_imageResourcesPath=typeof ra<"u"?`https://unpkg.com/pdfjs-dist@${ic}/web/images/`:void 0;_renderText=!0;_renderTextMode=$v.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Be;afterLoadComplete=new we;pageRendered=new we;pageInitialized=new we;textLayerRendered=new we;onError=new we;onProgress=new we;pageChange=new we(!0);src;set cMapsUrl(e){this._cMapsUrl=e}set page(e){e=parseInt(e,10)||1;let i=e;this._pdf&&(e=this.getValidPageNumber(e)),this._page=e,i!==e&&this.pageChange.emit(e)}set renderText(e){this._renderText=e}set renderTextMode(e){this._renderTextMode=e}set originalSize(e){this._originalSize=e}set showAll(e){this._showAll=e}set stickToPage(e){this._stickToPage=e}set zoom(e){e<=0||(this._zoom=e)}get zoom(){return this._zoom}set zoomScale(e){this._zoomScale=e}get zoomScale(){return this._zoomScale}set rotation(e){if(!(typeof e=="number"&&e%90===0)){console.warn("Invalid pages rotation angle.");return}this._rotation=e}set externalLinkTarget(e){this._externalLinkTarget=e}set autoresize(e){this._canAutoResize=!!e}set fitToPage(e){this._fitToPage=!!e}set showBorders(e){this._showBorders=!!e}static getLinkTarget(e){switch(e){case"blank":return $r.BLANK;case"none":return $r.NONE;case"self":return $r.SELF;case"parent":return $r.PARENT;case"top":return $r.TOP}return null}constructor(e,i){if(this.element=e,this.ngZone=i,uc())return;let s,r=ic,o=window[`pdfWorkerSrc${r}`];o?s=o:window.hasOwnProperty("pdfWorkerSrc")&&typeof window.pdfWorkerSrc=="string"&&window.pdfWorkerSrc?s=window.pdfWorkerSrc:s=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${r}/legacy/build/pdf.worker.min.mjs`,Uv(Qb,"workerSrc",s)}ngAfterViewChecked(){if(this.isInitialized)return;let e=this.pdfViewerContainer.nativeElement.offsetParent;if(this.isVisible===!0&&e==null){this.isVisible=!1;return}this.isVisible===!1&&e!=null&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})}))}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(e){if(!(uc()||!this.isVisible)){if("src"in e)this.loadPDF();else if(this._pdf){if(("renderText"in e||"showAll"in e)&&(this.setupViewer(),this.resetPdfDocument()),"page"in e){let{page:i}=e;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}}updateSize(){$e(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(pe(this.destroy$)).subscribe({next:e=>{let i=this._rotation+e.rotate,s=e.getViewport({scale:this._zoom,rotation:i}).width*n.CSS_UNITS,r=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&s>this.pdfViewerContainer.nativeElement.clientWidth){let a=e.getViewport({scale:1,rotation:i});r=this.getScale(a.width,a.height),o=!this._stickToPage}this.pdfViewer.currentScale=r,o&&this.pdfViewer.scrollPageIntoView({pageNumber:e.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){let e=n.getLinkTarget(this._externalLinkTarget);return e?{externalLinkTarget:e}:{}}initEventBus(){this.eventBus=wU(Hv,this.destroy$),ke(this.eventBus,"pagerendered").pipe(pe(this.destroy$)).subscribe(e=>{this.pageRendered.emit(e)}),ke(this.eventBus,"pagesinit").pipe(pe(this.destroy$)).subscribe(e=>{this.pageInitialized.emit(e)}),ke(this.eventBus,"pagechanging").pipe(pe(this.destroy$)).subscribe(({pageNumber:e})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=e,this.pageChange.emit(e)},100)}),ke(this.eventBus,"textlayerrendered").pipe(pe(this.destroy$)).subscribe(e=>{this.textLayerRendered.emit(e)})}initPDFServices(){this.pdfLinkService=new Vv(L({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new Lv({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:$v.DISABLED,findController:this.pdfFindController,l10n:new Fv("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Xb.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),Uv(ra,"disableTextLayer",!this._renderText),this.initPDFServices(),this._showAll?this.pdfViewer=new jv(this.getPDFOptions()):this.pdfViewer=new Bv(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(e){return e<1?1:e>this._pdf.numPages?this._pdf.numPages:e}getDocumentParams(){let e=typeof this.src;if(!this._cMapsUrl)return this.src;let i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return i.isEvalSupported=!1,e==="string"?i.url=this.src:e==="object"&&(this.src.byteLength!==void 0?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src){this.update();return}this.clear(),this.setupViewer(),this.loadingTask=Jb(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};let e=this.src;$e(this.loadingTask.promise).pipe(pe(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=e,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(this._rotation!==0||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{let e=this.pageInitialized.subscribe(()=>{this.updateSize(),e.unsubscribe()})}}getScale(e,i){let s=this._showBorders?2*n.BORDER_WIDTH:0,r=this.pdfViewerContainer.nativeElement.clientWidth-s,o=this.pdfViewerContainer.nativeElement.clientHeight-s;if(o===0||i===0||r===0||e===0)return 1;let a=1;switch(this._zoomScale){case"page-fit":a=Math.min(o/i,r/e);break;case"page-height":a=o/i;break;case"page-width":default:a=r/e;break}return this._zoom*a/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){uc()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){uc()||this.ngZone.runOutsideAngular(()=>{ke(window,"resize").pipe(Vp(100),st(()=>this._canAutoResize&&!!this._pdf),pe(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(i){return new(i||n)(F(ot),F(Pe))};static \u0275cmp=Fe({type:n,selectors:[["pdf-viewer"]],viewQuery:function(i,s){if(i&1&&nn(yU,5),i&2){let r;xt(r=Et())&&(s.pdfViewerContainer=r.first)}},inputs:{src:"src",cMapsUrl:[Te.None,"c-maps-url","cMapsUrl"],page:"page",renderText:[Te.None,"render-text","renderText"],renderTextMode:[Te.None,"render-text-mode","renderTextMode"],originalSize:[Te.None,"original-size","originalSize"],showAll:[Te.None,"show-all","showAll"],stickToPage:[Te.None,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[Te.None,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[Te.None,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[Te.None,"fit-to-page","fitToPage"],showBorders:[Te.None,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[tn],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(i,s){i&1&&(C(0,"div",1,0),q(2,"div",2),w())},styles:[`.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}`]})}return n})(),jM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=xe({type:n});static \u0275inj=Ce({})}return n})();var EU=n=>["/editCourse",n],SU=n=>["/chartsCourse",n],DU=()=>[0,1,2,3,4,5];function MU(n,t){if(n&1){let e=me();C(0,"form",24)(1,"button",25),U("click",function(){V(e);let s=j().$implicit,r=j(4);return B(r.markPending(s.id))}),M(2,"Reportar"),w()()}}function AU(n,t){if(n&1&&(C(0,"div",23)(1,"strong"),M(2),w(),C(3,"p"),M(4),w(),J(5,MU,3,0,"form",9),w()),n&2){let e=t.$implicit,i=j(4);T(2),Sr("",e.user.firstName," ",e.user.lastName,""),T(2),_e(e.text),T(),k("ngIf",i.isInstructor)}}function TU(n,t){if(n&1){let e=me();C(0,"form",26),q(1,"input",27)(2,"input",28),C(3,"textarea",29),nt("ngModelChange",function(s){V(e);let r=j().$implicit,o=j(3);return at(o.comentarios[r.id],s)||(o.comentarios[r.id]=s),B(s)}),w(),C(4,"input",30),U("click",function(){V(e);let s=j().$implicit,r=j(3);return B(r.addResponse(s.id))}),w()()}if(n&2){let e=j().$implicit,i=j(3);T(),k("value",i.course.id),T(),k("value",e.id),T(),tt("ngModel",i.comentarios[e.id])}}function IU(n,t){if(n&1){let e=me();C(0,"form",31)(1,"button",25),U("click",function(){V(e);let s=j().$implicit,r=j(3);return B(r.markPending(s.id))}),M(2,"Reportar"),w()()}}function PU(n,t){if(n&1&&(C(0,"div",19)(1,"strong"),M(2),w(),C(3,"p"),M(4),w(),J(5,AU,6,4,"div",20)(6,TU,5,3,"form",21)(7,IU,3,0,"form",22),w()),n&2){let e=t.$implicit,i=j(3);T(2),Sr("",e.user.firstName," ",e.user.lastName,""),T(2),_e(e.text),T(),k("ngForOf",e.sons),T(),k("ngIf",i.isEnrolled||i.isInstructor),T(),k("ngIf",i.isInstructor)}}function OU(n,t){if(n&1&&(C(0,"div"),J(1,PU,8,6,"div",18),w()),n&2){let e=j(2);T(),k("ngForOf",e.reviews)}}function RU(n,t){n&1&&(C(0,"p"),q(1,"br"),M(2,"No hay comentarios a\xFAn."),w())}function NU(n,t){if(n&1){let e=me();C(0,"form",32),q(1,"input",27),C(2,"textarea",33),nt("ngModelChange",function(s){V(e);let r=j(2);return at(r.comentarioTexto,s)||(r.comentarioTexto=s),B(s)}),w(),C(3,"button",34),U("click",function(){V(e);let s=j(2);return B(s.addComment())}),M(4,"Comentar"),w()()}if(n&2){let e=j(2);T(),k("value",e.course.id),T(),tt("ngModel",e.comentarioTexto)}}function kU(n,t){n&1&&(C(0,"p"),M(1," Inicia sesi\xF3n e inscr\xEDbete al curso para dejar un comentario. "),w())}function FU(n,t){if(n&1&&(q(0,"img",13),C(1,"h2"),M(2),w(),C(3,"h6"),M(4),w(),C(5,"h5"),M(6),w(),C(7,"p")(8,"strong"),M(9,"Tem\xE1tica:"),w(),M(10),w(),C(11,"p"),M(12),w(),C(13,"h4",14),M(14,"Comentarios"),w(),J(15,OU,2,1,"div",15)(16,RU,3,0,"ng-template",null,1,At),q(18,"hr"),J(19,NU,5,2,"form",16)(20,kU,2,0,"p",17)),n&2){let e=sn(17),i=j();k("src","/api/v1/courses/"+i.course.id+"/image",pn),T(2),_e(i.course.title),T(2),Qe("Valoraci\xF3n: ",i.course.rating," \u2B50"),T(2),Qe("Profesor: ",i.course.instructor.firstName,""),T(4),Qe(" ",i.course.topic,""),T(2),Qe("Descripci\xF3n: ",i.course.description,""),T(3),k("ngIf",i.reviews==null?null:i.reviews.length)("ngIfElse",e),T(4),k("ngIf",i.isEnrolled||i.isInstructor),T(),k("ngIf",!i.isEnrolled&&!i.isInstructor)}}function LU(n,t){if(n&1){let e=me();C(0,"div",40)(1,"button",41),U("click",function(){V(e);let s=j(3);return B(s.zoomIn())}),M(2,"Zoom +"),w(),C(3,"button",41),U("click",function(){V(e);let s=j(3);return B(s.zoomOut())}),M(4,"Zoom -"),w(),C(5,"button",41),U("click",function(){V(e);let s=j(3);return B(s.downloadPdf())}),M(6,"Descargar PDF"),w()()}}function VU(n,t){if(n&1){let e=me();C(0,"pdf-viewer",42),U("after-load-complete",function(s){V(e);let r=j(3);return B(r.pdfLoaded(s))}),w()}if(n&2){let e=j(3);k("src",e.pdfSrc)("render-text",!0)("original-size",!1)("zoom",e.zoom)("page",e.page)}}function BU(n,t){n&1&&(C(0,"div",43)(1,"span"),M(2,"Cargando PDF..."),w(),q(3,"div",44),w())}function jU(n,t){if(n&1&&(Ns(0),C(1,"div",36),J(2,LU,7,0,"div",37)(3,VU,1,5,"pdf-viewer",38)(4,BU,4,0,"div",39),w(),ks()),n&2){let e=j(2);T(2),k("ngIf",e.pdfSrc),T(),k("ngIf",e.pdfSrc),T(),k("ngIf",!e.pdfSrc)}}function HU(n,t){n&1&&(C(0,"p"),M(1,"Debe inscribirse al curso para poder ver el material"),w())}function UU(n,t){if(n&1){let e=me();C(0,"div",45)(1,"a",46)(2,"button",47),M(3,"Editar curso"),w()(),C(4,"button",48),U("click",function(){V(e);let s=j(2);return B(s.deleteCourse())}),M(5,"Eliminar curso"),w(),C(6,"a",49),M(7,"Ver estad\xEDsticas"),w()()}if(n&2){let e=j(2);T(),k("routerLink",rn(2,EU,e.course.id)),T(5),k("routerLink",rn(4,SU,e.course.id))}}function $U(n,t){if(n&1&&(C(0,"h4"),M(1,"Previsualizaci\xF3n del material"),w(),J(2,jU,5,3,"ng-container",15)(3,HU,2,0,"ng-template",null,2,At)(5,UU,8,6,"div",35)),n&2){let e=sn(4),i=j();T(2),k("ngIf",i.isEnrolled||i.isInstructor)("ngIfElse",e),T(3),k("ngIf",i.isInstructor)}}function zU(n,t){if(n&1){let e=me();C(0,"form",24)(1,"button",50),U("click",function(){V(e);let s=j();return B(s.enrollCourse())}),M(2,"Inscribirse al curso"),w(),q(3,"input",51),w()}if(n&2){let e=j();T(3),k("value",e.course.id)}}function WU(n,t){if(n&1&&(C(0,"option",58),M(1),w()),n&2){let e=t.$implicit;k("value",e),T(),Qe("",e," \u2B50")}}function GU(n,t){if(n&1){let e=me();C(0,"div",14),q(1,"hr"),C(2,"h4"),M(3,"Califica el curso"),w(),C(4,"form",52)(5,"div",53)(6,"select",54),nt("ngModelChange",function(s){V(e);let r=j();return at(r.selectedRating,s)||(r.selectedRating=s),B(s)}),J(7,WU,2,2,"option",55),w(),C(8,"button",56),U("click",function(){V(e);let s=j();return B(s.submitRating())}),q(9,"i",57),M(10," Valorar "),w()(),q(11,"input",27),w()()}if(n&2){let e=j();T(6),tt("ngModel",e.selectedRating),T(),k("ngForOf",Wt(3,DU)),T(4),k("value",e.course.id)}}var HM=(()=>{class n{constructor(e,i,s,r,o,a,l,c){this.router=e,this.route=i,this.courseService=s,this.loginService=r,this.reviewService=o,this.enrollmentService=a,this.http=l,this.userService=c,this.reviews=[],this.active=1,this.zoom=1,this.page=1,this.totalPages=0,this.comentarioTexto="",this.comentarios={},this.isEnrolled=!1,this.isInstructor=!1,this.selectedRating=0;let u=this.route.snapshot.params.id;this.loadCourseDetails(u),this.loadReviews(u),this.loadPdf(u),this.checkEnrollmentStatus(),this.checkInstructorStatus(),this.loginService.loggedIn$.subscribe(d=>{d&&(console.log("Usuario ha iniciado sesi\xF3n, refrescando datos del curso"),this.loadCourseDetails(u),this.checkEnrollmentStatus(),this.checkInstructorStatus(),this.loadReviews(u),this.loadPdf(u))})}loadCourseDetails(e){this.courseService.getCourseById(e).subscribe(i=>this.course=i,i=>console.error(i))}loadReviews(e){this.reviewService.getReviewsByCourse(e).subscribe(i=>this.reviews=i,i=>console.error(i))}enrollCourse(){let e=this.route.snapshot.params.id;this.userService.getUserInfo().subscribe(i=>{let s=i.id;this.enrollmentService.enrollCourse(s,e).subscribe(r=>{console.log("Usuario inscrito en el curso con \xE9xito",r),this.isEnrolled=!0},r=>console.error("Error al inscribir al usuario:",r))},i=>console.error("Error al obtener el usuario:",i))}submitRating(){let e=this.selectedRating;this.userService.getUserInfo().subscribe(i=>{let s=i.id,r=this.route.snapshot.params.id;this.enrollmentService.isUserEnrolled(s,r).subscribe(o=>{o?this.enrollmentService.rateCourse(o,e).subscribe():console.log("User is not enrolled in the course"),console.log(o?"User is enrolled in the course":"User is not enrolled in the course")},o=>console.error("Error checking enrollment:",o))},i=>console.error("Error getting user info:",i))}checkEnrollmentStatus(){this.userService.getUserInfo().subscribe(e=>{let i=e.id,s=this.route.snapshot.params.id;this.enrollmentService.isUserEnrolled(i,s).subscribe(r=>{r?(this.isEnrolled=!0,console.log("User is enrolled in the course")):(this.isEnrolled=!1,console.log("User is not enrolled in the course"))},r=>console.error("Error checking enrollment:",r))},e=>console.error("Error getting user info:",e))}checkInstructorStatus(){let e=this.route.snapshot.params.id;this.userService.getUserInfo().subscribe(i=>{let s=i.id;console.log("User ID:",s),this.courseService.isUserInstructor(s,e).subscribe(r=>{if(r)console.log("User is instructor"),this.isInstructor=!0;else{let o=this.loginService.isAdmin();console.log(o?"User is admin":"User is neither instructor nor admin"),this.isInstructor=o}},r=>{console.error("Error checking instructor status:",r),this.isInstructor=!1})},i=>{console.error("Error getting user info:",i),this.isInstructor=!1})}addComment(){let e=this.route.snapshot.params.id;this.userService.getUserInfo().subscribe(i=>{this.reviewService.addComment(this.comentarioTexto,i.id,e,null).subscribe(s=>{console.log("Comentario a\xF1adido con exito"),this.comentarioTexto="",this.loadReviews(e)},s=>{console.log("Error al a\xF1adir el comentario",s)})},i=>{console.log("Error al obtener el usuario al a\xF1adir un comentario",i)})}addResponse(e){let i=this.route.snapshot.params.id;this.userService.getUserInfo().subscribe(s=>{this.reviewService.addComment(this.comentarios[e],s.id,i,e).subscribe(r=>{console.log("Comentario a\xF1adido con exito"),this.comentarios[e]="",this.loadReviews(i)},r=>{console.log("Error al a\xF1adir el comentario",r)})},s=>{console.log("Error al obtener el usuario al a\xF1adir un comentario",s)})}markPending(e){let i=this.route.snapshot.params.id;this.reviewService.markPending(e).subscribe(s=>{console.log("Comentario marcado como pendiente con exito"),this.loadReviews(i)},s=>{console.log("Error al marcar el comentario como pendiente",s)})}goToMaterial(){this.active=2}goToReviews(){this.active=1}loadPdf(e){this.courseService.getPdf(e).subscribe(i=>{let s=new Blob([i],{type:"application/pdf"}),r=window.URL.createObjectURL(s);this.pdfSrc=r},i=>{console.error("Error al obtener el PDF:",i)})}pdfLoaded(e){this.totalPages=e.numPages}zoomIn(){this.zoom+=.25}zoomOut(){this.zoom>.5&&(this.zoom-=.25)}downloadPdf(){if(this.pdfSrc&&this.pdfSrc.blob){let e=window.URL.createObjectURL(this.pdfSrc.blob),i=document.createElement("a");document.body.appendChild(i),i.setAttribute("style","display: none"),i.href=e,i.download="documento.pdf",i.click(),window.URL.revokeObjectURL(e),i.remove()}}deleteCourse(){this.courseService.deleteCourse(this.course.id).subscribe(),this.router.navigate(["/users/me"])}static{this.\u0275fac=function(i){return new(i||n)(F(Ke),F(Nt),F(qt),F(Yo),F(eh),F(nh),F(on),F(Pi))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],decls:17,vars:6,consts:[["nav","ngbNav"],["noComments",""],["noAccess",""],[1,"container","mt-4"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavLink","",3,"click"],["ngbNavContent",""],[1,"tab-content","mt-3",3,"ngbNavOutlet"],["method","post",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/",1,"btn","btn-primary"],["alt","Imagen del curso",1,"img-fluid","mb-3",2,"max-height","300px","object-fit","cover",3,"src"],[1,"mt-4"],[4,"ngIf","ngIfElse"],["action","/course/newReview","method","post",4,"ngIf"],[4,"ngIf"],["class","comment mb-3",4,"ngFor","ngForOf"],[1,"comment","mb-3"],["class","comment ms-3",4,"ngFor","ngForOf"],["action","/course/newReview","method","post","style","display: inline;",4,"ngIf"],["method","post","style","display: inline;",4,"ngIf"],[1,"comment","ms-3"],["method","post"],[1,"btn","btn-link","btn-sm","text-danger","ms-2",3,"click"],["action","/course/newReview","method","post",2,"display","inline"],["type","hidden","name","courseId",3,"value"],["type","hidden","name","parentId",3,"value"],["name","text","placeholder","Responder...",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","submit","value","Responder",1,"btn","btn-link","btn-sm",3,"click"],["method","post",2,"display","inline"],["action","/course/newReview","method","post"],["name","text","placeholder","A\xF1adir un comentario...",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"pdf-container"],["class","toolbar",4,"ngIf"],["style","width: 100%; height: 600px;",3,"src","render-text","original-size","zoom","page","after-load-complete",4,"ngIf"],["class","loading-message",4,"ngIf"],[1,"toolbar"],[3,"click"],[2,"width","100%","height","600px",3,"after-load-complete","src","render-text","original-size","zoom","page"],[1,"loading-message"],[1,"spinner"],[1,"mt-3"],[3,"routerLink"],[1,"btn","btn-success"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],["type","submit",1,"btn","btn-success","mt-3",3,"click"],["type","hidden","name","idCourse",3,"value"],["method","post",1,"p-3","bg-light"],[1,"d-flex","align-items-center","gap-3"],["id","rating","name","rating","required","",1,"form-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","ms-2",3,"click"],[1,"bi","bi-star-fill"],[3,"value"]],template:function(i,s){if(i&1){let r=me();C(0,"main",3)(1,"ul",4,0),nt("activeIdChange",function(a){return V(r),at(s.active,a)||(s.active=a),B(a)}),C(3,"li",5)(4,"a",6),U("click",function(){return V(r),B(s.goToReviews())}),M(5,"Contenidos"),w(),J(6,FU,21,10,"ng-template",7),w(),C(7,"li",5)(8,"a",6),U("click",function(){return V(r),B(s.goToMaterial())}),M(9,"Material"),w(),J(10,$U,6,3,"ng-template",7),w()(),q(11,"div",8),J(12,zU,4,1,"form",9)(13,GU,12,4,"div",10),C(14,"div",11)(15,"a",12),M(16,"Volver a la p\xE1gina principal"),w()()()}if(i&2){let r=sn(2);T(),tt("activeId",s.active),T(2),k("ngbNavItem",1),T(4),k("ngbNavItem",2),T(4),k("ngbNavOutlet",r),T(),k("ngIf",!s.isEnrolled&&!s.isInstructor),T(),k("ngIf",s.isEnrolled&&!s.isInstructor)}},dependencies:[gn,mn,Gn,Kn,$s,zs,_n,Oi,qn,Yn,An,rs,ss,v_,kl,bh,_D,bD,vh,vD,BM],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var UM=n=>["/courses",n];function qU(n,t){if(n&1&&(C(0,"div",7)(1,"div",8),q(2,"img",9),C(3,"div",10)(4,"strong",11),M(5),w(),C(6,"h5",12),M(7),w(),C(8,"div",13),M(9),w(),C(10,"p",14),M(11),w(),C(12,"a",15),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,UM,e.id))}}function YU(n,t){n&1&&(C(0,"div",16)(1,"div",17)(2,"span",18),M(3,"Loading..."),w()()())}function KU(n,t){if(n&1&&(C(0,"div",7)(1,"div",8),q(2,"img",9),C(3,"div",10)(4,"strong",11),M(5),w(),C(6,"h5",12),M(7),w(),C(8,"div",13),M(9),w(),C(10,"p",14),M(11),w(),C(12,"a",15),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,UM,e.id))}}function XU(n,t){n&1&&(C(0,"div",16)(1,"div",17)(2,"span",18),M(3,"Loading..."),w()()())}function QU(n,t){if(n&1){let e=me();C(0,"div",19)(1,"button",20),U("click",function(){V(e);let s=j();return B(s.loadMore())}),M(2,"Cargar m\xE1s"),w()()}}var $M=(()=>{class n{constructor(e,i,s){this.courseService=e,this.router=i,this.userService=s,this.recomendedCourses=[],this.allCourses=[],this.loading=!1,this.recomendLoading=!1,this.hasMoreCourses=!0,this.currentPage=0,this.pageSize=10}ngOnInit(){this.loadRecommendedCourses(),this.loadCourses()}loadRecommendedCourses(){this.recomendLoading=!0,this.userService.getUserInfo().subscribe({next:e=>{this.user=e,this.courseService.getCoursesByTopic(e.topic,0,4).subscribe({next:i=>{this.recomendedCourses=i,this.recomendLoading=!1},error:i=>{console.error("Error al cargar cursos recomendados:",i)}})},error:e=>{this.courseService.getRecommendedCourses().subscribe({next:i=>{this.recomendedCourses=i,this.recomendLoading=!1},error:i=>{console.error("Error al cargar cursos recomendados:",i)}})}})}loadCourses(){this.loading=!0,this.courseService.getCourses(this.currentPage,this.pageSize).subscribe({next:e=>{e.length===0?this.hasMoreCourses=!1:(this.allCourses=[...this.allCourses,...e],this.currentPage++),this.loading=!1},error:e=>{console.error("Error al cargar cursos:",e),this.loading=!1}})}loadMore(){this.loadCourses()}static{this.\u0275fac=function(i){return new(i||n)(F(qt),F(Ke),F(Pi))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],decls:15,vars:5,consts:[[1,"container"],[1,"text-dark"],[1,"row","g-4"],["class","col-md-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["id","coursesContainer",1,"row","mb-2"],["class","text-center",4,"ngIf"],[1,"col-md-3","mb-4"],[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-inline-block","mb-2","text-primary"],[1,"card-title"],[1,"mb-1","text-muted"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(C(0,"div",0)(1,"h2",1),M(2,"Recomendados"),w(),C(3,"div",2),J(4,qU,14,8,"div",3),w(),J(5,YU,4,0,"div",4),w(),q(6,"br"),C(7,"div",0)(8,"h2",1),M(9,"Todos los cursos"),w(),C(10,"div",5),J(11,KU,14,8,"div",3),w(),J(12,XU,4,0,"div",4)(13,QU,3,0,"div",6),w(),q(14,"br")),i&2&&(T(4),k("ngForOf",s.recomendedCourses),T(),k("ngIf",s.recomendLoading),T(6),k("ngForOf",s.allCourses),T(),k("ngIf",s.loading),T(),k("ngIf",!s.loading&&s.hasMoreCourses))},dependencies:[gn,mn,Gn],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var ZU=()=>["/courses/new"],zM=n=>["/courses",n];function JU(n,t){n&1&&(C(0,"p",40),M(1,"Passwords do not match"),w())}function e$(n,t){if(n&1){let e=me();C(0,"form",60),U("ngSubmit",function(){V(e);let s=j().$implicit,r=j(3);return B(r.submitReviewEdit(s))}),C(1,"textarea",61),nt("ngModelChange",function(s){V(e);let r=j().$implicit;return at(r.text,s)||(r.text=s),B(s)}),w(),C(2,"button",62),M(3,"Guardar"),w(),C(4,"button",63),U("click",function(){V(e);let s=j(4);return B(s.cancelEdit())}),M(5,"Cancelar"),w()()}if(n&2){let e=j().$implicit;T(),tt("ngModel",e.text)}}function t$(n,t){if(n&1){let e=me();C(0,"div",55)(1,"strong"),M(2),w(),C(3,"p"),M(4),w(),C(5,"div")(6,"button",56),U("click",function(){let s=V(e).$implicit,r=j(3);return B(r.editReview(s))}),M(7,"Editar comentario"),w(),C(8,"button",57),U("click",function(){let s=V(e).$implicit,r=j(3);return B(r.deleteReview(s.id))}),M(9,"Eliminar comentario"),w(),C(10,"button",58),U("click",function(){let s=V(e).$implicit,r=j(3);return B(r.ignoreReview(s.id))}),M(11,"Ignorar"),w(),C(12,"button",57),U("click",function(){let s=V(e).$implicit,r=j(3);return B(r.deleteUser(s.user.id))}),M(13,"Eliminar usuario"),w()(),J(14,e$,6,1,"form",59),w()}if(n&2){let e=t.$implicit,i=j(3);T(2),Sr("",e.user.firstName," ",e.user.lastName,""),T(2),_e(e.text),T(10),k("ngIf",i.editingReview===e.id)}}function n$(n,t){if(n&1&&(C(0,"div"),J(1,t$,15,4,"div",54),w()),n&2){let e=j(2);T(),k("ngForOf",e.reviews)}}function i$(n,t){n&1&&(C(0,"p",43),M(1,"No hay rese\xF1as pendientes."),w())}function s$(n,t){if(n&1){let e=me();C(0,"tr")(1,"td"),M(2),w(),C(3,"td")(4,"button",64),U("click",function(){let s=V(e).$implicit,r=j(2);return B(r.deleteUser(s.id))}),M(5," Eliminar "),w()()()}if(n&2){let e=t.$implicit;T(2),_e(e.firstName)}}function r$(n,t){n&1&&(C(0,"tr")(1,"td",65),M(2," No se encontraron usuarios "),w()())}function o$(n,t){if(n&1){let e=me();C(0,"div")(1,"h3",41),M(2,"Revisiones pendientes"),w(),J(3,n$,2,1,"div",39)(4,i$,2,0,"ng-template",null,2,At),q(6,"hr",42),C(7,"h3",43),M(8,"Eliminar usuario"),w(),C(9,"form",44,3),U("ngSubmit",function(){V(e);let s=j();return B(s.searchUser())}),C(11,"div",45)(12,"input",46),nt("ngModelChange",function(s){V(e);let r=j();return at(r.searchQuery,s)||(r.searchQuery=s),B(s)}),w()(),C(13,"div",47)(14,"button",48),M(15," Buscar "),w()()(),C(16,"div",49)(17,"table",50)(18,"thead",51)(19,"tr")(20,"th"),M(21,"Nombre"),w(),C(22,"th"),M(23,"Acci\xF3n"),w()()(),C(24,"tbody"),J(25,s$,6,1,"tr",52)(26,r$,3,0,"tr",53),w()()()()}if(n&2){let e=sn(5),i=sn(10),s=j();T(3),k("ngIf",s.reviews.length>0)("ngIfElse",e),T(9),tt("ngModel",s.searchQuery),T(2),k("disabled",i.invalid),T(11),k("ngForOf",s.users),T(),k("ngIf",s.users.length===0)}}function a$(n,t){if(n&1&&(C(0,"div",74)(1,"div",75),q(2,"img",76),C(3,"div",77)(4,"strong",78),M(5),w(),C(6,"h5",79),M(7),w(),C(8,"div",80),M(9),w(),C(10,"p",81),M(11),w(),C(12,"a",73),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,zM,e.id))}}function l$(n,t){n&1&&(C(0,"div",82)(1,"div",83)(2,"span",84),M(3,"Loading..."),w()()())}function c$(n,t){if(n&1){let e=me();C(0,"div",43)(1,"button",11),U("click",function(){V(e);let s=j(2);return B(s.loadMoreEnrolled())}),M(2,"Cargar m\xE1s"),w()()}}function u$(n,t){if(n&1&&(C(0,"div",74)(1,"div",75),q(2,"img",76),C(3,"div",77)(4,"strong",78),M(5),w(),C(6,"h5",79),M(7),w(),C(8,"div",80),M(9),w(),C(10,"p",81),M(11),w(),C(12,"a",73),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,zM,e.id))}}function d$(n,t){n&1&&(C(0,"div",82)(1,"div",83)(2,"span",84),M(3,"Loading..."),w()()())}function h$(n,t){if(n&1){let e=me();C(0,"div",43)(1,"button",11),U("click",function(){V(e);let s=j(2);return B(s.loadMoreTaught())}),M(2,"Cargar m\xE1s"),w()()}}function f$(n,t){if(n&1&&(q(0,"br"),C(1,"h3",66),M(2,"Cursos Matriculados"),w(),C(3,"div",67)(4,"div",68),J(5,a$,14,8,"div",69),w(),J(6,l$,4,0,"div",70)(7,c$,3,0,"div",71),q(8,"br"),w(),q(9,"hr"),C(10,"div",72)(11,"h3",66),M(12,"Mis cursos impartidos"),w(),C(13,"a",73),M(14,"A\xF1adir curso"),w()(),q(15,"br")(16,"br"),C(17,"div",67)(18,"div",68),J(19,u$,14,8,"div",69),w(),J(20,d$,4,0,"div",70)(21,h$,3,0,"div",71),w()),n&2){let e=j();T(5),k("ngForOf",e.enrolledCourses),T(),k("ngIf",e.enrolledLoading),T(),k("ngIf",!e.enrolledLoading&&e.hasMoreEnrolledCourses),T(6),k("routerLink",Wt(7,ZU)),T(6),k("ngForOf",e.taughtCourses),T(),k("ngIf",e.taughtLoading),T(),k("ngIf",!e.taughtLoading&&e.hasMoreTaughtCourses)}}var WM=(()=>{class n{constructor(e,i,s,r,o,a){this.loginService=e,this.userService=i,this.router=s,this.courseService=r,this.reviewService=o,this.enrollmentService=a,this.formData={firstName:"",lastName:"",email:"",topic:"",currentPassword:"",newPassword:"",confirmPassword:"",imageFile:null},this.isAdmin=!1,this.editingReview=null,this.taughtCourses=[],this.taughtLoading=!1,this.reviews=[],this.users=[],this.searchQuery="",this.enrolledCourses=[],this.enrolledLoading=!1,this.hasMoreTaughtCourses=!0,this.currentPage=0,this.pageSize=10,this.currentPageEnrolled=0,this.pageSizeEnrolled=10,this.hasMoreEnrolledCourses=!0,this.isEditing=!1,this.userId=0,this.user={id:0,firstName:"",lastName:"",email:"",topic:"",roles:[]},this.userService.getUserInfo().subscribe(l=>{this.userId=l.id,this.user=l,l.roles.includes("ADMIN")?(this.isAdmin=!0,this.reviewService.getPendingReviews().subscribe({next:c=>this.reviews=c,error:c=>console.error("Error al cargar rese\xF1as pendientes:",c)})):(this.loadEnrolledCourses(),this.loadTaughtCourses())},l=>{console.error("Error getting user info:",l),this.router.navigate(["/login"])})}onPhotoSelected(e){let i=e.target;if(i.files&&i.files[0]){let s=i.files[0];console.log("Selected file:",s)}}onSubmit(){if(this.user){let e={id:this.user.id,firstName:this.formData.firstName,lastName:this.formData.lastName,email:this.formData.email,topic:this.formData.topic,roles:this.user.roles,password:this.formData.newPassword};this.userService.updateUser(e).subscribe(i=>{console.log("User updated successfully",i),this.user=i,this.isEditing=!1},i=>{console.error("Error updating user",i)})}}deleteAccount(){this.user&&(this.userService.deleteAccount(this.user.id).subscribe(),this.loginService.logOut(),this.router.navigate(["/courses"]))}toggleEdit(){this.isEditing=!this.isEditing}loadTaughtCourses(){this.taughtLoading=!0,this.courseService.getTaughtCourses(this.userId,this.currentPage,this.pageSize).subscribe({next:e=>{e.length===0?this.hasMoreTaughtCourses=!1:(this.taughtCourses=[...this.taughtCourses,...e],this.currentPage++,e.length<this.pageSize&&(this.hasMoreTaughtCourses=!1)),this.taughtLoading=!1},error:e=>{console.error("Error al cargar cursos:",e),this.taughtLoading=!1}})}loadMoreTaught(){this.loadTaughtCourses()}loadEnrolledCourses(){this.enrolledLoading=!0,this.enrollmentService.getEnrolledCourses(this.userId,this.currentPageEnrolled,this.pageSizeEnrolled).subscribe({next:e=>{e.length===0?this.hasMoreEnrolledCourses=!1:(this.enrolledCourses=[...this.enrolledCourses,...e],this.currentPageEnrolled++,e.length<this.pageSizeEnrolled&&(this.hasMoreEnrolledCourses=!1)),this.enrolledLoading=!1},error:e=>{console.error("Error al cargar cursos:",e),this.enrolledLoading=!1}})}loadMoreEnrolled(){this.loadEnrolledCourses()}loadPendingReviews(){this.reviewService.getPendingReviews().subscribe({next:e=>this.reviews=e,error:e=>console.error("Error al cargar rese\xF1as pendientes:",e)})}deleteReview(e){this.reviewService.deleteReview(e).subscribe({next:()=>{console.log("Rese\xF1a eliminada"),this.reviews=this.reviews.filter(i=>i.id!==e)},error:i=>console.error("Error al eliminar rese\xF1a:",i)})}ignoreReview(e){this.reviewService.ignoreReview(e).subscribe({next:()=>{console.log("Rese\xF1a ignorada"),this.reviews=this.reviews.filter(i=>i.id!==e)},error:i=>console.error("Error al ignorar rese\xF1a:",i)})}deleteUser(e){this.userService.deleteAccount(+e).subscribe({next:()=>{console.log("Usuario eliminado"),this.users=this.users.filter(i=>i.id!==e)},error:i=>console.error("Error al eliminar usuario:",i)})}editReview(e){this.editingReview=e.id}cancelEdit(){this.editingReview=null}submitReviewEdit(e){this.reviewService.editReview(e).subscribe({next:()=>{this.editingReview=null},error:i=>console.error("Error al actualizar la rese\xF1a:",i)})}loadAllUsers(){this.userService.getAllUsers().subscribe({next:e=>this.users=e,error:e=>console.error("Error al cargar usuarios:",e)})}searchUser(){this.userService.getUsers(this.searchQuery).subscribe({next:e=>this.users=e,error:e=>console.error("Error al buscar usuarios",e)})}static{this.\u0275fac=function(i){return new(i||n)(F(Yo),F(Pi),F(Ke),F(qt),F(eh),F(nh))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-profile"]],decls:72,vars:15,consts:[["updateForm","ngForm"],["notAdmin",""],["noReviews",""],["searchForm","ngForm"],[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-6","text-center","p-4","border","rounded"],["id","profile-img","alt","Foto de perfil",1,"rounded-circle","img-fluid","mb-3",2,"max-width","150px",3,"src"],["type","file","id","upload-photo",1,"form-control-file","d-none",3,"change"],["id","user-name"],["id","user-email"],[1,"btn","btn-primary",3,"click"],["id","Settings",1,"w3-container","tab"],["id","updateForm",1,"mx-1","mx-md-4",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","firstName"],["id","firstName","type","text","name","firstName","placeholder","Nuevo nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","lastName"],["id","lastName","type","text","name","lastName","placeholder","Nuevo apellido","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","email"],["type","email","id","email","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","text-center"],["type","button",1,"btn","btn-danger","btn-lg",3,"click"],[1,"col-12","mb-3"],[1,"mb-2"],["for","currentPassword"],["id","currentPassword","type","password","name","currentPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","newPassword"],["id","newPassword","type","password","name","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"col"],["name","imageFile","type","file","id","imageFile","accept","image/*",1,"form-control",3,"change"],[1,"col","d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[4,"ngIf","ngIfElse"],[1,"text-danger"],[1,"text-center","mb-3"],[1,"my-4"],[1,"text-center"],[1,"row","g-2","justify-content-center",3,"ngSubmit"],[1,"col-md-4"],["type","text","name","search","placeholder","Buscar usuario",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"table-responsive","mt-4"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","comment mb-4 border p-3 rounded",4,"ngFor","ngForOf"],[1,"comment","mb-4","border","p-3","rounded"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"btn","btn-sm","btn-link","text-danger",3,"click"],[1,"btn","btn-sm","btn-link","text-warning",3,"click"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["name","newText",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success","btn-sm"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],["colspan","2",1,"text-center"],[1,"mb-0"],[1,"container"],["id","coursesContainer",1,"row","mb-2"],["class","col-md-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","col-12"],[1,"btn","btn-primary",3,"routerLink"],[1,"col-md-3","mb-4"],[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-inline-block","mb-2","text-primary"],[1,"card-title"],[1,"mb-1","text-muted"],[1,"card-text"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(i,s){if(i&1){let r=me();C(0,"main",4)(1,"div",5)(2,"div",6),q(3,"img",7),C(4,"input",8),U("change",function(a){return V(r),B(s.onPhotoSelected(a))}),w(),C(5,"p",9)(6,"strong"),M(7),w()(),C(8,"p")(9,"strong"),M(10,"Email:"),w(),C(11,"span",10),M(12),w()(),C(13,"button",11),U("click",function(){return V(r),B(s.toggleEdit())}),M(14,"Editar perfil"),w(),C(15,"div",12)(16,"h2"),M(17,"Settings"),w(),C(18,"form",13,0),U("ngSubmit",function(){return V(r),B(s.onSubmit())}),C(20,"div",14)(21,"div",15)(22,"div",16)(23,"label",17),M(24,"Nombre"),w(),C(25,"input",18),nt("ngModelChange",function(a){return V(r),at(s.formData.firstName,a)||(s.formData.firstName=a),B(a)}),w()()(),C(26,"div",15)(27,"div",16)(28,"label",19),M(29,"Apellidos"),w(),C(30,"input",20),nt("ngModelChange",function(a){return V(r),at(s.formData.lastName,a)||(s.formData.lastName=a),B(a)}),w()()()(),C(31,"div",14)(32,"div",21)(33,"div",16)(34,"label",22),M(35,"Email"),w(),C(36,"input",23),nt("ngModelChange",function(a){return V(r),at(s.formData.email,a)||(s.formData.email=a),B(a)}),w()()()(),C(37,"div",14)(38,"div",24)(39,"button",25),U("click",function(){return V(r),B(s.deleteAccount())}),M(40,"Eliminar"),w()()(),C(41,"div",14)(42,"div",26)(43,"div",27)(44,"b"),M(45,"Change Password"),w()(),C(46,"div",16)(47,"label",28),M(48,"Current Password"),w(),C(49,"input",29),nt("ngModelChange",function(a){return V(r),at(s.formData.currentPassword,a)||(s.formData.currentPassword=a),B(a)}),w()(),C(50,"div",16)(51,"label",30),M(52,"New Password"),w(),C(53,"input",31),nt("ngModelChange",function(a){return V(r),at(s.formData.newPassword,a)||(s.formData.newPassword=a),B(a)}),w()(),C(54,"div",16)(55,"label",32),M(56,"Confirm Password"),w(),C(57,"input",33),nt("ngModelChange",function(a){return V(r),at(s.formData.confirmPassword,a)||(s.formData.confirmPassword=a),B(a)}),w(),J(58,JU,2,0,"p",34),w()()(),C(59,"div",35)(60,"div",16)(61,"div",27)(62,"b"),M(63,"Change Photo"),w()(),C(64,"input",36),U("change",function(a){return V(r),B(s.onPhotoSelected(a))}),w()()(),C(65,"div",14)(66,"div",37)(67,"button",38),M(68,"Save Changes"),w()()()()()(),J(69,o$,27,6,"div",39)(70,f$,22,8,"ng-template",null,1,At),w()()}if(i&2){let r=sn(71);T(3),k("src","/api/v1/users/"+s.user.id+"/image",pn),T(4),Sr("",s.user.firstName," ",s.user.lastName,""),T(5),_e(s.user.email),T(3),Ya("display",s.isEditing?"block":"none"),T(10),tt("ngModel",s.formData.firstName),T(5),tt("ngModel",s.formData.lastName),T(6),tt("ngModel",s.formData.email),T(13),tt("ngModel",s.formData.currentPassword),T(4),tt("ngModel",s.formData.newPassword),T(4),tt("ngModel",s.formData.confirmPassword),T(),k("ngIf",s.formData.newPassword!==s.formData.confirmPassword&&s.formData.confirmPassword),T(11),k("ngIf",s.isAdmin)("ngIfElse",r)}},dependencies:[gn,mn,Gn,Kn,_n,qn,Yn,An,rs,ss],encapsulation:2})}}return n})();var p$=["modalContent"],g$=(n,t)=>({"bg-success":n,"bg-danger":t});function m$(n,t){if(n&1&&(C(0,"option",25),M(1),w()),n&2){let e=t.$implicit;k("value",e),T(),_e(e)}}function _$(n,t){if(n&1){let e=me();C(0,"div",26)(1,"h5",27),M(2),w(),C(3,"button",28),U("click",function(){let s=V(e).$implicit;return B(s.close())}),w()(),C(4,"div",29),M(5),w(),C(6,"div",30)(7,"button",23),U("click",function(){let s=V(e).$implicit;return B(s.close())}),M(8,"Cerrar"),w()()}if(n&2){let e=j();k("ngClass",Dr(3,g$,e.modalType==="success",e.modalType==="error")),T(2),_e(e.modalTitle),T(3),Qe(" ",e.modalMessage," ")}}var GM=(()=>{class n{constructor(e,i,s,r){this.courseService=e,this.router=i,this.route=s,this.modalService=r,this.topics=["Desarrollo web","Desarrollo m\xF3vil","Desarrollo de videojuegos","Emprendimiento","Finanzas","Marketing digital","Liderazgo","Comunicaci\xF3n"],this.imageFileName=null,this.pdfFileName=null,this.image=null,this.pdf=null,this.modalTitle="",this.modalMessage="",this.modalType="success";let o=this.route.snapshot.params.id;this.courseService.getCourseById(o).subscribe(a=>{this.course=a},a=>{console.error("Error al cargar el curso:",a)})}onImageSelected(e){let i=e.target;i.files&&i.files[0]&&(this.imageFileName=i.files[0].name,this.image=i.files[0])}onPdfSelected(e){let i=e.target;i.files&&i.files[0]&&(this.pdfFileName=i.files[0].name,this.pdf=i.files[0])}onSubmit(){this.image?this.courseService.updateCourseImage(this.course.id,this.image).subscribe({next:()=>{console.log("Imagen actualizada con \xE9xito"),this.pdf?this.courseService.updateCourseNotes(this.course.id,this.pdf).subscribe({next:()=>{console.log("Notas actualizadas con \xE9xito"),this.courseService.updateCourse(this.course).subscribe(()=>{this.showModal("Curso actualizado","El curso y sus archivos se han actualizado exitosamente.","success")})}}):this.courseService.updateCourse(this.course).subscribe(()=>{this.showModal("Curso actualizado","El curso se ha actualizado exitosamente.","success")})}}):this.pdf?this.courseService.updateCourseNotes(this.course.id,this.pdf).subscribe({next:()=>{console.log("Notas actualizadas con \xE9xito"),this.courseService.updateCourse(this.course).subscribe(()=>{this.showModal("Curso actualizado","El curso y sus archivos se han actualizado exitosamente.","success")})}}):this.courseService.updateCourse(this.course).subscribe(()=>{this.showModal("Curso actualizado","El curso se ha actualizado exitosamente.","success")})}onCancel(){this.router.navigate(["/courses"])}showModal(e,i,s="success"){this.modalTitle=e,this.modalMessage=i,this.modalType=s,console.log(this.modalContent);let r=this.modalService.open(this.modalContent);s==="success"&&setTimeout(()=>{r.close(),this.router.navigate(["/users/me"])},5e3)}static{this.\u0275fac=function(i){return new(i||n)(F(qt),F(Ke),F(Nt),F(ls))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-edit-course"]],viewQuery:function(i,s){if(i&1&&nn(p$,5),i&2){let r;xt(r=Et())&&(s.modalContent=r.first)}},decls:45,vars:8,consts:[["editCourseForm","ngForm"],["modalContent",""],[1,"container"],[1,"header-logo","text-dark"],["enctype","multipart/form-data",3,"ngSubmit"],["type","hidden","name","courseId",3,"ngModelChange","ngModel"],[1,"form-group","input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa-solid","fa-font"],["type","text","name","title","placeholder","T\xEDtulo del curso","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-align-left"],["name","description","rows","3","maxlength","200","placeholder","Breve descripci\xF3n del curso...","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-image"],[1,"custom-file"],["type","file","name","imageFile","accept","image/*",1,"custom-file-input",3,"change"],[1,"custom-file-label"],[1,"fa-solid","fa-book"],["name","topic","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fa-solid","fa-file-pdf"],["type","file","name","notes","accept",".pdf",1,"custom-file-input",3,"change"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"modal-header",3,"ngClass"],[1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"modal-footer"]],template:function(i,s){if(i&1){let r=me();C(0,"div",2)(1,"div",3),M(2,"Cognite"),w(),C(3,"form",4,0),U("ngSubmit",function(){return V(r),B(s.onSubmit())}),C(5,"input",5),nt("ngModelChange",function(a){return V(r),at(s.course.id,a)||(s.course.id=a),B(a)}),w(),C(6,"div",6)(7,"div",7)(8,"span",8),q(9,"i",9),w()(),C(10,"input",10),nt("ngModelChange",function(a){return V(r),at(s.course.title,a)||(s.course.title=a),B(a)}),w()(),C(11,"div",6)(12,"div",7)(13,"span",8),q(14,"i",11),w()(),C(15,"textarea",12),nt("ngModelChange",function(a){return V(r),at(s.course.description,a)||(s.course.description=a),B(a)}),w()(),C(16,"div",6)(17,"div",7)(18,"span",8),q(19,"i",13),w()(),C(20,"div",14)(21,"input",15),U("change",function(a){return V(r),B(s.onImageSelected(a))}),w(),C(22,"label",16),M(23),w()()(),C(24,"div",6)(25,"div",7)(26,"span",8),q(27,"i",17),w()(),C(28,"select",18),nt("ngModelChange",function(a){return V(r),at(s.course.topic,a)||(s.course.topic=a),B(a)}),J(29,m$,2,2,"option",19),w()(),C(30,"div",6)(31,"div",7)(32,"span",8),q(33,"i",20),w()(),C(34,"div",14)(35,"input",21),U("change",function(a){return V(r),B(s.onPdfSelected(a))}),w(),C(36,"label",16),M(37),w()()(),C(38,"div",22)(39,"button",23),U("click",function(){return V(r),B(s.onCancel())}),M(40,"Cancelar"),w(),C(41,"button",24),M(42,"Guardar curso"),w()()()(),J(43,_$,9,6,"ng-template",null,1,At)}if(i&2){let r=sn(4);T(5),tt("ngModel",s.course.id),T(5),tt("ngModel",s.course.title),T(5),tt("ngModel",s.course.description),T(8),_e(s.imageFileName||"Selecciona una imagen..."),T(5),tt("ngModel",s.course.topic),T(),k("ngForOf",s.topics),T(8),_e(s.pdfFileName||"Selecciona un archivo PDF..."),T(4),k("disabled",!r.valid)}},dependencies:[Lo,gn,Kn,$s,zs,_n,Oi,qn,Yn,An,Nl,rs,ss],encapsulation:2})}}return n})();var b$=n=>["/courses",n];function v$(n,t){if(n&1&&(C(0,"div",5)(1,"div",6),q(2,"img",7),C(3,"div",8)(4,"strong",9),M(5),w(),C(6,"h5",10),M(7),w(),C(8,"div",11),M(9),w(),C(10,"p",12),M(11),w(),C(12,"a",13),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,b$,e.id))}}function y$(n,t){n&1&&(C(0,"div",14)(1,"div",15)(2,"span",16),M(3,"Loading..."),w()()())}function w$(n,t){if(n&1){let e=me();C(0,"div",17)(1,"button",18),U("click",function(){V(e);let s=j();return B(s.loadMore())}),M(2,"Cargar m\xE1s"),w()()}}var qM=(()=>{class n{constructor(e,i,s){this.route=e,this.courseService=i,this.router=s,this.allCourses=[],this.loading=!1,this.hasMoreCourses=!0,this.currentPage=0,this.pageSize=10}ngOnInit(){this.route.paramMap.subscribe(e=>{this.category=e.get("category")||"",this.resetCourseList(),this.loadCourses()})}resetCourseList(){this.allCourses=[],this.loading=!1,this.hasMoreCourses=!0,this.currentPage=0}loadCourses(){this.loading=!0,this.courseService.getCoursesByTopic(this.category,this.currentPage,this.pageSize).subscribe({next:e=>{e.length===0?this.hasMoreCourses=!1:(this.allCourses=[...this.allCourses,...e],this.currentPage++,e.length<this.pageSize&&(this.hasMoreCourses=!1)),this.loading=!1},error:e=>{console.error("Error al cargar cursos:",e),this.loading=!1}})}loadMore(){this.loadCourses()}static{this.\u0275fac=function(i){return new(i||n)(F(Nt),F(qt),F(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"container"],["id","coursesContainer",1,"row","mb-2"],["class","col-md-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-md-3","mb-4"],[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-inline-block","mb-2","text-primary"],[1,"card-title"],[1,"mb-1","text-muted"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(C(0,"div",0)(1,"div",1),J(2,v$,14,8,"div",2),w(),J(3,y$,4,0,"div",3)(4,w$,3,0,"div",4),w()),i&2&&(T(2),k("ngForOf",s.allCourses),T(),k("ngIf",s.loading),T(),k("ngIf",!s.loading&&s.hasMoreCourses))},dependencies:[gn,mn,Gn],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var C$=n=>["/courses",n];function x$(n,t){if(n&1&&(C(0,"div",5)(1,"div",6),q(2,"img",7),C(3,"div",8)(4,"strong",9),M(5),w(),C(6,"h5",10),M(7),w(),C(8,"div",11),M(9),w(),C(10,"p",12),M(11),w(),C(12,"a",13),M(13,"Ver curso"),w()()()()),n&2){let e=t.$implicit;T(2),k("src","/api/v1/courses/"+e.id+"/image",pn),T(3),_e(e.topic),T(2),_e(e.title),T(2),Qe("",e.rating," \u2B50"),T(2),_e(e.description),T(),k("routerLink",rn(6,C$,e.id))}}function E$(n,t){n&1&&(C(0,"div",14)(1,"div",15)(2,"span",16),M(3,"Loading..."),w()()())}function S$(n,t){if(n&1){let e=me();C(0,"div",17)(1,"button",18),U("click",function(){V(e);let s=j();return B(s.loadMore())}),M(2,"Cargar m\xE1s"),w()()}}var YM=(()=>{class n{constructor(e,i,s){this.route=e,this.courseService=i,this.router=s,this.query="",this.allCourses=[],this.loading=!1,this.hasMoreCourses=!0,this.currentPage=0,this.pageSize=10}ngOnInit(){this.route.paramMap.subscribe(e=>{this.query=e.get("query")||"",this.resetCourseList(),this.loadCourses()})}resetCourseList(){this.allCourses=[],this.loading=!1,this.hasMoreCourses=!0,this.currentPage=0}loadCourses(){this.loading=!0,this.courseService.getCoursesByTitle(this.query,this.currentPage,this.pageSize).subscribe({next:e=>{e.length===0?this.hasMoreCourses=!1:(this.allCourses=[...this.allCourses,...e],this.currentPage++,e.length<this.pageSize&&(this.hasMoreCourses=!1)),this.loading=!1},error:e=>{console.error("Error al cargar cursos:",e),this.loading=!1}})}loadMore(){this.loadCourses()}static{this.\u0275fac=function(i){return new(i||n)(F(Nt),F(qt),F(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"container"],["id","coursesContainer",1,"row","mb-2"],["class","col-md-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-md-3","mb-4"],[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-inline-block","mb-2","text-primary"],[1,"card-title"],[1,"mb-1","text-muted"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(C(0,"div",0)(1,"div",1),J(2,x$,14,8,"div",2),w(),J(3,E$,4,0,"div",3)(4,S$,3,0,"div",4),w()),i&2&&(T(2),k("ngForOf",s.allCourses),T(),k("ngIf",s.loading),T(),k("ngIf",!s.loading&&s.hasMoreCourses))},dependencies:[gn,mn,Gn],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var D$=["modalContent"],M$=(n,t)=>({"bg-success":n,"bg-danger":t});function A$(n,t){if(n&1&&(C(0,"option",24),M(1),w()),n&2){let e=t.$implicit;k("value",e),T(),_e(e)}}function T$(n,t){if(n&1){let e=me();C(0,"div",25)(1,"h5",26),M(2),w(),C(3,"button",27),U("click",function(){let s=V(e).$implicit;return B(s.close())}),w()(),C(4,"div",28),M(5),w(),C(6,"div",29)(7,"button",30),U("click",function(){let s=V(e).$implicit;return B(s.close())}),M(8,"Cerrar"),w()()}if(n&2){let e=j();k("ngClass",Dr(3,M$,e.modalType==="success",e.modalType==="error")),T(2),_e(e.modalTitle),T(3),Qe(" ",e.modalMessage," ")}}var KM=(()=>{class n{constructor(e,i,s,r){this.fb=e,this.userService=i,this.modalService=s,this.router=r,this.modalTitle="",this.modalMessage="",this.modalType="success",this.selectedFile=null,this.topics=["Desarrollo web","Desarrollo m\xF3vil","Desarrollo de videojuegos","Emprendimiento","Finanzas","Marketing digital","Liderazgo","Comunicaci\xF3n"],this.userForm=this.fb.group({firstName:["",an.required],lastName:["",an.required],email:["",[an.required,an.email]],topic:["",an.required],password:["",an.required],repeatPassword:["",an.required]})}onFileSelected(e){this.selectedFile=e.target.files[0]}onSubmit(){if(this.userForm.invalid||this.userForm.value.password!==this.userForm.value.repeatPassword){this.showModal("Error","Formulario inv\xE1lido o contrase\xF1as no coinciden","error");return}let e={firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,email:this.userForm.value.email,topic:this.userForm.value.topic,password:this.userForm.value.password,roles:["USER"]};this.userService.createUser(e).subscribe({next:i=>{let s=i.id;this.selectedFile?this.userService.createUserImage(s,this.selectedFile).subscribe({next:()=>{this.showModal("\xC9xito","Usuario creado exitosamente","success")},error:r=>{this.showModal("Error","Error subiendo imagen: "+r.message,"error")}}):this.showModal("\xC9xito","Usuario creado (sin imagen)","success")},error:i=>{i.status===400?this.showModal("Error","El usuario ya est\xE1 registrado","error"):this.showModal("Error","Error creando usuario: "+i.message,"error")}})}showModal(e,i,s="success"){this.modalTitle=e,this.modalMessage=i,this.modalType=s;let r=this.modalService.open(this.modalContent);s==="success"&&setTimeout(()=>{r.close(),this.router.navigate(["/courses"])},5e3)}static{this.\u0275fac=function(i){return new(i||n)(F(ph),F(Pi),F(ls),F(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-user-form"]],viewQuery:function(i,s){if(i&1&&nn(D$,5),i&2){let r;xt(r=Et())&&(s.modalContent=r.first)}},decls:40,vars:2,consts:[["modalContent",""],[1,"container","d-flex","justify-content-center","align-items-center",2,"min-height","100vh"],[1,"card","shadow","p-4",2,"width","100%","max-width","90%"],[1,"text-center","mb-4"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","firstName"],["formControlName","firstName","id","firstName","type","text","placeholder","Nombre","required","",1,"form-control"],["for","lastName"],["formControlName","lastName","id","lastName","type","text","placeholder","Apellidos","required","",1,"form-control"],["for","email"],["formControlName","email","id","email","type","email","placeholder","Email","required","",1,"form-control"],["for","profileImage"],["type","file","id","profileImage","required","",1,"form-control-file",3,"change"],["for","topic"],["formControlName","topic","id","topic","required","",1,"form-control"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","password"],["formControlName","password","id","password","type","password","placeholder","Contrase\xF1a","required","",1,"form-control"],[1,"form-group","mb-4"],["for","repeatPassword"],["formControlName","repeatPassword","id","repeatPassword","type","password","placeholder","Repite la contrase\xF1a","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100"],[3,"value"],[1,"modal-header",3,"ngClass"],[1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,s){if(i&1){let r=me();C(0,"div",1)(1,"div",2)(2,"h2",3),M(3,"Crear cuenta"),w(),C(4,"form",4),U("ngSubmit",function(){return V(r),B(s.onSubmit())}),C(5,"div",5)(6,"label",6),M(7,"Nombre"),w(),q(8,"input",7),w(),C(9,"div",5)(10,"label",8),M(11,"Apellidos"),w(),q(12,"input",9),w(),C(13,"div",5)(14,"label",10),M(15,"Email"),w(),q(16,"input",11),w(),C(17,"div",5)(18,"label",12),M(19,"Imagen de perfil"),w(),C(20,"input",13),U("change",function(a){return V(r),B(s.onFileSelected(a))}),w()(),C(21,"div",5)(22,"label",14),M(23,"\xBFQu\xE9 quieres aprender?"),w(),C(24,"select",15)(25,"option",16),M(26,"Selecciona una opci\xF3n"),w(),J(27,A$,2,2,"option",17),w()(),C(28,"div",5)(29,"label",18),M(30,"Contrase\xF1a"),w(),q(31,"input",19),w(),C(32,"div",20)(33,"label",21),M(34,"Repetir contrase\xF1a"),w(),q(35,"input",22),w(),C(36,"button",23),M(37,"Registrarse"),w()()()(),J(38,T$,9,6,"ng-template",null,0,At)}i&2&&(T(4),k("formGroup",s.userForm),T(23),k("ngForOf",s.topics))},dependencies:[Lo,gn,Kn,$s,zs,_n,Oi,qn,Yn,An,Ol,Rl],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var I$=["modalContent"],P$=(n,t)=>({"bg-success":n,"bg-danger":t});function O$(n,t){if(n&1){let e=me();C(0,"div",29)(1,"h5",30),M(2),w(),C(3,"button",31),U("click",function(){let s=V(e).$implicit;return B(s.close())}),w()(),C(4,"div",32),M(5),w(),C(6,"div",33)(7,"button",27),U("click",function(){let s=V(e).$implicit;return B(s.close())}),M(8,"Cerrar"),w()()}if(n&2){let e=j();k("ngClass",Dr(3,P$,e.modalType==="success",e.modalType==="error")),T(2),_e(e.modalTitle),T(3),Qe(" ",e.modalMessage," ")}}var XM=(()=>{class n{constructor(e,i,s,r,o){this.fb=e,this.modalService=i,this.router=s,this.courseService=r,this.userService=o,this.modalTitle="",this.modalMessage="",this.modalType="success",this.imageFile=null,this.notesFile=null,this.courseForm=this.fb.group({title:["",an.required],description:["",[an.required,an.maxLength(200)]],topic:["",an.required]})}onFileSelected(e,i){let s=e.target;if(s.files&&s.files.length>0){let r=s.files[0];i==="image"?this.imageFile=r:i==="notes"&&(this.notesFile=r)}}onSubmit(){if(this.courseForm.valid){if(!this.imageFile||!this.notesFile){this.showModal("Archivos requeridos","Debes seleccionar una imagen y un archivo de notas antes de crear el curso.","error");return}this.userService.getUserInfo().subscribe({next:e=>{let i={title:this.courseForm.value.title,description:this.courseForm.value.description,topic:this.courseForm.value.topic,instructor:e,rating:0};this.courseService.createCourse(i).subscribe({next:s=>{this.courseService.createCourseImage(s.id,this.imageFile).subscribe({next:()=>{console.log("Imagen subida correctamente"),this.courseService.createCourseNotes(s.id,this.notesFile).subscribe({next:()=>{console.log("Notas subidas correctamente"),this.showModal("Curso creado","El curso y sus archivos se han creado exitosamente.","success")},error:r=>{console.error("Error subiendo notas",r),this.showModal("Error","Hubo un error al subir las notas.","error")}})},error:r=>{console.error("Error subiendo imagen",r),this.showModal("Error","Hubo un error al subir la imagen.","error")}})},error:s=>{console.error("Error creando curso",s),this.showModal("Error","Hubo un error al crear el curso.","error")}})},error:e=>{console.error("Error obteniendo usuario",e),this.showModal("Error","No se pudo obtener la informaci\xF3n del usuario.","error")}})}else this.showModal("Formulario inv\xE1lido","Por favor completa todos los campos requeridos.","error")}showModal(e,i,s="success"){this.modalTitle=e,this.modalMessage=i,this.modalType=s;let r=this.modalService.open(this.modalContent);s==="success"&&setTimeout(()=>{r.close(),this.router.navigate(["/users/me"])},5e3)}cancel(){this.router.navigate(["/users/me"])}static{this.\u0275fac=function(i){return new(i||n)(F(ph),F(ls),F(Ke),F(qt),F(Pi))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],viewQuery:function(i,s){if(i&1&&nn(I$,5),i&2){let r;xt(r=Et())&&(s.modalContent=r.first)}},decls:50,vars:1,consts:[["modalContent",""],[1,"text-center","body-sign"],[1,"container","py-5"],[1,"header-logo","text-dark","mb-4","fs-2"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"mb-3","input-group"],[1,"input-group-text"],[1,"fa-solid","fa-font"],["type","text","formControlName","title","placeholder","T\xEDtulo del curso","required","",1,"form-control"],[1,"fa-solid","fa-align-left"],["formControlName","description","rows","3","maxlength","200","placeholder","Breve descripci\xF3n del curso...","required","",1,"form-control"],[1,"mb-3"],[1,"form-label"],["type","file","required","",1,"form-control",3,"change"],[1,"fa-solid","fa-book"],["formControlName","topic","required","",1,"form-select"],["value","","disabled","","selected",""],["value","Desarrollo web"],["value","Desarrollo m\xF3vil"],["value","Desarrollo de videojuegos"],["value","Emprendimiento"],["value","Finanzas"],["value","Marketing Digital"],["value","Liderazgo"],["value","Comunicaci\xF3n"],["type","file","accept",".pdf","required","",1,"form-control",3,"change"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"modal-header",3,"ngClass"],[1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"modal-footer"]],template:function(i,s){if(i&1){let r=me();C(0,"div",1)(1,"div",2)(2,"div",3),M(3,"Cognite"),w(),C(4,"form",4),U("ngSubmit",function(){return V(r),B(s.onSubmit())}),C(5,"div",5)(6,"span",6),q(7,"i",7),w(),q(8,"input",8),w(),C(9,"div",5)(10,"span",6),q(11,"i",9),w(),q(12,"textarea",10),w(),C(13,"div",11)(14,"label",12),M(15,"Selecciona una imagen"),w(),C(16,"input",13),U("change",function(a){return V(r),B(s.onFileSelected(a,"image"))}),w()(),C(17,"div",5)(18,"span",6),q(19,"i",14),w(),C(20,"select",15)(21,"option",16),M(22,"Elige una tem\xE1tica..."),w(),C(23,"option",17),M(24,"Desarrollo web"),w(),C(25,"option",18),M(26,"Desarrollo m\xF3vil"),w(),C(27,"option",19),M(28,"Desarrollo de videojuegos"),w(),C(29,"option",20),M(30,"Emprendimiento"),w(),C(31,"option",21),M(32,"Finanzas"),w(),C(33,"option",22),M(34,"Marketing digital"),w(),C(35,"option",23),M(36,"Liderazgo"),w(),C(37,"option",24),M(38,"Comunicaci\xF3n"),w()()(),C(39,"div",11)(40,"label",12),M(41,"Selecciona un archivo PDF"),w(),C(42,"input",25),U("change",function(a){return V(r),B(s.onFileSelected(a,"notes"))}),w()(),C(43,"div",26)(44,"button",27),U("click",function(){return V(r),B(s.cancel())}),M(45,"Cancelar"),w(),C(46,"button",28),M(47,"A\xF1adir curso"),w()()()()(),J(48,O$,9,6,"ng-template",null,0,At)}i&2&&(T(4),k("formGroup",s.courseForm))},dependencies:[Lo,Kn,$s,zs,_n,Oi,qn,Yn,An,Nl,Ol,Rl],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();function Vi(){}var dA=function(){let n=0;return function(){return n++}}();function Ne(n){return n===null||typeof n>"u"}function Ge(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function De(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}var ft=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function Rn(n,t){return ft(n)?n:t}function fe(n,t){return typeof n>"u"?t:n}var hA=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/t,Qv=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function qe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ve(n,t,e,i){let s,r,o;if(Ge(n))if(r=n.length,i)for(s=r-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<r;s++)t.call(e,n[s],s);else if(De(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function gc(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Bf(n){if(Ge(n))return n.map(Bf);if(De(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,s=0;for(;s<i;++s)t[e[s]]=Bf(n[e[s]]);return t}return n}function fA(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function R$(n,t,e,i){if(!fA(n))return;let s=t[n],r=e[n];De(s)&&De(r)?ha(s,r,i):t[n]=Bf(r)}function ha(n,t,e){let i=Ge(t)?t:[t],s=i.length;if(!De(n))return n;e=e||{};let r=e.merger||R$;for(let o=0;o<s;++o){if(t=i[o],!De(t))continue;let a=Object.keys(t);for(let l=0,c=a.length;l<c;++l)r(a[l],n,t,e)}return n}function ga(n,t){return ha(n,t,{merger:N$})}function N$(n,t,e){if(!fA(n))return;let i=t[n],s=e[n];De(i)&&De(s)?ga(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Bf(s))}var QM={"":n=>n,x:n=>n.x,y:n=>n.y};function ys(n,t){return(QM[t]||(QM[t]=k$(t)))(n)}function k$(n){let t=F$(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function F$(n){let t=n.split("."),e=[],i="";for(let s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function $f(n){return n.charAt(0).toUpperCase()+n.slice(1)}var On=n=>typeof n<"u",vs=n=>typeof n=="function",Zv=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function pA(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Je=Math.PI,Ue=2*Je,L$=Ue+Je,jf=Number.POSITIVE_INFINITY,V$=Je/180,ut=Je/2,dc=Je/4,ZM=Je*2/3,Nn=Math.log10,pi=Math.sign;function Jv(n){let t=Math.round(n);n=ma(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(Nn(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function gA(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function Gr(n){return!isNaN(parseFloat(n))&&isFinite(n)}function ma(n,t,e){return Math.abs(n-t)<e}function mA(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function ey(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Jn(n){return n*(Je/180)}function zf(n){return n*(180/Je)}function ty(n){if(!ft(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function ny(n,t){let e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i),r=Math.atan2(i,e);return r<-.5*Je&&(r+=Ue),{angle:r,distance:s}}function Hf(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function B$(n,t){return(n-t+L$)%Ue-Je}function yn(n){return(n%Ue+Ue)%Ue}function _a(n,t,e,i){let s=yn(n),r=yn(t),o=yn(e),a=yn(r-s),l=yn(o-s),c=yn(s-r),u=yn(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Mt(n,t,e){return Math.max(t,Math.min(e,n))}function _A(n){return Mt(n,-32768,32767)}function Bi(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Wf(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}var Li=(n,t,e,i)=>Wf(n,e,i?s=>n[s][t]<=e:s=>n[s][t]<e),bA=(n,t,e)=>Wf(n,e,i=>n[i][t]>=e);function vA(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}var yA=["push","pop","shift","splice","unshift"];function wA(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yA.forEach(e=>{let i="_onData"+$f(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){let o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function iy(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(yA.forEach(r=>{delete n[r]}),delete n._chartjs)}function sy(n){let t=new Set,e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}var ry=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function oy(n,t,e){let i=e||(o=>Array.prototype.slice.call(o)),s=!1,r=[];return function(...o){r=i(o),s||(s=!0,ry.call(window,()=>{s=!1,n.apply(t,r)}))}}function CA(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var Gf=n=>n==="start"?"left":n==="end"?"right":"center",Ft=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,xA=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function ay(n,t,e){let i=t.length,s=0,r=i;if(n._sorted){let{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(s=Mt(Math.min(Li(a,o.axis,c).lo,e?i:Li(t,l,o.getPixelForValue(c)).lo),0,i-1)),h?r=Mt(Math.max(Li(a,o.axis,u,!0).hi+1,e?0:Li(t,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function ly(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;let r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}var Nf=n=>n===0||n===1,JM=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Ue/e)),eA=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Ue/e)+1,da={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ut)+1,easeOutSine:n=>Math.sin(n*ut),easeInOutSine:n=>-.5*(Math.cos(Je*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Nf(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Nf(n)?n:JM(n,.075,.3),easeOutElastic:n=>Nf(n)?n:eA(n,.075,.3),easeInOutElastic(n){return Nf(n)?n:n<.5?.5*JM(n*2,.1125,.45):.5+.5*eA(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-da.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?da.easeInBounce(n*2)*.5:da.easeOutBounce(n*2-1)*.5+.5};function mc(n){return n+.5|0}var Xs=(n,t,e)=>Math.max(Math.min(n,e),t);function hc(n){return Xs(mc(n*2.55),0,255)}function Qs(n){return Xs(mc(n*255),0,255)}function bs(n){return Xs(mc(n/2.55)/100,0,1)}function tA(n){return Xs(mc(n*100),0,100)}var Zn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yv=[..."0123456789ABCDEF"],j$=n=>Yv[n&15],H$=n=>Yv[(n&240)>>4]+Yv[n&15],kf=n=>(n&240)>>4===(n&15),U$=n=>kf(n.r)&&kf(n.g)&&kf(n.b)&&kf(n.a);function $$(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Zn[n[1]]*17,g:255&Zn[n[2]]*17,b:255&Zn[n[3]]*17,a:t===5?Zn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Zn[n[1]]<<4|Zn[n[2]],g:Zn[n[3]]<<4|Zn[n[4]],b:Zn[n[5]]<<4|Zn[n[6]],a:t===9?Zn[n[7]]<<4|Zn[n[8]]:255})),e}var z$=(n,t)=>n<255?t(n):"";function W$(n){var t=U$(n)?j$:H$;return n?"#"+t(n.r)+t(n.g)+t(n.b)+z$(n.a,t):void 0}var G$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EA(n,t,e){let i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function q$(n,t,e){let i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Y$(n,t,e){let i=EA(n,1,.5),s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function K$(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function cy(n){let e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2,l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=K$(e,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function uy(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Qs)}function dy(n,t,e){return uy(EA,n,t,e)}function X$(n,t,e){return uy(Y$,n,t,e)}function Q$(n,t,e){return uy(q$,n,t,e)}function SA(n){return(n%360+360)%360}function Z$(n){let t=G$.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?hc(+t[5]):Qs(+t[5]));let s=SA(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=X$(s,r,o):t[1]==="hsv"?i=Q$(s,r,o):i=dy(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function J$(n,t){var e=cy(n);e[0]=SA(e[0]+t),e=dy(e),n.r=e[0],n.g=e[1],n.b=e[2]}function ez(n){if(!n)return;let t=cy(n),e=t[0],i=tA(t[1]),s=tA(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${bs(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}var nA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},iA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tz(){let n={},t=Object.keys(iA),e=Object.keys(nA),i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,nA[r]);r=parseInt(iA[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}var Ff;function nz(n){Ff||(Ff=tz(),Ff.transparent=[0,0,0,0]);let t=Ff[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var iz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sz(n){let t=iz.exec(n),e=255,i,s,r;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?hc(o):Xs(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?hc(i):Xs(i,0,255)),s=255&(t[4]?hc(s):Xs(s,0,255)),r=255&(t[6]?hc(r):Xs(r,0,255)),{r:i,g:s,b:r,a:e}}}function rz(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${bs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var zv=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ua=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function oz(n,t,e){let i=ua(bs(n.r)),s=ua(bs(n.g)),r=ua(bs(n.b));return{r:Qs(zv(i+e*(ua(bs(t.r))-i))),g:Qs(zv(s+e*(ua(bs(t.g))-s))),b:Qs(zv(r+e*(ua(bs(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Lf(n,t,e){if(n){let i=cy(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=dy(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function DA(n,t){return n&&Object.assign(t||{},n)}function sA(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Qs(n[3]))):(t=DA(n,{r:0,g:0,b:0,a:1}),t.a=Qs(t.a)),t}function az(n){return n.charAt(0)==="r"?sz(n):Z$(n)}var Kv=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=sA(t):e==="string"&&(i=$$(t)||nz(t)||az(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=DA(this._rgb);return t&&(t.a=bs(t.a)),t}set rgb(t){this._rgb=sA(t)}rgbString(){return this._valid?rz(this._rgb):void 0}hexString(){return this._valid?W$(this._rgb):void 0}hslString(){return this._valid?ez(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,s=t.rgb,r,o=e===r?.5:e,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=oz(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=Qs(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=mc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Lf(this._rgb,2,t),this}darken(t){return Lf(this._rgb,2,-t),this}saturate(t){return Lf(this._rgb,1,t),this}desaturate(t){return Lf(this._rgb,1,-t),this}rotate(t){return J$(this._rgb,t),this}};function MA(n){return new Kv(n)}function AA(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function hy(n){return AA(n)?n:MA(n)}function Wv(n){return AA(n)?n:MA(n).saturate(.5).darken(.1).hexString()}var Zs=Object.create(null),qf=Object.create(null);function fc(n,t){if(!t)return n;let e=t.split(".");for(let i=0,s=e.length;i<s;++i){let r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function Gv(n,t,e){return typeof t=="string"?ha(fc(n,t),e):ha(fc(n,""),t)}var Xv=class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,i)=>Wv(i.backgroundColor),this.hoverBorderColor=(e,i)=>Wv(i.borderColor),this.hoverColor=(e,i)=>Wv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return Gv(this,t,e)}get(t){return fc(this,t)}describe(t,e){return Gv(qf,t,e)}override(t,e){return Gv(Zs,t,e)}route(t,e,i,s){let r=fc(this,t),o=fc(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[s];return De(l)?Object.assign({},c,l):fe(l,c)},set(l){this[a]=l}}})}},Me=new Xv({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function lz(n){return!n||Ne(n.size)||Ne(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function pc(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function TA(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=e[l],d!=null&&Ge(d)!==!0)o=pc(n,s,r,o,d);else if(Ge(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Ge(h)&&(o=pc(n,s,r,o,h));n.restore();let f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function Js(n,t,e){let i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function fy(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function Yf(n,t,e,i){py(n,t,e,i,null)}function py(n,t,e,i,s){let r,o,a,l,c,u,d=t.pointStyle,h=t.rotation,f=t.radius,p=(h||0)*V$;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(p),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(f)||f<=0)){switch(n.beginPath(),d){default:s?n.ellipse(e,i,s/2,f,0,0,Ue):n.arc(e,i,f,0,Ue),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(p)*f,i-Math.cos(p)*f),p+=ZM,n.lineTo(e+Math.sin(p)*f,i-Math.cos(p)*f),p+=ZM,n.lineTo(e+Math.sin(p)*f,i-Math.cos(p)*f),n.closePath();break;case"rectRounded":c=f*.516,l=f-c,o=Math.cos(p+dc)*l,a=Math.sin(p+dc)*l,n.arc(e-o,i-a,c,p-Je,p-ut),n.arc(e+a,i-o,c,p-ut,p),n.arc(e+o,i+a,c,p,p+ut),n.arc(e-a,i+o,c,p+ut,p+Je),n.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*f,u=s?s/2:l,n.rect(e-u,i-l,2*u,2*l);break}p+=dc;case"rectRot":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(e-o,i-a),n.lineTo(e+a,i-o),n.lineTo(e+o,i+a),n.lineTo(e-a,i+o),n.closePath();break;case"crossRot":p+=dc;case"cross":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a),n.moveTo(e+a,i-o),n.lineTo(e-a,i+o);break;case"star":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a),n.moveTo(e+a,i-o),n.lineTo(e-a,i+o),p+=dc,o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a),n.moveTo(e+a,i-o),n.lineTo(e-a,i+o);break;case"line":o=s?s/2:Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(p)*f,i+Math.sin(p)*f);break}n.fill(),t.borderWidth>0&&n.stroke()}}function fa(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function _c(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function bc(n){n.restore()}function IA(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){let r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function PA(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function er(n,t,e,i,s,r={}){let o=Ge(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(n.save(),n.font=s.string,cz(n,r),l=0;l<o.length;++l)c=o[l],a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Ne(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,i,r.maxWidth)),n.fillText(c,e,i,r.maxWidth),uz(n,e,i,c,r),i+=s.lineHeight;n.restore()}function cz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ne(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function uz(n,t,e,i,s){if(s.strikethrough||s.underline){let r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function ba(n,t){let{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,-ut,Je,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Je,ut,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,ut,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-ut,!0),n.lineTo(e+o.topLeft,i)}var dz=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),hz=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function fz(n,t){let e=(""+n).match(dz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var pz=n=>+n||0;function Kf(n,t){let e={},i=De(t),s=i?Object.keys(t):t,r=De(n)?i?o=>fe(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of s)e[o]=pz(r(o));return e}function gy(n){return Kf(n,{top:"y",right:"x",bottom:"y",left:"x"})}function tr(n){return Kf(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Lt(n){let t=gy(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function wt(n,t){n=n||{},t=t||Me.font;let e=fe(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=fe(n.style,t.style);i&&!(""+i).match(hz)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");let s={family:fe(n.family,t.family),lineHeight:fz(fe(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:fe(n.weight,t.weight),string:""};return s.string=lz(s),s}function va(n,t,e,i){let s=!0,r,o,a;for(r=0,o=n.length;r<o;++r)if(a=n[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&Ge(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function OA(n,t,e){let{min:i,max:s}=n,r=Qv(t,(s-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function ws(n,t){return Object.assign(Object.create(n),t)}function Xf(n,t=[""],e=n,i,s=()=>n[0]){On(i)||(i=kA("_fallback",n));let r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:s,override:o=>Xf([o,...n],t,e,i)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete n[0][a],!0},get(o,a){return RA(o,a,()=>Cz(a,t,n,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,a){return oA(o).includes(a)},ownKeys(o){return oA(o)},set(o,a,l){let c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function Wr(n,t,e,i){let s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:my(n,i),setContext:r=>Wr(n,r,e,i),override:r=>Wr(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return RA(r,o,()=>mz(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function my(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:vs(e)?e:()=>e,isIndexable:vs(i)?i:()=>i}}var gz=(n,t)=>n?n+$f(t):t,_y=(n,t)=>De(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function RA(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];let i=e();return n[t]=i,i}function mz(n,t,e){let{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n,a=i[t];return vs(a)&&o.isScriptable(t)&&(a=_z(t,a,n,e)),Ge(a)&&a.length&&(a=bz(t,a,n,o.isIndexable)),_y(t,a)&&(a=Wr(a,s,r&&r[t],o)),a}function _z(n,t,e,i){let{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(r,o||i),a.delete(n),_y(n,t)&&(t=by(s._scopes,s,n,t)),t}function bz(n,t,e,i){let{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(On(r.index)&&i(n))t=t[r.index%t.length];else if(De(t[0])){let l=t,c=s._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=by(c,s,n,u);t.push(Wr(d,r,o&&o[n],a))}}return t}function NA(n,t,e){return vs(n)?n(t,e):n}var vz=(n,t)=>n===!0?t:typeof n=="string"?ys(t,n):void 0;function yz(n,t,e,i,s){for(let r of t){let o=vz(e,r);if(o){n.add(o);let a=NA(o._fallback,e,s);if(On(a)&&a!==e&&a!==i)return a}else if(o===!1&&On(i)&&e!==i)return null}return!1}function by(n,t,e,i){let s=t._rootScopes,r=NA(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let l=rA(a,o,e,r||e,i);return l===null||On(r)&&r!==e&&(l=rA(a,o,r,l,i),l===null)?!1:Xf(Array.from(a),[""],s,r,()=>wz(t,e,i))}function rA(n,t,e,i,s){for(;e;)e=yz(n,t,e,i,s);return e}function wz(n,t,e){let i=n._getTarget();t in i||(i[t]={});let s=i[t];return Ge(s)&&De(e)?e:s}function Cz(n,t,e,i){let s;for(let r of t)if(s=kA(gz(r,n),e),On(s))return _y(n,s)?by(e,i,n,s):s}function kA(n,t){for(let e of t){if(!e)continue;let i=e[n];if(On(i))return i}}function oA(n){let t=n._keys;return t||(t=n._keys=xz(n._scopes)),t}function xz(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function vy(n,t,e,i){let{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:s.parse(ys(u,r),c)};return o}var Ez=Number.EPSILON||1e-14,pa=(n,t)=>t<n.length&&!n[t].skip&&n[t],FA=n=>n==="x"?"y":"x";function Sz(n,t,e,i){let s=n.skip?t:n,r=t,o=e.skip?t:e,a=Hf(r,s),l=Hf(o,r),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function Dz(n,t,e){let i=n.length,s,r,o,a,l,c=pa(n,0);for(let u=0;u<i-1;++u)if(l=c,c=pa(n,u+1),!(!l||!c)){if(ma(t[u],0,Ez)){e[u]=e[u+1]=0;continue}s=e[u]/t[u],r=e[u+1]/t[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=s*o*t[u],e[u+1]=r*o*t[u])}}function Mz(n,t,e="x"){let i=FA(e),s=n.length,r,o,a,l=pa(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=pa(n,c+1),!a)continue;let u=a[e],d=a[i];o&&(r=(u-o[e])/3,a[`cp1${e}`]=u-r,a[`cp1${i}`]=d-r*t[c]),l&&(r=(l[e]-u)/3,a[`cp2${e}`]=u+r,a[`cp2${i}`]=d+r*t[c])}}function Az(n,t="x"){let e=FA(t),i=n.length,s=Array(i).fill(0),r=Array(i),o,a,l,c=pa(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=pa(n,o+1),!!l){if(c){let u=c[t]-l[t];s[o]=u!==0?(c[e]-l[e])/u:0}r[o]=a?c?pi(s[o-1])!==pi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Dz(n,s,r),Mz(n,r,t)}function Vf(n,t,e){return Math.max(Math.min(n,e),t)}function Tz(n,t){let e,i,s,r,o,a=fa(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&fa(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=Vf(s.cp1x,t.left,t.right),s.cp1y=Vf(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Vf(s.cp2x,t.left,t.right),s.cp2y=Vf(s.cp2y,t.top,t.bottom)))}function LA(n,t,e,i,s){let r,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Az(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=Sz(c,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Tz(n,e)}function yy(){return typeof window<"u"&&typeof document<"u"}function Qf(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var Zf=n=>window.getComputedStyle(n,null);function Iz(n,t){return Zf(n).getPropertyValue(t)}var Pz=["top","right","bottom","left"];function zr(n,t,e){let i={};e=e?"-"+e:"";for(let s=0;s<4;s++){let r=Pz[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Oz=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Rz(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i,o=!1,a,l;if(Oz(s,r,n.target))a=s,l=r;else{let c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nr(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,s=Zf(e),r=s.boxSizing==="border-box",o=zr(s,"padding"),a=zr(s,"border","width"),{x:l,y:c,box:u}=Rz(n,e),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*e.width/i),y:Math.round((c-h)/p*e.height/i)}}function Nz(n,t,e){let i,s;if(t===void 0||e===void 0){let r=Qf(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{let o=r.getBoundingClientRect(),a=Zf(r),l=zr(a,"border","width"),c=zr(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=Uf(a.maxWidth,r,"clientWidth"),s=Uf(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||jf,maxHeight:s||jf}}var qv=n=>Math.round(n*10)/10;function VA(n,t,e,i){let s=Zf(n),r=zr(s,"margin"),o=Uf(s.maxWidth,n,"clientWidth")||jf,a=Uf(s.maxHeight,n,"clientHeight")||jf,l=Nz(n,t,e),{width:c,height:u}=l;if(s.boxSizing==="content-box"){let d=zr(s,"border","width"),h=zr(s,"padding");c-=h.width+d.width,u-=h.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=qv(Math.min(c,o,l.maxWidth)),u=qv(Math.min(u,a,l.maxHeight)),c&&!u&&(u=qv(c/2)),{width:c,height:u}}function wy(n,t,e){let i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=s/i,n.width=r/i;let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var BA=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function Cy(n,t){let e=Iz(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ks(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function jA(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function HA(n,t,e,i){let s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ks(n,s,e),a=Ks(s,r,e),l=Ks(r,t,e),c=Ks(o,a,e),u=Ks(a,l,e);return Ks(c,u,e)}var aA=new Map;function kz(n,t){t=t||{};let e=n+JSON.stringify(t),i=aA.get(e);return i||(i=new Intl.NumberFormat(n,t),aA.set(e,i)),i}function ya(n,t,e){return kz(t,e).format(n)}var Fz=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Lz=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function qr(n,t,e){return n?Fz(t,e):Lz()}function xy(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Ey(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function UA(n){return n==="angle"?{between:_a,compare:B$,normalize:yn}:{between:Bi,compare:(t,e)=>t-e,normalize:t=>t}}function lA({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function Vz(n,t,e){let{property:i,start:s,end:r}=e,{between:o,normalize:a}=UA(i),l=t.length,{start:c,end:u,loop:d}=n,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(t[c%l][i]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function Sy(n,t,e){if(!e)return[n];let{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=UA(i),{start:u,end:d,loop:h,style:f}=Vz(n,t,e),p=[],g=!1,m=null,_,b,y,v=()=>l(s,y,_)&&a(s,y)!==0,x=()=>a(r,_)===0||l(r,y,_),S=()=>g||v(),D=()=>!g||x();for(let A=u,E=u;A<=d;++A)b=t[A%o],!b.skip&&(_=c(b[i]),_!==y&&(g=l(_,s,r),m===null&&S()&&(m=a(_,s)===0?A:E),m!==null&&D()&&(p.push(lA({start:m,end:A,loop:h,count:o,style:f})),m=null),E=A,y=_));return m!==null&&p.push(lA({start:m,end:d,loop:h,count:o,style:f})),p}function Dy(n,t){let e=[],i=n.segments;for(let s=0;s<i.length;s++){let r=Sy(i[s],n.points,t);r.length&&e.push(...r)}return e}function Bz(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function jz(n,t,e,i){let s=n.length,r=[],o=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:t%s,end:(l-1)%s,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function $A(n,t){let e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];let r=!!n._loop,{start:o,end:a}=Bz(e,s,r,i);if(i===!0)return cA(n,[{start:o,end:a,loop:r}],e,t);let l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return cA(n,jz(e,o,l,c),e,t)}function cA(n,t,e,i){return!i||!i.setContext||!e?t:Hz(n,t,e,i)}function Hz(n,t,e,i){let s=n._chart.getContext(),r=uA(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[],u=r,d=t[0].start,h=d;function f(p,g,m,_){let b=a?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=b;for(;e[g%l].skip;)g+=b;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:_}),u=_,d=g%l)}}for(let p of t){d=a?d:p.start;let g=e[d%l],m;for(h=d+1;h<=p.end;h++){let _=e[h%l];m=uA(i.setContext(ws(s,{type:"segment",p0:g,p1:_,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Uz(m,u)&&f(d,h-1,p.loop,u),g=_,u=m}d<h-1&&f(d,h-1,p.loop,u)}return c}function uA(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Uz(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}var Fy=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){let r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ry.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;let r=i.items,o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Cs=new Fy,zA="transparent",$z={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=hy(n||zA),s=i.valid&&hy(t||zA);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},Ly=class{constructor(t,e,i,s){let r=e[i];s=va([t.to,s,r,t.from]);let o=va([t.from,r,s]);this._active=!0,this._fn=t.fn||$z[t.type||typeof o],this._easing=da[t.easing]||da.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=va([t.to,e,s,t.from]),this._from=va([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to,l;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}},zz=["x","y","borderWidth","radius","tension"],Wz=["color","borderColor","backgroundColor"];Me.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var Gz=Object.keys(Me.animation);Me.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});Me.set("animations",{colors:{type:"color",properties:Wz},numbers:{type:"number",properties:zz}});Me.describe("animations",{_fallback:"animation"});Me.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});var op=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!De(t))return;let e=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{let s=t[i];if(!De(s))return;let r={};for(let o of Gz)r[o]=s[o];(Ge(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!e.has(o))&&e.set(o,r)})})}_animateOptions(t,e){let i=e.options,s=Yz(t,i);if(!s)return[];let r=this._createAnimations(s,i);return i.$shared&&qz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){let i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}let u=e[c],d=r[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=d=new Ly(h,t,c,u),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return Cs.add(this._chart,i),!0}};function qz(n,t){let e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){let r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Yz(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function WA(n,t){let e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function Kz(n,t,e){if(e===!1)return!1;let i=WA(n,e),s=WA(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Xz(n){let t,e,i,s;return De(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function FT(n,t){let e=[],i=n._getSortedDatasetMetas(t),s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function GA(n,t,e,i={}){let s=n.keys,r=i.mode==="single",o,a,l,c;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===e){if(i.all)continue;break}c=n.values[l],ft(c)&&(r||t===0||pi(t)===pi(c))&&(t+=c)}return t}}function Qz(n){let t=Object.keys(n),e=new Array(t.length),i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],e[i]={x:r,y:n[r]};return e}function qA(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Zz(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Jz(n){let{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function e5(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function YA(n,t,e,i){for(let s of t.getMatchingVisibleMetas(i).reverse()){let r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function KA(n,t){let{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=Zz(r,o,i),d=t.length,h;for(let f=0;f<d;++f){let p=t[f],{[l]:g,[c]:m}=p,_=p._stacks||(p._stacks={});h=_[c]=e5(s,u,g),h[a]=m,h._top=YA(h,o,!0,i.type),h._bottom=YA(h,o,!1,i.type)}}function My(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function t5(n,t){return ws(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function n5(n,t,e){return ws(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function vc(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let s of t){let r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e]}}}var Ay=n=>n==="reset"||n==="none",XA=(n,t)=>t?n:Object.assign({},n),i5=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:FT(e,!0),values:null},Ui=(()=>{class n{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qA(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&vc(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,s=this.getDataset(),r=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=i.xAxisID=fe(s.xAxisID,My(e,"x")),a=i.yAxisID=fe(s.yAxisID,My(e,"y")),l=i.rAxisID=fe(s.rAxisID,My(e,"r")),c=i.indexAxis,u=i.iAxisID=r(c,o,a,l),d=i.vAxisID=r(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&iy(this._data,this),e._stacked&&vc(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),s=this._data;if(De(i))this._data=Qz(i);else if(s!==i){if(s){iy(s,this);let r=this._cachedMeta;vc(r),r._parsed=[]}i&&Object.isExtensible(i)&&wA(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,s=this.getDataset(),r=!1;this._dataCheck();let o=i._stacked;i._stacked=qA(i.vScale,i),i.stack!==s.stack&&(r=!0,vc(i),i.stack=s.stack),this._resyncElements(e),(r||o!==i._stacked)&&KA(this,i._parsed)}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let{_cachedMeta:s,_data:r}=this,{iScale:o,_stacked:a}=s,l=o.axis,c=e===0&&i===r.length?!0:s._sorted,u=e>0&&s._parsed[e-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Ge(r[e])?f=this.parseArrayData(s,r,e,i):De(r[e])?f=this.parseObjectData(s,r,e,i):f=this.parsePrimitiveData(s,r,e,i);let p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)s._parsed[d+e]=h=f[d],c&&(p()&&(c=!1),u=h);s._sorted=c}a&&KA(this,f)}parsePrimitiveData(e,i,s,r){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(r),f,p,g;for(f=0,p=r;f<p;++f)g=f+s,h[f]={[l]:d||o.parse(u[g],g),[c]:a.parse(i[g],g)};return h}parseArrayData(e,i,s,r){let{xScale:o,yScale:a}=e,l=new Array(r),c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=i[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(e,i,s,r){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r),d,h,f,p;for(d=0,h=r;d<h;++d)f=d+s,p=i[f],u[d]={x:o.parse(ys(p,l),f),y:a.parse(ys(p,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,s){let r=this.chart,o=this._cachedMeta,a=i[e.axis],l={keys:FT(r,!0),values:i._stacks[e.axis]};return GA(l,a,o.index,{mode:s})}updateRangeFromParsed(e,i,s,r){let o=s[i.axis],a=o===null?NaN:o,l=r&&s._stacks[i.axis];r&&l&&(r.values=l,a=GA(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){let s=this._cachedMeta,r=s._parsed,o=s._sorted&&e===s.iScale,a=r.length,l=this._getOtherScale(e),c=i5(i,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Jz(l),f,p;function g(){p=r[f];let m=p[l.axis];return!ft(p[e.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,e,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){let i=this._cachedMeta._parsed,s=[],r,o,a;for(r=0,o=i.length;r<o;++r)a=i[r][e.axis],ft(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,s=i.iScale,r=i.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){let i=this._cachedMeta;this.update(e||"default"),i._clip=Xz(fe(this.options.clip,Kz(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,i=this.chart,s=this._cachedMeta,r=s.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop,d;for(s.dataset&&s.dataset.draw(e,o,l,c),d=l;d<l+c;++d){let h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(e,o))}for(d=0;d<a.length;++d)a[d].draw(e,o)}getStyle(e,i){let s=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,i,s){let r=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=n5(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=t5(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",s){let r=i==="active",o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&On(s);if(l)return XA(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Me.elements[e]),g=()=>this.getContext(s,r),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=c,o[a]=Object.freeze(XA(m,c))),m}_resolveAnimations(e,i,s){let r=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(r.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(e,s,i))}let u=new op(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Ay(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let s=this.resolveDataElementOptions(e,i),r=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(i,o)||o!==r;return this.updateSharedOptions(o,i,s),{sharedOptions:o,includeOptions:a}}updateElement(e,i,s,r){Ay(r)?Object.assign(e,s):this._resolveAnimations(i,r).update(e,s)}updateSharedOptions(e,i,s){e&&!Ay(i)&&this._resolveAnimations(void 0,i).update(e,s)}_setStyle(e,i,s,r){e.active=r;let o=this.getStyle(i,r);this._resolveAnimations(i,s,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,i,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,s=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let r=s.length,o=i.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,i,s=!0){let r=this._cachedMeta,o=r.data,a=e+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,i),s&&this.updateElements(o,e,i,"reset")}updateElements(e,i,s,r){}_removeElements(e,i){let s=this._cachedMeta;if(this._parsing){let r=s._parsed.splice(e,i);s._stacked&&vc(s,r)}s.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,s,r]=e;this[i](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();Ui.prototype.datasetElementType=null;Ui.prototype.dataElementType=null;function s5(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=sy(i.sort((s,r)=>s-r))}return n._cache.$bar}function r5(n){let t=n.iScale,e=s5(t,n.type),i=t._length,s,r,o,a,l=()=>{o===32767||o===-32768||(On(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function o5(n,t,e,i){let s=e.barThickness,r,o;return Ne(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function a5(n,t,e,i){let s=t.pixels,r=s[n],o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null,l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function l5(n,t,e,i){let s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function LT(n,t,e,i){return Ge(n)?l5(n,t,e,i):t[e.axis]=e.parse(n,i),t}function QA(n,t,e,i){let s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[],c,u,d,h;for(c=e,u=e+i;c<u;++c)h=t[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(LT(h,d,r,c));return l}function Ty(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function c5(n,t,e){return n!==0?pi(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function u5(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function d5(n,t,e,i){let s=t.borderSkipped,r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=u5(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=c:(e._bottom||0)===i?s=u:(r[ZA(u,o,a,l)]=!0,s=c)),r[ZA(s,o,a,l)]=!0,n.borderSkipped=r}function ZA(n,t,e,i){return i?(n=h5(n,t,e),n=JA(n,e,t)):n=JA(n,t,e),n}function h5(n,t,e){return n===t?e:n===e?t:n}function JA(n,t,e){return n==="start"?t:n==="end"?e:n}function f5(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var p5=(()=>{class n extends Ui{parsePrimitiveData(e,i,s,r){return QA(e,i,s,r)}parseArrayData(e,i,s,r){return QA(e,i,s,r)}parseObjectData(e,i,s,r){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],f,p,g,m;for(f=s,p=s+r;f<p;++f)m=i[f],g={},g[o.axis]=o.parse(ys(m,u),f),h.push(LT(ys(m,d),g,a,f));return h}updateRangeFromParsed(e,i,s,r){super.updateRangeFromParsed(e,i,s,r);let o=s._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let i=this._cachedMeta,{iScale:s,vScale:r}=i,o=this.getParsed(e),a=o._custom,l=Ty(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,s,r){let o=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,r);for(let p=i;p<i+s;p++){let g=this.getParsed(p),m=o||Ne(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,d),b=(g._stacks||{})[l.axis],y={horizontal:u,base:m.base,enableBorderRadius:!b||Ty(g._custom)||a===b._top||a===b._bottom,x:u?m.head:_.center,y:u?_.center:m.head,height:u?_.size:Math.abs(m.size),width:u?Math.abs(m.size):_.size};f&&(y.options=h||this.resolveDataElementOptions(p,e[p].active?"active":r));let v=y.options||e[p].options;d5(y,v,b,a),f5(y,v,d.ratio),this.updateElement(e[p],p,y,r)}}_getStacks(e,i){let{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=s.options.stacked,a=[],l=c=>{let u=c.controller.getParsed(i),d=u&&u[c.vScale.axis];if(Ne(d)||isNaN(d))return!0};for(let c of r)if(!(i!==void 0&&l(c))&&((o===!1||a.indexOf(c.stack)===-1||o===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,s){let r=this._getStacks(e,s),o=i!==void 0?r.indexOf(i):-1;return o===-1?r.length-1:o}_getRuler(){let e=this.options,i=this._cachedMeta,s=i.iScale,r=[],o,a;for(o=0,a=i.data.length;o<a;++o)r.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));let l=e.barThickness;return{min:l||r5(i),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:i,_stacked:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Ty(c),d=l[i.axis],h=0,f=s?this.applyStack(i,l,s):d,p,g;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&pi(d)!==pi(c.barEnd)&&(h=0),h+=d);let m=!Ne(r)&&!u?r:h,_=i.getPixelForValue(m);if(this.chart.getDataVisibility(e)?p=i.getPixelForValue(h+f):p=_,g=p-_,Math.abs(g)<o){g=c5(g,i,a)*o,d===a&&(_-=g/2);let b=i.getPixelForDecimal(0),y=i.getPixelForDecimal(1),v=Math.min(b,y),x=Math.max(b,y);_=Math.max(Math.min(_,x),v),p=_+g}if(_===i.getPixelForValue(a)){let b=pi(g)*i.getLineWidthForValue(a)/2;_+=b,g-=b}return{size:g,base:_,head:p,center:p+g/2}}_calculateBarIndexPixels(e,i){let s=i.scale,r=this.options,o=r.skipNull,a=fe(r.maxBarThickness,1/0),l,c;if(i.grouped){let u=o?this._getStackCount(e):i.stackCount,d=r.barThickness==="flex"?a5(e,i,r,u):o5(e,i,r,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,i=e.vScale,s=e.data,r=s.length,o=0;for(;o<r;++o)this.getParsed(o)[i.axis]!==null&&s[o].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),g5=(()=>{class n extends Ui{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,s,r){let o=super.parsePrimitiveData(e,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(e,i,s,r){let o=super.parseArrayData(e,i,s,r);for(let a=0;a<o.length;a++){let l=i[s+a];o[a]._custom=fe(l[2],this.resolveDataElementOptions(a+s).radius)}return o}parseObjectData(e,i,s,r){let o=super.parseObjectData(e,i,s,r);for(let a=0;a<o.length;a++){let l=i[s+a];o[a]._custom=fe(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let s=e.length-1;s>=0;--s)i=Math.max(i,e[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,{xScale:s,yScale:r}=i,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,s,r){let o=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,r),d=a.axis,h=l.axis;for(let f=i;f<i+s;f++){let p=e[f],g=!o&&this.getParsed(f),m={},_=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),b=m[h]=o?l.getBasePixel():l.getPixelForValue(g[h]);m.skip=isNaN(_)||isNaN(b),u&&(m.options=c||this.resolveDataElementOptions(f,p.active?"active":r),o&&(m.options.radius=0)),this.updateElement(p,f,m,r)}}resolveDataElementOptions(e,i){let s=this.getParsed(e),r=super.resolveDataElementOptions(e,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let o=r.radius;return i!=="active"&&(r.radius=0),r.radius+=fe(s&&s._custom,o),r}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}},n})();function m5(n,t,e){let i=1,s=1,r=0,o=0;if(t<Ue){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(y,v,x)=>_a(y,a,l,!0)?1:Math.max(v,v*e,x,x*e),p=(y,v,x)=>_a(y,a,l,!0)?-1:Math.min(v,v*e,x,x*e),g=f(0,c,d),m=f(ut,u,h),_=p(Je,c,d),b=p(Je+ut,u,h);i=(g-_)/2,s=(m-b)/2,r=-(g+_)/2,o=-(m+b)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}var VT=(()=>{class n extends Ui{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let o=c=>+s[c];if(De(s[e])){let{key:c="value"}=this._parsing;o=u=>+ys(s[u],c)}let a,l;for(a=e,l=e+i;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return Jn(this.options.rotation-90)}_getCircumference(){return Jn(this.options.circumference)}_getRotationExtents(){let e=Ue,i=-Ue;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){let r=this.chart.getDatasetMeta(s).controller,o=r._getRotation(),a=r._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){let i=this.chart,{chartArea:s}=i,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(hA(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=m5(h,d,c),_=(s.width-a)/f,b=(s.height-a)/p,y=Math.max(Math.min(_,b)/2,0),v=Qv(this.options.radius,y),x=Math.max(v*c,0),S=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){let s=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/Ue)}updateElements(e,i,s,r){let o=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(i,r),b=this._getRotation(),y;for(y=0;y<i;++y)b+=this._circumference(y,o);for(y=i;y<i+s;++y){let v=this._circumference(y,o),x=e[y],S={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+v,circumference:v,outerRadius:g,innerRadius:p};_&&(S.options=m||this.resolveDataElementOptions(y,x.active?"active":r)),b+=v,this.updateElement(x,y,S,r)}}calculateTotal(){let e=this._cachedMeta,i=e.data,s=0,r;for(r=0;r<i.length;r++){let o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?Ue*(Math.abs(e)/i):0}getLabelAndValue(e){let i=this._cachedMeta,s=this.chart,r=s.data.labels||[],o=ya(i._parsed[e],s.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let i=0,s=this.chart,r,o,a,l,c;if(!e){for(r=0,o=s.data.datasets.length;r<o;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),e=a.data,l=a.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let s=0,r=e.length;s<r;++s){let o=this.resolveDataElementOptions(s);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(e){return Math.max(fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((s,r)=>{let a=t.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){let e=t.label,i=": "+t.formattedValue;return Ge(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}},n})(),_5=(()=>{class n extends Ui{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:s,data:r=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:l,count:c}=ay(i,r,a);this._drawStart=l,this._drawCount=c,ly(i)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=r;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},e),this.updateElements(r,l,c,e)}updateElements(e,i,s,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,r),f=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,_=Gr(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||r==="none",y=i>0&&this.getParsed(i-1);for(let v=i;v<i+s;++v){let x=e[v],S=this.getParsed(v),D=b?x:{},A=Ne(S[p]),E=D[f]=a.getPixelForValue(S[f],v),I=D[p]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,S,c):S[p],v);D.skip=isNaN(E)||isNaN(I)||A,D.stop=v>0&&Math.abs(S[f]-y[f])>_,m&&(D.parsed=S,D.raw=u.data[v]),h&&(D.options=d||this.resolveDataElementOptions(v,x.active?"active":r)),b||this.updateElement(x,v,D,r),y=S}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,s=i.options&&i.options.borderWidth||0,r=e.data||[];if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),b5=(()=>{class n extends Ui{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,s=this.chart,r=s.data.labels||[],o=ya(i._parsed[e].r,s.options.locale);return{label:r[e]||"",value:o}}parseObjectData(e,i,s,r){return vy.bind(this)(e,i,s,r)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,r)=>{let o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,s=e.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),a=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,s,r){let o=r==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Je,p=f,g,m=360/this.countVisibleElements();for(g=0;g<i;++g)p+=this._computeAngle(g,r,m);for(g=i;g<i+s;g++){let _=e[g],b=p,y=p+this._computeAngle(g,r,m),v=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=y,o&&(c.animateScale&&(v=0),c.animateRotate&&(b=y=f));let x={x:d,y:h,innerRadius:0,outerRadius:v,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(g,_.active?"active":r)};this.updateElement(_,g,x,r)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(e,i,s){return this.chart.getDataVisibility(e)?Jn(this.resolveDataElementOptions(e,i).angle||s):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((s,r)=>{let a=t.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){return t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),v5=(()=>{class n extends VT{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),y5=(()=>{class n extends Ui{getLabelAndValue(e){let i=this._cachedMeta.vScale,s=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(e,i,s,r){return vy.bind(this)(e,i,s,r)}update(e){let i=this._cachedMeta,s=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(s.points=r,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===r.length,options:a};this.updateElement(s,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,i,s,r){let o=this._cachedMeta.rScale,a=r==="reset";for(let l=i;l<i+s;l++){let c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":r),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(c,l,p,r)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})(),kn=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Gr(this.x)&&Gr(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}};kn.defaults={};kn.defaultRoutes=void 0;var BT={values(n){return Ge(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,s,r=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=w5(n,e)}let o=Nn(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ya(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";let i=n/Math.pow(10,Math.floor(Nn(n)));return i===1||i===2||i===5?BT.numeric.call(this,n,t,e):""}};function w5(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var hp={formatters:BT};Me.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Me.route("scale.ticks","color","","color");Me.route("scale.grid","color","","borderColor");Me.route("scale.grid","borderColor","","borderColor");Me.route("scale.title","color","","color");Me.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});Me.describe("scales",{_fallback:"scale"});Me.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function C5(n,t){let e=n.options.ticks,i=e.maxTicksLimit||x5(n),s=e.major.enabled?S5(t):[],r=s.length,o=s[0],a=s[r-1],l=[];if(r>i)return D5(t,l,s,r/i),l;let c=E5(s,t,i);if(r>0){let u,d,h=r>1?Math.round((a-o)/(r-1)):null;for(Jf(t,l,c,Ne(h)?0:o-h,o),u=0,d=r-1;u<d;u++)Jf(t,l,c,s[u],s[u+1]);return Jf(t,l,c,a,Ne(h)?t.length:a+h),l}return Jf(t,l,c),l}function x5(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function E5(n,t,e){let i=M5(n),s=t.length/e;if(!i)return Math.max(s,1);let r=gA(i);for(let o=0,a=r.length-1;o<a;o++){let l=r[o];if(l>s)return l}return Math.max(s,1)}function S5(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function D5(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function Jf(n,t,e,i,s){let r=fe(i,0),o=Math.min(fe(s,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),u=r;u<0;)a++,u=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(r+a*e))}function M5(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var A5=n=>n==="left"?"right":n==="right"?"left":n,eT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e;function tT(n,t){let e=[],i=n.length/t,s=n.length,r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function T5(n,t,e){let i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(s),c;if(!(e&&(i===1?c=Math.max(l-r,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function I5(n,t){Ve(n,e=>{let i=e.gc,s=i.length/2,r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function yc(n){return n.drawTicks?n.tickLength:0}function nT(n,t){if(!n.display)return 0;let e=wt(n.font,t),i=Lt(n.padding);return(Ge(n.text)?n.text.length:1)*e.lineHeight+i.height}function P5(n,t){return ws(n,{scale:t,type:"scale"})}function O5(n,t,e){return ws(n,{tick:e,index:t,type:"tick"})}function R5(n,t,e){let i=Gf(n);return(e&&t!=="right"||!e&&t==="right")&&(i=A5(i)),i}function N5(n,t,e,i){let{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,f,p,g=o-s,m=a-r;if(n.isHorizontal()){if(f=Ft(i,r,a),De(e)){let _=Object.keys(e)[0],b=e[_];p=u[_].getPixelForValue(b)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=eT(n,e,t);h=a-r}else{if(De(e)){let _=Object.keys(e)[0],b=e[_];f=u[_].getPixelForValue(b)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=eT(n,e,t);p=Ft(i,o,s),d=e==="left"?-ut:ut}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var Kr=class n extends kn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Rn(t,Number.POSITIVE_INFINITY),e=Rn(e,Number.NEGATIVE_INFINITY),i=Rn(i,Number.POSITIVE_INFINITY),s=Rn(s,Number.NEGATIVE_INFINITY),{min:Rn(t,i),max:Rn(e,s),minDefined:ft(t),maxDefined:ft(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:Rn(e,Rn(i,e)),max:Rn(i,Rn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OA(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?tT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=C5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),qe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=qe(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=this.ticks.length,s=e.minRotation||0,r=e.maxRotation,o=s,a,l,c;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Mt(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-yc(t.grid)-e.padding-nT(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=zf(Math.min(Math.asin(Mt((u.highest.height+6)/a,-1,1)),Math.asin(Mt(l/c,-1,1))-Math.asin(Mt(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=nT(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=yc(r)+l):(t.height=this.maxHeight,t.width=yc(r)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=Jn(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let _=i.mirror?0:m*d.width+g*h.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{let _=i.mirror?0:g*d.width+m*h.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){let{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;l?c?(h=s*t.width,f=i*e.height):(h=i*t.height,f=s*e.width):r==="start"?f=e.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,f=e.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Ne(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=tT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){let{ctx:i,_longestTextCache:s}=this,r=[],o=[],a=0,l=0,c,u,d,h,f,p,g,m,_,b,y;for(c=0;c<e;++c){if(h=t[c].label,f=this._resolveTickFontOptions(c),i.font=p=f.string,g=s[p]=s[p]||{data:{},gc:[]},m=f.lineHeight,_=b=0,!Ne(h)&&!Ge(h))_=pc(i,g.data,g.gc,_,h),b=m;else if(Ge(h))for(u=0,d=h.length;u<d;++u)y=h[u],!Ne(y)&&!Ge(y)&&(_=pc(i,g.data,g.gc,_,y),b+=m);r.push(_),o.push(b),a=Math.max(_,a),l=Math.max(b,l)}I5(s,e);let v=r.indexOf(a),x=o.indexOf(l),S=D=>({width:r[D]||0,height:o[D]||0});return{first:S(0),last:S(e-1),widest:S(v),highest:S(x),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return _A(this._alignToPixels?Js(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=O5(this.getContext(),t,i))}return this.$context||(this.$context=P5(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=Jn(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,s=this.options,{grid:r,position:o}=s,a=r.offset,l=this.isHorizontal(),u=this.ticks.length+(a?1:0),d=yc(r),h=[],f=r.setContext(this.getContext()),p=f.drawBorder?f.borderWidth:0,g=p/2,m=function(z){return Js(i,z,p)},_,b,y,v,x,S,D,A,E,I,N,W;if(o==="top")_=m(this.bottom),S=this.bottom-d,A=_-g,I=m(t.top)+g,W=t.bottom;else if(o==="bottom")_=m(this.top),I=t.top,W=m(t.bottom)-g,S=_+g,A=this.top+d;else if(o==="left")_=m(this.right),x=this.right-d,D=_-g,E=m(t.left)+g,N=t.right;else if(o==="right")_=m(this.left),E=t.left,N=m(t.right)-g,x=_+g,D=this.left+d;else if(e==="x"){if(o==="center")_=m((t.top+t.bottom)/2+.5);else if(De(o)){let z=Object.keys(o)[0],ce=o[z];_=m(this.chart.scales[z].getPixelForValue(ce))}I=t.top,W=t.bottom,S=_+g,A=S+d}else if(e==="y"){if(o==="center")_=m((t.left+t.right)/2);else if(De(o)){let z=Object.keys(o)[0],ce=o[z];_=m(this.chart.scales[z].getPixelForValue(ce))}x=_-g,D=x-d,E=t.left,N=t.right}let Q=fe(s.ticks.maxTicksLimit,u),ee=Math.max(1,Math.ceil(u/Q));for(b=0;b<u;b+=ee){let z=r.setContext(this.getContext(b)),ce=z.lineWidth,$=z.color,ne=z.borderDash||[],Fn=z.borderDashOffset,cn=z.tickWidth,It=z.tickColor,Xe=z.tickBorderDash||[],Ye=z.tickBorderDashOffset;y=T5(this,b,a),y!==void 0&&(v=Js(i,y,ce),l?x=D=E=N=v:S=A=I=W=v,h.push({tx1:x,ty1:S,tx2:D,ty2:A,x1:E,y1:I,x2:N,y2:W,width:ce,color:$,borderDash:ne,borderDashOffset:Fn,tickWidth:cn,tickColor:It,tickBorderDash:Xe,tickBorderDashOffset:Ye}))}return this._ticksLength=u,this._borderValue=_,h}_computeLabelItems(t){let e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=yc(i.grid),f=h+u,p=d?-u:f,g=-Jn(this.labelRotation),m=[],_,b,y,v,x,S,D,A,E,I,N,W,Q="middle";if(s==="top")S=this.bottom-p,D=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+p,D=this._getXAxisLabelAlignment();else if(s==="left"){let z=this._getYAxisLabelAlignment(h);D=z.textAlign,x=z.x}else if(s==="right"){let z=this._getYAxisLabelAlignment(h);D=z.textAlign,x=z.x}else if(e==="x"){if(s==="center")S=(t.top+t.bottom)/2+f;else if(De(s)){let z=Object.keys(s)[0],ce=s[z];S=this.chart.scales[z].getPixelForValue(ce)+f}D=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")x=(t.left+t.right)/2-f;else if(De(s)){let z=Object.keys(s)[0],ce=s[z];x=this.chart.scales[z].getPixelForValue(ce)}D=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?Q="top":l==="end"&&(Q="bottom"));let ee=this._getLabelSizes();for(_=0,b=a.length;_<b;++_){y=a[_],v=y.label;let z=r.setContext(this.getContext(_));A=this.getPixelForTick(_)+r.labelOffset,E=this._resolveTickFontOptions(_),I=E.lineHeight,N=Ge(v)?v.length:1;let ce=N/2,$=z.color,ne=z.textStrokeColor,Fn=z.textStrokeWidth,cn=D;o?(x=A,D==="inner"&&(_===b-1?cn=this.options.reverse?"left":"right":_===0?cn=this.options.reverse?"right":"left":cn="center"),s==="top"?c==="near"||g!==0?W=-N*I+I/2:c==="center"?W=-ee.highest.height/2-ce*I+I:W=-ee.highest.height+I/2:c==="near"||g!==0?W=I/2:c==="center"?W=ee.highest.height/2-ce*I:W=ee.highest.height-N*I,d&&(W*=-1)):(S=A,W=(1-N)*I/2);let It;if(z.showLabelBackdrop){let Xe=Lt(z.backdropPadding),Ye=ee.heights[_],gi=ee.widths[_],$i=S+W-Xe.top,Vt=x-Xe.left;switch(Q){case"middle":$i-=Ye/2;break;case"bottom":$i-=Ye;break}switch(D){case"center":Vt-=gi/2;break;case"right":Vt-=gi;break}It={left:Vt,top:$i,width:gi+Xe.width,height:Ye+Xe.height,color:z.backdropColor}}m.push({rotation:g,label:v,font:E,color:$,strokeColor:ne,strokeWidth:Fn,textOffset:W,textAlign:cn,textBaseline:Q,translation:[x,S],backdrop:It})}return m}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-Jn(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width,c,u;return e==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){let l=s[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{grid:i}}=this,s=i.setContext(this.getContext()),r=i.drawBorder?s.borderWidth:0;if(!r)return;let o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue,l,c,u,d;this.isHorizontal()?(l=Js(t,this.left,r)-r/2,c=Js(t,this.right,o)+o/2,u=d=a):(u=Js(t,this.top,r)-r/2,d=Js(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=s.borderWidth,e.strokeStyle=s.borderColor,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,s=this._computeLabelArea();s&&_c(i,s);let r=this._labelItems||(this._labelItems=this._computeLabelItems(t)),o,a;for(o=0,a=r.length;o<a;++o){let l=r[o],c=l.font,u=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;er(i,u,0,d,c,l)}s&&bc(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;let r=wt(i.font),o=Lt(i.padding),a=i.align,l=r.lineHeight/2;e==="bottom"||e==="center"||De(e)?(l+=o.bottom,Ge(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=N5(this,l,e,a);er(t,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:h,textAlign:R5(a,e,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=fe(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[],r,o;for(r=0,o=e.length;r<o;++r){let a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return wt(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Ca=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;L5(e)&&(i=this.register(e));let s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,k5(t,o,i),this.override&&Me.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Me[s]&&(delete Me[s][i],this.override&&delete Zs[i])}};function k5(n,t,e){let i=ha(Object.create(null),[e?Me.get(e):{},Me.get(t),n.defaults]);Me.set(t,i),n.defaultRoutes&&F5(t,n.defaultRoutes),n.descriptors&&Me.describe(t,n.descriptors)}function F5(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Me.route(r,s,l,a)})}function L5(n){return"id"in n&&"defaults"in n}var Vy=class{constructor(){this.controllers=new Ca(Ui,"datasets",!0),this.elements=new Ca(kn,"elements"),this.plugins=new Ca(Object,"plugins"),this.scales=new Ca(Kr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{let r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Ve(s,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let s=$f(t);qe(i["before"+s],[],i),e[t](i),qe(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}},Hi=new Vy,V5=(()=>{class n extends Ui{update(e){let i=this._cachedMeta,{data:s=[]}=i,r=this.chart._animationsDisabled,{start:o,count:a}=ay(i,s,r);if(this._drawStart=o,this._drawCount=a,ly(i)&&(o=0,a=s.length),this.options.showLine){let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;let u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:u},e)}this.updateElements(s,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=Hi.getElement("line")),super.addElements()}updateElements(e,i,s,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,r),h=this.getSharedOptions(d),f=this.includeOptions(r,h),p=a.axis,g=l.axis,{spanGaps:m,segment:_}=this.options,b=Gr(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||r==="none",v=i>0&&this.getParsed(i-1);for(let x=i;x<i+s;++x){let S=e[x],D=this.getParsed(x),A=y?S:{},E=Ne(D[g]),I=A[p]=a.getPixelForValue(D[p],x),N=A[g]=o||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,D,c):D[g],x);A.skip=isNaN(I)||isNaN(N)||E,A.stop=x>0&&Math.abs(D[p]-v[p])>b,_&&(A.parsed=D,A.raw=u.data[x]),f&&(A.options=h||this.resolveDataElementOptions(x,S.active?"active":r)),y||this.updateElement(S,x,A,r),v=D}this.updateSharedOptions(h,r,d)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!i.length)return r;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,a)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(t){return"("+t.label+", "+t.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})(),B5=Object.freeze({__proto__:null,BarController:p5,BubbleController:g5,DoughnutController:VT,LineController:_5,PolarAreaController:b5,PieController:v5,RadarController:y5,ScatterController:V5});function Yr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var j5=(()=>{class n{constructor(e){this.options=e||{}}init(e){}formats(){return Yr()}parse(e,i){return Yr()}format(e,i){return Yr()}add(e,i,s){return Yr()}diff(e,i,s){return Yr()}startOf(e,i,s){return Yr()}endOf(e,i){return Yr()}}return n.override=function(t){Object.assign(n.prototype,t)},n})(),H5={_date:j5};function U5(n,t,e,i){let{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let l=a._reversePixels?bA:Li;if(i){if(s._sharedOptions){let c=r[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){let d=l(r,t,e-u),h=l(r,t,e+u);return{lo:d.lo,hi:h.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function Pc(n,t,e,i,s){let r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){let{index:c,data:u}=r[a],{lo:d,hi:h}=U5(r[a],t,o,s);for(let f=d;f<=h;++f){let p=u[f];p.skip||i(p,c,f)}}}function $5(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){let r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Iy(n,t,e,i,s){let r=[];return!s&&!n.isPointInArea(t)||Pc(n,e,t,function(a,l,c){!s&&!fa(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function z5(n,t,e,i){let s=[];function r(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=ny(o,{x:t.x,y:t.y});_a(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Pc(n,e,t,r),s}function W5(n,t,e,i,s,r){let o=[],a=$5(e),l=Number.POSITIVE_INFINITY;function c(u,d,h){let f=u.inRange(t.x,t.y,s);if(i&&!f)return;let p=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!f)return;let m=a(t,p);m<l?(o=[{element:u,datasetIndex:d,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:h})}return Pc(n,e,t,c),o}function Py(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?z5(n,t,e,s):W5(n,t,e,i,s,r)}function iT(n,t,e,i,s){let r=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Pc(n,e,t,(l,c,u)=>{l[o](t[e],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var G5={evaluateInteractionItems:Pc,modes:{index(n,t,e,i){let s=nr(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Iy(n,s,r,i,o):Py(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){let s=nr(t,n),r=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?Iy(n,s,r,i,o):Py(n,s,r,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){let s=nr(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Iy(n,s,r,i,o)},nearest(n,t,e,i){let s=nr(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Py(n,s,r,e.intersect,i,o)},x(n,t,e,i){let s=nr(t,n);return iT(n,s,"x",e.intersect,i)},y(n,t,e,i){let s=nr(t,n);return iT(n,s,"y",e.intersect,i)}}},jT=["left","top","right","bottom"];function wc(n,t){return n.filter(e=>e.pos===t)}function sT(n,t){return n.filter(e=>jT.indexOf(e.pos)===-1&&e.box.axis===t)}function Cc(n,t){return n.sort((e,i)=>{let s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function q5(n){let t=[],e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function Y5(n){let t={};for(let e of n){let{stack:i,pos:s,stackWeight:r}=e;if(!i||!jT.includes(s))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function K5(n,t){let e=Y5(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t,r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&t.availableHeight)}return e}function X5(n){let t=q5(n),e=Cc(t.filter(c=>c.box.fullSize),!0),i=Cc(wc(t,"left"),!0),s=Cc(wc(t,"right")),r=Cc(wc(t,"top"),!0),o=Cc(wc(t,"bottom")),a=sT(t,"x"),l=sT(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:wc(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function rT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function HT(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Q5(n,t,e,i){let{pos:s,box:r}=e,o=n.maxPadding;if(!De(s)){e.size&&(n[s]-=e.size);let d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[s]+=e.size}r.getPadding&&HT(o,r.getPadding());let a=Math.max(0,t.outerWidth-rT(o,n,"left","right")),l=Math.max(0,t.outerHeight-rT(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function Z5(n){let t=n.maxPadding;function e(i){let s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function J5(n,t){let e=t.maxPadding;function i(s){let r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Ec(n,t,e,i){let s=[],r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,J5(a.horizontal,t));let{same:d,other:h}=Q5(t,e,a,i);c|=d&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&Ec(s,t,e,i)||u}function ep(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function oT(n,t,e,i){let s=e.padding,{x:r,y:o}=t;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;On(c.start)&&(o=c.start),l.fullSize?ep(l,s.left,o,e.outerWidth-s.right-s.left,h):ep(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;On(c.start)&&(r=c.start),l.fullSize?ep(l,r,s.top,h,e.outerHeight-s.bottom-s.top):ep(l,r,t.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}Me.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Qt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let s=Lt(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=X5(n.boxes),l=a.vertical,c=a.horizontal;Ve(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);HT(h,Lt(i));let f=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),p=K5(l.concat(c),d);Ec(a.fullSize,f,d,p),Ec(l,f,d,p),Ec(c,f,d,p)&&Ec(l,f,d,p),Z5(f),oT(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,oT(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ve(a.chartArea,g=>{let m=g.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},ap=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}},By=class extends ap{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},rp="$chartjs",eW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aT=n=>n===null||n==="";function tW(n,t){let e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[rp]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",aT(s)){let r=Cy(n,"width");r!==void 0&&(n.width=r)}if(aT(i))if(n.style.height==="")n.height=n.width/(t||2);else{let r=Cy(n,"height");r!==void 0&&(n.height=r)}return n}var UT=BA?{passive:!0}:!1;function nW(n,t,e){n.addEventListener(t,e,UT)}function iW(n,t,e){n.canvas.removeEventListener(t,e,UT)}function sW(n,t){let e=eW[n.type]||n.type,{x:i,y:s}=nr(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function lp(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function rW(n,t,e){let i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||lp(a.addedNodes,i),o=o&&!lp(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function oW(n,t,e){let i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||lp(a.removedNodes,i),o=o&&!lp(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}var Dc=new Map,lT=0;function $T(){let n=window.devicePixelRatio;n!==lT&&(lT=n,Dc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function aW(n,t){Dc.size||window.addEventListener("resize",$T),Dc.set(n,t)}function lW(n){Dc.delete(n),Dc.size||window.removeEventListener("resize",$T)}function cW(n,t,e){let i=n.canvas,s=i&&Qf(i);if(!s)return;let r=oy((a,l)=>{let c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),aW(n,r),o}function Oy(n,t,e){e&&e.disconnect(),t==="resize"&&lW(n)}function uW(n,t,e){let i=n.canvas,s=oy(r=>{n.ctx!==null&&e(sW(r,n))},n,r=>{let o=r[0];return[o,o.offsetX,o.offsetY]});return nW(i,t,s),s}var jy=class extends ap{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(tW(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[rp])return!1;let i=e[rp].initial;["height","width"].forEach(r=>{let o=i[r];Ne(o)?e.removeAttribute(r):e.setAttribute(r,o)});let s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[rp],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let s=t.$proxies||(t.$proxies={}),o={attach:rW,detach:oW,resize:cW}[e]||uW;s[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Oy,detach:Oy,resize:Oy}[e]||iW)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return VA(t,e,i,s)}isAttached(t){let e=Qf(t);return!!(e&&e.isConnected)}};function dW(n){return!yy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?By:jy}var Hy=class{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(let r of t){let o=r.plugin,a=o[i],l=[e,s,r.options];if(qe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,s=fe(i.options&&i.options.plugins,{}),r=hW(i);return s===!1&&!e?[]:pW(t,r,s,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}};function hW(n){let t={},e=[],i=Object.keys(Hi.plugins.items);for(let r=0;r<i.length;r++)e.push(Hi.getPlugin(i[r]));let s=n.plugins||[];for(let r=0;r<s.length;r++){let o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function fW(n,t){return!t&&n===!1?null:n===!0?{}:n}function pW(n,{plugins:t,localIds:e},i,s){let r=[],o=n.getContext();for(let a of t){let l=a.id,c=fW(i[l],s);c!==null&&r.push({plugin:a,options:gW(n.config,{plugin:a,local:e[l]},c,o)})}return r}function gW(n,{plugin:t,local:e},i,s){let r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Uy(n,t){let e=Me.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function mW(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function _W(n,t){return n===t?"_index_":"_value_"}function bW(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function $y(n,t){return n==="x"||n==="y"?n:t.axis||bW(t.position)||n.charAt(0).toLowerCase()}function vW(n,t){let e=Zs[n.type]||{scales:{}},i=t.scales||{},s=Uy(n.type,t),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{let l=i[a];if(!De(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let c=$y(a,l),u=_W(c,s),d=e.scales||{};r[c]=r[c]||a,o[a]=ga(Object.create(null),[{axis:c},l,d[c],d[u]])}),n.data.datasets.forEach(a=>{let l=a.type||n.type,c=a.indexAxis||Uy(l,t),d=(Zs[l]||{}).scales||{};Object.keys(d).forEach(h=>{let f=mW(h,c),p=a[f+"AxisID"]||r[f]||f;o[p]=o[p]||Object.create(null),ga(o[p],[{axis:f},i[p],d[h]])})}),Object.keys(o).forEach(a=>{let l=o[a];ga(l,[Me.scales[l.type],Me.scale])}),o}function zT(n){let t=n.options||(n.options={});t.plugins=fe(t.plugins,{}),t.scales=vW(n,t)}function WT(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function yW(n){return n=n||{},n.data=WT(n.data),zT(n),n}var cT=new Map,GT=new Set;function tp(n,t){let e=cT.get(n);return e||(e=t(),cT.set(n,e),GT.add(e)),e}var xc=(n,t,e)=>{let i=ys(t,e);i!==void 0&&n.add(i)},zy=class{constructor(t){this._config=yW(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=WT(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),zT(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return tp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return tp(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return tp(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return tp(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){let{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>xc(l,t,d))),u.forEach(d=>xc(l,s,d)),u.forEach(d=>xc(l,Zs[r]||{},d)),u.forEach(d=>xc(l,Me,d)),u.forEach(d=>xc(l,qf,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),GT.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Zs[e]||{},Me.datasets[e]||{},{type:e},Me,qf]}resolveNamedOptions(t,e,i,s=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=uT(this._resolverCache,t,s),l=o;if(CW(o,e)){r.$shared=!1,i=vs(i)?i():i;let c=this.createResolver(t,i,a);l=Wr(o,i,c)}for(let c of e)r[c]=l[c];return r}createResolver(t,e,i=[""],s){let{resolver:r}=uT(this._resolverCache,t,i);return De(e)?Wr(r,e,void 0,s):r}};function uT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let s=e.join(),r=i.get(s);return r||(r={resolver:Xf(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}var wW=n=>De(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||vs(n[e]),!1);function CW(n,t){let{isScriptable:e,isIndexable:i}=my(n);for(let s of t){let r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(vs(a)||wW(a))||o&&Ge(a))return!0}return!1}var xW="3.9.1",EW=["top","bottom","left","right","chartArea"];function dT(n,t){return n==="top"||n==="bottom"||EW.indexOf(n)===-1&&t==="x"}function hT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function fT(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),qe(e&&e.onComplete,[n],t)}function SW(n){let t=n.chart,e=t.options.animation;qe(e&&e.onProgress,[n],t)}function qT(n){return yy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var cp={},YT=n=>{let t=qT(n);return Object.values(cp).filter(e=>e.canvas===t).pop()};function DW(n,t,e){let i=Object.keys(n);for(let s of i){let r=+s;if(r>=t){let o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function MW(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Xr=class{constructor(t,e){let i=this.config=new zy(e),s=qT(t),r=YT(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||dW(s)),this.platform.updateConfig(i);let a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=dA(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hy,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CA(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],cp[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Cs.listen(this,"complete",fT),Cs.listen(this,"progress",SW),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return Ne(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fy(this.canvas,this.ctx),this}stop(){return Cs.stop(this),this}resize(t,e){Cs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,wy(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),qe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};Ve(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{}),r=[];e&&(r=r.concat(Object.keys(e).map(o=>{let a=e[o],l=$y(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ve(r,o=>{let a=o.options,l=a.id,c=$y(l,a),u=fe(a.type,o.dtype);(a.position===void 0||dT(a.position,c)!==dT(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{let h=Hi.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),Ve(s,(o,a)=>{o||delete i[a]}),Ve(i,o=>{Qt.configure(this,o,o.options),Qt.addBox(this,o)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(hT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){let r=e[i],o=this.getDatasetMeta(i),a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Uy(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{let l=Hi.getController(a),{datasetElementType:c,dataElementType:u}=Me.datasets[a];Object.assign(l.prototype,{dataElementType:Hi.getElement(u),datasetElementType:c&&Hi.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ve(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){let{controller:d}=this.getDatasetMeta(c),h=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Ve(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(hT("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ve(this.scales,t=>{Qt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Zv(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:r}of e){let o=i==="_removeElements"?-r:r;DW(t,s,o)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!Zv(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qt.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ve(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,vs(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cs.has(this)?this.attached&&!Cs.running(this)&&Cs.start(this):(this.draw(),fT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,i=[],s,r;for(s=0,r=e.length;s<r;++s){let o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i=t._clip,s=!i.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&_c(e,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&bc(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return fa(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){let r=G5.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){let i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);On(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Cs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),fy(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete cp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ve(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)},o,a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Ve(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ve(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let s=i?"set":"remove",r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];let c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{let a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!gc(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){let s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){let{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),l=pA(t),c=MW(t,this._lastEvent,i,l);i&&(this._lastEvent=null,qe(r.onHover,[t,a,this],this),l&&qe(r.onClick,[t,a,this],this));let u=!gc(a,s);return(u||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,u}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},pT=()=>Ve(Xr.instances,n=>n._plugins.invalidate()),ir=!0;Object.defineProperties(Xr,{defaults:{enumerable:ir,value:Me},instances:{enumerable:ir,value:cp},overrides:{enumerable:ir,value:Zs},registry:{enumerable:ir,value:Hi},version:{enumerable:ir,value:xW},getChart:{enumerable:ir,value:YT},register:{enumerable:ir,value:(...n)=>{Hi.add(...n),pT()}},unregister:{enumerable:ir,value:(...n)=>{Hi.remove(...n),pT()}}});function KT(n,t,e){let{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t,c=s/a;n.beginPath(),n.arc(r,o,a,i-c,e+c),l>s?(c=s/l,n.arc(r,o,l,e+c,i-c,!0)):n.arc(r,o,s,e+ut,i-ut),n.closePath(),n.clip()}function AW(n){return Kf(n,["outerStart","outerEnd","innerStart","innerEnd"])}function TW(n,t,e,i){let s=AW(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{let c=(e-Math.min(r,l))*i/2;return Mt(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Mt(s.innerStart,0,o),innerEnd:Mt(s.innerEnd,0,o)}}function wa(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Wy(n,t,e,i,s,r){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+e-c,0),h=u>0?u+i+e+c:0,f=0,p=s-l;if(i){let z=u>0?u-i:0,ce=d>0?d-i:0,$=(z+ce)/2,ne=$!==0?p*$/($+i):p;f=(p-ne)/2}let g=Math.max(.001,p*d-e/Je)/d,m=(p-g)/2,_=l+m+f,b=s-m-f,{outerStart:y,outerEnd:v,innerStart:x,innerEnd:S}=TW(t,h,d,b-_),D=d-y,A=d-v,E=_+y/D,I=b-v/A,N=h+x,W=h+S,Q=_+x/N,ee=b-S/W;if(n.beginPath(),r){if(n.arc(o,a,d,E,I),v>0){let $=wa(A,I,o,a);n.arc($.x,$.y,v,I,b+ut)}let z=wa(W,b,o,a);if(n.lineTo(z.x,z.y),S>0){let $=wa(W,ee,o,a);n.arc($.x,$.y,S,b+ut,ee+Math.PI)}if(n.arc(o,a,h,b-S/h,_+x/h,!0),x>0){let $=wa(N,Q,o,a);n.arc($.x,$.y,x,Q+Math.PI,_-ut)}let ce=wa(D,_,o,a);if(n.lineTo(ce.x,ce.y),y>0){let $=wa(D,E,o,a);n.arc($.x,$.y,y,_-ut,E)}}else{n.moveTo(o,a);let z=Math.cos(E)*d+o,ce=Math.sin(E)*d+a;n.lineTo(z,ce);let $=Math.cos(I)*d+o,ne=Math.sin(I)*d+a;n.lineTo($,ne)}n.closePath()}function IW(n,t,e,i,s){let{fullCircles:r,startAngle:o,circumference:a}=t,l=t.endAngle;if(r){Wy(n,t,e,i,o+Ue,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+a%Ue,a%Ue===0&&(l+=Ue))}return Wy(n,t,e,i,l,s),n.fill(),l}function PW(n,t,e){let{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=t,l=Math.max(t.outerRadius-o,0),c=t.innerRadius+o,u;for(e&&KT(n,t,r+Ue),n.beginPath(),n.arc(i,s,c,r+Ue,r,!0),u=0;u<a;++u)n.stroke();for(n.beginPath(),n.arc(i,s,l,r,r+Ue),u=0;u<a;++u)n.stroke()}function OW(n,t,e,i,s,r){let{options:o}=t,{borderWidth:a,borderJoinStyle:l}=o,c=o.borderAlign==="inner";a&&(c?(n.lineWidth=a*2,n.lineJoin=l||"round"):(n.lineWidth=a,n.lineJoin=l||"bevel"),t.fullCircles&&PW(n,t,c),c&&KT(n,t,s),Wy(n,t,e,i,s,r),n.stroke())}var xa=class extends kn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let s=this.getProps(["x","y"],i),{angle:r,distance:o}=ny(s,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,p=fe(d,l-a)>=Ue||_a(r,a,l),g=Bi(o,c+h,u+h);return p&&g}getCenterPoint(t){let{x:e,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:c}=this.options,u=(s+r)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,s=(e.offset||0)/2,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Ue?Math.floor(i/Ue):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(s){a=s/2;let c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=Je&&(a=s)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;let l=IW(t,this,a,r,o);OW(t,this,a,r,l,o),t.restore()}};xa.id="arc";xa.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};xa.defaultRoutes={backgroundColor:"backgroundColor"};function XT(n,t,e=t){n.lineCap=fe(e.borderCapStyle,t.borderCapStyle),n.setLineDash(fe(e.borderDash,t.borderDash)),n.lineDashOffset=fe(e.borderDashOffset,t.borderDashOffset),n.lineJoin=fe(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=fe(e.borderWidth,t.borderWidth),n.strokeStyle=fe(e.borderColor,t.borderColor)}function RW(n,t,e){n.lineTo(e.x,e.y)}function NW(n){return n.stepped?IA:n.tension||n.cubicInterpolationMode==="monotone"?PA:RW}function QT(n,t,e={}){let i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function kW(n,t,e,i){let{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=QT(s,e,i),u=NW(r),{move:d=!0,reverse:h}=i||{},f,p,g;for(f=0;f<=c;++f)p=s[(a+(h?c-f:f))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,g,p,h,r.stepped),g=p);return l&&(p=s[(a+(h?c:0))%o],u(n,g,p,h,r.stepped)),!!l}function FW(n,t,e,i){let s=t.points,{count:r,start:o,ilen:a}=QT(s,e,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,f,p,g,m,_,b=v=>(o+(c?a-v:v))%r,y=()=>{g!==m&&(n.lineTo(u,m),n.lineTo(u,g),n.lineTo(u,_))};for(l&&(f=s[b(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=s[b(h)],f.skip)continue;let v=f.x,x=f.y,S=v|0;S===p?(x<g?g=x:x>m&&(m=x),u=(d*u+v)/++d):(y(),n.lineTo(v,x),p=S,d=0,g=m=x),_=x}y()}function Gy(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?FW:kW}function LW(n){return n.stepped?jA:n.tension||n.cubicInterpolationMode==="monotone"?HA:Ks}function VW(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),XT(n,t.options),n.stroke(s)}function BW(n,t,e,i){let{segments:s,options:r}=t,o=Gy(t);for(let a of s)XT(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var jW=typeof Path2D=="function";function HW(n,t,e,i){jW&&!t.options.segment?VW(n,t,e,i):BW(n,t,e,i)}var fp=(()=>{class n extends kn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){let r=s.spanGaps?this._loop:this._fullLoop;LA(this._points,s,e,r,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$A(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,s=e.length;return s&&i[e[s-1].end]}interpolate(e,i){let s=this.options,r=e[i],o=this.points,a=Dy(this,{property:i,start:r,end:r});if(!a.length)return;let l=[],c=LW(s),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=o[h],g=o[f];if(p===g){l.push(p);continue}let m=Math.abs((r-p[i])/(g[i]-p[i])),_=c(p,g,m,s.stepped);_[i]=e[i],l.push(_)}return l.length===1?l[0]:l}pathSegment(e,i,s){return Gy(this)(e,this,i,s)}path(e,i,s){let r=this.segments,o=Gy(this),a=this._loop;i=i||0,s=s||this.points.length-i;for(let l of r)a&=o(e,this,l,{start:i,end:i+s-1});return!!a}draw(e,i,s,r){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),HW(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"},n})();function gT(n,t,e,i){let s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}var UW=(()=>{class n extends kn{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){let r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return gT(this,e,"x",i)}inYRange(e,i){return gT(this,e,"y",i)}getCenterPoint(e){let{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);let s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){let s=this.options;this.skip||s.radius<.1||!fa(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Yf(e,s,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function ZT(n,t){let{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,s),l=Math.max(e,s),c=i-d,u=i+d):(d=r/2,a=e-d,l=e+d,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function sr(n,t,e,i){return n?0:Mt(t,e,i)}function $W(n,t,e){let i=n.options.borderWidth,s=n.borderSkipped,r=gy(i);return{t:sr(s.top,r.top,0,e),r:sr(s.right,r.right,0,t),b:sr(s.bottom,r.bottom,0,e),l:sr(s.left,r.left,0,t)}}function zW(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=tr(s),o=Math.min(t,e),a=n.borderSkipped,l=i||De(s);return{topLeft:sr(!l||a.top||a.left,r.topLeft,0,o),topRight:sr(!l||a.top||a.right,r.topRight,0,o),bottomLeft:sr(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:sr(!l||a.bottom||a.right,r.bottomRight,0,o)}}function WW(n){let t=ZT(n),e=t.right-t.left,i=t.bottom-t.top,s=$W(n,e/2,i/2),r=zW(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Ry(n,t,e,i){let s=t===null,r=e===null,a=n&&!(s&&r)&&ZT(n,i);return a&&(s||Bi(t,a.left,a.right))&&(r||Bi(e,a.top,a.bottom))}function GW(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function qW(n,t){n.rect(t.x,t.y,t.w,t.h)}function Ny(n,t,e={}){let i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}var Ea=class extends kn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=WW(this),a=GW(o.radius)?ba:qW;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Ny(o,e,r)),t.clip(),a(t,Ny(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Ny(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return Ry(this,t,e,i)}inXRange(t,e){return Ry(this,t,null,e)}inYRange(t,e){return Ry(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};Ea.id="bar";Ea.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Ea.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var YW=Object.freeze({__proto__:null,ArcElement:xa,LineElement:fp,PointElement:UW,BarElement:Ea});function KW(n,t,e,i,s){let r=s.samples||i;if(r>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(r-2),l=0,c=t+e-1,u=t,d,h,f,p,g;for(o[l++]=n[u],d=0;d<r-2;d++){let m=0,_=0,b,y=Math.floor((d+1)*a)+1+t,v=Math.min(Math.floor((d+2)*a)+1,e)+t,x=v-y;for(b=y;b<v;b++)m+=n[b].x,_+=n[b].y;m/=x,_/=x;let S=Math.floor(d*a)+1+t,D=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:A,y:E}=n[u];for(f=p=-1,b=S;b<D;b++)p=.5*Math.abs((A-m)*(n[b].y-E)-(A-n[b].x)*(_-E)),p>f&&(f=p,h=n[b],g=b);o[l++]=h,u=g}return o[l++]=n[c],o}function XW(n,t,e,i){let s=0,r=0,o,a,l,c,u,d,h,f,p,g,m=[],_=t+e-1,b=n[t].x,v=n[_].x-b;for(o=t;o<t+e;++o){a=n[o],l=(a.x-b)/v*i,c=a.y;let x=l|0;if(x===u)c<p?(p=c,d=o):c>g&&(g=c,h=o),s=(r*s+a.x)/++r;else{let S=o-1;if(!Ne(d)&&!Ne(h)){let D=Math.min(d,h),A=Math.max(d,h);D!==f&&D!==S&&m.push(ue(L({},n[D]),{x:s})),A!==f&&A!==S&&m.push(ue(L({},n[A]),{x:s}))}o>0&&S!==f&&m.push(n[S]),m.push(a),u=x,r=0,p=g=c,d=h=f=o}}return m}function JT(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:t})}}function mT(n){n.data.datasets.forEach(t=>{JT(t)})}function QW(n,t){let e=t.length,i=0,s,{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Mt(Li(t,r.axis,o).lo,0,e-1)),c?s=Mt(Li(t,r.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var ZW={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){mT(n);return}let i=n.width;n.data.datasets.forEach((s,r)=>{let{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(va([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=QW(l,c),f=e.threshold||4*i;if(h<=f){JT(s);return}Ne(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=KW(c,d,h,i,e);break;case"min-max":p=XW(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=p})},destroy(n){mT(n)}};function JW(n,t,e){let i=n.segments,s=n.points,r=t.points,o=[];for(let a of i){let{start:l,end:c}=a;c=Ky(l,c,s);let u=qy(e,s[l],s[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}let d=Dy(t,u);for(let h of d){let f=qy(e,r[h.start],r[h.end],h.loop),p=Sy(a,s,f);for(let g of p)o.push({source:g,target:h,start:{[e]:_T(u,f,"start",Math.max)},end:{[e]:_T(u,f,"end",Math.min)}})}}return o}function qy(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=yn(s),r=yn(r)),{property:n,start:s,end:r}}function e4(n,t){let{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Ky(o,a,s);let l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function Ky(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function _T(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function eI(n,t){let e=[],i=!1;return Ge(n)?(i=!0,e=n):e=e4(n,t),e.length?new fp({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function bT(n){return n&&n.fill!==!1}function t4(n,t,e){let s=n[t].fill,r=[t],o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ft(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function n4(n,t,e){let i=o4(n);if(De(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ft(s)&&Math.floor(s)===s?i4(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function i4(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function s4(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:De(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function r4(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:De(n)?i=n.value:i=t.getBaseValue(),i}function o4(n){let t=n.options,e=t.fill,i=fe(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function a4(n){let{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=l4(t,e);a.push(eI({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){let c=r[l];for(let u=c.start;u<=c.end;u++)c4(s,o[u],a)}return new fp({points:s,options:{}})}function l4(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){let r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function c4(n,t,e){let i=[];for(let s=0;s<e.length;s++){let r=e[s],{first:o,last:a,point:l}=u4(r,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function u4(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let s=i[e],r=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=o[u.start][e],h=o[u.end][e];if(Bi(s,d,h)){a=s===d,l=s===h;break}}return{first:a,last:l,point:i}}var up=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:s,y:r,radius:o}=this;return e=e||{start:0,end:Ue},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}};function d4(n){let{chart:t,fill:e,line:i}=n;if(ft(e))return h4(t,e);if(e==="stack")return a4(n);if(e==="shape")return!0;let s=f4(n);return s instanceof up?s:eI(s,i)}function h4(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function f4(n){return(n.scale||{}).getPointPositionForValue?g4(n):p4(n)}function p4(n){let{scale:t={},fill:e}=n,i=s4(e,t);if(ft(i)){let s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function g4(n){let{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=r4(e,t,r),a=[];if(i.grid.circular){let l=t.getPointPositionForValue(0,r);return new up({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function ky(n,t,e){let i=d4(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&s.points.length&&(_c(n,e),m4(n,{line:s,target:i,above:u,below:d,area:e,scale:r,axis:o}),bc(n))}function m4(n,t){let{line:e,target:i,above:s,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&r!==s&&(vT(n,i,o.top),yT(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),vT(n,i,o.bottom)),yT(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore()}function vT(n,t,e){let{segments:i,points:s}=t,r=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=s[l],d=s[Ky(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function yT(n,t){let{line:e,target:i,property:s,color:r,scale:o}=t,a=JW(e,i,s);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=r}={}}=l,f=i!==!0;n.save(),n.fillStyle=h,_4(n,o,f&&qy(s,u,d)),n.beginPath();let p=!!e.pathSegment(n,l),g;if(f){p?n.closePath():wT(n,i,d,s);let m=!!i.pathSegment(n,c,{move:p,reverse:!0});g=p&&m,g||wT(n,i,u,s)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function _4(n,t,e){let{top:i,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function wT(n,t,e,i){let s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var b4={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,s=[],r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof fp&&(l={visible:n.isDatasetVisible(o),index:o,fill:n4(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=t4(s,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){let a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&ky(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){let r=i[s].$filler;bT(r)&&ky(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!bT(i)||e.drawTime!=="beforeDatasetDraw"||ky(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},CT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},v4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,dp=class extends kn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=qe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,s=wt(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=CT(i,r),c,u;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a,d=t;r.textAlign="left",r.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=i+e/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(t,e,i,s){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{let b=i+e/2+r.measureText(m.text).width;_>0&&f+s+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,g++,h=f=0),l[_]={left:p,top:f,col:g,width:b,height:s},h=Math.max(h,b),f+=s+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=qr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ft(i,this.left+s,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=Ft(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ft(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=Ft(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;_c(t,this),this._draw(),bc(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=Me.color,l=qr(t.rtl,this.left,this.width),c=wt(o.font),{color:u,padding:d}=o,h=c.size,f=h/2,p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:g,boxHeight:m,itemHeight:_}=CT(o,h),b=function(D,A,E){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();let I=fe(E.lineWidth,1);if(s.fillStyle=fe(E.fillStyle,a),s.lineCap=fe(E.lineCap,"butt"),s.lineDashOffset=fe(E.lineDashOffset,0),s.lineJoin=fe(E.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=fe(E.strokeStyle,a),s.setLineDash(fe(E.lineDash,[])),o.usePointStyle){let N={radius:m*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:I},W=l.xPlus(D,g/2),Q=A+f;py(s,N,W,Q,o.pointStyleWidth&&g)}else{let N=A+Math.max((h-m)/2,0),W=l.leftForLtr(D,g),Q=tr(E.borderRadius);s.beginPath(),Object.values(Q).some(ee=>ee!==0)?ba(s,{x:W,y:N,w:g,h:m,radius:Q}):s.rect(W,N,g,m),s.fill(),I!==0&&s.stroke()}s.restore()},y=function(D,A,E){er(s,E.text,D,A+_/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?p={x:Ft(r,this.left+d,this.right-i[0]),y:this.top+d+x,line:0}:p={x:this.left+d,y:Ft(r,this.top+x+d,this.bottom-e[0].height),line:0},xy(this.ctx,t.textDirection);let S=_+d;this.legendItems.forEach((D,A)=>{s.strokeStyle=D.fontColor||u,s.fillStyle=D.fontColor||u;let E=s.measureText(D.text).width,I=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),N=g+f+E,W=p.x,Q=p.y;l.setWidth(this.width),v?A>0&&W+N+d>this.right&&(Q=p.y+=S,p.line++,W=p.x=Ft(r,this.left+d,this.right-i[p.line])):A>0&&Q+S>this.bottom&&(W=p.x=W+e[p.line].width+d,p.line++,Q=p.y=Ft(r,this.top+x+d,this.bottom-e[p.line].height));let ee=l.x(W);b(ee,Q,D),W=xA(I,W+g+f,v?W+N:this.right,t.rtl),y(l.x(W),Q,D),v?p.x+=N+d:p.y+=S}),Ey(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=wt(e.font),s=Lt(e.padding);if(!e.display)return;let r=qr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=s.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ft(t.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+Ft(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}let f=Ft(a,d,d+h);o.textAlign=r.textAlign(Gf(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,er(o,e.text,f,u,i)}_computeTitleHeight(){let t=this.options.title,e=wt(t.font),i=Lt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Bi(t,this.left,this.right)&&Bi(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Bi(t,s.left,s.left+s.width)&&Bi(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!y4(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,r=v4(s,i);s&&!r&&qe(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&qe(e.onHover,[t,i,this],this)}else i&&qe(e.onClick,[t,i,this],this)}};function y4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var w4={id:"legend",_element:dp,start(n,t,e){let i=n.legend=new dp({ctx:n.ctx,options:e,chart:n});Qt.configure(n,i,e),Qt.addBox(n,i)},stop(n){Qt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;Qt.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{let a=o.controller.getStyle(e?0:void 0),l=Lt(a.borderWidth);return{text:t[o.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Mc=class extends kn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let s=Ge(i.text)?i.text.length:1;this._padding=Lt(i.padding);let r=s*wt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=Ft(a,i,r),d=e+t,c=r-i):(o.position==="left"?(u=i+t,d=Ft(a,s,e),l=Je*-.5):(u=r-t,d=Ft(a,e,s),l=Je*.5),c=s-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=wt(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);er(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:Gf(e.align),textBaseline:"middle",translation:[o,a]})}};function C4(n,t){let e=new Mc({ctx:n.ctx,options:t,chart:n});Qt.configure(n,e,t),Qt.addBox(n,e),n.titleBlock=e}var x4={id:"title",_element:Mc,start(n,t,e){C4(n,e)},stop(n){let t=n.titleBlock;Qt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;Qt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},np=new WeakMap,E4={id:"subtitle",start(n,t,e){let i=new Mc({ctx:n.ctx,options:e,chart:n});Qt.configure(n,i,e),Qt.addBox(n,i),np.set(n,i)},stop(n){Qt.removeBox(n,np.get(n)),np.delete(n)},beforeUpdate(n,t,e){let i=np.get(n);Qt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Sc={average(n){if(!n.length)return!1;let t,e,i=0,s=0,r=0;for(t=0,e=n.length;t<e;++t){let o=n[t].element;if(o&&o.hasValue()){let a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){let l=n[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=Hf(t,c);u<s&&(s=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function ji(n,t){return t&&(Ge(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function xs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function S4(n,t){let{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function xT(n,t){let e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=wt(t.bodyFont),c=wt(t.titleFont),u=wt(t.footerFont),d=r.length,h=s.length,f=i.length,p=Lt(t.padding),g=p.height,m=0,_=i.reduce((v,x)=>v+x.before.length+x.lines.length+x.after.length,0);if(_+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),_){let v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*v+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0,y=function(v){m=Math.max(m,e.measureText(v).width+b)};return e.save(),e.font=c.string,Ve(n.title,y),e.font=l.string,Ve(n.beforeBody.concat(n.afterBody),y),b=t.displayColors?o+2+t.boxPadding:0,Ve(i,v=>{Ve(v.before,y),Ve(v.lines,y),Ve(v.after,y)}),b=0,e.font=u.string,Ve(n.footer,y),e.restore(),m+=p.width,{width:m,height:g}}function D4(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function M4(n,t,e,i){let{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function A4(n,t,e,i){let{x:s,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),M4(c,n,t,e)&&(c="center"),c}function ET(n,t,e){let i=e.yAlign||t.yAlign||D4(n,e);return{xAlign:e.xAlign||t.xAlign||A4(n,t,e,i),yAlign:i}}function T4(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function I4(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function ST(n,t,e,i){let{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=s+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=tr(o),p=T4(t,a),g=I4(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+s:a==="right"&&(p+=Math.max(d,f)+s),{x:Mt(p,0,i.width-t.width),y:Mt(g,0,i.height-t.height)}}function ip(n,t,e){let i=Lt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function DT(n){return ji([],xs(n))}function P4(n,t,e){return ws(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function MT(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var AT=(()=>{class n extends kn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&i.options.animation&&s.animations,o=new op(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=P4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){let{callbacks:s}=i,r=s.beforeTitle.apply(this,[e]),o=s.title.apply(this,[e]),a=s.afterTitle.apply(this,[e]),l=[];return l=ji(l,xs(r)),l=ji(l,xs(o)),l=ji(l,xs(a)),l}getBeforeBody(e,i){return DT(i.callbacks.beforeBody.apply(this,[e]))}getBody(e,i){let{callbacks:s}=i,r=[];return Ve(e,o=>{let a={before:[],lines:[],after:[]},l=MT(s,o);ji(a.before,xs(l.beforeLabel.call(this,o))),ji(a.lines,l.label.call(this,o)),ji(a.after,xs(l.afterLabel.call(this,o))),r.push(a)}),r}getAfterBody(e,i){return DT(i.callbacks.afterBody.apply(this,[e]))}getFooter(e,i){let{callbacks:s}=i,r=s.beforeFooter.apply(this,[e]),o=s.footer.apply(this,[e]),a=s.afterFooter.apply(this,[e]),l=[];return l=ji(l,xs(r)),l=ji(l,xs(o)),l=ji(l,xs(a)),l}_createItems(e){let i=this._active,s=this.chart.data,r=[],o=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(S4(this.chart,i[c]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,s))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,s))),Ve(l,d=>{let h=MT(e.callbacks,d);r.push(h.labelColor.call(this,d)),o.push(h.labelPointStyle.call(this,d)),a.push(h.labelTextColor.call(this,d))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){let s=this.options.setContext(this.getContext()),r=this._active,o,a=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{let l=Sc[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let c=this._size=xT(this,s),u=Object.assign({},l,c),d=ET(this.chart,s,u),h=ST(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,s,r){let o=this.getCaretPosition(e,s,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,s){let{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=tr(l),{x:f,y:p}=e,{width:g,height:m}=i,_,b,y,v,x,S;return o==="center"?(x=p+m/2,r==="left"?(_=f,b=_-a,v=x+a,S=x-a):(_=f+g,b=_+a,v=x-a,S=x+a),y=_):(r==="left"?b=f+Math.max(c,d)+a:r==="right"?b=f+g-Math.max(u,h)-a:b=this.caretX,o==="top"?(v=p,x=v-a,_=b-a,y=b+a):(v=p+m,x=v+a,_=b+a,y=b-a),S=v),{x1:_,x2:b,x3:y,y1:v,y2:x,y3:S}}drawTitle(e,i,s){let r=this.title,o=r.length,a,l,c;if(o){let u=qr(s.rtl,this.x,this.width);for(e.x=ip(this,s.titleAlign,s),i.textAlign=u.textAlign(s.titleAlign),i.textBaseline="middle",a=wt(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(r[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,i,s,r,o){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u,boxPadding:d}=o,h=wt(o.bodyFont),f=ip(this,"left",o),p=r.x(f),g=c<h.lineHeight?(h.lineHeight-c)/2:0,m=i.y+g;if(o.usePointStyle){let _={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(p,u)+u/2,y=m+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Yf(e,_,b,y),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Yf(e,_,b,y)}else{e.lineWidth=De(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let _=r.leftForLtr(p,u-d),b=r.leftForLtr(r.xPlus(p,1),u-d-2),y=tr(a.borderRadius);Object.values(y).some(v=>v!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ba(e,{x:_,y:m,w:u,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ba(e,{x:b,y:m+1,w:u-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(_,m,u,c),e.strokeRect(_,m,u,c),e.fillStyle=a.backgroundColor,e.fillRect(b,m+1,u-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,i,s){let{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=wt(s.bodyFont),f=h.lineHeight,p=0,g=qr(s.rtl,this.x,this.width),m=function(E){i.fillText(E,g.x(e.x+p),e.y+f/2),e.y+=f+o},_=g.textAlign(a),b,y,v,x,S,D,A;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,e.x=ip(this,_,s),i.fillStyle=s.bodyColor,Ve(this.beforeBody,m),p=l&&_!=="right"?a==="center"?u/2+d:u+2+d:0,x=0,D=r.length;x<D;++x){for(b=r[x],y=this.labelTextColors[x],i.fillStyle=y,Ve(b.before,m),v=b.lines,l&&v.length&&(this._drawColorBox(i,e,x,g,s),f=Math.max(h.lineHeight,c)),S=0,A=v.length;S<A;++S)m(v[S]),f=h.lineHeight;Ve(b.after,m)}p=0,f=h.lineHeight,Ve(this.afterBody,m),e.y-=o}drawFooter(e,i,s){let r=this.footer,o=r.length,a,l;if(o){let c=qr(s.rtl,this.x,this.width);for(e.x=ip(this,s.footerAlign,s),e.y+=s.footerMarginTop,i.textAlign=c.textAlign(s.footerAlign),i.textBaseline="middle",a=wt(s.footerFont),i.fillStyle=s.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,i,s,r){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=tr(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(e,i,s,r),i.lineTo(l+u-f,c),i.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&o==="right"&&this.drawCaret(e,i,s,r),i.lineTo(l+u,c+d-g),i.quadraticCurveTo(l+u,c+d,l+u-g,c+d),a==="bottom"&&this.drawCaret(e,i,s,r),i.lineTo(l+p,c+d),i.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&o==="left"&&this.drawCaret(e,i,s,r),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,s=this.$animations,r=s&&s.x,o=s&&s.y;if(r||o){let a=Sc[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=xT(this,e),c=Object.assign({},a,this._size),u=ET(i,e,c),d=ST(e,c,u,i);(r._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(i);let r={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=Lt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,r,i),xy(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Ey(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let s=this._active,r=e.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!gc(s,r),a=this._positionChanged(r,i);(o||a)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,s),l=this._positionChanged(a,e),c=i||!gc(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,s,r){let o=this.options;if(e.type==="mouseout")return[];if(!r)return i;let a=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(e,i){let{caretX:s,caretY:r,options:o}=this,a=Sc[o.position].call(this,e,i);return a!==!1&&(s!==a.x||r!==a.y)}}return n.positioners=Sc,n})(),O4={id:"tooltip",_element:AT,positioners:Sc,afterInit(n,t,e){e&&(n.tooltip=new AT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",e)===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Vi,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Vi,beforeBody:Vi,beforeLabel:Vi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return Ne(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Vi,afterBody:Vi,beforeFooter:Vi,footer:Vi,afterFooter:Vi}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},R4=Object.freeze({__proto__:null,Decimation:ZW,Filler:b4,Legend:w4,SubTitle:E4,Title:x4,Tooltip:O4}),N4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function k4(n,t,e,i){let s=n.indexOf(t);if(s===-1)return N4(n,t,e,i);let r=n.lastIndexOf(t);return s!==r?e:s}var F4=(n,t)=>n===null?null:Mt(Math.round(n),0,t),Sa=class extends Kr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let i=this.getLabels();for(let{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ne(t))return null;let i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:k4(i,t,fe(e,t),this._addedLabels),F4(e,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,s=[],r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};Sa.id="category";Sa.defaults={ticks:{callback:Sa.prototype.getLabelForValue}};function L4(n,t){let e=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=r||1,p=u-1,{min:g,max:m}=t,_=!Ne(o),b=!Ne(a),y=!Ne(c),v=(m-g)/(d+1),x=Jv((m-g)/p/f)*f,S,D,A,E;if(x<1e-14&&!_&&!b)return[{value:g},{value:m}];E=Math.ceil(m/x)-Math.floor(g/x),E>p&&(x=Jv(E*x/p/f)*f),Ne(l)||(S=Math.pow(10,l),x=Math.ceil(x*S)/S),s==="ticks"?(D=Math.floor(g/x)*x,A=Math.ceil(m/x)*x):(D=g,A=m),_&&b&&r&&mA((a-o)/r,x/1e3)?(E=Math.round(Math.min((a-o)/x,u)),x=(a-o)/E,D=o,A=a):y?(D=_?o:D,A=b?a:A,E=c-1,x=(A-D)/E):(E=(A-D)/x,ma(E,Math.round(E),x/1e3)?E=Math.round(E):E=Math.ceil(E));let I=Math.max(ty(x),ty(D));S=Math.pow(10,Ne(l)?I:l),D=Math.round(D*S)/S,A=Math.round(A*S)/S;let N=0;for(_&&(h&&D!==o?(e.push({value:o}),D<o&&N++,ma(Math.round((D+N*x)*S)/S,o,TT(o,v,n))&&N++):D<o&&N++);N<E;++N)e.push({value:Math.round((D+N*x)*S)/S});return b&&h&&A!==a?e.length&&ma(e[e.length-1].value,a,TT(a,v,n))?e[e.length-1].value=a:e.push({value:a}):(!b||A===a)&&e.push({value:A}),e}function TT(n,t,{horizontal:e,minRotation:i}){let s=Jn(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}var Da=class extends Kr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ne(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:s,max:r}=this,o=l=>s=e?s:l,a=l=>r=i?r:l;if(t){let l=pi(s),c=pi(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(r*.05)),a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=L4(s,r);return t.bounds==="ticks"&&ey(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ya(t,this.chart.options.locale,this.options.ticks.format)}},Ac=class extends Da{determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ft(t)?t:0,this.max=ft(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=Jn(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};Ac.id="linear";Ac.defaults={ticks:{callback:hp.formatters.numeric}};function IT(n){return n/Math.pow(10,Math.floor(Nn(n)))===1}function V4(n,t){let e=Math.floor(Nn(t.max)),i=Math.ceil(t.max/Math.pow(10,e)),s=[],r=Rn(n.min,Math.pow(10,Math.floor(Nn(t.min)))),o=Math.floor(Nn(r)),a=Math.floor(r/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do s.push({value:r,major:IT(r)}),++a,a===10&&(a=1,++o,l=o>=0?1:l),r=Math.round(a*Math.pow(10,o)*l)/l;while(o<e||o===e&&a<i);let c=Rn(n.max,r);return s.push({value:c,major:IT(r)}),s}var Tc=class extends Kr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=Da.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return ft(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ft(t)?Math.max(0,t):null,this.max=ft(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,s=this.max,r=l=>i=t?i:l,o=l=>s=e?s:l,a=(l,c)=>Math.pow(10,Math.floor(Nn(l))+c);i===s&&(i<=0?(r(1),o(10)):(r(a(i,-1)),o(a(s,1)))),i<=0&&r(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=s}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=V4(e,this);return t.bounds==="ticks"&&ey(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":ya(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Nn(t),this._valueRange=Nn(this.max)-Nn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Nn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};Tc.id="logarithmic";Tc.defaults={ticks:{callback:hp.formatters.logarithmic,major:{enabled:!0}}};function Yy(n){let t=n.ticks;if(t.display&&n.display){let e=Lt(t.backdropPadding);return fe(t.font&&t.font.size,Me.font.size)+e.height}return 0}function B4(n,t,e){return e=Ge(e)?e:[e],{w:TA(n,t.string,e),h:e.length*t.lineHeight}}function PT(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function j4(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Je/r:0;for(let l=0;l<r;l++){let c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+s[l],a),d=wt(c.font),h=B4(n.ctx,d,n._pointLabels[l]);i[l]=h;let f=yn(n.getIndexAngle(l)+a),p=Math.round(zf(f)),g=PT(p,u.x,h.w,0,180),m=PT(p,u.y,h.h,90,270);H4(e,t,f,g,m)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=U4(n,i,s)}function H4(n,t,e,i,s){let r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function U4(n,t,e){let i=[],s=n._pointLabels.length,r=n.options,o=Yy(r)/2,a=n.drawingArea,l=r.pointLabels.centerPointLabels?Je/s:0;for(let c=0;c<s;c++){let u=n.getPointPosition(c,a+o+e[c],l),d=Math.round(zf(yn(u.angle+ut))),h=t[c],f=W4(u.y,h.h,d),p=$4(d),g=z4(u.x,h.w,p);i.push({x:u.x,y:f,textAlign:p,left:g,top:f,right:g+h.w,bottom:f+h.h})}return i}function $4(n){return n===0||n===180?"center":n<180?"left":"right"}function z4(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function W4(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function G4(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){let r=i.setContext(n.getPointLabelContext(s)),o=wt(r.font),{x:a,y:l,textAlign:c,left:u,top:d,right:h,bottom:f}=n._pointLabelItems[s],{backdropColor:p}=r;if(!Ne(p)){let g=tr(r.borderRadius),m=Lt(r.backdropPadding);e.fillStyle=p;let _=u-m.left,b=d-m.top,y=h-u+m.width,v=f-d+m.height;Object.values(g).some(x=>x!==0)?(e.beginPath(),ba(e,{x:_,y:b,w:y,h:v,radius:g}),e.fill()):e.fillRect(_,b,y,v)}er(e,n._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}function tI(n,t,e,i){let{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,Ue);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function q4(n,t,e,i){let s=n.ctx,r=t.circular,{color:o,lineWidth:a}=t;!r&&!i||!o||!a||e<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),tI(n,e,r,i),s.closePath(),s.stroke(),s.restore())}function Y4(n,t,e){return ws(n,{label:e,index:t,type:"pointLabel"})}var Qr=class extends Da{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Lt(Yy(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=ft(t)&&!isNaN(t)?t:0,this.max=ft(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yy(this.options))}generateTickLabels(t){Da.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let s=qe(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?j4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){let e=Ue/(this._pointLabels.length||1),i=this.options.startAngle||0;return yn(t*e+Jn(i))}getDistanceFromCenterForValue(t){if(Ne(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ne(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return Y4(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let s=this.getIndexAngle(t)-ut+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),tI(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:s}=e,r=this._pointLabels.length,o,a,l;if(e.pointLabels.display&&G4(this,r),s.display&&this.ticks.forEach((c,u)=>{if(u!==0){a=this.getDistanceFromCenterForValue(c.value);let d=s.setContext(this.getContext(u-1));q4(this,d,a,r)}}),i.display){for(t.save(),o=r-1;o>=0;o--){let c=i.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:d}=c;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let s=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;let c=i.setContext(this.getContext(l)),u=wt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=Lt(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}er(t,a.label,0,-r,u,{color:c.color})}),t.restore()}drawTitle(){}};Qr.id="radialLinear";Qr.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};Qr.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Qr.descriptors={angleLines:{_fallback:"grid"}};var pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wn=Object.keys(pp);function K4(n,t){return n-t}function OT(n,t){if(Ne(t))return null;let e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),ft(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(Gr(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function RT(n,t,e,i){let s=wn.length;for(let r=wn.indexOf(n);r<s-1;++r){let o=pp[wn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return wn[r]}return wn[s-1]}function X4(n,t,e,i,s){for(let r=wn.length-1;r>=wn.indexOf(e);r--){let o=wn[r];if(pp[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return wn[e?wn.indexOf(e):0]}function Q4(n){for(let t=wn.indexOf(n)+1,e=wn.length;t<e;++t)if(pp[wn[t]].common)return wn[t]}function NT(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:s}=Wf(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function Z4(n,t,e,i){let s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value,a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function kT(n,t,e){let i=[],s={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:Z4(n,i,s,e)}var Xy=(()=>{class n extends Kr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i){let s=e.time||(e.time={}),r=this._adapter=new H5._date(e.adapters.date);r.init(i),ga(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:OT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,s=e.time.unit||"day",{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=ft(r)&&!isNaN(r)?r:+i.startOf(Date.now(),s),o=ft(o)&&!isNaN(o)?o:+i.endOf(Date.now(),s)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],s=e[e.length-1]),{min:i,max:s}}buildTicks(){let e=this.options,i=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let o=this.min,a=this.max,l=vA(r,o,a);return this._unit=i.unit||(s.autoSkip?RT(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):X4(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Q4(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),kT(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let i=0,s=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?i=1-r:i=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;i=Mt(i,0,a),s=Mt(s,0,a),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){let e=this._adapter,i=this.min,s=this.max,r=this.options,o=r.time,a=o.unit||RT(o.minUnit,i,s,this._getLabelCapacity(i)),l=fe(o.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Gr(c)||c===!0,d={},h=i,f,p;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":a),e.diff(s,i,a)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+a);let g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+e.add(f,l,a),p++)NT(d,f,g);return(f===s||r.bounds==="ticks"||p===1)&&NT(d,f,g),Object.keys(d).sort((m,_)=>m-_).map(m=>+m)}getLabelForValue(e){let i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(e,s.tooltipFormat):i.format(e,s.displayFormats.datetime)}_tickFormatFunction(e,i,s,r){let o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=s[i],f=c&&d&&h&&h.major,p=this._adapter.format(e,r||(f?d:u)),g=o.ticks.callback;return g?qe(g,[p,i,s],this):p}generateTickLabels(e){let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],r.label=this._tickFormatFunction(r.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(e){let i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,s=this.ctx.measureText(e).width,r=Jn(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(e){let i=this.options.time,s=i.displayFormats,r=s[i.unit]||s.millisecond,o=this._tickFormatFunction(e,0,kT(this,[e],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,s;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,s=r.length;i<s;++i)e=e.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],i,s;if(e.length)return e;let r=this.getLabels();for(i=0,s=r.length;i<s;++i)e.push(OT(this,r[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sy(e.sort(K4))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function sp(n,t,e){let i=0,s=n.length-1,r,o,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Li(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Li(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);let c=o-r;return c?a+(l-a)*(t-r)/c:a}var Ic=class extends Xy{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=sp(e,this.min),this._tableRange=sp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,s=[],r=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(sp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return sp(this._table,i*this._tableRange+this._minPos,!0)}};Ic.id="timeseries";Ic.defaults=Xy.defaults;var J4=Object.freeze({__proto__:null,CategoryScale:Sa,LinearScale:Ac,LogarithmicScale:Tc,RadialLinearScale:Qr,TimeScale:Xy,TimeSeriesScale:Ic}),nI=[B5,YW,R4,J4];Xr.register(...nI);var Oc=Xr;var iI=(()=>{class n{constructor(e){this.http=e}getCourseRatings(e){return this.http.get(`/api/v1/enrollments/statistics/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(G(on))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tG=["ratingsChart"];function nG(n,t){n&1&&(C(0,"div")(1,"div",3),q(2,"canvas",4,1),w()())}function iG(n,t){n&1&&(C(0,"p"),M(1,"Cargando..."),w())}var sI=(()=>{class n{constructor(e,i){this.route=e,this.chartCourseService=i,this.isLoading=!0,this.ratings=[]}ngOnInit(){this.courseId=Number(this.route.snapshot.paramMap.get("id")),this.chartCourseService.getCourseRatings(this.courseId).subscribe(e=>{this.ratings=e.map(i=>({stars:i[0],count:i[1]})),this.isLoading=!1,this.createChart()})}ngAfterViewChecked(){this.ratingsChartRef&&this.ratingsChartRef.nativeElement&&this.ratings.length>0&&!this.chart&&this.createChart()}createChart(){if(!this.ratingsChartRef?.nativeElement){console.error("Canvas no encontrado");return}let e=this.ratings.map(s=>`${s.stars} estrellas`),i=this.ratings.map(s=>s.count);this.chart&&this.chart.destroy(),this.chart=new Oc(this.ratingsChartRef.nativeElement,{type:"bar",data:{labels:e,datasets:[{label:"N\xFAmero de votos",data:i,backgroundColor:"rgba(75, 192, 192, 0.7)"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})}static{this.\u0275fac=function(i){return new(i||n)(F(Nt),F(iI))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],viewQuery:function(i,s){if(i&1&&nn(tG,5),i&2){let r;xt(r=Et())&&(s.ratingsChartRef=r.first)}},decls:3,vars:2,consts:[["loading",""],["ratingsChart",""],[4,"ngIf","ngIfElse"],[1,"chart-container-wrapper"],["id","ratingsChart",1,"chart-container"]],template:function(i,s){if(i&1&&J(0,nG,4,0,"div",2)(1,iG,2,0,"ng-template",null,0,At),i&2){let r=sn(2);k("ngIf",!s.isLoading)("ngIfElse",r)}},dependencies:[mn],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var rI=(()=>{class n{constructor(e){this.courseService=e,this.categories=[],this.courseCounts=[]}ngOnInit(){this.courseService.getCategoryEnrollments().subscribe(e=>{this.categories=e.map(i=>({category:i[0],count:i[1]})),this.createEnrollmentChart()}),this.courseService.getCategoryCourses().subscribe(e=>{let i=e.sort((s,r)=>r[1]-s[1]);this.categories=i.slice(0,5).map(s=>({category:s[0],count:s[1]})),this.createCourseChart()})}createEnrollmentChart(){let e=this.categories.map(s=>s.category),i=this.categories.map(s=>s.count);this.chart=new Oc("categoryChart",{type:"bar",data:{labels:e,datasets:[{label:"N\xFAmero de inscripciones",data:i,backgroundColor:"rgba(153, 102, 255, 0.6)"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})}createCourseChart(){let e=this.categories.map(s=>s.category),i=this.categories.map(s=>s.count);this.chart=new Oc("categoryCoursesChart",{type:"bar",data:{labels:e,datasets:[{label:"N\xFAmero de cursos",data:i,backgroundColor:"rgba(75, 192, 192, 0.6)"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})}static{this.\u0275fac=function(i){return new(i||n)(F(qt))}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],decls:9,vars:0,consts:[[1,"chart-wrapper"],[1,"chart-container-wrapper"],["id","categoryChart",1,"chart-container"],["id","categoryCoursesChart",1,"chart-container"]],template:function(i,s){i&1&&(C(0,"div",0)(1,"h3"),M(2,"Top 5 categor\xEDas con m\xE1s inscripciones"),w(),C(3,"div",1),q(4,"canvas",2),w(),C(5,"h3"),M(6,"Top 5 categor\xEDas con m\xE1s cursos"),w(),C(7,"div",1),q(8,"canvas",3),w()())},styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var sG=[{path:"courses",component:$M},{path:"courses/new",component:XM},{path:"courses/topic/:category",component:qM},{path:"courses/:id",component:HM},{path:"join",component:KM},{path:"charts",component:rI},{path:"",redirectTo:"courses",pathMatch:"full"},{path:"users/me",component:WM},{path:"editCourse/:id",component:GM},{path:"search/:query",component:YM},{path:"chartsCourse/:id",component:sI}],oI=El.forRoot(sG);var rG=[],aI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n})}static{this.\u0275inj=Ce({imports:[El.forRoot(rG),El]})}}return n})();var oG=["loginErrorModal"],aG=()=>["/courses/topic","Desarrollo Web"],lG=()=>["/courses/topic","Desarrollo m\xF3vil"],cG=()=>["/courses/topic","Desarrollo de videojuegos"],uG=()=>["/courses/topic","Emprendimiento"],dG=()=>["/courses/topic","Finanzas"],hG=()=>["/courses/topic","Marketing digital"],fG=()=>["/courses/topic","Liderazgo"],pG=()=>["/courses/topic","Comunicaci\xF3n"],gG=()=>["/charts"],mG=()=>["/users/me"],_G=()=>["/join"];function bG(n,t){if(n&1){let e=me();Ns(0),C(1,"a",24),M(2,"Inicio"),w(),C(3,"a",25),M(4,"Perfil"),w(),C(5,"button",26),U("click",function(){V(e);let s=j(2);return B(s.logOut())}),M(6,"Cerrar sesi\xF3n"),w(),ks()}n&2&&(T(3),k("routerLink",Wt(1,mG)))}function vG(n,t){if(n&1){let e=me();C(0,"a",24),M(1,"Inicio"),w(),C(2,"a",26),U("click",function(){V(e);let s=j(2);return B(s.toggleLoginForm())}),M(3,"Log in"),w(),C(4,"a",25),M(5,"Sign up"),w()}n&2&&(T(4),k("routerLink",Wt(1,_G)))}function yG(n,t){if(n&1){let e=me();Ns(0),C(1,"div",12)(2,"form",13),U("ngSubmit",function(s){V(e);let r=j();return B(r.searchCourse(s))}),C(3,"a",14),U("click",function(s){V(e);let r=j();return B(r.searchCourse(s))}),uC(),C(4,"svg",15),q(5,"circle",16)(6,"line",17),w()(),dC(),C(7,"input",18),nt("ngModelChange",function(s){V(e);let r=j();return at(r.findCourseText,s)||(r.findCourseText=s),B(s)}),w()()(),C(8,"div",19)(9,"a",20)(10,"button",21),q(11,"i",22),w()()(),J(12,bG,7,2,"ng-container",23)(13,vG,6,2,"ng-template",null,1,At),ks()}if(n&2){let e=sn(14),i=j();T(7),tt("ngModel",i.findCourseText),T(2),k("routerLink",Wt(4,gG)),T(3),k("ngIf",i.loginService.isLogged())("ngIfElse",e)}}function wG(n,t){if(n&1){let e=me();Ns(0),C(1,"form",27),U("ngSubmit",function(){V(e);let s=j();return B(s.submitLogin())}),C(2,"div",28)(3,"input",29),nt("ngModelChange",function(s){V(e);let r=j();return at(r.loginEmail,s)||(r.loginEmail=s),B(s)}),w()(),C(4,"div",28)(5,"input",30),nt("ngModelChange",function(s){V(e);let r=j();return at(r.loginPassword,s)||(r.loginPassword=s),B(s)}),w()(),C(6,"button",31),M(7,"Log in"),w(),C(8,"button",32),U("click",function(){V(e);let s=j();return B(s.toggleLoginForm())}),M(9,"Cancelar"),w()(),ks()}if(n&2){let e=j();T(3),tt("ngModel",e.loginEmail),T(2),tt("ngModel",e.loginPassword)}}function CG(n,t){if(n&1){let e=me();C(0,"div",33)(1,"h4",34),M(2,"Login Error"),w(),C(3,"button",35),U("click",function(){let s=V(e).$implicit;return B(s.dismiss())}),w()(),C(4,"div",36)(5,"p"),M(6,"Incorrect username or password. Please try again."),w()(),C(7,"div",37)(8,"button",38),U("click",function(){let s=V(e).$implicit;return B(s.close())}),M(9,"Close"),w()()}}var lI=(()=>{class n{constructor(e,i,s){this.loginService=e,this.router=i,this.modalService=s,this.findCourseText="",this.showLoginForm=!1,this.loginEmail="",this.loginPassword=""}logOut(){this.loginService.logOut()}submitLogin(){this.logIn(this.loginEmail,this.loginPassword)}logIn(e,i){this.loginService.logIn(e,i).subscribe(s=>{this.loginService.reqIsLogged(),this.toggleLoginForm()},s=>{this.modalService.open(this.loginErrorModal,{centered:!0}),this.loginEmail="",this.loginPassword=""})}toggleLoginForm(){this.showLoginForm=!this.showLoginForm,this.showLoginForm||(this.loginEmail="",this.loginPassword="")}searchCourse(e){e.preventDefault();let i=this.findCourseText.trim();i&&(this.router.navigate(["/search",i]),this.findCourseText="")}static{this.\u0275fac=function(i){return new(i||n)(F(Yo),F(Ke),F(ls))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-header"]],viewQuery:function(i,s){if(i&1&&nn(oG,7),i&2){let r;xt(r=Et())&&(s.loginErrorModal=r.first)}},decls:30,vars:18,consts:[["loginErrorModal",""],["notLoggedIn",""],[1,"container"],[1,"header","py-3"],[1,"row","flex-nowrap","justify-content-between","align-items-center"],[1,"col-4"],["routerLink","/",1,"header-logo","text-dark"],[1,"col-6","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],[1,"nav-scroller","py-1","mb-2"],[1,"nav","d-flex","justify-content-between"],[1,"p-2","text-muted",3,"routerLink"],[1,"btn","btn-sm","p-1","d-flex","align-items-center",2,"transition","none !important","border","1px solid #6c757d"],[1,"d-flex","align-items-center",3,"ngSubmit"],["href","#",1,"text-muted",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","17","height","17","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mx-2"],["cx","10.5","cy","10.5","r","7.5"],["x1","21","y1","21","x2","15.8","y2","15.8"],["type","text","name","findCourse","placeholder","Buscar un curso...",1,"form-control","border-0","bg-transparent","p-0",2,"height","21px","font-size","16px",3,"ngModelChange","ngModel"],[1,"statistics"],[3,"routerLink"],[1,"btn"],[1,"bi","bi-bar-chart"],[4,"ngIf","ngIfElse"],["routerLink","/",1,"btn","btn-sm","btn-outline-secondary","ml-2"],[1,"btn","btn-sm","btn-outline-secondary","ml-2",3,"routerLink"],[1,"btn","btn-sm","btn-outline-secondary","ml-2",3,"click"],[1,"d-flex","align-items-center","login-form",3,"ngSubmit"],[1,"form-group","mr-2"],["type","email","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-sm","btn-primary"],["type","button",1,"btn","btn-sm","btn-outline-secondary","ml-2",3,"click"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(i,s){i&1&&(C(0,"div",2)(1,"header")(2,"div",3)(3,"div",4)(4,"div",5)(5,"a",6),M(6,"Cognite"),w()(),C(7,"div",7),J(8,yG,15,5,"ng-container",8)(9,wG,10,2,"ng-container",8),w()()(),C(10,"div",9)(11,"nav",10)(12,"a",11),M(13,"Desarrollo web"),w(),C(14,"a",11),M(15,"Desarrollo m\xF3vil"),w(),C(16,"a",11),M(17,"Desarrollo de videojuegos"),w(),C(18,"a",11),M(19,"Emprendimiento"),w(),C(20,"a",11),M(21,"Finanzas"),w(),C(22,"a",11),M(23,"Marketing digital"),w(),C(24,"a",11),M(25,"Liderazgo"),w(),C(26,"a",11),M(27,"Comunicaci\xF3n"),w()()()(),J(28,CG,10,0,"ng-template",null,0,At),w()),i&2&&(T(8),k("ngIf",!s.showLoginForm),T(),k("ngIf",s.showLoginForm),T(3),k("routerLink",Wt(10,aG)),T(2),k("routerLink",Wt(11,lG)),T(2),k("routerLink",Wt(12,cG)),T(2),k("routerLink",Wt(13,uG)),T(2),k("routerLink",Wt(14,dG)),T(2),k("routerLink",Wt(15,hG)),T(2),k("routerLink",Wt(16,fG)),T(2),k("routerLink",Wt(17,pG)))},dependencies:[mn,Gn,Kn,_n,qn,Yn,An,rs,ss],styles:[".header[_ngcontent-%COMP%]{line-height:1;border-bottom:1px solid #e5e5e5}.header-logo[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif;font-size:2.25rem}.header-logo[_ngcontent-%COMP%]:hover{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,Times New Roman,serif}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.nav-scroller[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;font-size:.875rem}.card-img-right[_ngcontent-%COMP%]{height:100%;border-radius:0 3px 3px 0}.flex-auto[_ngcontent-%COMP%]{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;color:#999;text-align:center;background-color:#f9f9f9;border-top:.05rem solid #e5e5e5}.body-sign[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.form-sign[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto;text-align:center}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-sign[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-sign[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-sign[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:31px;font-size:14px}.pdf-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;border:1px solid #ddd;border-radius:4px;overflow:hidden;background-color:#f9f9f9}.toolbar[_ngcontent-%COMP%]{display:flex;padding:10px;border-bottom:1px solid #ddd;background-color:#f5f5f5}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0069d9}.loading-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:600px;text-align:center;font-size:16px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:20px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#007bff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.chart-container[_ngcontent-%COMP%]{width:80%}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto;padding:100px}.chart-container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;margin:0 auto}.chart-container[_ngcontent-%COMP%]{width:80%;max-width:600px;height:400px}.chart-wrapper[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.chart-container-wrapper[_ngcontent-%COMP%]{width:80%;margin:20px auto}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px}h3[_ngcontent-%COMP%]{margin-bottom:15px}"]})}}return n})();var cI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(i,s){i&1&&q(0,"app-header")(1,"router-outlet")},dependencies:[Z0,lI],encapsulation:2})}}return n})();var uI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xe({type:n,bootstrap:[cI]})}static{this.\u0275inj=Ce({imports:[ME,aI,bE,nD,oI,PD,jM,iD]})}}return n})();DE().bootstrapModule(uI).catch(n=>console.error(n));
